!function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var r=t.slice(1),n=e[t[0]];return function(e,t,i){n.apply(this,[e,t,i].concat(r))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,r){"use strict";function main(){o.enableProdMode(),n.platformBrowserDynamic().bootstrapModule(i.AppModule)}var n=r(1),i=r(23),o=r(3);r(295),r(296),r(297),"complete"===document.readyState?main():document.addEventListener("DOMContentLoaded",main)},function(e,t,r){(function(e){!function(e,n){n(t,r(2),r(3),r(21))}(this,function(t,r,n,i){"use strict";function isPresent(e){return void 0!==e&&null!==e}var o,a=i.__platform_browser_private__.INTERNAL_BROWSER_PLATFORM_PROVIDERS;o="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:e:window;var s=o;s.assert=function(e){};var l=(function(){function NumberWrapper(){}return NumberWrapper.toFixed=function(e,t){return e.toFixed(t)},NumberWrapper.equal=function(e,t){return e===t},NumberWrapper.parseIntAutoRadix=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t},NumberWrapper.parseInt=function(e,t){if(10==t){if(/^(\-|\+)?[0-9]+$/.test(e))return parseInt(e,t)}else if(16==t){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(e))return parseInt(e,t)}else{var r=parseInt(e,t);if(!isNaN(r))return r}throw new Error("Invalid integer literal when parsing "+e+" in base "+t)},Object.defineProperty(NumberWrapper,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),NumberWrapper.isNumeric=function(e){return!isNaN(e-parseFloat(e))},NumberWrapper.isNaN=function(e){return isNaN(e)},NumberWrapper.isInteger=function(e){return Number.isInteger(e)},NumberWrapper}(),this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),c=function(e){function ResourceLoaderImpl(){e.apply(this,arguments)}return l(ResourceLoaderImpl,e),ResourceLoaderImpl.prototype.get=function(e){var t,r,n=new Promise(function(e,n){t=e,r=n}),i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="text",i.onload=function(){var n=isPresent(i.response)?i.response:i.responseText,o=1223===i.status?204:i.status;0===o&&(o=n?200:0),200<=o&&o<=300?t(n):r("Failed to load "+e)},i.onerror=function(){r("Failed to load "+e)},i.send(),n},ResourceLoaderImpl.decorators=[{type:n.Injectable}],ResourceLoaderImpl.ctorParameters=[],ResourceLoaderImpl}(r.ResourceLoader),u=[a,{provide:n.COMPILER_OPTIONS,useValue:{providers:[{provide:r.ResourceLoader,useClass:c}]},multi:!0}],p=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},h=function(e){function CachedResourceLoader(){if(e.call(this),this._cache=s.$templateCache,null==this._cache)throw new Error("CachedResourceLoader: Template cache was not found in $templateCache.")}return p(CachedResourceLoader,e),CachedResourceLoader.prototype.get=function(e){return this._cache.hasOwnProperty(e)?Promise.resolve(this._cache[e]):Promise.reject("CachedResourceLoader: Did not find cached template for "+e)},CachedResourceLoader}(r.ResourceLoader),d={INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS:u,ResourceLoaderImpl:c},f=[{provide:r.ResourceLoader,useClass:h}],m=n.createPlatformFactory(r.platformCoreDynamic,"browserDynamic",u);t.RESOURCE_CACHE_PROVIDER=f,t.platformBrowserDynamic=m,t.__platform_browser_dynamic_private__=d})}).call(t,function(){return this}())},function(e,t,r){(function(e){!function(e,n){n(t,r(3))}(this,function(t,r){"use strict";function isPresent(e){return void 0!==e&&null!==e}function isBlank(e){return void 0===e||null===e}function isString(e){return"string"==typeof e}function isStringMap(e){return"object"==typeof e&&null!==e}function isStrictStringMap(e){return isStringMap(e)&&Object.getPrototypeOf(e)===o}function isArray(e){return Array.isArray(e)}function stringify(e){if("string"==typeof e)return e;if(void 0===e||null===e)return""+e;if(e.overriddenName)return e.overriddenName;if(e.name)return e.name;var t=e.toString(),r=t.indexOf("\n");return r===-1?t:t.substring(0,r)}function normalizeBlank(e){return isBlank(e)?null:e}function normalizeBool(e){return!isBlank(e)&&e}function isJsObject(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function evalExpression(e,t,r,n){var i=r+"\nreturn "+t+"\n//# sourceURL="+e,o=[],a=[];for(var s in n)o.push(s),a.push(n[s]);return(new(Function.bind.apply(Function,[void 0].concat(o.concat(i))))).apply(void 0,a)}function isPrimitive(e){return!isJsObject(e)}function escapeRegExp(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function templateVisitAll(e,t,r){void 0===r&&(r=null);var n=[];return t.forEach(function(t){var i=t.visit(e,r);isPresent(i)&&n.push(i)}),n}function _flattenArray(e,t){if(isPresent(e))for(var r=0;r<e.length;r++){var n=e[r];isArray(n)?_flattenArray(n,t):t.push(n)}return t}function splitNsName(e){if(":"!=e[0])return[null,e];var t=e.indexOf(":",1);if(t==-1)throw new Error('Unsupported format "'+e+'" expecting ":namespace:name"');return[e.slice(1,t),e.slice(t+1)]}function getNsPrefix(e){return null===e?null:splitNsName(e)[0]}function mergeNsAndName(e,t){return e?":"+e+":"+t:t}function getHtmlTagDefinition(e){return B[e.toLowerCase()]||V}function replaceVarInExpression(e,t,r){var n=new Ge(e,t);return r.visitExpression(n,null)}function findReadVarNames(e){var t=new Ke;return t.visitAllStatements(e,null),t.varNames}function variable(e,t){return void 0===t&&(t=null),new se(e,t)}function importExpr(e,t){return void 0===t&&(t=null),new ge(e,null,t)}function importType(e,t,r){return void 0===t&&(t=null),void 0===r&&(r=null),isPresent(e)?new Y(e,t,r):null}function literalArr(e,t){return void 0===t&&(t=null),new ke(e,t)}function literalMap(e,t){return void 0===t&&(t=null),new Ee(e,t)}function not(e){return new ve(e)}function fn(e,t,r){return void 0===r&&(r=null),new we(e,t,r)}function literal(e,t){return void 0===t&&(t=null),new me(e,t)}function camelCaseToDashCase(e){return a.replaceAllMapped(e,Qe,function(e){return"-"+e[1].toLowerCase()})}function splitAtColon(e,t){var r=e.indexOf(":");return r==-1?t:[e.slice(0,r).trim(),e.slice(r+1).trim()]}function sanitizeIdentifier(e){return a.replaceAll(e,/\W/g,"_")}function visitValue(e,t,r){return isArray(e)?t.visitArray(e,r):isStrictStringMap(e)?t.visitStringMap(e,r):isBlank(e)||isPrimitive(e)?t.visitPrimitive(e,r):t.visitOther(e,r)}function assetUrl(e,t,r){return void 0===t&&(t=null),void 0===r&&(r="src"),null==t?"asset:@angular/lib/"+e+"/index":"asset:@angular/lib/"+e+"/src/"+t}function createDiTokenExpression(e){return isPresent(e.value)?literal(e.value):e.identifierIsInstance?importExpr(e.identifier).instantiate([],importType(e.identifier,[],[L.Const])):importExpr(e.identifier)}function unimplemented(){throw new Error("unimplemented")}function createHostComponentMeta(e){var t=U.parse(e.selector)[0].getMatchingElementTemplate();return wt.create({type:new yt({reference:Object,name:e.type.name+"_Host",moduleUrl:e.type.moduleUrl,isHost:!0}),template:new _t({encapsulation:r.ViewEncapsulation.None,template:t,templateUrl:"",styles:[],styleUrls:[],ngContentSelectors:[],animations:[]}),changeDetection:r.ChangeDetectionStrategy.Default,inputs:[],outputs:[],host:{},isComponent:!0,selector:"*",providers:[],viewProviders:[],queries:[],viewQueries:[]})}function removeIdentifierDuplicates(e){var t=new Map;return e.forEach(function(e){t.get(e.identifier.reference)||t.set(e.identifier.reference,e)}),T.values(t)}function _normalizeArray(e){return isPresent(e)?e:[]}function isStaticSymbol(e){return isStringMap(e)&&isPresent(e.name)&&isPresent(e.filePath)}function isWhitespace(e){return e>=er&&e<=or||e==Zr}function isDigit(e){return Ar<=e&&e<=Pr}function isAsciiLetter(e){return e>=Fr&&e<=$r||e>=Tr&&e<=Rr}function isAsciiHexDigit(e){return e>=Fr&&e<=Ur||e>=Tr&&e<=Ir||isDigit(e)}function assertArrayOfStrings(e,t){if(r.isDevMode()&&!isBlank(t)){if(!isArray(t))throw new Error("Expected '"+e+"' to be an array of strings.");for(var n=0;n<t.length;n+=1)if(!isString(t[n]))throw new Error("Expected '"+e+"' to be an array of strings.")}}function assertInterpolationSymbols(e,t){if(isPresent(t)&&(!isArray(t)||2!=t.length))throw new Error("Expected '"+e+"' to be an array, [start, end].");if(r.isDevMode()&&!isBlank(t)){var n=t[0],i=t[1];en.forEach(function(e){if(e.test(n)||e.test(i))throw new Error("['"+n+"', '"+i+"'] contains unusable interpolation symbol.")})}}function newCharacterToken(e,t){return new sn(e,Me.Character,t,a.fromCharCode(t))}function newIdentifierToken(e,t){return new sn(e,Me.Identifier,0,t)}function newKeywordToken(e,t){return new sn(e,Me.Keyword,0,t)}function newOperatorToken(e,t){return new sn(e,Me.Operator,0,t)}function newStringToken(e,t){return new sn(e,Me.String,0,t)}function newNumberToken(e,t){return new sn(e,Me.Number,t,"")}function newErrorToken(e,t){return new sn(e,Me.Error,0,t)}function isIdentifierStart(e){return Fr<=e&&e<=$r||Tr<=e&&e<=Rr||e==Vr||e==cr}function isIdentifier(e){if(0==e.length)return!1;var t=new cn(e);if(!isIdentifierStart(t.peek))return!1;for(t.advance();t.peek!==Jt;){if(!isIdentifierPart(t.peek))return!1;t.advance()}return!0}function isIdentifierPart(e){return isAsciiLetter(e)||isDigit(e)||e==Vr||e==cr}function isExponentStart(e){return e==jr||e==Mr}function isExponentSign(e){return e==vr||e==gr}function isQuote(e){return e===hr||e===sr||e===Jr}function unescape(e){switch(e){case zr:return tr;case Ur:return nr;case Wr:return ir;case Hr:return er;case Gr:return rr;default:return e}}function _createInterpolateRegExp(e){var t=escapeRegExp(e.start)+"([\\s\\S]*?)"+escapeRegExp(e.end);return new RegExp(t,"g")}function visitAll(e,t,r){void 0===r&&(r=null);var n=[];return t.forEach(function(t){var i=t.visit(e,r);i&&n.push(i)}),n}function tokenize(e,t,r,n,i){return void 0===n&&(n=!1),void 0===i&&(i=rn),new Ln(new yn(e,t),r,n,i).tokenize()}function _unexpectedCharacterErrorMsg(e){var t=e===Jt?"EOF":String.fromCharCode(e);return'Unexpected character "'+t+'"'}function _unknownEntityErrorMsg(e){return'Unknown entity "'+e+'" - use the "&#<decimal>;" or  "&#x<hex>;" syntax'}function isNotWhitespace(e){return!isWhitespace(e)||e===Jt}function isNameEnd(e){return isWhitespace(e)||e===kr||e===_r||e===hr||e===sr||e===Cr}function isPrefixEnd(e){return(e<Fr||$r<e)&&(e<Tr||Rr<e)&&(e<Ar||e>Pr)}function isDigitEntityEnd(e){return e==xr||e==Jt||!isAsciiHexDigit(e)}function isNamedEntityEnd(e){return e==xr||e==Jt||!isAsciiLetter(e)}function isExpansionFormStart(e,t,r){var n=!!r&&e.indexOf(r.start,t)==t;return e.charCodeAt(t)==Qr&&!n}function isExpansionCaseStart(e){return e===Cr||isAsciiLetter(e)}function compareCharCodeCaseInsensitive(e,t){return toUpperCaseCharCode(e)==toUpperCaseCharCode(t)}function toUpperCaseCharCode(e){return e>=Fr&&e<=$r?e-Fr+Tr:e}function mergeTextTokens(e){for(var t,r=[],n=0;n<e.length;n++){var i=e[n];t&&t.type==bn.TEXT&&i.type==bn.TEXT?(t.parts[0]+=i.parts[0],t.sourceSpan.end=i.sourceSpan.end):(t=i,r.push(t))}return r}function lastOnStack(e,t){return e.length>0&&e[e.length-1]===t}function digestMessage(e){return sha1(serializeNodes(e.nodes).join("")+("["+e.meaning+"]"))}function serializeNodes(e){return e.map(function(e){return e.visit(Un,null)})}function sha1(e){var t=utf8Encode(e),r=stringToWords32(t),n=8*t.length,i=new Array(80),o=[1732584193,4023233417,2562383102,271733878,3285377520],a=o[0],s=o[1],l=o[2],c=o[3],u=o[4];r[n>>5]|=128<<24-n%32,r[(n+64>>9<<4)+15]=n;for(var p=0;p<r.length;p+=16){for(var h=[a,s,l,c,u],d=h[0],f=h[1],m=h[2],g=h[3],y=h[4],v=0;v<80;v++){v<16?i[v]=r[p+v]:i[v]=rol32(i[v-3]^i[v-8]^i[v-14]^i[v-16],1);var b=fk(v,s,l,c),_=b[0],w=b[1],x=[rol32(a,5),_,u,w,i[v]].reduce(add32);E=[c,l,rol32(s,30),a,x],u=E[0],c=E[1],l=E[2],s=E[3],a=E[4]}A=[add32(a,d),add32(s,f),add32(l,m),add32(c,g),add32(u,y)],a=A[0],s=A[1],l=A[2],c=A[3],u=A[4]}for(var S=words32ToString([a,s,l,c,u]),C="",p=0;p<S.length;p++){var k=S.charCodeAt(p);C+=(k>>>4&15).toString(16)+(15&k).toString(16)}return C.toLowerCase();var E,A}function utf8Encode(e){for(var t="",r=0;r<e.length;r++){var n=decodeSurrogatePairs(e,r);n<=127?t+=String.fromCharCode(n):n<=2047?t+=String.fromCharCode(192|n>>>6,128|63&n):n<=65535?t+=String.fromCharCode(224|n>>>12,128|n>>>6&63,128|63&n):n<=2097151&&(t+=String.fromCharCode(240|n>>>18,128|n>>>12&63,128|n>>>6&63,128|63&n))}return t}function decodeSurrogatePairs(e,t){if(t<0||t>=e.length)throw new Error("index="+t+' is out of range in "'+e+'"');var r,n=e.charCodeAt(t);return n>=55296&&n<=57343&&e.length>t+1&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?1024*(n-55296)+r-56320+65536:n}function stringToWords32(e){for(var t=Array(e.length>>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<e.length;r++)t[r>>>2]|=(255&e.charCodeAt(r))<<8*(3-r&3);return t}function words32ToString(e){for(var t="",r=0;r<4*e.length;r++)t+=String.fromCharCode(e[r>>>2]>>>8*(3-r&3)&255);return t}function fk(e,t,r,n){return e<20?[t&r|~t&n,1518500249]:e<40?[t^r^n,1859775393]:e<60?[t&r|t&n|r&n,2400959708]:[t^r^n,3395469782]}function add32(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}function rol32(e,t){return e<<t|e>>>32-t}function createI18nMessageFactory(e){var t=new Zn(Xn,e);return function(e,r,n){return t.toI18nMessage(e,r,n)}}function _extractPlaceholderName(e){return e.split(Jn)[1]}function extractMessages(e,t,r,n){var i=new si(r,n);return i.extract(e,t)}function mergeTranslations(e,t,r,n,i){var o=new si(n,i);return o.merge(e,t,r)}function _isOpeningComment(e){return e instanceof En&&e.value&&e.value.startsWith("i18n")}function _isClosingComment(e){return e instanceof En&&e.value&&"/i18n"===e.value}function _getI18nAttr(e){return e.attrs.find(function(e){return e.name===ri})||null}function _splitMeaningAndDesc(e){if(!e)return["",""];var t=e.indexOf("|");return t==-1?["",e]:[e.slice(0,t),e.slice(t+1)]}function getXmlTagDefinition(e){return ui}function extractPlaceholders(e){var t=e.getMessageMap(),r={};return Object.keys(t).forEach(function(e){r[e]=t[e].placeholders}),r}function extractPlaceholderToIds(e){var t=e.getMessageMap(),r={};return Object.keys(t).forEach(function(e){r[e]=t[e].placeholderToMsgIds}),r}function serialize(e){return e.map(function(e){return e.visit(fi)}).join("")}function _escapeXml(e){return bi.reduce(function(e,t){return e.replace(t[0],t[1])},e)}function resolveIdentifier(e){return new ht({name:e.name,moduleUrl:e.moduleUrl,reference:To.resolveIdentifier(e.name,e.moduleUrl,e.runtime)})}function identifierToken(e){return new gt({identifier:e})}function resolveIdentifierToken(e){return identifierToken(resolveIdentifier(e))}function resolveEnumIdentifier(e,t){var r=To.resolveEnum(e.reference,t);return new ht({name:e.name+"."+t,moduleUrl:e.moduleUrl,reference:r})}function expandNodes(e){var t=new oa;return new na(visitAll(t,e),t.isExpanded,t.errors)}function _expandPluralForm(e,t){var r=e.cases.map(function(e){ra.indexOf(e.value)!=-1||e.value.match(/^=\d+$/)||t.push(new ia(e.valueSourceSpan,'Plural cases should be "=<number>" or one of '+ra.join(", ")));var r=expandNodes(e.expression);return t.push.apply(t,r.errors),new kn("template",[new Cn("ngPluralCase",""+e.value,e.valueSourceSpan)],r.nodes,e.sourceSpan,e.sourceSpan,e.sourceSpan)}),n=new Cn("[ngPlural]",e.switchValue,e.switchValueSourceSpan);return new kn("ng-container",[n],r,e.sourceSpan,e.sourceSpan,e.sourceSpan)}function _expandDefaultForm(e,t){var r=e.cases.map(function(e){var r=expandNodes(e.expression);return t.push.apply(t,r.errors),new kn("template",[new Cn("ngSwitchCase",""+e.value,e.valueSourceSpan)],r.nodes,e.sourceSpan,e.sourceSpan,e.sourceSpan)}),n=new Cn("[ngSwitch]",e.switchValue,e.switchValueSourceSpan);return new kn("ng-container",[n],r,e.sourceSpan,e.sourceSpan,e.sourceSpan)}function _transformProvider(e,t){var r=t.useExisting,n=t.useValue,i=t.deps;return new ft({token:e.token,useClass:e.useClass,useExisting:r,useFactory:e.useFactory,useValue:n,deps:i,multi:e.multi})}function _transformProviderAst(e,t){var r=t.eager,n=t.providers;return new _(e.token,e.multiProvider,e.eager||r,n,e.providerType,e.lifecycleHooks,e.sourceSpan)}function _normalizeProviders(e,t,r,n){return void 0===n&&(n=null),isBlank(n)&&(n=[]),isPresent(e)&&e.forEach(function(e){if(isArray(e))_normalizeProviders(e,t,r,n);else{var i=void 0;e instanceof ft?i=e:e instanceof yt?i=new ft({token:new gt({identifier:e}),useClass:e}):r.push(new sa("Unknown provider type "+e,t)),isPresent(i)&&n.push(i)}}),n}function _resolveProvidersFromDirectives(e,r,n){var i=new Map;e.forEach(function(e){var o=new ft({token:new gt({identifier:e.type}),useClass:e.type});_resolveProviders([o],e.isComponent?t.ProviderAstType.Component:t.ProviderAstType.Directive,!0,r,n,i)});var o=e.filter(function(e){return e.isComponent}).concat(e.filter(function(e){return!e.isComponent}));return o.forEach(function(e){_resolveProviders(_normalizeProviders(e.providers,r,n),t.ProviderAstType.PublicService,!1,r,n,i),_resolveProviders(_normalizeProviders(e.viewProviders,r,n),t.ProviderAstType.PrivateService,!1,r,n,i)}),i}function _resolveProviders(e,t,r,n,i,o){e.forEach(function(e){var a=o.get(e.token.reference);if(isPresent(a)&&a.multiProvider!==e.multi&&i.push(new sa("Mixing multi and non multi provider is not possible for token "+a.token.name,n)),isBlank(a)){var s=e.token.identifier&&e.token.identifier instanceof yt?e.token.identifier.lifecycleHooks:[];a=new _(e.token,e.multi,r||s.length>0,[e],t,s,n),o.set(e.token.reference,a)}else e.multi||I.clear(a.providers),a.providers.push(e)})}function _getViewQueries(e){var t=new Map;return isPresent(e.viewQueries)&&e.viewQueries.forEach(function(e){return _addQueryToTokenMap(t,e)}),e.type.diDeps.forEach(function(e){isPresent(e.viewQuery)&&_addQueryToTokenMap(t,e.viewQuery)}),t}function _getContentQueries(e){var t=new Map;return e.forEach(function(e){isPresent(e.queries)&&e.queries.forEach(function(e){return _addQueryToTokenMap(t,e)}),e.type.diDeps.forEach(function(e){isPresent(e.query)&&_addQueryToTokenMap(t,e.query)})}),t}function _addQueryToTokenMap(e,t){t.selectors.forEach(function(r){var n=e.get(r.reference);isBlank(n)&&(n=[],e.set(r.reference,n)),n.push(t)})}function isStyleUrlResolvable(e){if(isBlank(e)||0===e.length||"/"==e[0])return!1;var t=e.match(fa);return null===t||"package"==t[1]||"asset"==t[1]}function extractStyleUrls(e,t,r){var n=[],i=a.replaceAllMapped(r,da,function(r){var i=isPresent(r[1])?r[1]:r[2];return isStyleUrlResolvable(i)?(n.push(e.resolve(t,i)),""):r[0]});return new ha(i,n)}function preparseElement(e){var t=null,r=null,n=null,i=!1,o=null;e.attrs.forEach(function(e){var a=e.name.toLowerCase();a==ma?t=e.value:a==ba?r=e.value:a==va?n=e.value:e.name==Sa?i=!0:e.name==Ca&&e.value.length>0&&(o=e.value)}),t=normalizeNgContentSelect(t);var a=e.name.toLowerCase(),s=ai.OTHER;return splitNsName(a)[1]==ga?s=ai.NG_CONTENT:a==wa?s=ai.STYLE:a==xa?s=ai.SCRIPT:a==ya&&n==_a&&(s=ai.STYLESHEET),new Ea(s,t,r,i,o)}function normalizeNgContentSelect(e){return null===e||0===e.length?"*":e}function splitClasses(e){return e.trim().split(/\s+/g)}function createElementCssSelector(e,t){var r=new U,n=splitNsName(e)[1];r.setElement(n);for(var i=0;i<t.length;i++){var o=t[i][0],a=splitNsName(o)[1],s=t[i][1];if(r.addAttribute(a,s),o.toLowerCase()==Wa){var l=splitClasses(s);l.forEach(function(e){return r.addClassName(e)})}}return r}function unimplemented$1(){throw new Error("unimplemented")}function parseAnimationEntry(e){var t=[],r={},n=[],i=[];e.definitions.forEach(function(e){e instanceof nt?_parseAnimationDeclarationStates(e,t).forEach(function(e){i.push(e),r[e.stateName]=e.styles}):n.push(e)});var o=n.map(function(e){return _parseAnimationStateTransition(e,r,t)}),a=new ds(e.name,i,o);return new Is(a,t)}function parseAnimationOutputName(e,t){var r,n=e.split("."),i="";if(n.length>1){r=n[0];var o=n[1];switch(o){case"start":case"done":i=o;break;default:t.push(new Ms('The provided animation output phase value "'+o+'" for "@'+r+'" is not supported (use start or done)'))}}else r=e,t.push(new Ms("The animation trigger output event (@"+r+") is missing its phase value name (start or done are currently supported)"));return new Bo(r,i,e)}function _parseAnimationDeclarationStates(e,t){var r=[];e.styles.styles.forEach(function(e){isStringMap(e)?r.push(e):t.push(new Ms("State based animations cannot contain references to other states"))});var n=new vs(r),i=e.stateNameExpr.split(/\s*,\s*/);return i.map(function(e){return new fs(e,n)})}function _parseAnimationStateTransition(e,t,r){var n=new ks,i=[],o=e.stateChangeExpr.split(/\s*,\s*/);o.forEach(function(e){_parseAnimationTransitionExpr(e,r).forEach(function(e){i.push(e)})});var a=_normalizeAnimationEntry(e.steps),s=_normalizeStyleSteps(a,t,r),l=_parseTransitionAnimation(s,0,n,t,r);0==r.length&&_fillAnimationAstStartingKeyframes(l,n,r);var c=l instanceof _s?l:new xs([l]);return new gs(i,c)}function _parseAnimationTransitionExpr(e,t){var r=[],n=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(!isPresent(n)||n.length<4)return t.push(new Ms("the provided "+e+" is not of a supported format")),r;var i=n[1],o=n[2],a=n[3];r.push(new ms(i,a));var s=i==Vo&&a==Vo;return"<"!=o[0]||s||r.push(new ms(a,i)),r}function _normalizeAnimationEntry(e){return isArray(e)?new ut(e):e}function _normalizeStyleMetadata(e,t,r){var n=[];return e.styles.forEach(function(e){isString(e)?I.addAll(n,_resolveStylesFromState(e,t,r)):n.push(e)}),n}function _normalizeStyleSteps(e,t,r){var n=_normalizeStyleStepEntry(e,t,r);return e instanceof pt?new pt(n):new ut(n)}function _mergeAnimationStyles(e,t){if(isStringMap(t)&&e.length>0){var r=e.length-1,n=e[r];if(isStringMap(n))return void(e[r]=M.merge(n,t))}e.push(t)}function _normalizeStyleStepEntry(e,t,r){var n;if(!(e instanceof ct))return[e];n=e.steps;var i,o=[];return n.forEach(function(e){if(e instanceof st)isPresent(i)||(i=[]),_normalizeStyleMetadata(e,t,r).forEach(function(e){_mergeAnimationStyles(i,e)});else{if(isPresent(i)&&(o.push(new st(0,i)),i=null),e instanceof lt){var n=e.styles;n instanceof st?n.styles=_normalizeStyleMetadata(n,t,r):n instanceof at&&n.steps.forEach(function(e){e.styles=_normalizeStyleMetadata(e,t,r)})}else if(e instanceof ct){var a=_normalizeStyleStepEntry(e,t,r);e=e instanceof pt?new pt(a):new ut(a)}o.push(e)}}),isPresent(i)&&o.push(new st(0,i)),o}function _resolveStylesFromState(e,t,r){var n=[];if(":"!=e[0])r.push(new Ms('Animation states via styles must be prefixed with a ":"'));else{var i=e.substring(1),o=t[i];isPresent(o)?o.styles.forEach(function(e){isStringMap(e)&&n.push(e)}):r.push(new Ms('Unable to apply styles due to missing a state: "'+i+'"'))}return n}function _parseAnimationKeyframes(e,t,r,n,i){var o=e.steps.length,a=0;e.steps.forEach(function(e){return a+=isPresent(e.offset)?1:0}),a>0&&a<o&&(i.push(new Ms("Not all style() entries contain an offset for the provided keyframe()")),a=o);var s=o-1,l=0==a?1/s:0,c=[],u=0,p=!1,h=0;e.steps.forEach(function(e){var t=e.offset,r={};e.styles.forEach(function(e){M.forEach(e,function(e,t){"offset"!=t&&(r[t]=e)})}),isPresent(t)?p=p||t<h:t=u==s?Ps:l*u,c.push([t,r]),h=t,u++}),p&&I.sort(c,function(e,t){return e[0]<=t[0]?-1:1});var d,f=c[0];f[0]!=As&&I.insert(c,0,f=[As,{}]);var m=f[1];s=c.length-1;var g=c[s];g[0]!=Ps&&(c.push(g=[Ps,{}]),s++);var y=g[1];for(d=1;d<=s;d++){var v=c[d],b=v[1];M.forEach(b,function(e,t){isPresent(m[t])||(m[t]=Uo)})}for(d=s-1;d>=0;d--){var v=c[d],b=v[1];M.forEach(b,function(e,t){isPresent(y[t])||(y[t]=e)})}return c.map(function(e){return new bs(e[0],new vs([e[1]]))})}function _parseTransitionAnimation(e,t,r,n,i){var o,a=0,s=t;if(e instanceof ct){var l,c=0,u=[],p=e instanceof pt;if(e.steps.forEach(function(e){var o=p?s:t;if(e instanceof st)return e.styles.forEach(function(e){var t=e;M.forEach(t,function(e,t){r.insertAtTime(t,o,e)})}),void(l=e.styles);var h=_parseTransitionAnimation(e,o,r,n,i);if(isPresent(l)){if(e instanceof ct){var d=new vs(l);u.push(new ys(d,[],0,0,""))}else{var f=h;I.addAll(f.startingStyles.styles,l)}l=null}var m=h.playTime;t+=m,a+=m,c=Ss.max(m,c),u.push(h)}),isPresent(l)){var h=new vs(l);u.push(new ys(h,[],0,0,""))}p?(o=new ws(u),a=c,t=s+a):o=new xs(u)}else if(e instanceof lt){var d,f=_parseTimeExpression(e.timings,i),m=e.styles;if(m instanceof at)d=_parseAnimationKeyframes(m,t,r,n,i);else{var g=m,y=Ps,v=new vs(g.styles),b=new bs(y,v);d=[b]}o=new ys(new vs([]),d,f.duration,f.delay,f.easing),a=f.duration+f.delay,t+=a,d.forEach(function(e){return e.styles.styles.forEach(function(e){return M.forEach(e,function(e,n){return r.insertAtTime(n,t,e)})})})}else o=new ys(null,[],0,0,"");return o.playTime=a,o.startTime=s,o}function _fillAnimationAstStartingKeyframes(e,t,r){if(e instanceof ys&&e.keyframes.length>0){var n=e.keyframes;if(1==n.length){var i=n[0],o=_createStartKeyframeFromEndKeyframe(i,e.startTime,e.playTime,t,r);e.keyframes=[o,i]}}else e instanceof _s&&e.steps.forEach(function(e){return _fillAnimationAstStartingKeyframes(e,t,r)})}function _parseTimeExpression(e,t){var r,n=/^([\.\d]+)(m?s)(?:\s+([\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?/i,i=0,o=null;if(isString(e)){var a=e.match(n);if(null===a)return t.push(new Ms('The provided timing value "'+e+'" is invalid.')),new Os(0,0,null);var s=parseFloat(a[1]),l=a[2];"s"==l&&(s*=Ts),r=Ss.floor(s);var c=a[3],u=a[4];if(isPresent(c)){var p=parseFloat(c);isPresent(u)&&"s"==u&&(p*=Ts),i=Ss.floor(p)}var h=a[5];isBlank(h)||(o=h)}else r=e;return new Os(r,i,o)}function _createStartKeyframeFromEndKeyframe(e,t,r,n,i){var o={},a=t+r;return e.styles.styles.forEach(function(e){M.forEach(e,function(e,r){if("offset"!=r){var s,l,c,u=n.indexOfAtOrBeforeTime(r,t);isPresent(u)?(s=n.getByIndex(r,u),c=s.value,l=n.getByIndex(r,u+1)):c=Uo,isPresent(l)&&!l.matches(a,e)&&i.push(new Ms('The animated CSS property "'+r+'" unexpectedly changes between steps "'+s.time+'ms" and "'+a+'ms" at "'+l.time+'ms"')),o[r]=c}})}),new bs(As,new vs([o]))}function _compareToAnimationStateExpr(e,t){var r=literal(jo);switch(t){case jo:return e.equals(r);case Vo:return literal(!0);default:return e.equals(literal(t))}}function _isEndStateAnimateStep(e){if(e instanceof ys&&e.duration>0&&2==e.keyframes.length){var t=_getStylesArray(e.keyframes[0])[0],r=_getStylesArray(e.keyframes[1])[0];return M.isEmpty(t)&&M.isEmpty(r)}return!1}function _getStylesArray(e){return e.styles.styles}function _validateAnimationProperties(e,t){var r=new Js(e);return templateVisitAll(r,t),new Zs(r.outputs,r.errors)}function convertValueToOutputAst(e,t){return void 0===t&&(t=null),visitValue(e,new el,t)}function getPropertyInView(e,t,r){if(t===r)return e;for(var n=Ae,i=t;i!==r&&isPresent(i.declarationElement.view);)i=i.declarationElement.view,n=n.prop("parent");if(i!==r)throw new Error("Internal error: Could not calculate a property in a parent view: "+e);if(e instanceof Se){var o=e;(r.fields.some(function(e){return e.name==o.name})||r.getters.some(function(e){return e.name==o.name}))&&(n=n.cast(r.classType))}return replaceVarInExpression(Ae.name,n,e)}function injectFromViewParentInjector(e,t){var r=[createDiTokenExpression(e)];return t&&r.push(Te),Ae.prop("parentInjector").callMethod("get",r)}function getViewFactoryName(e,t){return"viewFactory_"+e.type.name+t}function createFlatArray(e){for(var t=[],r=literalArr([]),n=0;n<e.length;n++){var i=e[n];i.type instanceof X?(t.length>0&&(r=r.callMethod(ae.ConcatArray,[literalArr(t)]),t=[]),r=r.callMethod(ae.ConcatArray,[i])):t.push(i)}return t.length>0&&(r=r.callMethod(ae.ConcatArray,[literalArr(t)])),r}function createPureProxy(e,t,r,n){n.fields.push(new Be(r.name,null));var i=t<Zo.pureProxies.length?Zo.pureProxies[t]:null;if(isBlank(i))throw new Error("Unsupported number of argument for pure functions: "+t);n.createMethod.addStmt(Ae.prop(r.name).set(importExpr(resolveIdentifier(i)).callFn([e])).toStmt())}function createQueryValues(e){return I.flatten(e.values.map(function(e){return e instanceof il?mapNestedViews(e.view.declarationElement.appElement,e.view,createQueryValues(e)):e}))}function mapNestedViews(e,t,r){var n=r.map(function(e){return replaceVarInExpression(Ae.name,variable("nestedView"),e)});return e.callMethod("mapNestedViews",[variable(t.className),fn([new _e("nestedView",t.classType)],[new Ne(literalArr(n))],J)])}function createQueryList(e,t,r,n){n.fields.push(new Be(r,importType(resolveIdentifier(Zo.QueryList),[J])));var i=Ae.prop(r);return n.createMethod.addStmt(Ae.prop(r).set(importExpr(resolveIdentifier(Zo.QueryList),[J]).instantiate([])).toStmt()),i}function addQueryToTokenMap(e,t){t.meta.selectors.forEach(function(r){var n=e.get(r.reference);isBlank(n)&&(n=[],e.set(r.reference,n)),n.push(t)})}function _enumExpression(e,t){return importExpr(resolveEnumIdentifier(e,t))}function createInjectInternalCondition(e,t,r,n){var i;return i=t>0?literal(e).lowerEquals(hl.requestNodeIndex).and(hl.requestNodeIndex.lowerEquals(literal(e+t))):literal(e).identical(hl.requestNodeIndex),new Ue(hl.token.identical(createDiTokenExpression(r.token)).and(i),[new Ne(n)])}function createProviderProperty(e,t,r,n,i,o){var a,s,l=o.view;if(n?(a=literalArr(r),s=new X(J)):(a=r[0],s=r[0].type),isBlank(s)&&(s=J),i)l.fields.push(new Be(e,s)),l.createMethod.addStmt(Ae.prop(e).set(a).toStmt());else{var c="_"+e;l.fields.push(new Be(c,s));var u=new nl(l);u.resetDebugInfo(o.nodeIndex,o.sourceAst),u.addStmt(new Ue(Ae.prop(c).isBlank(),[Ae.prop(c).set(a).toStmt()])),u.addStmt(new Ne(Ae.prop(c))),l.getters.push(new Fe(e,u.finish(),s))}return Ae.prop(e)}function _findPipeMeta(e,t){for(var r=null,n=e.pipeMetas.length-1;n>=0;n--){var i=e.pipeMetas[n];if(i.name==t){r=i;break}}if(isBlank(r))throw new Error("Illegal state: Could not find pipe "+t+" although the parser should have detected this error!");return r}function getViewType(e,t){return t>0?ro.EMBEDDED:e.type.isHost?ro.HOST:ro.COMPONENT}function convertCdExpressionToIr(e,t,r,n,i){var o=new Sl(e,t,n,i),a=r.visit(o,ka.Expression);return new wl(a,o.needsValueUnwrapper,o.temporaryCount)}function convertCdStatementToIr(e,t,r,n){var i=new Sl(e,t,null,n),o=[];return flattenStatements(r.visit(i,ka.Statement),o),prependTemporaryDecls(i.temporaryCount,n,o),o}function temporaryName(e,t){return"tmp_"+e+"_"+t}function temporaryDeclaration(e,t){return new Oe(temporaryName(e,t),Te)}function prependTemporaryDecls(e,t,r){for(var n=e-1;n>=0;n--)r.unshift(temporaryDeclaration(t,n))}function ensureStatementMode(e,t){if(e!==ka.Statement)throw new Error("Expected a statement, but saw "+t)}function ensureExpressionMode(e,t){if(e!==ka.Expression)throw new Error("Expected an expression, but saw "+t)}function convertToStatementIfNeeded(e,t){return e===ka.Statement?t.toStmt():t}function flattenStatements(e,t){isArray(e)?e.forEach(function(e){return flattenStatements(e,t)}):t.push(e)}function collectEventListeners(e,t,r){var n=[];return e.forEach(function(e){r.view.bindings.push(new _l(r,e));var t=kl.getOrCreate(r,e.target,e.name,n);t.addAction(e,null,null)}),t.forEach(function(e){var t=r.instances.get(identifierToken(e.directive.type).reference);e.hostEvents.forEach(function(i){r.view.bindings.push(new _l(r,i));var o=kl.getOrCreate(r,i.target,i.name,n);o.addAction(i,e.directive,t)})}),n.forEach(function(e){return e.finishMethod()}),n}function bindDirectiveOutputs(e,t,r){M.forEach(e.directive.outputs,function(e,n){r.filter(function(t){return t.eventName==e}).forEach(function(e){e.listenToDirective(t,n)})})}function bindRenderOutputs(e){e.forEach(function(e){return e.listenToRenderer()})}function bindAnimationOutputs(e){e.forEach(function(e){e.listener.listenToAnimation(e.output);
})}function convertStmtIntoExpression(e){return e instanceof Le?e.expr:e instanceof Ne?e.value:null}function santitizeEventName(e){return a.replaceAll(e,/[^a-zA-Z_]/g,"_")}function bindDirectiveDetectChangesLifecycleCallbacks(e,t,r){var n=r.view,i=n.detectChangesInInputsMethod,o=e.directive.type.lifecycleHooks;o.indexOf(Ki.OnChanges)!==-1&&e.inputs.length>0&&i.addStmt(new Ue(dl.changes.notIdentical(Te),[t.callMethod("ngOnChanges",[dl.changes]).toStmt()])),o.indexOf(Ki.OnInit)!==-1&&i.addStmt(new Ue(El.and(Al),[t.callMethod("ngOnInit",[]).toStmt()])),o.indexOf(Ki.DoCheck)!==-1&&i.addStmt(new Ue(Al,[t.callMethod("ngDoCheck",[]).toStmt()]))}function bindDirectiveAfterContentLifecycleCallbacks(e,t,r){var n=r.view,i=e.type.lifecycleHooks,o=n.afterContentLifecycleCallbacksMethod;o.resetDebugInfo(r.nodeIndex,r.sourceAst),i.indexOf(Ki.AfterContentInit)!==-1&&o.addStmt(new Ue(El,[t.callMethod("ngAfterContentInit",[]).toStmt()])),i.indexOf(Ki.AfterContentChecked)!==-1&&o.addStmt(t.callMethod("ngAfterContentChecked",[]).toStmt())}function bindDirectiveAfterViewLifecycleCallbacks(e,t,r){var n=r.view,i=e.type.lifecycleHooks,o=n.afterViewLifecycleCallbacksMethod;o.resetDebugInfo(r.nodeIndex,r.sourceAst),i.indexOf(Ki.AfterViewInit)!==-1&&o.addStmt(new Ue(El,[t.callMethod("ngAfterViewInit",[]).toStmt()])),i.indexOf(Ki.AfterViewChecked)!==-1&&o.addStmt(t.callMethod("ngAfterViewChecked",[]).toStmt())}function bindInjectableDestroyLifecycleCallbacks(e,t,r){var n=r.view.destroyMethod;n.resetDebugInfo(r.nodeIndex,r.sourceAst),e.lifecycleHooks.indexOf(Ki.OnDestroy)!==-1&&n.addStmt(t.callMethod("ngOnDestroy",[]).toStmt())}function bindPipeDestroyLifecycleCallbacks(e,t,r){var n=r.destroyMethod;e.type.lifecycleHooks.indexOf(Ki.OnDestroy)!==-1&&n.addStmt(t.callMethod("ngOnDestroy",[]).toStmt())}function createBindFieldExpr(e){return Ae.prop("_expr_"+e)}function createCurrValueExpr(e){return variable("currVal_"+e)}function bind(e,t,r,n,i,o,a,s){var l=convertCdExpressionToIr(e,i,n,dl.valUnwrapper,s);if(!isBlank(l.expression)){if(l.temporaryCount)for(var c=0;c<l.temporaryCount;c++)a.addStmt(temporaryDeclaration(s,c));if(e.fields.push(new Be(r.name,null,[pe.Private])),e.createMethod.addStmt(Ae.prop(r.name).set(importExpr(resolveIdentifier(Zo.UNINITIALIZED))).toStmt()),l.needsValueUnwrapper){var u=dl.valUnwrapper.callMethod("reset",[]).toStmt();a.addStmt(u)}a.addStmt(t.set(l.expression).toDeclStmt(null,[pe.Final]));var p=importExpr(resolveIdentifier(Zo.checkBinding)).callFn([dl.throwOnChange,r,t]);l.needsValueUnwrapper&&(p=dl.valUnwrapper.prop("hasWrappedValue").or(p)),a.addStmt(new Ue(p,o.concat([Ae.prop(r.name).set(t).toStmt()])))}}function bindRenderText(e,t,r){var n=r.bindings.length;r.bindings.push(new _l(t,e));var i=createCurrValueExpr(n),o=createBindFieldExpr(n);r.detectChangesRenderPropertiesMethod.resetDebugInfo(t.nodeIndex,e),bind(r,i,o,e.value,r.componentContext,[Ae.prop("renderer").callMethod("setText",[t.renderNode,i]).toStmt()],r.detectChangesRenderPropertiesMethod,n)}function bindAndWriteToRenderer(e,r,n,i){var o=n.view,a=n.renderNode;e.forEach(function(e){var s=o.bindings.length;o.bindings.push(new _l(n,e)),o.detectChangesRenderPropertiesMethod.resetDebugInfo(n.nodeIndex,e);var l=createBindFieldExpr(s),c=createCurrValueExpr(s),u=sanitizedValue(e,l),p=sanitizedValue(e,c),h=[],d=o.detectChangesRenderPropertiesMethod;switch(e.type){case t.PropertyBindingType.Property:o.genConfig.logBindingUpdate&&h.push(logBindingUpdateStmt(a,e.name,p)),h.push(Ae.prop("renderer").callMethod("setElementProperty",[a,literal(e.name),p]).toStmt());break;case t.PropertyBindingType.Attribute:p=p.isBlank().conditional(Te,p.callMethod("toString",[])),h.push(Ae.prop("renderer").callMethod("setElementAttribute",[a,literal(e.name),p]).toStmt());break;case t.PropertyBindingType.Class:h.push(Ae.prop("renderer").callMethod("setElementClass",[a,literal(e.name),p]).toStmt());break;case t.PropertyBindingType.Style:var f=p.callMethod("toString",[]);isPresent(e.unit)&&(f=f.plus(literal(e.unit))),p=p.isBlank().conditional(Te,f),h.push(Ae.prop("renderer").callMethod("setElementStyle",[a,literal(e.name),p]).toStmt());break;case t.PropertyBindingType.Animation:var m=e.name,g=Ae;i&&(g=n.appElement.prop("componentView")),d=o.animationBindingsMethod;var y=g.prop("componentType").prop("animations").key(literal(m)),v=literal(jo),b=variable("oldRenderVar");h.push(b.set(u).toDeclStmt()),h.push(new Ue(b.equals(importExpr(resolveIdentifier(Zo.UNINITIALIZED))),[b.set(v).toStmt()]));var _=variable("newRenderVar");h.push(_.set(p).toDeclStmt()),h.push(new Ue(_.equals(importExpr(resolveIdentifier(Zo.UNINITIALIZED))),[_.set(v).toStmt()])),h.push(y.callFn([Ae,a,b,_]).toStmt()),o.detachMethod.addStmt(y.callFn([Ae,a,u,v]).toStmt())}bind(o,c,l,e.value,r,h,d,o.bindings.length)})}function sanitizedValue(e,t){var n;switch(e.securityContext){case r.SecurityContext.NONE:return t;case r.SecurityContext.HTML:n="HTML";break;case r.SecurityContext.STYLE:n="STYLE";break;case r.SecurityContext.SCRIPT:n="SCRIPT";break;case r.SecurityContext.URL:n="URL";break;case r.SecurityContext.RESOURCE_URL:n="RESOURCE_URL";break;default:throw new Error("internal error, unexpected SecurityContext "+e.securityContext+".")}var i=ul.viewUtils.prop("sanitizer"),o=[importExpr(resolveIdentifier(Zo.SecurityContext)).prop(n),t];return i.callMethod("sanitize",o)}function bindRenderInputs(e,t){bindAndWriteToRenderer(e,t.view.componentContext,t,!1)}function bindDirectiveHostProps(e,t,r){bindAndWriteToRenderer(e.hostProperties,t,r,!0)}function bindDirectiveInputs(e,t,r){if(0!==e.inputs.length){var n=r.view,i=n.detectChangesInInputsMethod;i.resetDebugInfo(r.nodeIndex,r.sourceAst);var o=e.directive.type.lifecycleHooks,a=o.indexOf(Ki.OnChanges)!==-1,s=e.directive.isComponent&&!qi(e.directive.changeDetection);a&&i.addStmt(dl.changes.set(Te).toStmt()),s&&i.addStmt(dl.changed.set(literal(!1)).toStmt()),e.inputs.forEach(function(e){var o=n.bindings.length;n.bindings.push(new _l(r,e)),i.resetDebugInfo(r.nodeIndex,e);var l=createBindFieldExpr(o),c=createCurrValueExpr(o),u=[t.prop(e.directiveName).set(c).toStmt()];a&&(u.push(new Ue(dl.changes.identical(Te),[dl.changes.set(literalMap([],new Z(importType(resolveIdentifier(Zo.SimpleChange))))).toStmt()])),u.push(dl.changes.key(literal(e.directiveName)).set(importExpr(resolveIdentifier(Zo.SimpleChange)).instantiate([l,c])).toStmt())),s&&u.push(dl.changed.set(literal(!0)).toStmt()),n.genConfig.logBindingUpdate&&u.push(logBindingUpdateStmt(r.renderNode,e.directiveName,c)),bind(n,c,l,e.value,n.componentContext,u,i,o)}),s&&i.addStmt(new Ue(dl.changed,[r.appElement.prop("componentView").callMethod("markAsCheckOnce",[]).toStmt()]))}}function logBindingUpdateStmt(e,t,r){var n=Ae.prop("renderer").callMethod("setBindingDebugInfo",[e,literal("ng-reflect-"+camelCaseToDashCase(t)),r.isBlank().conditional(Te,r.callMethod("toString",[]))]).toStmt(),i=Ae.prop("renderer").callMethod("setBindingDebugInfo",[e,literal("ng-reflect-"+camelCaseToDashCase(t)),literal("[ERROR] Exception while trying to serialize the value")]).toStmt();return new ze([n],[i])}function bindView(e,t,r){var n=new Pl(e,r);templateVisitAll(n,t),e.pipes.forEach(function(e){bindPipeDestroyLifecycleCallbacks(e.meta,e.instance,e.view)})}function buildView(e,t,r){var n=new Bl(e,r);return templateVisitAll(n,t,e.declarationElement.isNull()?e.declarationElement:e.declarationElement.parent),n.nestedViewCount}function finishView(e,t){e.afterNodes(),createViewTopLevelStmts(e,t),e.nodes.forEach(function(e){e instanceof gl&&e.hasEmbeddedView&&finishView(e.embeddedView,t)})}function _getOuterContainerOrSelf(e){for(var t=e.view;_isNgContainer(e.parent,t);)e=e.parent;return e}function _getOuterContainerParentOrSelf(e){for(var t=e.view;_isNgContainer(e,t);)e=e.parent;return e}function _isNgContainer(e,t){return!e.isNull()&&e.sourceAst.name===Ol&&e.view===t}function _mergeHtmlAndDirectiveAttrs(e,t){var r={};return M.forEach(e,function(e,t){r[t]=e}),t.forEach(function(e){M.forEach(e.hostAttributes,function(e,t){var n=r[t];r[t]=isPresent(n)?mergeAttributeValue(t,n,e):e})}),mapToKeyValueArray(r)}function _readHtmlAttrs(e){var t={};return e.forEach(function(e){t[e.name]=e.value}),t}function mergeAttributeValue(e,t,r){return e==Ml||e==Il?t+" "+r:r}function mapToKeyValueArray(e){var t=[];return M.forEach(e,function(e,r){t.push([r,e])}),I.sort(t,function(e,t){return a.compare(e[0],t[0])}),t}function createViewTopLevelStmts(e,t){var r=Te;e.genConfig.genDebugInfo&&(r=variable("nodeDebugInfos_"+e.component.type.name+e.viewIndex),t.push(r.set(literalArr(e.nodes.map(createStaticNodeDebugInfo),new X(new Y(resolveIdentifier(Zo.StaticNodeDebugInfo)),[L.Const]))).toDeclStmt(null,[pe.Final])));var n=variable("renderType_"+e.component.type.name);0===e.viewIndex&&t.push(n.set(Te).toDeclStmt(importType(resolveIdentifier(Zo.RenderComponentType))));var i=createViewClass(e,n,r);t.push(i),t.push(createViewFactory(e,i,n))}function createStaticNodeDebugInfo(e){var t=e instanceof gl?e:null,r=[],n=Te,i=[];return isPresent(t)&&(r=t.getProviderTokens(),isPresent(t.component)&&(n=createDiTokenExpression(identifierToken(t.component.type))),M.forEach(t.referenceTokens,function(e,t){i.push([t,isPresent(e)?createDiTokenExpression(e):Te])})),importExpr(resolveIdentifier(Zo.StaticNodeDebugInfo)).instantiate([literalArr(r,new X(J,[L.Const])),n,literalMap(i,new Z(J,[L.Const]))],importType(resolveIdentifier(Zo.StaticNodeDebugInfo),null,[L.Const]))}function createViewClass(e,t,r){var n=[new _e(cl.viewUtils.name,importType(resolveIdentifier(Zo.ViewUtils))),new _e(cl.parentInjector.name,importType(resolveIdentifier(Zo.Injector))),new _e(cl.declarationEl.name,importType(resolveIdentifier(Zo.AppElement)))],i=[variable(e.className),t,al.fromValue(e.viewType),cl.viewUtils,cl.parentInjector,cl.declarationEl,ll.fromValue(getChangeDetectionMode(e))];e.genConfig.genDebugInfo&&i.push(r);var o=new Ve(null,n,[Pe.callFn(i).toStmt()]),a=[new Ve("createInternal",[new _e(Ll.name,re)],generateCreateMethod(e),importType(resolveIdentifier(Zo.AppElement))),new Ve("injectorGetInternal",[new _e(hl.token.name,J),new _e(hl.requestNodeIndex.name,te),new _e(hl.notFoundResult.name,J)],addReturnValuefNotEmpty(e.injectorGetMethod.finish(),hl.notFoundResult),J),new Ve("detectChangesInternal",[new _e(dl.throwOnChange.name,ee)],generateDetectChangesMethod(e)),new Ve("dirtyParentQueriesInternal",[],e.dirtyParentQueriesMethod.finish()),new Ve("destroyInternal",[],e.destroyMethod.finish()),new Ve("detachInternal",[],e.detachMethod.finish())].concat(e.eventHandlerMethods),s=e.genConfig.genDebugInfo?Zo.DebugAppView:Zo.AppView,l=new je(e.className,importExpr(resolveIdentifier(s),[getContextType(e)]),e.fields,e.getters,o,a.filter(function(e){return e.body.length>0}));return l}function createViewFactory(e,t,r){var n,i=[new _e(cl.viewUtils.name,importType(resolveIdentifier(Zo.ViewUtils))),new _e(cl.parentInjector.name,importType(resolveIdentifier(Zo.Injector))),new _e(cl.declarationEl.name,importType(resolveIdentifier(Zo.AppElement)))],o=[];if(n=e.component.template.templateUrl==e.component.type.moduleUrl?e.component.type.moduleUrl+" class "+e.component.type.name+" - inline template":e.component.template.templateUrl,0===e.viewIndex){var a=literalMap(e.animations.map(function(e){return[e.name,e.fnVariable]}));o=[new Ue(r.identical(Te),[r.set(cl.viewUtils.callMethod("createRenderComponentType",[literal(n),literal(e.component.template.ngContentSelectors.length),sl.fromValue(e.component.template.encapsulation),e.styles,a])).toStmt()])]}return fn(i,o.concat([new Ne(variable(t.name).instantiate(t.constructorMethod.params.map(function(e){return variable(e.name)})))]),importType(resolveIdentifier(Zo.AppView),[getContextType(e)])).toDeclStmt(e.viewFactory.name,[pe.Final])}function generateCreateMethod(e){var t=Te,r=[];e.viewType===ro.COMPONENT&&(t=ul.renderer.callMethod("createViewRoot",[Ae.prop("declarationAppElement").prop("nativeElement")]),r=[Rl.set(t).toDeclStmt(importType(e.genConfig.renderTypes.renderNode),[pe.Final])]);var n;return n=e.viewType===ro.HOST?e.nodes[0].appElement:Te,r.concat(e.createMethod.finish(),[Ae.callMethod("init",[createFlatArray(e.rootNodesOrAppElements),literalArr(e.nodes.map(function(e){return e.renderNode})),literalArr(e.disposables),literalArr(e.subscriptions)]).toStmt(),new Ne(n)])}function generateDetectChangesMethod(e){var t=[];if(e.animationBindingsMethod.isEmpty()&&e.detectChangesInInputsMethod.isEmpty()&&e.updateContentQueriesMethod.isEmpty()&&e.afterContentLifecycleCallbacksMethod.isEmpty()&&e.detectChangesRenderPropertiesMethod.isEmpty()&&e.updateViewQueriesMethod.isEmpty()&&e.afterViewLifecycleCallbacksMethod.isEmpty())return t;I.addAll(t,e.animationBindingsMethod.finish()),I.addAll(t,e.detectChangesInInputsMethod.finish()),t.push(Ae.callMethod("detectContentChildrenChanges",[dl.throwOnChange]).toStmt());var r=e.updateContentQueriesMethod.finish().concat(e.afterContentLifecycleCallbacksMethod.finish());r.length>0&&t.push(new Ue(not(dl.throwOnChange),r)),I.addAll(t,e.detectChangesRenderPropertiesMethod.finish()),t.push(Ae.callMethod("detectViewChildrenChanges",[dl.throwOnChange]).toStmt());var n=e.updateViewQueriesMethod.finish().concat(e.afterViewLifecycleCallbacksMethod.finish());n.length>0&&t.push(new Ue(not(dl.throwOnChange),n));var i=[],o=findReadVarNames(t);return R.has(o,dl.changed.name)&&i.push(dl.changed.set(literal(!0)).toDeclStmt(ee)),R.has(o,dl.changes.name)&&i.push(dl.changes.set(Te).toDeclStmt(new Z(importType(resolveIdentifier(Zo.SimpleChange))))),R.has(o,dl.valUnwrapper.name)&&i.push(dl.valUnwrapper.set(importExpr(resolveIdentifier(Zo.ValueUnwrapper)).instantiate([])).toDeclStmt(null,[pe.Final])),i.concat(t)}function addReturnValuefNotEmpty(e,t){return e.length>0?e.concat([new Ne(t)]):e}function getContextType(e){return e.viewType===ro.COMPONENT?importType(e.component.type):J}function getChangeDetectionMode(e){var t;return t=e.viewType===ro.COMPONENT?qi(e.component.changeDetection)?Gi.CheckAlways:Gi.CheckOnce:Gi.CheckAlways}function _resolveViewStatements(e){return e.dependencies.forEach(function(e){if(e instanceof Nl){var t=e;t.placeholder.moduleUrl=_ngfactoryModuleUrl(t.comp.moduleUrl)}else if(e instanceof Dl){var r=e;r.placeholder.name=_componentFactoryName(r.comp),r.placeholder.moduleUrl=_ngfactoryModuleUrl(r.comp.moduleUrl)}}),e.statements}function _resolveStyleStatements(e,t){return e.dependencies.forEach(function(e){e.valuePlaceholder.moduleUrl=_stylesModuleUrl(e.moduleUrl,e.isShimmed,t)}),e.statements}function _ngfactoryModuleUrl(e){var t=_splitTypescriptSuffix(e);return t[0]+".ngfactory"+t[1]}function _componentFactoryName(e){return e.name+"NgFactory"}function _stylesModuleUrl(e,t,r){return t?e+".shim"+r:""+e+r}function _assertComponent(e){if(!e.isComponent)throw new Error("Could not compile '"+e.type.name+"' because it is not a component.")}function _splitTypescriptSuffix(e){if(/\.d\.ts$/.test(e))return[e.substring(0,e.length-5),".ts"];var t=e.lastIndexOf(".");return t!==-1?[e.substring(0,t),e.substring(t)]:[e,""]}function createOfflineCompileUrlResolver(){return new Gl(Hl)}function getUrlScheme(e){var t=_split(e);return t&&t[xl.Scheme]||""}function _buildFromEncodedParts(e,t,r,n,i,o,a){var s=[];return isPresent(e)&&s.push(e+":"),isPresent(r)&&(s.push("//"),isPresent(t)&&s.push(t+"@"),s.push(r),isPresent(n)&&s.push(":"+n)),isPresent(i)&&s.push(i),isPresent(o)&&s.push("?"+o),isPresent(a)&&s.push("#"+a),s.join("")}function _split(e){return e.match(Kl)}function _removeDotSegments(e){if("/"==e)return"/";for(var t="/"==e[0]?"/":"",r="/"===e[e.length-1]?"/":"",n=e.split("/"),i=[],o=0,a=0;a<n.length;a++){var s=n[a];switch(s){case"":case".":break;case"..":i.length>0?i.pop():o++;break;default:i.push(s)}}if(""==t){for(;o-- >0;)i.unshift("..");0===i.length&&i.push(".")}return t+i.join("/")+r}function _joinAndCanonicalizePath(e){var t=e[xl.Path];return t=isBlank(t)?"":_removeDotSegments(t),e[xl.Path]=t,_buildFromEncodedParts(e[xl.Scheme],e[xl.UserInfo],e[xl.Domain],e[xl.Port],t,e[xl.QueryData],e[xl.Fragment])}function _resolveUrl(e,t){var r=_split(encodeURI(t)),n=_split(e);if(isPresent(r[xl.Scheme]))return _joinAndCanonicalizePath(r);r[xl.Scheme]=n[xl.Scheme];for(var i=xl.Scheme;i<=xl.Port;i++)isBlank(r[i])&&(r[i]=n[i]);if("/"==r[xl.Path][0])return _joinAndCanonicalizePath(r);var o=n[xl.Path];isBlank(o)&&(o="/");var a=o.lastIndexOf("/");return o=o.substring(0,a+1)+r[xl.Path],r[xl.Path]=o,_joinAndCanonicalizePath(r)}function _cloneDirectiveWithTemplate(e,t){return new wt({type:e.type,isComponent:e.isComponent,selector:e.selector,exportAs:e.exportAs,changeDetection:e.changeDetection,inputs:e.inputs,outputs:e.outputs,hostListeners:e.hostListeners,hostProperties:e.hostProperties,hostAttributes:e.hostAttributes,providers:e.providers,viewProviders:e.viewProviders,queries:e.queries,viewQueries:e.viewQueries,entryComponents:e.entryComponents,template:t})}function _isDirectiveMetadata(e){return e instanceof r.Directive}function hasLifecycleHook(e,t){var r=Xl.get(e),n=Zl.get(e);return To.hasLifecycleHook(t,r,n)}function _isNgModuleMetadata(e){return e instanceof r.NgModule}function _isPipeMetadata(e){return e instanceof r.Pipe}function getTransitiveModules(e,t,r,n){return void 0===r&&(r=[]),void 0===n&&(n=new Set),e.forEach(function(e){if(!n.has(e.type.reference)){n.add(e.type.reference);var i=t?e.importedModules.concat(e.exportedModules):e.exportedModules;getTransitiveModules(i,t,r,n),r.push(e)}}),r}function flattenArray(e,t){if(void 0===t&&(t=[]),e)for(var n=0;n<e.length;n++){var i=r.resolveForwardRef(e[n]);isArray(i)?flattenArray(i,t):t.push(i)}return t}function isValidType(e){return isStaticSymbol(e)||e instanceof r.Type}function staticTypeModuleUrl(e){return isStaticSymbol(e)?e.filePath:null}function componentModuleUrl(e,t,r){if(isStaticSymbol(t))return staticTypeModuleUrl(t);if(isPresent(r.moduleId)){var n=r.moduleId,i=getUrlScheme(n);return isPresent(i)&&i.length>0?n:"package:"+n+$e}return e.importUri(t)}function convertToCompileValue(e,t){return visitValue(e,new nc,t)}function escapeIdentifier(e,t,r){if(void 0===r&&(r=!0),isBlank(e))return null;var n=a.replaceAllMapped(e,uc,function(e){return"$"==e[0]?t?"\\$":"$":"\n"==e[0]?"\\n":"\r"==e[0]?"\\r":"\\"+e[0]}),i=r||!pc.test(n);return i?"'"+n+"'":n}function _createIndent(e){for(var t="",r=0;r<e;r++)t+="  ";return t}function debugOutputAstAsTypeScript(e){var t,r=new _c(vc),n=mc.createRoot([]);return t=isArray(e)?e:[e],t.forEach(function(e){if(e instanceof Ie)e.visitStatement(r,n);else if(e instanceof oe)e.visitExpression(r,n);else{if(!(e instanceof K))throw new Error("Don't know how to print debug info for "+e);e.visitType(r,n)}}),n.toSource()}function interpretStatements(e,t){var r=e.concat([new Ne(variable(t))]),n=new wc(null,null,null,new Map),i=new Sc,o=i.visitAllStatements(r,n);return isPresent(o)?o.value:null}function _executeFunctionStatements(e,t,r,n,i){for(var o=n.createChildWihtLocalVars(),a=0;a<e.length;a++)o.vars.set(e[a],t[a]);var s=i.visitAllStatements(r,o);return isPresent(s)?s.value:null}function createDynamicClass(e,t,r){var n={};e.getters.forEach(function(i){n[i.name]={configurable:!1,get:function(){var n=new wc(t,this,e.name,t.vars);return _executeFunctionStatements([],[],i.body,n,r)}}}),e.methods.forEach(function(i){var o=i.params.map(function(e){return e.name});n[i.name]={writable:!1,configurable:!1,value:function(){for(var n=[],a=0;a<arguments.length;a++)n[a-0]=arguments[a];var s=new wc(t,this,e.name,t.vars);return _executeFunctionStatements(o,n,i.body,s,r)}}});var i=e.constructorMethod.params.map(function(e){return e.name}),o=function(){for(var n=this,o=[],a=0;a<arguments.length;a++)o[a-0]=arguments[a];var s=new wc(t,this,e.name,t.vars);e.fields.forEach(function(e){n[e.name]=void 0}),_executeFunctionStatements(i,o,e.constructorMethod.body,s,r)},a=e.parent.visitExpression(r,t);return o.prototype=Object.create(a.prototype,n),o}function _declareFn(e,t,r,n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return _executeFunctionStatements(e,i,t,r,n)}}function jitStatements(e,t,r){var n=new Tc,i=mc.createRoot([r]);return n.visitAllStatements(t,i),evalExpression(e,r,i.toSource(),n.getArgs())}function stripComments(e){return a.replaceAllMapped(e,Gc,function(e){return""})}function extractSourceMappingUrl(e){var t=e.match(Kc);return t?t[0]:""}function processRules(e,t){var r=escapeBlocks(e),n=0;return a.replaceAllMapped(r.escapedString,$c,function(e){var i=e[2],o="",a=e[4],s="";isPresent(e[4])&&e[4].startsWith("{"+Zc)&&(o=r.blocks[n++],a=e[4].substring(Zc.length+1),s="{");var l=t(new Jc(i,o));return""+e[1]+l.selector+e[3]+s+l.content+a})}function escapeBlocks(e){for(var t=a.split(e,Qc),r=[],n=[],i=0,o=[],s=0;s<t.length;s++){var l=t[s];l==Xc&&i--,i>0?o.push(l):(o.length>0&&(n.push(o.join("")),r.push(Zc),o=[]),r.push(l)),l==Yc&&i++}return o.length>0&&(n.push(o.join("")),r.push(Zc)),new eu(r.join(""),n)}function getStylesVarName(e){var t="styles";return e&&(t+="_"+e.type.name),t}function assertComponent(e){if(!e.isComponent)throw new Error("Could not compile '"+e.type.name+"' because it is not a component.")}function registerContext(e,t){for(var r=0,n=t;r<n.length;r++){var i=n[r];pu[i.toLowerCase()]=e}}function _initReflector(){To.reflectionCapabilities=new Io}function _mergeOptions(e){return{useDebug:_lastDefined(e.map(function(e){return e.useDebug})),useJit:_lastDefined(e.map(function(e){return e.useJit})),defaultEncapsulation:_lastDefined(e.map(function(e){return e.defaultEncapsulation})),providers:_mergeArrays(e.map(function(e){return e.providers}))}}function _lastDefined(e){for(var t=e.length-1;t>=0;t--)if(void 0!==e[t])return e[t]}function _mergeArrays(e){var t=[];return e.forEach(function(e){return e&&t.push.apply(t,e)}),t}var n;n="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:e:window;var i=n;i.assert=function(e){};var o=Object.getPrototypeOf({}),a=function(){function StringWrapper(){}return StringWrapper.fromCharCode=function(e){return String.fromCharCode(e)},StringWrapper.charCodeAt=function(e,t){return e.charCodeAt(t)},StringWrapper.split=function(e,t){return e.split(t)},StringWrapper.equals=function(e,t){return e===t},StringWrapper.stripLeft=function(e,t){if(e&&e.length){for(var r=0,n=0;n<e.length&&e[n]==t;n++)r++;e=e.substring(r)}return e},StringWrapper.stripRight=function(e,t){if(e&&e.length){for(var r=e.length,n=e.length-1;n>=0&&e[n]==t;n--)r--;e=e.substring(0,r)}return e},StringWrapper.replace=function(e,t,r){return e.replace(t,r)},StringWrapper.replaceAll=function(e,t,r){return e.replace(t,r)},StringWrapper.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},StringWrapper.replaceAllMapped=function(e,t,r){return e.replace(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.splice(-2,2),r(e)})},StringWrapper.contains=function(e,t){return e.indexOf(t)!=-1},StringWrapper.compare=function(e,t){return e<t?-1:e>t?1:0},StringWrapper}(),s=function(){function StringJoiner(e){void 0===e&&(e=[]),this.parts=e}return StringJoiner.prototype.add=function(e){this.parts.push(e)},StringJoiner.prototype.toString=function(){return this.parts.join("")},StringJoiner}(),l=function(){function NumberWrapper(){}return NumberWrapper.toFixed=function(e,t){return e.toFixed(t)},NumberWrapper.equal=function(e,t){return e===t},NumberWrapper.parseIntAutoRadix=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t},NumberWrapper.parseInt=function(e,t){if(10==t){if(/^(\-|\+)?[0-9]+$/.test(e))return parseInt(e,t)}else if(16==t){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(e))return parseInt(e,t)}else{var r=parseInt(e,t);if(!isNaN(r))return r}throw new Error("Invalid integer literal when parsing "+e+" in base "+t)},Object.defineProperty(NumberWrapper,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),NumberWrapper.isNumeric=function(e){return!isNaN(e-parseFloat(e))},NumberWrapper.isNaN=function(e){return isNaN(e)},NumberWrapper.isInteger=function(e){return Number.isInteger(e)},NumberWrapper}(),c=function(){function TextAst(e,t,r){this.value=e,this.ngContentIndex=t,this.sourceSpan=r}return TextAst.prototype.visit=function(e,t){return e.visitText(this,t)},TextAst}(),u=function(){function BoundTextAst(e,t,r){this.value=e,this.ngContentIndex=t,this.sourceSpan=r}return BoundTextAst.prototype.visit=function(e,t){return e.visitBoundText(this,t)},BoundTextAst}(),p=function(){function AttrAst(e,t,r){this.name=e,this.value=t,this.sourceSpan=r}return AttrAst.prototype.visit=function(e,t){return e.visitAttr(this,t)},AttrAst}(),h=function(){function BoundElementPropertyAst(e,t,r,n,i,o){this.name=e,this.type=t,this.securityContext=r,this.value=n,this.unit=i,this.sourceSpan=o}return BoundElementPropertyAst.prototype.visit=function(e,t){return e.visitElementProperty(this,t)},BoundElementPropertyAst}(),d=function(){function BoundEventAst(e,t,r,n){this.name=e,this.target=t,this.handler=r,this.sourceSpan=n}return BoundEventAst.prototype.visit=function(e,t){return e.visitEvent(this,t)},Object.defineProperty(BoundEventAst.prototype,"fullName",{get:function(){return isPresent(this.target)?this.target+":"+this.name:this.name},enumerable:!0,configurable:!0}),BoundEventAst}(),f=function(){function ReferenceAst(e,t,r){this.name=e,this.value=t,this.sourceSpan=r}return ReferenceAst.prototype.visit=function(e,t){return e.visitReference(this,t)},ReferenceAst}(),m=function(){function VariableAst(e,t,r){this.name=e,this.value=t,this.sourceSpan=r}return VariableAst.prototype.visit=function(e,t){return e.visitVariable(this,t)},VariableAst}(),g=function(){function ElementAst(e,t,r,n,i,o,a,s,l,c,u){this.name=e,this.attrs=t,this.inputs=r,this.outputs=n,this.references=i,this.directives=o,this.providers=a,this.hasViewContainer=s,this.children=l,this.ngContentIndex=c,this.sourceSpan=u}return ElementAst.prototype.visit=function(e,t){return e.visitElement(this,t)},ElementAst}(),y=function(){function EmbeddedTemplateAst(e,t,r,n,i,o,a,s,l,c){this.attrs=e,this.outputs=t,this.references=r,this.variables=n,this.directives=i,this.providers=o,this.hasViewContainer=a,this.children=s,this.ngContentIndex=l,this.sourceSpan=c}return EmbeddedTemplateAst.prototype.visit=function(e,t){return e.visitEmbeddedTemplate(this,t)},EmbeddedTemplateAst}(),v=function(){function BoundDirectivePropertyAst(e,t,r,n){this.directiveName=e,this.templateName=t,this.value=r,this.sourceSpan=n}return BoundDirectivePropertyAst.prototype.visit=function(e,t){return e.visitDirectiveProperty(this,t)},BoundDirectivePropertyAst}(),b=function(){function DirectiveAst(e,t,r,n,i){this.directive=e,this.inputs=t,this.hostProperties=r,this.hostEvents=n,this.sourceSpan=i}return DirectiveAst.prototype.visit=function(e,t){return e.visitDirective(this,t)},DirectiveAst}(),_=function(){function ProviderAst(e,t,r,n,i,o,a){this.token=e,this.multiProvider=t,this.eager=r,this.providers=n,this.providerType=i,this.lifecycleHooks=o,this.sourceSpan=a}return ProviderAst.prototype.visit=function(e,t){return null},ProviderAst}();t.ProviderAstType,function(e){e[e.PublicService=0]="PublicService",e[e.PrivateService=1]="PrivateService",e[e.Component=2]="Component",e[e.Directive=3]="Directive",e[e.Builtin=4]="Builtin"}(t.ProviderAstType||(t.ProviderAstType={}));var w=function(){function NgContentAst(e,t,r){this.index=e,this.ngContentIndex=t,this.sourceSpan=r}return NgContentAst.prototype.visit=function(e,t){return e.visitNgContent(this,t)},NgContentAst}();t.PropertyBindingType,function(e){e[e.Property=0]="Property",e[e.Attribute=1]="Attribute",e[e.Class=2]="Class",e[e.Style=3]="Style",e[e.Animation=4]="Animation"}(t.PropertyBindingType||(t.PropertyBindingType={}));var x,S=i.Map,C=i.Set,k=function(){try{if(1===new S([[1,2]]).size)return function(e){return new S(e)}}catch(e){}return function(e){for(var t=new S,r=0;r<e.length;r++){var n=e[r];t.set(n[0],n[1])}return t}}(),E=function(){try{if(new S(new S))return function(e){return new S(e)}}catch(e){}return function(e){var t=new S;return e.forEach(function(e,r){t.set(r,e)}),t}}(),A=function(){return(new S).keys().next?function(e){for(var t,r=e.keys();!(t=r.next()).done;)e.set(t.value,null)}:function(e){e.forEach(function(t,r){e.set(r,null)})}}(),P=function(){try{if((new S).values().next)return function(e,t){return t?Array.from(e.values()):Array.from(e.keys())}}catch(e){}return function(e,t){var r=I.createFixedSize(e.size),n=0;return e.forEach(function(e,i){r[n]=t?e:i,n++}),r}}(),T=function(){function MapWrapper(){}return MapWrapper.clone=function(e){return E(e)},MapWrapper.createFromStringMap=function(e){var t=new S;for(var r in e)t.set(r,e[r]);return t},MapWrapper.toStringMap=function(e){var t={};return e.forEach(function(e,r){return t[r]=e}),t},MapWrapper.createFromPairs=function(e){return k(e)},MapWrapper.clearValues=function(e){A(e)},MapWrapper.iterable=function(e){return e},MapWrapper.keys=function(e){return P(e,!1)},MapWrapper.values=function(e){return P(e,!0)},MapWrapper}(),M=function(){function StringMapWrapper(){}return StringMapWrapper.create=function(){return{}},StringMapWrapper.contains=function(e,t){return e.hasOwnProperty(t)},StringMapWrapper.get=function(e,t){return e.hasOwnProperty(t)?e[t]:void 0},StringMapWrapper.set=function(e,t,r){e[t]=r},StringMapWrapper.keys=function(e){return Object.keys(e)},StringMapWrapper.values=function(e){return Object.keys(e).map(function(t){return e[t]})},StringMapWrapper.isEmpty=function(e){for(var t in e)return!1;return!0},StringMapWrapper.delete=function(e,t){delete e[t]},StringMapWrapper.forEach=function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];t(e[i],i)}},StringMapWrapper.merge=function(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];r[o]=e[o]}for(var a=0,s=Object.keys(t);a<s.length;a++){var o=s[a];r[o]=t[o]}return r},StringMapWrapper.equals=function(e,t){var r=Object.keys(e),n=Object.keys(t);if(r.length!=n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i];if(e[o]!==t[o])return!1}return!0},StringMapWrapper}(),I=function(){function ListWrapper(){}return ListWrapper.createFixedSize=function(e){return new Array(e)},ListWrapper.createGrowableSize=function(e){return new Array(e)},ListWrapper.clone=function(e){return e.slice(0)},ListWrapper.forEachWithIndex=function(e,t){for(var r=0;r<e.length;r++)t(e[r],r)},ListWrapper.first=function(e){return e?e[0]:null},ListWrapper.last=function(e){return e&&0!=e.length?e[e.length-1]:null},ListWrapper.indexOf=function(e,t,r){return void 0===r&&(r=0),e.indexOf(t,r)},ListWrapper.contains=function(e,t){return e.indexOf(t)!==-1},ListWrapper.reversed=function(e){var t=ListWrapper.clone(e);return t.reverse()},ListWrapper.concat=function(e,t){return e.concat(t)},ListWrapper.insert=function(e,t,r){e.splice(t,0,r)},ListWrapper.removeAt=function(e,t){var r=e[t];return e.splice(t,1),r},ListWrapper.removeAll=function(e,t){for(var r=0;r<t.length;++r){var n=e.indexOf(t[r]);e.splice(n,1)}},ListWrapper.remove=function(e,t){var r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)},ListWrapper.clear=function(e){e.length=0},ListWrapper.isEmpty=function(e){return 0==e.length},ListWrapper.fill=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=null),e.fill(t,r,null===n?e.length:n)},ListWrapper.equals=function(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},ListWrapper.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},ListWrapper.splice=function(e,t,r){return e.splice(t,r)},ListWrapper.sort=function(e,t){isPresent(t)?e.sort(t):e.sort()},ListWrapper.toString=function(e){return e.toString()},ListWrapper.toJSON=function(e){return JSON.stringify(e)},ListWrapper.maximum=function(e,t){if(0==e.length)return null;for(var r=null,n=-(1/0),i=0;i<e.length;i++){var o=e[i];if(!isBlank(o)){var a=t(o);a>n&&(r=o,n=a)}}return r},ListWrapper.flatten=function(e){var t=[];return _flattenArray(e,t),
t},ListWrapper.addAll=function(e,t){for(var r=0;r<t.length;r++)e.push(t[r])},ListWrapper}(),O=function(){var e=new C([1,2,3]);return 3===e.size?function(e){return new C(e)}:function(e){var t=new C(e);if(t.size!==e.length)for(var r=0;r<e.length;r++)t.add(e[r]);return t}}(),R=function(){function SetWrapper(){}return SetWrapper.createFromList=function(e){return O(e)},SetWrapper.has=function(e,t){return e.has(t)},SetWrapper.delete=function(e,t){e.delete(t)},SetWrapper}();!function(e){e[e.RAW_TEXT=0]="RAW_TEXT",e[e.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",e[e.PARSABLE_DATA=2]="PARSABLE_DATA"}(x||(x={}));var L,N={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",alefsym:"ℵ",Alpha:"Α",alpha:"α",amp:"&",and:"∧",ang:"∠",apos:"'",Aring:"Å",aring:"å",asymp:"≈",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",bdquo:"„",Beta:"Β",beta:"β",brvbar:"¦",bull:"•",cap:"∩",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",Chi:"Χ",chi:"χ",circ:"ˆ",clubs:"♣",cong:"≅",copy:"©",crarr:"↵",cup:"∪",curren:"¤",dagger:"†",Dagger:"‡",darr:"↓",dArr:"⇓",deg:"°",Delta:"Δ",delta:"δ",diams:"♦",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",empty:"∅",emsp:" ",ensp:" ",Epsilon:"Ε",epsilon:"ε",equiv:"≡",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",exist:"∃",fnof:"ƒ",forall:"∀",frac12:"½",frac14:"¼",frac34:"¾",frasl:"⁄",Gamma:"Γ",gamma:"γ",ge:"≥",gt:">",harr:"↔",hArr:"⇔",hearts:"♥",hellip:"…",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",image:"ℑ",infin:"∞","int":"∫",Iota:"Ι",iota:"ι",iquest:"¿",isin:"∈",Iuml:"Ï",iuml:"ï",Kappa:"Κ",kappa:"κ",Lambda:"Λ",lambda:"λ",lang:"⟨",laquo:"«",larr:"←",lArr:"⇐",lceil:"⌈",ldquo:"“",le:"≤",lfloor:"⌊",lowast:"∗",loz:"◊",lrm:"‎",lsaquo:"‹",lsquo:"‘",lt:"<",macr:"¯",mdash:"—",micro:"µ",middot:"·",minus:"−",Mu:"Μ",mu:"μ",nabla:"∇",nbsp:" ",ndash:"–",ne:"≠",ni:"∋",not:"¬",notin:"∉",nsub:"⊄",Ntilde:"Ñ",ntilde:"ñ",Nu:"Ν",nu:"ν",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",OElig:"Œ",oelig:"œ",Ograve:"Ò",ograve:"ò",oline:"‾",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",oplus:"⊕",or:"∨",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",otimes:"⊗",Ouml:"Ö",ouml:"ö",para:"¶",permil:"‰",perp:"⊥",Phi:"Φ",phi:"φ",Pi:"Π",pi:"π",piv:"ϖ",plusmn:"±",pound:"£",prime:"′",Prime:"″",prod:"∏",prop:"∝",Psi:"Ψ",psi:"ψ",quot:'"',radic:"√",rang:"⟩",raquo:"»",rarr:"→",rArr:"⇒",rceil:"⌉",rdquo:"”",real:"ℜ",reg:"®",rfloor:"⌋",Rho:"Ρ",rho:"ρ",rlm:"‏",rsaquo:"›",rsquo:"’",sbquo:"‚",Scaron:"Š",scaron:"š",sdot:"⋅",sect:"§",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sim:"∼",spades:"♠",sub:"⊂",sube:"⊆",sum:"∑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supe:"⊇",szlig:"ß",Tau:"Τ",tau:"τ",there4:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thinsp:" ",THORN:"Þ",thorn:"þ",tilde:"˜",times:"×",trade:"™",Uacute:"Ú",uacute:"ú",uarr:"↑",uArr:"⇑",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",Uuml:"Ü",uuml:"ü",weierp:"℘",Xi:"Ξ",xi:"ξ",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ",Yuml:"Ÿ",Zeta:"Ζ",zeta:"ζ",zwj:"‍",zwnj:"‌"},D=function(){function HtmlTagDefinition(e){var t=this,r=void 0===e?{}:e,n=r.closedByChildren,i=r.requiredParents,o=r.implicitNamespacePrefix,a=r.contentType,s=void 0===a?x.PARSABLE_DATA:a,l=r.closedByParent,c=void 0!==l&&l,u=r.isVoid,p=void 0!==u&&u,h=r.ignoreFirstLf,d=void 0!==h&&h;this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,n&&n.length>0&&n.forEach(function(e){return t.closedByChildren[e]=!0}),this.isVoid=p,this.closedByParent=c||p,i&&i.length>0&&(this.requiredParents={},this.parentToAdd=i[0],i.forEach(function(e){return t.requiredParents[e]=!0})),this.implicitNamespacePrefix=o,this.contentType=s,this.ignoreFirstLf=d}return HtmlTagDefinition.prototype.requireExtraParent=function(e){if(!this.requiredParents)return!1;if(!e)return!0;var t=e.toLowerCase();return 1!=this.requiredParents[t]&&"template"!=t},HtmlTagDefinition.prototype.isClosedByChild=function(e){return this.isVoid||e.toLowerCase()in this.closedByChildren},HtmlTagDefinition}(),B={base:new D({isVoid:!0}),meta:new D({isVoid:!0}),area:new D({isVoid:!0}),embed:new D({isVoid:!0}),link:new D({isVoid:!0}),img:new D({isVoid:!0}),input:new D({isVoid:!0}),param:new D({isVoid:!0}),hr:new D({isVoid:!0}),br:new D({isVoid:!0}),source:new D({isVoid:!0}),track:new D({isVoid:!0}),wbr:new D({isVoid:!0}),p:new D({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new D({closedByChildren:["tbody","tfoot"]}),tbody:new D({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new D({closedByChildren:["tbody"],closedByParent:!0}),tr:new D({closedByChildren:["tr"],requiredParents:["tbody","tfoot","thead"],closedByParent:!0}),td:new D({closedByChildren:["td","th"],closedByParent:!0}),th:new D({closedByChildren:["td","th"],closedByParent:!0}),col:new D({requiredParents:["colgroup"],isVoid:!0}),svg:new D({implicitNamespacePrefix:"svg"}),math:new D({implicitNamespacePrefix:"math"}),li:new D({closedByChildren:["li"],closedByParent:!0}),dt:new D({closedByChildren:["dt","dd"]}),dd:new D({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new D({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new D({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new D({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new D({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new D({closedByChildren:["optgroup"],closedByParent:!0}),option:new D({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new D({ignoreFirstLf:!0}),listing:new D({ignoreFirstLf:!0}),style:new D({contentType:x.RAW_TEXT}),script:new D({contentType:x.RAW_TEXT}),title:new D({contentType:x.ESCAPABLE_RAW_TEXT}),textarea:new D({contentType:x.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})},V=new D,F="",j=new RegExp("(\\:not\\()|([-\\w]+)|(?:\\.([-\\w]+))|(?:\\[([-\\w*]+)(?:=([^\\]]*))?\\])|(\\))|(\\s*,\\s*)","g"),U=function(){function CssSelector(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}return CssSelector.parse=function(e){var t,r=[],n=function(e,t){t.notSelectors.length>0&&isBlank(t.element)&&I.isEmpty(t.classNames)&&I.isEmpty(t.attrs)&&(t.element="*"),e.push(t)},i=new CssSelector,o=i,a=!1;for(j.lastIndex=0;isPresent(t=j.exec(e));){if(isPresent(t[1])){if(a)throw new Error("Nesting :not is not allowed in a selector");a=!0,o=new CssSelector,i.notSelectors.push(o)}if(isPresent(t[2])&&o.setElement(t[2]),isPresent(t[3])&&o.addClassName(t[3]),isPresent(t[4])&&o.addAttribute(t[4],t[5]),isPresent(t[6])&&(a=!1,o=i),isPresent(t[7])){if(a)throw new Error("Multiple selectors in :not are not supported");n(r,i),i=o=new CssSelector}}return n(r,i),r},CssSelector.prototype.isElementSelector=function(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length},CssSelector.prototype.hasElementSelector=function(){return!!this.element},CssSelector.prototype.setElement=function(e){void 0===e&&(e=null),this.element=e},CssSelector.prototype.getMatchingElementTemplate=function(){for(var e=this.element||"div",t=this.classNames.length>0?' class="'+this.classNames.join(" ")+'"':"",r="",n=0;n<this.attrs.length;n+=2){var i=this.attrs[n],o=""!==this.attrs[n+1]?'="'+this.attrs[n+1]+'"':"";r+=" "+i+o}return getHtmlTagDefinition(e).isVoid?"<"+e+t+r+"/>":"<"+e+t+r+"></"+e+">"},CssSelector.prototype.addAttribute=function(e,t){void 0===t&&(t=F),this.attrs.push(e),t=isPresent(t)?t.toLowerCase():F,this.attrs.push(t)},CssSelector.prototype.addClassName=function(e){this.classNames.push(e.toLowerCase())},CssSelector.prototype.toString=function(){var e="";if(isPresent(this.element)&&(e+=this.element),isPresent(this.classNames))for(var t=0;t<this.classNames.length;t++)e+="."+this.classNames[t];if(isPresent(this.attrs))for(var t=0;t<this.attrs.length;){var r=this.attrs[t++],n=this.attrs[t++];e+="["+r,n.length>0&&(e+="="+n),e+="]"}return this.notSelectors.forEach(function(t){return e+=":not("+t+")"}),e},CssSelector}(),z=function(){function SelectorMatcher(){this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}return SelectorMatcher.createNotMatcher=function(e){var t=new SelectorMatcher;return t.addSelectables(e,null),t},SelectorMatcher.prototype.addSelectables=function(e,t){var r=null;e.length>1&&(r=new W(e),this._listContexts.push(r));for(var n=0;n<e.length;n++)this._addSelectable(e[n],t,r)},SelectorMatcher.prototype._addSelectable=function(e,t,r){var n=this,i=e.element,o=e.classNames,a=e.attrs,s=new H(e,t,r);if(isPresent(i)){var l=0===a.length&&0===o.length;l?this._addTerminal(n._elementMap,i,s):n=this._addPartial(n._elementPartialMap,i)}if(isPresent(o))for(var c=0;c<o.length;c++){var l=0===a.length&&c===o.length-1,u=o[c];l?this._addTerminal(n._classMap,u,s):n=this._addPartial(n._classPartialMap,u)}if(isPresent(a))for(var c=0;c<a.length;){var l=c===a.length-2,p=a[c++],h=a[c++];if(l){var d=n._attrValueMap,f=d.get(p);isBlank(f)&&(f=new Map,d.set(p,f)),this._addTerminal(f,h,s)}else{var m=n._attrValuePartialMap,g=m.get(p);isBlank(g)&&(g=new Map,m.set(p,g)),n=this._addPartial(g,h)}}},SelectorMatcher.prototype._addTerminal=function(e,t,r){var n=e.get(t);isBlank(n)&&(n=[],e.set(t,n)),n.push(r)},SelectorMatcher.prototype._addPartial=function(e,t){var r=e.get(t);return isBlank(r)&&(r=new SelectorMatcher,e.set(t,r)),r},SelectorMatcher.prototype.match=function(e,t){for(var r=!1,n=e.element,i=e.classNames,o=e.attrs,s=0;s<this._listContexts.length;s++)this._listContexts[s].alreadyMatched=!1;if(r=this._matchTerminal(this._elementMap,n,e,t)||r,r=this._matchPartial(this._elementPartialMap,n,e,t)||r,isPresent(i))for(var l=0;l<i.length;l++){var c=i[l];r=this._matchTerminal(this._classMap,c,e,t)||r,r=this._matchPartial(this._classPartialMap,c,e,t)||r}if(isPresent(o))for(var l=0;l<o.length;){var u=o[l++],p=o[l++],h=this._attrValueMap.get(u);a.equals(p,F)||(r=this._matchTerminal(h,F,e,t)||r),r=this._matchTerminal(h,p,e,t)||r;var d=this._attrValuePartialMap.get(u);a.equals(p,F)||(r=this._matchPartial(d,F,e,t)||r),r=this._matchPartial(d,p,e,t)||r}return r},SelectorMatcher.prototype._matchTerminal=function(e,t,r,n){if(isBlank(e)||isBlank(t))return!1;var i=e.get(t),o=e.get("*");if(isPresent(o)&&(i=i.concat(o)),isBlank(i))return!1;for(var a,s=!1,l=0;l<i.length;l++)a=i[l],s=a.finalize(r,n)||s;return s},SelectorMatcher.prototype._matchPartial=function(e,t,r,n){if(isBlank(e)||isBlank(t))return!1;var i=e.get(t);return!isBlank(i)&&i.match(r,n)},SelectorMatcher}(),W=function(){function SelectorListContext(e){this.selectors=e,this.alreadyMatched=!1}return SelectorListContext}(),H=function(){function SelectorContext(e,t,r){this.selector=e,this.cbContext=t,this.listContext=r,this.notSelectors=e.notSelectors}return SelectorContext.prototype.finalize=function(e,t){var r=!0;if(this.notSelectors.length>0&&(isBlank(this.listContext)||!this.listContext.alreadyMatched)){var n=z.createNotMatcher(this.notSelectors);r=!n.match(e,null)}return r&&isPresent(t)&&(isBlank(this.listContext)||!this.listContext.alreadyMatched)&&(isPresent(this.listContext)&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),r},SelectorContext}(),q=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)};!function(e){e[e.Const=0]="Const"}(L||(L={}));var G,K=function(){function Type(e){void 0===e&&(e=null),this.modifiers=e,isBlank(e)&&(this.modifiers=[])}return Type.prototype.hasModifier=function(e){return this.modifiers.indexOf(e)!==-1},Type}();!function(e){e[e.Dynamic=0]="Dynamic",e[e.Bool=1]="Bool",e[e.String=2]="String",e[e.Int=3]="Int",e[e.Number=4]="Number",e[e.Function=5]="Function"}(G||(G={}));var $,Q=function(e){function BuiltinType(t,r){void 0===r&&(r=null),e.call(this,r),this.name=t}return q(BuiltinType,e),BuiltinType.prototype.visitType=function(e,t){return e.visitBuiltintType(this,t)},BuiltinType}(K),Y=function(e){function ExternalType(t,r,n){void 0===r&&(r=null),void 0===n&&(n=null),e.call(this,n),this.value=t,this.typeParams=r}return q(ExternalType,e),ExternalType.prototype.visitType=function(e,t){return e.visitExternalType(this,t)},ExternalType}(K),X=function(e){function ArrayType(t,r){void 0===r&&(r=null),e.call(this,r),this.of=t}return q(ArrayType,e),ArrayType.prototype.visitType=function(e,t){return e.visitArrayType(this,t)},ArrayType}(K),Z=function(e){function MapType(t,r){void 0===r&&(r=null),e.call(this,r),this.valueType=t}return q(MapType,e),MapType.prototype.visitType=function(e,t){return e.visitMapType(this,t)},MapType}(K),J=new Q(G.Dynamic),ee=new Q(G.Bool),te=(new Q(G.Int),new Q(G.Number)),re=new Q(G.String),ne=new Q(G.Function);!function(e){e[e.Equals=0]="Equals",e[e.NotEquals=1]="NotEquals",e[e.Identical=2]="Identical",e[e.NotIdentical=3]="NotIdentical",e[e.Minus=4]="Minus",e[e.Plus=5]="Plus",e[e.Divide=6]="Divide",e[e.Multiply=7]="Multiply",e[e.Modulo=8]="Modulo",e[e.And=9]="And",e[e.Or=10]="Or",e[e.Lower=11]="Lower",e[e.LowerEquals=12]="LowerEquals",e[e.Bigger=13]="Bigger",e[e.BiggerEquals=14]="BiggerEquals"}($||($={}));var ie,oe=function(){function Expression(e){this.type=e}return Expression.prototype.prop=function(e){return new Se(this,e)},Expression.prototype.key=function(e,t){return void 0===t&&(t=null),new Ce(this,e,t)},Expression.prototype.callMethod=function(e,t){return new he(this,e,t)},Expression.prototype.callFn=function(e){return new de(this,e)},Expression.prototype.instantiate=function(e,t){return void 0===t&&(t=null),new fe(this,e,t)},Expression.prototype.conditional=function(e,t){return void 0===t&&(t=null),new ye(this,e,t)},Expression.prototype.equals=function(e){return new xe($.Equals,this,e)},Expression.prototype.notEquals=function(e){return new xe($.NotEquals,this,e)},Expression.prototype.identical=function(e){return new xe($.Identical,this,e)},Expression.prototype.notIdentical=function(e){return new xe($.NotIdentical,this,e)},Expression.prototype.minus=function(e){return new xe($.Minus,this,e)},Expression.prototype.plus=function(e){return new xe($.Plus,this,e)},Expression.prototype.divide=function(e){return new xe($.Divide,this,e)},Expression.prototype.multiply=function(e){return new xe($.Multiply,this,e)},Expression.prototype.modulo=function(e){return new xe($.Modulo,this,e)},Expression.prototype.and=function(e){return new xe($.And,this,e)},Expression.prototype.or=function(e){return new xe($.Or,this,e)},Expression.prototype.lower=function(e){return new xe($.Lower,this,e)},Expression.prototype.lowerEquals=function(e){return new xe($.LowerEquals,this,e)},Expression.prototype.bigger=function(e){return new xe($.Bigger,this,e)},Expression.prototype.biggerEquals=function(e){return new xe($.BiggerEquals,this,e)},Expression.prototype.isBlank=function(){return this.equals(Te)},Expression.prototype.cast=function(e){return new be(this,e)},Expression.prototype.toStmt=function(){return new Le(this)},Expression}();!function(e){e[e.This=0]="This",e[e.Super=1]="Super",e[e.CatchError=2]="CatchError",e[e.CatchStack=3]="CatchStack"}(ie||(ie={}));var ae,se=function(e){function ReadVarExpr(t,r){void 0===r&&(r=null),e.call(this,r),isString(t)?(this.name=t,this.builtin=null):(this.name=null,this.builtin=t)}return q(ReadVarExpr,e),ReadVarExpr.prototype.visitExpression=function(e,t){return e.visitReadVarExpr(this,t)},ReadVarExpr.prototype.set=function(e){return new le(this.name,e)},ReadVarExpr}(oe),le=function(e){function WriteVarExpr(t,r,n){void 0===n&&(n=null),e.call(this,isPresent(n)?n:r.type),this.name=t,this.value=r}return q(WriteVarExpr,e),WriteVarExpr.prototype.visitExpression=function(e,t){return e.visitWriteVarExpr(this,t)},WriteVarExpr.prototype.toDeclStmt=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=null),new Oe(this.name,this.value,e,t)},WriteVarExpr}(oe),ce=function(e){function WriteKeyExpr(t,r,n,i){void 0===i&&(i=null),e.call(this,isPresent(i)?i:n.type),this.receiver=t,this.index=r,this.value=n}return q(WriteKeyExpr,e),WriteKeyExpr.prototype.visitExpression=function(e,t){return e.visitWriteKeyExpr(this,t)},WriteKeyExpr}(oe),ue=function(e){function WritePropExpr(t,r,n,i){void 0===i&&(i=null),e.call(this,isPresent(i)?i:n.type),this.receiver=t,this.name=r,this.value=n}return q(WritePropExpr,e),WritePropExpr.prototype.visitExpression=function(e,t){return e.visitWritePropExpr(this,t)},WritePropExpr}(oe);!function(e){e[e.ConcatArray=0]="ConcatArray",e[e.SubscribeObservable=1]="SubscribeObservable",e[e.Bind=2]="Bind"}(ae||(ae={}));var pe,he=function(e){function InvokeMethodExpr(t,r,n,i){void 0===i&&(i=null),e.call(this,i),this.receiver=t,this.args=n,isString(r)?(this.name=r,this.builtin=null):(this.name=null,this.builtin=r)}return q(InvokeMethodExpr,e),InvokeMethodExpr.prototype.visitExpression=function(e,t){return e.visitInvokeMethodExpr(this,t)},InvokeMethodExpr}(oe),de=function(e){function InvokeFunctionExpr(t,r,n){void 0===n&&(n=null),e.call(this,n),this.fn=t,this.args=r}return q(InvokeFunctionExpr,e),InvokeFunctionExpr.prototype.visitExpression=function(e,t){return e.visitInvokeFunctionExpr(this,t)},InvokeFunctionExpr}(oe),fe=function(e){function InstantiateExpr(t,r,n){e.call(this,n),this.classExpr=t,this.args=r}return q(InstantiateExpr,e),InstantiateExpr.prototype.visitExpression=function(e,t){return e.visitInstantiateExpr(this,t)},InstantiateExpr}(oe),me=function(e){function LiteralExpr(t,r){void 0===r&&(r=null),e.call(this,r),this.value=t}return q(LiteralExpr,e),LiteralExpr.prototype.visitExpression=function(e,t){return e.visitLiteralExpr(this,t)},LiteralExpr}(oe),ge=function(e){function ExternalExpr(t,r,n){void 0===r&&(r=null),void 0===n&&(n=null),e.call(this,r),this.value=t,this.typeParams=n}return q(ExternalExpr,e),ExternalExpr.prototype.visitExpression=function(e,t){return e.visitExternalExpr(this,t)},ExternalExpr}(oe),ye=function(e){function ConditionalExpr(t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null),e.call(this,isPresent(i)?i:r.type),this.condition=t,this.falseCase=n,this.trueCase=r}return q(ConditionalExpr,e),ConditionalExpr.prototype.visitExpression=function(e,t){return e.visitConditionalExpr(this,t)},ConditionalExpr}(oe),ve=function(e){function NotExpr(t){e.call(this,ee),this.condition=t}return q(NotExpr,e),NotExpr.prototype.visitExpression=function(e,t){return e.visitNotExpr(this,t)},NotExpr}(oe),be=function(e){function CastExpr(t,r){e.call(this,r),this.value=t}return q(CastExpr,e),CastExpr.prototype.visitExpression=function(e,t){return e.visitCastExpr(this,t)},CastExpr}(oe),_e=function(){function FnParam(e,t){void 0===t&&(t=null),this.name=e,this.type=t}return FnParam}(),we=function(e){function FunctionExpr(t,r,n){void 0===n&&(n=null),e.call(this,n),this.params=t,this.statements=r}return q(FunctionExpr,e),FunctionExpr.prototype.visitExpression=function(e,t){return e.visitFunctionExpr(this,t)},FunctionExpr.prototype.toDeclStmt=function(e,t){return void 0===t&&(t=null),new Re(e,this.params,this.statements,this.type,t)},FunctionExpr}(oe),xe=function(e){function BinaryOperatorExpr(t,r,n,i){void 0===i&&(i=null),e.call(this,isPresent(i)?i:r.type),this.operator=t,this.rhs=n,this.lhs=r}return q(BinaryOperatorExpr,e),BinaryOperatorExpr.prototype.visitExpression=function(e,t){return e.visitBinaryOperatorExpr(this,t)},BinaryOperatorExpr}(oe),Se=function(e){function ReadPropExpr(t,r,n){void 0===n&&(n=null),e.call(this,n),this.receiver=t,this.name=r}return q(ReadPropExpr,e),ReadPropExpr.prototype.visitExpression=function(e,t){return e.visitReadPropExpr(this,t)},ReadPropExpr.prototype.set=function(e){return new ue(this.receiver,this.name,e)},ReadPropExpr}(oe),Ce=function(e){function ReadKeyExpr(t,r,n){void 0===n&&(n=null),e.call(this,n),this.receiver=t,this.index=r}return q(ReadKeyExpr,e),ReadKeyExpr.prototype.visitExpression=function(e,t){return e.visitReadKeyExpr(this,t)},ReadKeyExpr.prototype.set=function(e){return new ce(this.receiver,this.index,e)},ReadKeyExpr}(oe),ke=function(e){function LiteralArrayExpr(t,r){void 0===r&&(r=null),e.call(this,r),this.entries=t}return q(LiteralArrayExpr,e),LiteralArrayExpr.prototype.visitExpression=function(e,t){return e.visitLiteralArrayExpr(this,t)},LiteralArrayExpr}(oe),Ee=function(e){function LiteralMapExpr(t,r){void 0===r&&(r=null),e.call(this,r),this.entries=t,this.valueType=null,isPresent(r)&&(this.valueType=r.valueType)}return q(LiteralMapExpr,e),LiteralMapExpr.prototype.visitExpression=function(e,t){return e.visitLiteralMapExpr(this,t)},LiteralMapExpr}(oe),Ae=new se(ie.This),Pe=new se(ie.Super),Te=(new se(ie.CatchError),new se(ie.CatchStack),new me(null,null));!function(e){e[e.Final=0]="Final",e[e.Private=1]="Private"}(pe||(pe={}));var Me,Ie=function(){function Statement(e){void 0===e&&(e=null),this.modifiers=e,isBlank(e)&&(this.modifiers=[])}return Statement.prototype.hasModifier=function(e){return this.modifiers.indexOf(e)!==-1},Statement}(),Oe=function(e){function DeclareVarStmt(t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null),e.call(this,i),this.name=t,this.value=r,this.type=isPresent(n)?n:r.type}return q(DeclareVarStmt,e),DeclareVarStmt.prototype.visitStatement=function(e,t){return e.visitDeclareVarStmt(this,t)},DeclareVarStmt}(Ie),Re=function(e){function DeclareFunctionStmt(t,r,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),e.call(this,o),this.name=t,this.params=r,this.statements=n,this.type=i}return q(DeclareFunctionStmt,e),DeclareFunctionStmt.prototype.visitStatement=function(e,t){return e.visitDeclareFunctionStmt(this,t)},DeclareFunctionStmt}(Ie),Le=function(e){function ExpressionStatement(t){e.call(this),this.expr=t}return q(ExpressionStatement,e),ExpressionStatement.prototype.visitStatement=function(e,t){return e.visitExpressionStmt(this,t)},ExpressionStatement}(Ie),Ne=function(e){function ReturnStatement(t){e.call(this),this.value=t}return q(ReturnStatement,e),ReturnStatement.prototype.visitStatement=function(e,t){return e.visitReturnStmt(this,t)},ReturnStatement}(Ie),De=function(){function AbstractClassPart(e,t){void 0===e&&(e=null),this.type=e,this.modifiers=t,isBlank(t)&&(this.modifiers=[])}return AbstractClassPart.prototype.hasModifier=function(e){return this.modifiers.indexOf(e)!==-1},AbstractClassPart}(),Be=function(e){function ClassField(t,r,n){void 0===r&&(r=null),void 0===n&&(n=null),e.call(this,r,n),this.name=t}return q(ClassField,e),ClassField}(De),Ve=function(e){function ClassMethod(t,r,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),e.call(this,i,o),this.name=t,this.params=r,this.body=n}return q(ClassMethod,e),ClassMethod}(De),Fe=function(e){function ClassGetter(t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null),e.call(this,n,i),this.name=t,this.body=r}return q(ClassGetter,e),ClassGetter}(De),je=function(e){function ClassStmt(t,r,n,i,o,a,s){void 0===s&&(s=null),e.call(this,s),this.name=t,this.parent=r,this.fields=n,this.getters=i,this.constructorMethod=o,this.methods=a}return q(ClassStmt,e),ClassStmt.prototype.visitStatement=function(e,t){return e.visitDeclareClassStmt(this,t)},ClassStmt}(Ie),Ue=function(e){function IfStmt(t,r,n){void 0===n&&(n=[]),e.call(this),this.condition=t,this.trueCase=r,this.falseCase=n}return q(IfStmt,e),IfStmt.prototype.visitStatement=function(e,t){return e.visitIfStmt(this,t)},IfStmt}(Ie),ze=(function(e){function CommentStmt(t){e.call(this),this.comment=t}return q(CommentStmt,e),CommentStmt.prototype.visitStatement=function(e,t){return e.visitCommentStmt(this,t)},CommentStmt}(Ie),function(e){function TryCatchStmt(t,r){e.call(this),this.bodyStmts=t,this.catchStmts=r}return q(TryCatchStmt,e),TryCatchStmt.prototype.visitStatement=function(e,t){return e.visitTryCatchStmt(this,t)},TryCatchStmt}(Ie)),We=function(e){function ThrowStmt(t){e.call(this),this.error=t}return q(ThrowStmt,e),ThrowStmt.prototype.visitStatement=function(e,t){return e.visitThrowStmt(this,t)},ThrowStmt}(Ie),He=function(){function ExpressionTransformer(){}return ExpressionTransformer.prototype.visitReadVarExpr=function(e,t){return e},ExpressionTransformer.prototype.visitWriteVarExpr=function(e,t){return new le(e.name,e.value.visitExpression(this,t))},ExpressionTransformer.prototype.visitWriteKeyExpr=function(e,t){return new ce(e.receiver.visitExpression(this,t),e.index.visitExpression(this,t),e.value.visitExpression(this,t))},ExpressionTransformer.prototype.visitWritePropExpr=function(e,t){return new ue(e.receiver.visitExpression(this,t),e.name,e.value.visitExpression(this,t))},ExpressionTransformer.prototype.visitInvokeMethodExpr=function(e,t){var r=isPresent(e.builtin)?e.builtin:e.name;return new he(e.receiver.visitExpression(this,t),r,this.visitAllExpressions(e.args,t),e.type)},ExpressionTransformer.prototype.visitInvokeFunctionExpr=function(e,t){return new de(e.fn.visitExpression(this,t),this.visitAllExpressions(e.args,t),e.type)},ExpressionTransformer.prototype.visitInstantiateExpr=function(e,t){return new fe(e.classExpr.visitExpression(this,t),this.visitAllExpressions(e.args,t),e.type)},ExpressionTransformer.prototype.visitLiteralExpr=function(e,t){return e},ExpressionTransformer.prototype.visitExternalExpr=function(e,t){return e},ExpressionTransformer.prototype.visitConditionalExpr=function(e,t){return new ye(e.condition.visitExpression(this,t),e.trueCase.visitExpression(this,t),e.falseCase.visitExpression(this,t))},ExpressionTransformer.prototype.visitNotExpr=function(e,t){return new ve(e.condition.visitExpression(this,t))},ExpressionTransformer.prototype.visitCastExpr=function(e,t){return new be(e.value.visitExpression(this,t),t)},ExpressionTransformer.prototype.visitFunctionExpr=function(e,t){return e},ExpressionTransformer.prototype.visitBinaryOperatorExpr=function(e,t){return new xe(e.operator,e.lhs.visitExpression(this,t),e.rhs.visitExpression(this,t),e.type)},ExpressionTransformer.prototype.visitReadPropExpr=function(e,t){return new Se(e.receiver.visitExpression(this,t),e.name,e.type)},ExpressionTransformer.prototype.visitReadKeyExpr=function(e,t){return new Ce(e.receiver.visitExpression(this,t),e.index.visitExpression(this,t),e.type)},ExpressionTransformer.prototype.visitLiteralArrayExpr=function(e,t){return new ke(this.visitAllExpressions(e.entries,t))},ExpressionTransformer.prototype.visitLiteralMapExpr=function(e,t){var r=this;return new Ee(e.entries.map(function(e){return[e[0],e[1].visitExpression(r,t)]}))},ExpressionTransformer.prototype.visitAllExpressions=function(e,t){var r=this;return e.map(function(e){return e.visitExpression(r,t)})},ExpressionTransformer.prototype.visitDeclareVarStmt=function(e,t){return new Oe(e.name,e.value.visitExpression(this,t),e.type,e.modifiers)},ExpressionTransformer.prototype.visitDeclareFunctionStmt=function(e,t){return e},ExpressionTransformer.prototype.visitExpressionStmt=function(e,t){return new Le(e.expr.visitExpression(this,t))},ExpressionTransformer.prototype.visitReturnStmt=function(e,t){return new Ne(e.value.visitExpression(this,t))},ExpressionTransformer.prototype.visitDeclareClassStmt=function(e,t){return e},ExpressionTransformer.prototype.visitIfStmt=function(e,t){return new Ue(e.condition.visitExpression(this,t),this.visitAllStatements(e.trueCase,t),this.visitAllStatements(e.falseCase,t))},ExpressionTransformer.prototype.visitTryCatchStmt=function(e,t){return new ze(this.visitAllStatements(e.bodyStmts,t),this.visitAllStatements(e.catchStmts,t))},ExpressionTransformer.prototype.visitThrowStmt=function(e,t){return new We(e.error.visitExpression(this,t))},ExpressionTransformer.prototype.visitCommentStmt=function(e,t){return e},ExpressionTransformer.prototype.visitAllStatements=function(e,t){var r=this;return e.map(function(e){return e.visitStatement(r,t)})},ExpressionTransformer}(),qe=function(){function RecursiveExpressionVisitor(){}return RecursiveExpressionVisitor.prototype.visitReadVarExpr=function(e,t){return e},RecursiveExpressionVisitor.prototype.visitWriteVarExpr=function(e,t){return e.value.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitWriteKeyExpr=function(e,t){return e.receiver.visitExpression(this,t),e.index.visitExpression(this,t),e.value.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitWritePropExpr=function(e,t){return e.receiver.visitExpression(this,t),e.value.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitInvokeMethodExpr=function(e,t){return e.receiver.visitExpression(this,t),this.visitAllExpressions(e.args,t),e},RecursiveExpressionVisitor.prototype.visitInvokeFunctionExpr=function(e,t){return e.fn.visitExpression(this,t),this.visitAllExpressions(e.args,t),e},RecursiveExpressionVisitor.prototype.visitInstantiateExpr=function(e,t){return e.classExpr.visitExpression(this,t),this.visitAllExpressions(e.args,t),e},RecursiveExpressionVisitor.prototype.visitLiteralExpr=function(e,t){return e},RecursiveExpressionVisitor.prototype.visitExternalExpr=function(e,t){return e},RecursiveExpressionVisitor.prototype.visitConditionalExpr=function(e,t){return e.condition.visitExpression(this,t),e.trueCase.visitExpression(this,t),e.falseCase.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitNotExpr=function(e,t){return e.condition.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitCastExpr=function(e,t){return e.value.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitFunctionExpr=function(e,t){return e},RecursiveExpressionVisitor.prototype.visitBinaryOperatorExpr=function(e,t){return e.lhs.visitExpression(this,t),e.rhs.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitReadPropExpr=function(e,t){return e.receiver.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitReadKeyExpr=function(e,t){return e.receiver.visitExpression(this,t),e.index.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitLiteralArrayExpr=function(e,t){return this.visitAllExpressions(e.entries,t),e},RecursiveExpressionVisitor.prototype.visitLiteralMapExpr=function(e,t){var r=this;return e.entries.forEach(function(e){return e[1].visitExpression(r,t)}),e},RecursiveExpressionVisitor.prototype.visitAllExpressions=function(e,t){var r=this;e.forEach(function(e){return e.visitExpression(r,t)})},RecursiveExpressionVisitor.prototype.visitDeclareVarStmt=function(e,t){return e.value.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitDeclareFunctionStmt=function(e,t){return e},RecursiveExpressionVisitor.prototype.visitExpressionStmt=function(e,t){return e.expr.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitReturnStmt=function(e,t){return e.value.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitDeclareClassStmt=function(e,t){return e},RecursiveExpressionVisitor.prototype.visitIfStmt=function(e,t){return e.condition.visitExpression(this,t),this.visitAllStatements(e.trueCase,t),this.visitAllStatements(e.falseCase,t),e},RecursiveExpressionVisitor.prototype.visitTryCatchStmt=function(e,t){return this.visitAllStatements(e.bodyStmts,t),this.visitAllStatements(e.catchStmts,t),e},RecursiveExpressionVisitor.prototype.visitThrowStmt=function(e,t){return e.error.visitExpression(this,t),e},RecursiveExpressionVisitor.prototype.visitCommentStmt=function(e,t){return e},RecursiveExpressionVisitor.prototype.visitAllStatements=function(e,t){var r=this;e.forEach(function(e){return e.visitStatement(r,t)})},RecursiveExpressionVisitor}(),Ge=function(e){function _ReplaceVariableTransformer(t,r){e.call(this),this._varName=t,this._newValue=r}return q(_ReplaceVariableTransformer,e),_ReplaceVariableTransformer.prototype.visitReadVarExpr=function(e,t){return e.name==this._varName?this._newValue:e},_ReplaceVariableTransformer}(He),Ke=function(e){function _VariableFinder(){e.apply(this,arguments),this.varNames=new Set}return q(_VariableFinder,e),_VariableFinder.prototype.visitReadVarExpr=function(e,t){
return this.varNames.add(e.name),null},_VariableFinder}(qe),$e="",Qe=/([A-Z])/g,Ye=function(){function ValueTransformer(){}return ValueTransformer.prototype.visitArray=function(e,t){var r=this;return e.map(function(e){return visitValue(e,r,t)})},ValueTransformer.prototype.visitStringMap=function(e,t){var r=this,n={};return M.forEach(e,function(e,i){n[i]=visitValue(e,r,t)}),n},ValueTransformer.prototype.visitPrimitive=function(e,t){return e},ValueTransformer.prototype.visitOther=function(e,t){return e},ValueTransformer}(),Xe=function(){function SyncAsyncResult(e,t){void 0===t&&(t=null),this.syncResult=e,this.asyncResult=t,t||(this.asyncResult=Promise.resolve(e))}return SyncAsyncResult}(),Ze=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Je=/^(?:(?:\[([^\]]+)\])|(?:\(([^\)]+)\)))|(\@[-\w]+)$/,et=function(){function CompileMetadataWithIdentifier(){}return Object.defineProperty(CompileMetadataWithIdentifier.prototype,"identifier",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),CompileMetadataWithIdentifier}(),tt=function(){function CompileAnimationEntryMetadata(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.name=e,this.definitions=t}return CompileAnimationEntryMetadata}(),rt=function(){function CompileAnimationStateMetadata(){}return CompileAnimationStateMetadata}(),nt=function(e){function CompileAnimationStateDeclarationMetadata(t,r){e.call(this),this.stateNameExpr=t,this.styles=r}return Ze(CompileAnimationStateDeclarationMetadata,e),CompileAnimationStateDeclarationMetadata}(rt),it=function(e){function CompileAnimationStateTransitionMetadata(t,r){e.call(this),this.stateChangeExpr=t,this.steps=r}return Ze(CompileAnimationStateTransitionMetadata,e),CompileAnimationStateTransitionMetadata}(rt),ot=function(){function CompileAnimationMetadata(){}return CompileAnimationMetadata}(),at=function(e){function CompileAnimationKeyframesSequenceMetadata(t){void 0===t&&(t=[]),e.call(this),this.steps=t}return Ze(CompileAnimationKeyframesSequenceMetadata,e),CompileAnimationKeyframesSequenceMetadata}(ot),st=function(e){function CompileAnimationStyleMetadata(t,r){void 0===r&&(r=null),e.call(this),this.offset=t,this.styles=r}return Ze(CompileAnimationStyleMetadata,e),CompileAnimationStyleMetadata}(ot),lt=function(e){function CompileAnimationAnimateMetadata(t,r){void 0===t&&(t=0),void 0===r&&(r=null),e.call(this),this.timings=t,this.styles=r}return Ze(CompileAnimationAnimateMetadata,e),CompileAnimationAnimateMetadata}(ot),ct=function(e){function CompileAnimationWithStepsMetadata(t){void 0===t&&(t=null),e.call(this),this.steps=t}return Ze(CompileAnimationWithStepsMetadata,e),CompileAnimationWithStepsMetadata}(ot),ut=function(e){function CompileAnimationSequenceMetadata(t){void 0===t&&(t=null),e.call(this,t)}return Ze(CompileAnimationSequenceMetadata,e),CompileAnimationSequenceMetadata}(ct),pt=function(e){function CompileAnimationGroupMetadata(t){void 0===t&&(t=null),e.call(this,t)}return Ze(CompileAnimationGroupMetadata,e),CompileAnimationGroupMetadata}(ct),ht=function(){function CompileIdentifierMetadata(e){var t=void 0===e?{}:e,r=t.reference,n=t.name,i=t.moduleUrl,o=t.prefix,a=t.value;this.reference=r,this.name=n,this.prefix=o,this.moduleUrl=i,this.value=a}return Object.defineProperty(CompileIdentifierMetadata.prototype,"identifier",{get:function(){return this},enumerable:!0,configurable:!0}),CompileIdentifierMetadata}(),dt=function(){function CompileDiDependencyMetadata(e){var t=void 0===e?{}:e,r=t.isAttribute,n=t.isSelf,i=t.isHost,o=t.isSkipSelf,a=t.isOptional,s=t.isValue,l=t.query,c=t.viewQuery,u=t.token,p=t.value;this.isAttribute=normalizeBool(r),this.isSelf=normalizeBool(n),this.isHost=normalizeBool(i),this.isSkipSelf=normalizeBool(o),this.isOptional=normalizeBool(a),this.isValue=normalizeBool(s),this.query=l,this.viewQuery=c,this.token=u,this.value=p}return CompileDiDependencyMetadata}(),ft=function(){function CompileProviderMetadata(e){var t=e.token,r=e.useClass,n=e.useValue,i=e.useExisting,o=e.useFactory,a=e.deps,s=e.multi;this.token=t,this.useClass=r,this.useValue=n,this.useExisting=i,this.useFactory=o,this.deps=normalizeBlank(a),this.multi=normalizeBool(s)}return CompileProviderMetadata}(),mt=function(e){function CompileFactoryMetadata(t){var r=t.reference,n=t.name,i=t.moduleUrl,o=t.prefix,a=t.diDeps,s=t.value;e.call(this,{reference:r,name:n,prefix:o,moduleUrl:i,value:s}),this.diDeps=_normalizeArray(a)}return Ze(CompileFactoryMetadata,e),CompileFactoryMetadata}(ht),gt=function(){function CompileTokenMetadata(e){var t=e.value,r=e.identifier,n=e.identifierIsInstance;this.value=t,this.identifier=r,this.identifierIsInstance=normalizeBool(n)}return Object.defineProperty(CompileTokenMetadata.prototype,"reference",{get:function(){return isPresent(this.identifier)?this.identifier.reference:this.value},enumerable:!0,configurable:!0}),Object.defineProperty(CompileTokenMetadata.prototype,"name",{get:function(){return isPresent(this.value)?sanitizeIdentifier(this.value):this.identifier.name},enumerable:!0,configurable:!0}),CompileTokenMetadata}(),yt=function(e){function CompileTypeMetadata(t){var r=void 0===t?{}:t,n=r.reference,i=r.name,o=r.moduleUrl,a=r.prefix,s=r.isHost,l=r.value,c=r.diDeps,u=r.lifecycleHooks;e.call(this,{reference:n,name:i,moduleUrl:o,prefix:a,value:l}),this.isHost=normalizeBool(s),this.diDeps=_normalizeArray(c),this.lifecycleHooks=_normalizeArray(u)}return Ze(CompileTypeMetadata,e),CompileTypeMetadata}(ht),vt=function(){function CompileQueryMetadata(e){var t=void 0===e?{}:e,r=t.selectors,n=t.descendants,i=t.first,o=t.propertyName,a=t.read;this.selectors=r,this.descendants=normalizeBool(n),this.first=normalizeBool(i),this.propertyName=o,this.read=a}return CompileQueryMetadata}(),bt=function(){function CompileStylesheetMetadata(e){var t=void 0===e?{}:e,r=t.moduleUrl,n=t.styles,i=t.styleUrls;this.moduleUrl=r,this.styles=_normalizeArray(n),this.styleUrls=_normalizeArray(i)}return CompileStylesheetMetadata}(),_t=function(){function CompileTemplateMetadata(e){var t=void 0===e?{}:e,r=t.encapsulation,n=t.template,i=t.templateUrl,o=t.styles,a=t.styleUrls,s=t.externalStylesheets,l=t.animations,c=t.ngContentSelectors,u=t.interpolation;if(this.encapsulation=r,this.template=n,this.templateUrl=i,this.styles=_normalizeArray(o),this.styleUrls=_normalizeArray(a),this.externalStylesheets=_normalizeArray(s),this.animations=isPresent(l)?I.flatten(l):[],this.ngContentSelectors=isPresent(c)?c:[],isPresent(u)&&2!=u.length)throw new Error("'interpolation' should have a start and an end symbol.");this.interpolation=u}return CompileTemplateMetadata}(),wt=function(){function CompileDirectiveMetadata(e){var t=void 0===e?{}:e,r=t.type,n=t.isComponent,i=t.selector,o=t.exportAs,a=t.changeDetection,s=t.inputs,l=t.outputs,c=t.hostListeners,u=t.hostProperties,p=t.hostAttributes,h=t.providers,d=t.viewProviders,f=t.queries,m=t.viewQueries,g=t.entryComponents,y=t.template;this.type=r,this.isComponent=n,this.selector=i,this.exportAs=o,this.changeDetection=a,this.inputs=s,this.outputs=l,this.hostListeners=c,this.hostProperties=u,this.hostAttributes=p,this.providers=_normalizeArray(h),this.viewProviders=_normalizeArray(d),this.queries=_normalizeArray(f),this.viewQueries=_normalizeArray(m),this.entryComponents=_normalizeArray(g),this.template=y}return CompileDirectiveMetadata.create=function(e){var t=void 0===e?{}:e,r=t.type,n=t.isComponent,i=t.selector,o=t.exportAs,a=t.changeDetection,s=t.inputs,l=t.outputs,c=t.host,u=t.providers,p=t.viewProviders,h=t.queries,d=t.viewQueries,f=t.entryComponents,m=t.template,g={},y={},v={};isPresent(c)&&M.forEach(c,function(e,t){var r=t.match(Je);null===r?v[t]=e:isPresent(r[1])?y[r[1]]=e:isPresent(r[2])&&(g[r[2]]=e)});var b={};isPresent(s)&&s.forEach(function(e){var t=splitAtColon(e,[e,e]);b[t[0]]=t[1]});var _={};return isPresent(l)&&l.forEach(function(e){var t=splitAtColon(e,[e,e]);_[t[0]]=t[1]}),new CompileDirectiveMetadata({type:r,isComponent:normalizeBool(n),selector:i,exportAs:o,changeDetection:a,inputs:b,outputs:_,hostListeners:g,hostProperties:y,hostAttributes:v,providers:u,viewProviders:p,queries:h,viewQueries:d,entryComponents:f,template:m})},Object.defineProperty(CompileDirectiveMetadata.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),CompileDirectiveMetadata}(),xt=function(){function CompilePipeMetadata(e){var t=void 0===e?{}:e,r=t.type,n=t.name,i=t.pure;this.type=r,this.name=n,this.pure=normalizeBool(i)}return Object.defineProperty(CompilePipeMetadata.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),CompilePipeMetadata}(),St=function(){function CompileNgModuleMetadata(e){var t=void 0===e?{}:e,r=t.type,n=t.providers,i=t.declaredDirectives,o=t.exportedDirectives,a=t.declaredPipes,s=t.exportedPipes,l=t.entryComponents,c=t.bootstrapComponents,u=t.importedModules,p=t.exportedModules,h=t.schemas,d=t.transitiveModule,f=t.id;this.type=r,this.declaredDirectives=_normalizeArray(i),this.exportedDirectives=_normalizeArray(o),this.declaredPipes=_normalizeArray(a),this.exportedPipes=_normalizeArray(s),this.providers=_normalizeArray(n),this.entryComponents=_normalizeArray(l),this.bootstrapComponents=_normalizeArray(c),this.importedModules=_normalizeArray(u),this.exportedModules=_normalizeArray(p),this.schemas=_normalizeArray(h),this.id=f,this.transitiveModule=d}return Object.defineProperty(CompileNgModuleMetadata.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),CompileNgModuleMetadata}(),Ct=function(){function TransitiveCompileNgModuleMetadata(e,t,r,n,i){var o=this;this.modules=e,this.providers=t,this.entryComponents=r,this.directives=n,this.pipes=i,this.directivesSet=new Set,this.pipesSet=new Set,n.forEach(function(e){return o.directivesSet.add(e.type.reference)}),i.forEach(function(e){return o.pipesSet.add(e.type.reference)})}return TransitiveCompileNgModuleMetadata}(),kt=function(){function ProviderMeta(e,t){var r=t.useClass,n=t.useValue,i=t.useExisting,o=t.useFactory,a=t.deps,s=t.multi;this.token=e,this.useClass=r,this.useValue=n,this.useExisting=i,this.useFactory=o,this.dependencies=a,this.multi=!!s}return ProviderMeta}(),Et=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},At=function(){function ParserError(e,t,r,n){this.input=t,this.errLocation=r,this.ctxLocation=n,this.message="Parser Error: "+e+" "+r+" ["+t+"] in "+n}return ParserError}(),Pt=function(){function ParseSpan(e,t){this.start=e,this.end=t}return ParseSpan}(),Tt=function(){function AST(e){this.span=e}return AST.prototype.visit=function(e,t){return void 0===t&&(t=null),null},AST.prototype.toString=function(){return"AST"},AST}(),Mt=function(e){function Quote(t,r,n,i){e.call(this,t),this.prefix=r,this.uninterpretedExpression=n,this.location=i}return Et(Quote,e),Quote.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitQuote(this,t)},Quote.prototype.toString=function(){return"Quote"},Quote}(Tt),It=function(e){function EmptyExpr(){e.apply(this,arguments)}return Et(EmptyExpr,e),EmptyExpr.prototype.visit=function(e,t){void 0===t&&(t=null)},EmptyExpr}(Tt),Ot=function(e){function ImplicitReceiver(){e.apply(this,arguments)}return Et(ImplicitReceiver,e),ImplicitReceiver.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitImplicitReceiver(this,t)},ImplicitReceiver}(Tt),Rt=function(e){function Chain(t,r){e.call(this,t),this.expressions=r}return Et(Chain,e),Chain.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitChain(this,t)},Chain}(Tt),Lt=function(e){function Conditional(t,r,n,i){e.call(this,t),this.condition=r,this.trueExp=n,this.falseExp=i}return Et(Conditional,e),Conditional.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitConditional(this,t)},Conditional}(Tt),Nt=function(e){function PropertyRead(t,r,n){e.call(this,t),this.receiver=r,this.name=n}return Et(PropertyRead,e),PropertyRead.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitPropertyRead(this,t)},PropertyRead}(Tt),Dt=function(e){function PropertyWrite(t,r,n,i){e.call(this,t),this.receiver=r,this.name=n,this.value=i}return Et(PropertyWrite,e),PropertyWrite.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitPropertyWrite(this,t)},PropertyWrite}(Tt),Bt=function(e){function SafePropertyRead(t,r,n){e.call(this,t),this.receiver=r,this.name=n}return Et(SafePropertyRead,e),SafePropertyRead.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitSafePropertyRead(this,t)},SafePropertyRead}(Tt),Vt=function(e){function KeyedRead(t,r,n){e.call(this,t),this.obj=r,this.key=n}return Et(KeyedRead,e),KeyedRead.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitKeyedRead(this,t)},KeyedRead}(Tt),Ft=function(e){function KeyedWrite(t,r,n,i){e.call(this,t),this.obj=r,this.key=n,this.value=i}return Et(KeyedWrite,e),KeyedWrite.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitKeyedWrite(this,t)},KeyedWrite}(Tt),jt=function(e){function BindingPipe(t,r,n,i){e.call(this,t),this.exp=r,this.name=n,this.args=i}return Et(BindingPipe,e),BindingPipe.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitPipe(this,t)},BindingPipe}(Tt),Ut=function(e){function LiteralPrimitive(t,r){e.call(this,t),this.value=r}return Et(LiteralPrimitive,e),LiteralPrimitive.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitLiteralPrimitive(this,t)},LiteralPrimitive}(Tt),zt=function(e){function LiteralArray(t,r){e.call(this,t),this.expressions=r}return Et(LiteralArray,e),LiteralArray.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitLiteralArray(this,t)},LiteralArray}(Tt),Wt=function(e){function LiteralMap(t,r,n){e.call(this,t),this.keys=r,this.values=n}return Et(LiteralMap,e),LiteralMap.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitLiteralMap(this,t)},LiteralMap}(Tt),Ht=function(e){function Interpolation(t,r,n){e.call(this,t),this.strings=r,this.expressions=n}return Et(Interpolation,e),Interpolation.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitInterpolation(this,t)},Interpolation}(Tt),qt=function(e){function Binary(t,r,n,i){e.call(this,t),this.operation=r,this.left=n,this.right=i}return Et(Binary,e),Binary.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitBinary(this,t)},Binary}(Tt),Gt=function(e){function PrefixNot(t,r){e.call(this,t),this.expression=r}return Et(PrefixNot,e),PrefixNot.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitPrefixNot(this,t)},PrefixNot}(Tt),Kt=function(e){function MethodCall(t,r,n,i){e.call(this,t),this.receiver=r,this.name=n,this.args=i}return Et(MethodCall,e),MethodCall.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitMethodCall(this,t)},MethodCall}(Tt),$t=function(e){function SafeMethodCall(t,r,n,i){e.call(this,t),this.receiver=r,this.name=n,this.args=i}return Et(SafeMethodCall,e),SafeMethodCall.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitSafeMethodCall(this,t)},SafeMethodCall}(Tt),Qt=function(e){function FunctionCall(t,r,n){e.call(this,t),this.target=r,this.args=n}return Et(FunctionCall,e),FunctionCall.prototype.visit=function(e,t){return void 0===t&&(t=null),e.visitFunctionCall(this,t)},FunctionCall}(Tt),Yt=function(e){function ASTWithSource(t,r,n,i){e.call(this,new Pt(0,isBlank(r)?0:r.length)),this.ast=t,this.source=r,this.location=n,this.errors=i}return Et(ASTWithSource,e),ASTWithSource.prototype.visit=function(e,t){return void 0===t&&(t=null),this.ast.visit(e,t)},ASTWithSource.prototype.toString=function(){return this.source+" in "+this.location},ASTWithSource}(Tt),Xt=function(){function TemplateBinding(e,t,r,n){this.key=e,this.keyIsVar=t,this.name=r,this.expression=n}return TemplateBinding}(),Zt=function(){function RecursiveAstVisitor(){}return RecursiveAstVisitor.prototype.visitBinary=function(e,t){return e.left.visit(this),e.right.visit(this),null},RecursiveAstVisitor.prototype.visitChain=function(e,t){return this.visitAll(e.expressions,t)},RecursiveAstVisitor.prototype.visitConditional=function(e,t){return e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this),null},RecursiveAstVisitor.prototype.visitPipe=function(e,t){return e.exp.visit(this),this.visitAll(e.args,t),null},RecursiveAstVisitor.prototype.visitFunctionCall=function(e,t){return e.target.visit(this),this.visitAll(e.args,t),null},RecursiveAstVisitor.prototype.visitImplicitReceiver=function(e,t){return null},RecursiveAstVisitor.prototype.visitInterpolation=function(e,t){return this.visitAll(e.expressions,t)},RecursiveAstVisitor.prototype.visitKeyedRead=function(e,t){return e.obj.visit(this),e.key.visit(this),null},RecursiveAstVisitor.prototype.visitKeyedWrite=function(e,t){return e.obj.visit(this),e.key.visit(this),e.value.visit(this),null},RecursiveAstVisitor.prototype.visitLiteralArray=function(e,t){return this.visitAll(e.expressions,t)},RecursiveAstVisitor.prototype.visitLiteralMap=function(e,t){return this.visitAll(e.values,t)},RecursiveAstVisitor.prototype.visitLiteralPrimitive=function(e,t){return null},RecursiveAstVisitor.prototype.visitMethodCall=function(e,t){return e.receiver.visit(this),this.visitAll(e.args,t)},RecursiveAstVisitor.prototype.visitPrefixNot=function(e,t){return e.expression.visit(this),null},RecursiveAstVisitor.prototype.visitPropertyRead=function(e,t){return e.receiver.visit(this),null},RecursiveAstVisitor.prototype.visitPropertyWrite=function(e,t){return e.receiver.visit(this),e.value.visit(this),null},RecursiveAstVisitor.prototype.visitSafePropertyRead=function(e,t){return e.receiver.visit(this),null},RecursiveAstVisitor.prototype.visitSafeMethodCall=function(e,t){return e.receiver.visit(this),this.visitAll(e.args,t)},RecursiveAstVisitor.prototype.visitAll=function(e,t){var r=this;return e.forEach(function(e){return e.visit(r,t)}),null},RecursiveAstVisitor.prototype.visitQuote=function(e,t){return null},RecursiveAstVisitor}(),Jt=0,er=9,tr=10,rr=11,nr=12,ir=13,or=32,ar=33,sr=34,lr=35,cr=36,ur=37,pr=38,hr=39,dr=40,fr=41,mr=42,gr=43,yr=44,vr=45,br=46,_r=47,wr=58,xr=59,Sr=60,Cr=61,kr=62,Er=63,Ar=48,Pr=57,Tr=65,Mr=69,Ir=70,Or=88,Rr=90,Lr=91,Nr=92,Dr=93,Br=94,Vr=95,Fr=97,jr=101,Ur=102,zr=110,Wr=114,Hr=116,qr=117,Gr=118,Kr=120,$r=122,Qr=123,Yr=124,Xr=125,Zr=160,Jr=96,en=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//],tn=function(){function InterpolationConfig(e,t){this.start=e,this.end=t}return InterpolationConfig.fromArray=function(e){return e?(assertInterpolationSymbols("interpolation",e),new InterpolationConfig(e[0],e[1])):rn},InterpolationConfig}(),rn=new tn("{{","}}");!function(e){e[e.Character=0]="Character",e[e.Identifier=1]="Identifier",e[e.Keyword=2]="Keyword",e[e.String=3]="String",e[e.Operator=4]="Operator",e[e.Number=5]="Number",e[e.Error=6]="Error"}(Me||(Me={}));var nn,on=["var","let","null","undefined","true","false","if","else","this"],an=function(){function Lexer(){}return Lexer.prototype.tokenize=function(e){for(var t=new cn(e),r=[],n=t.scanToken();null!=n;)r.push(n),n=t.scanToken();return r},Lexer.decorators=[{type:r.Injectable}],Lexer.ctorParameters=[],Lexer}(),sn=function(){function Token(e,t,r,n){this.index=e,this.type=t,this.numValue=r,this.strValue=n}return Token.prototype.isCharacter=function(e){return this.type==Me.Character&&this.numValue==e},Token.prototype.isNumber=function(){return this.type==Me.Number},Token.prototype.isString=function(){return this.type==Me.String},Token.prototype.isOperator=function(e){return this.type==Me.Operator&&this.strValue==e},Token.prototype.isIdentifier=function(){return this.type==Me.Identifier},Token.prototype.isKeyword=function(){return this.type==Me.Keyword},Token.prototype.isKeywordLet=function(){return this.type==Me.Keyword&&"let"==this.strValue},Token.prototype.isKeywordNull=function(){return this.type==Me.Keyword&&"null"==this.strValue},Token.prototype.isKeywordUndefined=function(){return this.type==Me.Keyword&&"undefined"==this.strValue},Token.prototype.isKeywordTrue=function(){return this.type==Me.Keyword&&"true"==this.strValue},Token.prototype.isKeywordFalse=function(){return this.type==Me.Keyword&&"false"==this.strValue},Token.prototype.isKeywordThis=function(){return this.type==Me.Keyword&&"this"==this.strValue},Token.prototype.isError=function(){return this.type==Me.Error},Token.prototype.toNumber=function(){return this.type==Me.Number?this.numValue:-1},Token.prototype.toString=function(){switch(this.type){case Me.Character:case Me.Identifier:case Me.Keyword:case Me.Operator:case Me.String:case Me.Error:return this.strValue;case Me.Number:return this.numValue.toString();default:return null}},Token}(),ln=new sn((-1),Me.Character,0,""),cn=function(){function _Scanner(e){this.input=e,this.peek=0,this.index=-1,this.length=e.length,this.advance()}return _Scanner.prototype.advance=function(){this.peek=++this.index>=this.length?Jt:a.charCodeAt(this.input,this.index)},_Scanner.prototype.scanToken=function(){for(var e=this.input,t=this.length,r=this.peek,n=this.index;r<=or;){if(++n>=t){r=Jt;break}r=a.charCodeAt(e,n)}if(this.peek=r,this.index=n,n>=t)return null;if(isIdentifierStart(r))return this.scanIdentifier();if(isDigit(r))return this.scanNumber(n);var i=n;switch(r){case br:return this.advance(),isDigit(this.peek)?this.scanNumber(i):newCharacterToken(i,br);case dr:case fr:case Qr:case Xr:case Lr:case Dr:case yr:case wr:case xr:return this.scanCharacter(i,r);case hr:case sr:return this.scanString();case lr:case gr:case vr:case mr:case _r:case ur:case Br:return this.scanOperator(i,a.fromCharCode(r));case Er:return this.scanComplexOperator(i,"?",br,".");case Sr:case kr:return this.scanComplexOperator(i,a.fromCharCode(r),Cr,"=");case ar:case Cr:return this.scanComplexOperator(i,a.fromCharCode(r),Cr,"=",Cr,"=");case pr:return this.scanComplexOperator(i,"&",pr,"&");case Yr:return this.scanComplexOperator(i,"|",Yr,"|");case Zr:for(;isWhitespace(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error("Unexpected character ["+a.fromCharCode(r)+"]",0)},_Scanner.prototype.scanCharacter=function(e,t){return this.advance(),newCharacterToken(e,t)},_Scanner.prototype.scanOperator=function(e,t){return this.advance(),newOperatorToken(e,t)},_Scanner.prototype.scanComplexOperator=function(e,t,r,n,i,o){this.advance();var a=t;return this.peek==r&&(this.advance(),a+=n),isPresent(i)&&this.peek==i&&(this.advance(),a+=o),newOperatorToken(e,a)},_Scanner.prototype.scanIdentifier=function(){var e=this.index;for(this.advance();isIdentifierPart(this.peek);)this.advance();var t=this.input.substring(e,this.index);return on.indexOf(t)>-1?newKeywordToken(e,t):newIdentifierToken(e,t)},_Scanner.prototype.scanNumber=function(e){var t=this.index===e;for(this.advance();;){if(isDigit(this.peek));else if(this.peek==br)t=!1;else{if(!isExponentStart(this.peek))break;if(this.advance(),isExponentSign(this.peek)&&this.advance(),!isDigit(this.peek))return this.error("Invalid exponent",-1);t=!1}this.advance()}var r=this.input.substring(e,this.index),n=t?l.parseIntAutoRadix(r):parseFloat(r);return newNumberToken(e,n)},_Scanner.prototype.scanString=function(){var e=this.index,t=this.peek;this.advance();for(var r,n=this.index,i=this.input;this.peek!=t;)if(this.peek==Nr){null==r&&(r=new s),r.add(i.substring(n,this.index)),this.advance();var o;if(this.peek==qr){var c=i.substring(this.index+1,this.index+5);try{o=l.parseInt(c,16)}catch(u){return this.error("Invalid unicode escape [\\u"+c+"]",0)}for(var p=0;p<5;p++)this.advance()}else o=unescape(this.peek),this.advance();r.add(a.fromCharCode(o)),n=this.index}else{if(this.peek==Jt)return this.error("Unterminated quote",0);this.advance()}var h=i.substring(n,this.index);this.advance();var d=h;return null!=r&&(r.add(h),d=r.toString()),newStringToken(e,d)},_Scanner.prototype.error=function(e,t){var r=this.index+t;return newErrorToken(r,"Lexer Error: "+e+" at column "+r+" in expression ["+this.input+"]")},_Scanner}(),un=function(){function SplitInterpolation(e,t){this.strings=e,this.expressions=t}return SplitInterpolation}(),pn=function(){function TemplateBindingParseResult(e,t,r){this.templateBindings=e,this.warnings=t,this.errors=r}return TemplateBindingParseResult}(),hn=function(){function Parser(e){this._lexer=e,this.errors=[]}return Parser.prototype.parseAction=function(e,t,r){void 0===r&&(r=rn),this._checkNoInterpolation(e,t,r);var n=this._lexer.tokenize(this._stripComments(e)),i=new dn(e,t,n,(!0),this.errors).parseChain();return new Yt(i,e,t,this.errors)},Parser.prototype.parseBinding=function(e,t,r){void 0===r&&(r=rn);var n=this._parseBindingAst(e,t,r);return new Yt(n,e,t,this.errors)},Parser.prototype.parseSimpleBinding=function(e,t,r){void 0===r&&(r=rn);var n=this._parseBindingAst(e,t,r);return mn.check(n)||this._reportError("Host binding expression can only contain field access and constants",e,t),new Yt(n,e,t,this.errors)},Parser.prototype._reportError=function(e,t,r,n){this.errors.push(new At(e,t,r,n))},Parser.prototype._parseBindingAst=function(e,t,r){var n=this._parseQuote(e,t);if(isPresent(n))return n;this._checkNoInterpolation(e,t,r);var i=this._lexer.tokenize(this._stripComments(e));return new dn(e,t,i,(!1),this.errors).parseChain()},Parser.prototype._parseQuote=function(e,t){if(isBlank(e))return null;var r=e.indexOf(":");if(r==-1)return null;var n=e.substring(0,r).trim();if(!isIdentifier(n))return null;var i=e.substring(r+1);return new Mt(new Pt(0,e.length),n,i,t)},Parser.prototype.parseTemplateBindings=function(e,t){var r=this._lexer.tokenize(e);return new dn(e,t,r,(!1),this.errors).parseTemplateBindings()},Parser.prototype.parseInterpolation=function(e,t,r){void 0===r&&(r=rn);var n=this.splitInterpolation(e,t,r);if(null==n)return null;for(var i=[],o=0;o<n.expressions.length;++o){var a=this._lexer.tokenize(this._stripComments(n.expressions[o])),s=new dn(e,t,a,(!1),this.errors).parseChain();i.push(s)}return new Yt(new Ht(new Pt(0,isBlank(e)?0:e.length),n.strings,i),e,t,this.errors)},Parser.prototype.splitInterpolation=function(e,t,r){void 0===r&&(r=rn);var n=_createInterpolateRegExp(r),i=a.split(e,n);if(i.length<=1)return null;for(var o=[],s=[],l=0;l<i.length;l++){var c=i[l];l%2===0?o.push(c):c.trim().length>0?s.push(c):this._reportError("Blank expressions are not allowed in interpolated strings",e,"at column "+this._findInterpolationErrorColumn(i,l,r)+" in",t)}return new un(o,s)},Parser.prototype.wrapLiteralPrimitive=function(e,t){return new Yt(new Ut(new Pt(0,isBlank(e)?0:e.length),e),e,t,this.errors)},Parser.prototype._stripComments=function(e){var t=this._commentStart(e);return isPresent(t)?e.substring(0,t).trim():e},Parser.prototype._commentStart=function(e){for(var t=null,r=0;r<e.length-1;r++){var n=a.charCodeAt(e,r),i=a.charCodeAt(e,r+1);if(n===_r&&i==_r&&isBlank(t))return r;t===n?t=null:isBlank(t)&&isQuote(n)&&(t=n)}return null},Parser.prototype._checkNoInterpolation=function(e,t,r){var n=_createInterpolateRegExp(r),i=a.split(e,n);i.length>1&&this._reportError("Got interpolation ("+r.start+r.end+") where expression was expected",e,"at column "+this._findInterpolationErrorColumn(i,1,r)+" in",t)},Parser.prototype._findInterpolationErrorColumn=function(e,t,r){for(var n="",i=0;i<t;i++)n+=i%2===0?e[i]:""+r.start+e[i]+r.end;return n.length},Parser.decorators=[{type:r.Injectable}],Parser.ctorParameters=[{type:an}],Parser}(),dn=function(){function _ParseAST(e,t,r,n,i){this.input=e,this.location=t,this.tokens=r,this.parseAction=n,this.errors=i,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.index=0}return _ParseAST.prototype.peek=function(e){var t=this.index+e;return t<this.tokens.length?this.tokens[t]:ln},Object.defineProperty(_ParseAST.prototype,"next",{get:function(){return this.peek(0)},enumerable:!0,configurable:!0}),Object.defineProperty(_ParseAST.prototype,"inputIndex",{get:function(){return this.index<this.tokens.length?this.next.index:this.input.length},enumerable:!0,configurable:!0}),_ParseAST.prototype.span=function(e){return new Pt(e,this.inputIndex)},_ParseAST.prototype.advance=function(){this.index++},_ParseAST.prototype.optionalCharacter=function(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)},_ParseAST.prototype.peekKeywordLet=function(){return this.next.isKeywordLet()},_ParseAST.prototype.expectCharacter=function(e){this.optionalCharacter(e)||this.error("Missing expected "+a.fromCharCode(e))},_ParseAST.prototype.optionalOperator=function(e){return!!this.next.isOperator(e)&&(this.advance(),!0)},_ParseAST.prototype.expectOperator=function(e){this.optionalOperator(e)||this.error("Missing expected operator "+e)},_ParseAST.prototype.expectIdentifierOrKeyword=function(){var e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(this.error("Unexpected token "+e+", expected identifier or keyword"),"")},_ParseAST.prototype.expectIdentifierOrKeywordOrString=function(){var e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(this.error("Unexpected token "+e+", expected identifier, keyword, or string"),"")},_ParseAST.prototype.parseChain=function(){for(var e=[],t=this.inputIndex;this.index<this.tokens.length;){var r=this.parsePipe();if(e.push(r),this.optionalCharacter(xr))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.optionalCharacter(xr););else this.index<this.tokens.length&&this.error("Unexpected token '"+this.next+"'")}return 0==e.length?new It(this.span(t)):1==e.length?e[0]:new Rt(this.span(t),e)},_ParseAST.prototype.parsePipe=function(){var e=this.parseExpression();if(this.optionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{for(var t=this.expectIdentifierOrKeyword(),r=[];this.optionalCharacter(wr);)r.push(this.parseExpression());e=new jt(this.span(e.span.start),e,t,r)}while(this.optionalOperator("|"))}return e},_ParseAST.prototype.parseExpression=function(){return this.parseConditional()},_ParseAST.prototype.parseConditional=function(){var e=this.inputIndex,t=this.parseLogicalOr();if(this.optionalOperator("?")){var r=this.parsePipe(),n=void 0;if(this.optionalCharacter(wr))n=this.parsePipe();else{var i=this.inputIndex,o=this.input.substring(e,i);this.error("Conditional expression "+o+" requires all 3 expressions"),n=new It(this.span(e))}return new Lt(this.span(e),t,r,n)}return t},_ParseAST.prototype.parseLogicalOr=function(){for(var e=this.parseLogicalAnd();this.optionalOperator("||");){var t=this.parseLogicalAnd();e=new qt(this.span(e.span.start),"||",e,t)}return e},_ParseAST.prototype.parseLogicalAnd=function(){for(var e=this.parseEquality();this.optionalOperator("&&");){var t=this.parseEquality();e=new qt(this.span(e.span.start),"&&",e,t)}return e},_ParseAST.prototype.parseEquality=function(){for(var e=this.parseRelational();this.next.type==Me.Operator;){var t=this.next.strValue;switch(t){case"==":case"===":case"!=":case"!==":this.advance();var r=this.parseRelational();e=new qt(this.span(e.span.start),t,e,r);continue}break}return e},_ParseAST.prototype.parseRelational=function(){for(var e=this.parseAdditive();this.next.type==Me.Operator;){var t=this.next.strValue;switch(t){case"<":case">":case"<=":case">=":this.advance();var r=this.parseAdditive();e=new qt(this.span(e.span.start),t,e,r);continue}break}return e},_ParseAST.prototype.parseAdditive=function(){for(var e=this.parseMultiplicative();this.next.type==Me.Operator;){var t=this.next.strValue;switch(t){case"+":case"-":this.advance();var r=this.parseMultiplicative();e=new qt(this.span(e.span.start),t,e,r);continue}break}return e},_ParseAST.prototype.parseMultiplicative=function(){for(var e=this.parsePrefix();this.next.type==Me.Operator;){var t=this.next.strValue;switch(t){case"*":case"%":case"/":this.advance();var r=this.parsePrefix();e=new qt(this.span(e.span.start),t,e,r);
continue}break}return e},_ParseAST.prototype.parsePrefix=function(){if(this.next.type==Me.Operator){var e=this.inputIndex,t=this.next.strValue,r=void 0;switch(t){case"+":return this.advance(),this.parsePrefix();case"-":return this.advance(),r=this.parsePrefix(),new qt(this.span(e),t,new Ut(new Pt(e,e),0),r);case"!":return this.advance(),r=this.parsePrefix(),new Gt(this.span(e),r)}}return this.parseCallChain()},_ParseAST.prototype.parseCallChain=function(){for(var e=this.parsePrimary();;)if(this.optionalCharacter(br))e=this.parseAccessMemberOrMethodCall(e,!1);else if(this.optionalOperator("?."))e=this.parseAccessMemberOrMethodCall(e,!0);else if(this.optionalCharacter(Lr)){this.rbracketsExpected++;var t=this.parsePipe();if(this.rbracketsExpected--,this.expectCharacter(Dr),this.optionalOperator("=")){var r=this.parseConditional();e=new Ft(this.span(e.span.start),e,t,r)}else e=new Vt(this.span(e.span.start),e,t)}else{if(!this.optionalCharacter(dr))return e;this.rparensExpected++;var n=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(fr),e=new Qt(this.span(e.span.start),e,n)}},_ParseAST.prototype.parsePrimary=function(){var e=this.inputIndex;if(this.optionalCharacter(dr)){this.rparensExpected++;var t=this.parsePipe();return this.rparensExpected--,this.expectCharacter(fr),t}if(this.next.isKeywordNull())return this.advance(),new Ut(this.span(e),null);if(this.next.isKeywordUndefined())return this.advance(),new Ut(this.span(e),(void 0));if(this.next.isKeywordTrue())return this.advance(),new Ut(this.span(e),(!0));if(this.next.isKeywordFalse())return this.advance(),new Ut(this.span(e),(!1));if(this.next.isKeywordThis())return this.advance(),new Ot(this.span(e));if(this.optionalCharacter(Lr)){this.rbracketsExpected++;var r=this.parseExpressionList(Dr);return this.rbracketsExpected--,this.expectCharacter(Dr),new zt(this.span(e),r)}if(this.next.isCharacter(Qr))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new Ot(this.span(e)),!1);if(this.next.isNumber()){var n=this.next.toNumber();return this.advance(),new Ut(this.span(e),n)}if(this.next.isString()){var i=this.next.toString();return this.advance(),new Ut(this.span(e),i)}return this.index>=this.tokens.length?(this.error("Unexpected end of expression: "+this.input),new It(this.span(e))):(this.error("Unexpected token "+this.next),new It(this.span(e)))},_ParseAST.prototype.parseExpressionList=function(e){var t=[];if(!this.next.isCharacter(e))do t.push(this.parsePipe());while(this.optionalCharacter(yr));return t},_ParseAST.prototype.parseLiteralMap=function(){var e=[],t=[],r=this.inputIndex;if(this.expectCharacter(Qr),!this.optionalCharacter(Xr)){this.rbracesExpected++;do{var n=this.expectIdentifierOrKeywordOrString();e.push(n),this.expectCharacter(wr),t.push(this.parsePipe())}while(this.optionalCharacter(yr));this.rbracesExpected--,this.expectCharacter(Xr)}return new Wt(this.span(r),e,t)},_ParseAST.prototype.parseAccessMemberOrMethodCall=function(e,t){void 0===t&&(t=!1);var r=e.span.start,n=this.expectIdentifierOrKeyword();if(this.optionalCharacter(dr)){this.rparensExpected++;var i=this.parseCallArguments();this.expectCharacter(fr),this.rparensExpected--;var o=this.span(r);return t?new $t(o,e,n,i):new Kt(o,e,n,i)}if(t)return this.optionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new It(this.span(r))):new Bt(this.span(r),e,n);if(this.optionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new It(this.span(r));var a=this.parseConditional();return new Dt(this.span(r),e,n,a)}return new Nt(this.span(r),e,n)},_ParseAST.prototype.parseCallArguments=function(){if(this.next.isCharacter(fr))return[];var e=[];do e.push(this.parsePipe());while(this.optionalCharacter(yr));return e},_ParseAST.prototype.expectTemplateBindingKey=function(){var e="",t=!1;do e+=this.expectIdentifierOrKeywordOrString(),t=this.optionalOperator("-"),t&&(e+="-");while(t);return e.toString()},_ParseAST.prototype.parseTemplateBindings=function(){for(var e=[],t=null,r=[];this.index<this.tokens.length;){var n=this.peekKeywordLet();n&&this.advance();var i=this.expectTemplateBindingKey();n||(null==t?t=i:i=t+i[0].toUpperCase()+i.substring(1)),this.optionalCharacter(wr);var o=null,a=null;if(n)o=this.optionalOperator("=")?this.expectTemplateBindingKey():"$implicit";else if(this.next!==ln&&!this.peekKeywordLet()){var s=this.inputIndex,l=this.parsePipe(),c=this.input.substring(s,this.inputIndex);a=new Yt(l,c,this.location,this.errors)}e.push(new Xt(i,n,o,a)),this.optionalCharacter(xr)||this.optionalCharacter(yr)}return new pn(e,r,this.errors)},_ParseAST.prototype.error=function(e,t){void 0===t&&(t=null),this.errors.push(new At(e,this.input,this.locationText(t),this.location)),this.skip()},_ParseAST.prototype.locationText=function(e){return void 0===e&&(e=null),isBlank(e)&&(e=this.index),e<this.tokens.length?"at column "+(this.tokens[e].index+1)+" in":"at the end of the expression"},_ParseAST.prototype.skip=function(){for(var e=this.next;this.index<this.tokens.length&&!e.isCharacter(xr)&&(this.rparensExpected<=0||!e.isCharacter(fr))&&(this.rbracesExpected<=0||!e.isCharacter(Xr))&&(this.rbracketsExpected<=0||!e.isCharacter(Dr));)this.next.isError()&&this.errors.push(new At(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next},_ParseAST}(),mn=function(){function SimpleExpressionChecker(){this.simple=!0}return SimpleExpressionChecker.check=function(e){var t=new SimpleExpressionChecker;return e.visit(t),t.simple},SimpleExpressionChecker.prototype.visitImplicitReceiver=function(e,t){},SimpleExpressionChecker.prototype.visitInterpolation=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitLiteralPrimitive=function(e,t){},SimpleExpressionChecker.prototype.visitPropertyRead=function(e,t){},SimpleExpressionChecker.prototype.visitPropertyWrite=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitSafePropertyRead=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitMethodCall=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitSafeMethodCall=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitFunctionCall=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitLiteralArray=function(e,t){this.visitAll(e.expressions)},SimpleExpressionChecker.prototype.visitLiteralMap=function(e,t){this.visitAll(e.values)},SimpleExpressionChecker.prototype.visitBinary=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitPrefixNot=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitConditional=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitPipe=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitKeyedRead=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitKeyedWrite=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitAll=function(e){var t=this;return e.map(function(e){return e.visit(t)})},SimpleExpressionChecker.prototype.visitChain=function(e,t){this.simple=!1},SimpleExpressionChecker.prototype.visitQuote=function(e,t){this.simple=!1},SimpleExpressionChecker}(),gn=function(){function ParseLocation(e,t,r,n){this.file=e,this.offset=t,this.line=r,this.col=n}return ParseLocation.prototype.toString=function(){return isPresent(this.offset)?this.file.url+"@"+this.line+":"+this.col:this.file.url},ParseLocation}(),yn=function(){function ParseSourceFile(e,t){this.content=e,this.url=t}return ParseSourceFile}(),vn=function(){function ParseSourceSpan(e,t,r){void 0===r&&(r=null),this.start=e,this.end=t,this.details=r}return ParseSourceSpan.prototype.toString=function(){return this.start.file.content.substring(this.start.offset,this.end.offset)},ParseSourceSpan}();!function(e){e[e.WARNING=0]="WARNING",e[e.FATAL=1]="FATAL"}(nn||(nn={}));var bn,_n=function(){function ParseError(e,t,r){void 0===r&&(r=nn.FATAL),this.span=e,this.msg=t,this.level=r}return ParseError.prototype.toString=function(){var e=this.span.start.file.content,t=this.span.start.offset,r="",n="";if(isPresent(t)){t>e.length-1&&(t=e.length-1);for(var i=t,o=0,a=0;o<100&&t>0&&(t--,o++,"\n"!=e[t]||3!=++a););for(o=0,a=0;o<100&&i<e.length-1&&(i++,o++,"\n"!=e[i]||3!=++a););var s=e.substring(t,this.span.start.offset)+"[ERROR ->]"+e.substring(this.span.start.offset,i+1);r=' ("'+s+'")'}return this.span.details&&(n=", "+this.span.details),""+this.msg+r+": "+this.span.start+n},ParseError}(),wn=function(){function Text(e,t){this.value=e,this.sourceSpan=t}return Text.prototype.visit=function(e,t){return e.visitText(this,t)},Text}(),xn=function(){function Expansion(e,t,r,n,i){this.switchValue=e,this.type=t,this.cases=r,this.sourceSpan=n,this.switchValueSourceSpan=i}return Expansion.prototype.visit=function(e,t){return e.visitExpansion(this,t)},Expansion}(),Sn=function(){function ExpansionCase(e,t,r,n,i){this.value=e,this.expression=t,this.sourceSpan=r,this.valueSourceSpan=n,this.expSourceSpan=i}return ExpansionCase.prototype.visit=function(e,t){return e.visitExpansionCase(this,t)},ExpansionCase}(),Cn=function(){function Attribute(e,t,r){this.name=e,this.value=t,this.sourceSpan=r}return Attribute.prototype.visit=function(e,t){return e.visitAttribute(this,t)},Attribute}(),kn=function(){function Element(e,t,r,n,i,o){this.name=e,this.attrs=t,this.children=r,this.sourceSpan=n,this.startSourceSpan=i,this.endSourceSpan=o}return Element.prototype.visit=function(e,t){return e.visitElement(this,t)},Element}(),En=function(){function Comment(e,t){this.value=e,this.sourceSpan=t}return Comment.prototype.visit=function(e,t){return e.visitComment(this,t)},Comment}(),An=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)};!function(e){e[e.TAG_OPEN_START=0]="TAG_OPEN_START",e[e.TAG_OPEN_END=1]="TAG_OPEN_END",e[e.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",e[e.TAG_CLOSE=3]="TAG_CLOSE",e[e.TEXT=4]="TEXT",e[e.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",e[e.RAW_TEXT=6]="RAW_TEXT",e[e.COMMENT_START=7]="COMMENT_START",e[e.COMMENT_END=8]="COMMENT_END",e[e.CDATA_START=9]="CDATA_START",e[e.CDATA_END=10]="CDATA_END",e[e.ATTR_NAME=11]="ATTR_NAME",e[e.ATTR_VALUE=12]="ATTR_VALUE",e[e.DOC_TYPE=13]="DOC_TYPE",e[e.EXPANSION_FORM_START=14]="EXPANSION_FORM_START",e[e.EXPANSION_CASE_VALUE=15]="EXPANSION_CASE_VALUE",e[e.EXPANSION_CASE_EXP_START=16]="EXPANSION_CASE_EXP_START",e[e.EXPANSION_CASE_EXP_END=17]="EXPANSION_CASE_EXP_END",e[e.EXPANSION_FORM_END=18]="EXPANSION_FORM_END",e[e.EOF=19]="EOF"}(bn||(bn={}));var Pn,Tn=function(){function Token(e,t,r){this.type=e,this.parts=t,this.sourceSpan=r}return Token}(),Mn=function(e){function TokenError(t,r,n){e.call(this,n,t),this.tokenType=r}return An(TokenError,e),TokenError}(_n),In=function(){function TokenizeResult(e,t){this.tokens=e,this.errors=t}return TokenizeResult}(),On=/\r\n?/g,Rn=function(){function _ControlFlowError(e){this.error=e}return _ControlFlowError}(),Ln=function(){function _Tokenizer(e,t,r,n){void 0===n&&(n=rn),this._file=e,this._getTagDefinition=t,this._tokenizeIcu=r,this._interpolationConfig=n,this._peek=-1,this._nextPeek=-1,this._index=-1,this._line=0,this._column=-1,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this._input=e.content,this._length=e.content.length,this._advance()}return _Tokenizer.prototype._processCarriageReturns=function(e){return e.replace(On,"\n")},_Tokenizer.prototype.tokenize=function(){for(;this._peek!==Jt;){var e=this._getLocation();try{this._attemptCharCode(Sr)?this._attemptCharCode(ar)?this._attemptCharCode(Lr)?this._consumeCdata(e):this._attemptCharCode(vr)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(_r)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(t){if(!(t instanceof Rn))throw t;this.errors.push(t.error)}}return this._beginToken(bn.EOF),this._endToken([]),new In(mergeTextTokens(this.tokens),this.errors)},_Tokenizer.prototype._tokenizeExpansionForm=function(){if(isExpansionFormStart(this._input,this._index,this._interpolationConfig))return this._consumeExpansionFormStart(),!0;if(isExpansionCaseStart(this._peek)&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._peek===Xr){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1},_Tokenizer.prototype._getLocation=function(){return new gn(this._file,this._index,this._line,this._column)},_Tokenizer.prototype._getSpan=function(e,t){return void 0===e&&(e=this._getLocation()),void 0===t&&(t=this._getLocation()),new vn(e,t)},_Tokenizer.prototype._beginToken=function(e,t){void 0===t&&(t=this._getLocation()),this._currentTokenStart=t,this._currentTokenType=e},_Tokenizer.prototype._endToken=function(e,t){void 0===t&&(t=this._getLocation());var r=new Tn(this._currentTokenType,e,new vn(this._currentTokenStart,t));return this.tokens.push(r),this._currentTokenStart=null,this._currentTokenType=null,r},_Tokenizer.prototype._createError=function(e,t){this._isInExpansionForm()&&(e+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');var r=new Mn(e,this._currentTokenType,t);return this._currentTokenStart=null,this._currentTokenType=null,new Rn(r)},_Tokenizer.prototype._advance=function(){if(this._index>=this._length)throw this._createError(_unexpectedCharacterErrorMsg(Jt),this._getSpan());this._peek===tr?(this._line++,this._column=0):this._peek!==tr&&this._peek!==ir&&this._column++,this._index++,this._peek=this._index>=this._length?Jt:this._input.charCodeAt(this._index),this._nextPeek=this._index+1>=this._length?Jt:this._input.charCodeAt(this._index+1)},_Tokenizer.prototype._attemptCharCode=function(e){return this._peek===e&&(this._advance(),!0)},_Tokenizer.prototype._attemptCharCodeCaseInsensitive=function(e){return!!compareCharCodeCaseInsensitive(this._peek,e)&&(this._advance(),!0)},_Tokenizer.prototype._requireCharCode=function(e){var t=this._getLocation();if(!this._attemptCharCode(e))throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan(t,t))},_Tokenizer.prototype._attemptStr=function(e){var t=e.length;if(this._index+t>this._length)return!1;for(var r=this._savePosition(),n=0;n<t;n++)if(!this._attemptCharCode(e.charCodeAt(n)))return this._restorePosition(r),!1;return!0},_Tokenizer.prototype._attemptStrCaseInsensitive=function(e){for(var t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0},_Tokenizer.prototype._requireStr=function(e){var t=this._getLocation();if(!this._attemptStr(e))throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan(t))},_Tokenizer.prototype._attemptCharCodeUntilFn=function(e){for(;!e(this._peek);)this._advance()},_Tokenizer.prototype._requireCharCodeUntilFn=function(e,t){var r=this._getLocation();if(this._attemptCharCodeUntilFn(e),this._index-r.offset<t)throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan(r,r))},_Tokenizer.prototype._attemptUntilChar=function(e){for(;this._peek!==e;)this._advance()},_Tokenizer.prototype._readChar=function(e){if(e&&this._peek===pr)return this._decodeEntity();var t=this._index;return this._advance(),this._input[t]},_Tokenizer.prototype._decodeEntity=function(){var e=this._getLocation();if(this._advance(),!this._attemptCharCode(lr)){var t=this._savePosition();if(this._attemptCharCodeUntilFn(isNamedEntityEnd),this._peek!=xr)return this._restorePosition(t),"&";this._advance();var r=this._input.substring(e.offset+1,this._index-1),n=N[r];if(!n)throw this._createError(_unknownEntityErrorMsg(r),this._getSpan(e));return n}var i=this._attemptCharCode(Kr)||this._attemptCharCode(Or),o=this._getLocation().offset;if(this._attemptCharCodeUntilFn(isDigitEntityEnd),this._peek!=xr)throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan());this._advance();var a=this._input.substring(o,this._index-1);try{var s=parseInt(a,i?16:10);return String.fromCharCode(s)}catch(l){var c=this._input.substring(e.offset+1,this._index-1);throw this._createError(_unknownEntityErrorMsg(c),this._getSpan(e))}},_Tokenizer.prototype._consumeRawText=function(e,t,r){var n,i=this._getLocation();this._beginToken(e?bn.ESCAPABLE_RAW_TEXT:bn.RAW_TEXT,i);for(var o=[];;){if(n=this._getLocation(),this._attemptCharCode(t)&&r())break;for(this._index>n.offset&&o.push(this._input.substring(n.offset,this._index));this._peek!==t;)o.push(this._readChar(e))}return this._endToken([this._processCarriageReturns(o.join(""))],n)},_Tokenizer.prototype._consumeComment=function(e){var t=this;this._beginToken(bn.COMMENT_START,e),this._requireCharCode(vr),this._endToken([]);var r=this._consumeRawText(!1,vr,function(){return t._attemptStr("->")});this._beginToken(bn.COMMENT_END,r.sourceSpan.end),this._endToken([])},_Tokenizer.prototype._consumeCdata=function(e){var t=this;this._beginToken(bn.CDATA_START,e),this._requireStr("CDATA["),this._endToken([]);var r=this._consumeRawText(!1,Dr,function(){return t._attemptStr("]>")});this._beginToken(bn.CDATA_END,r.sourceSpan.end),this._endToken([])},_Tokenizer.prototype._consumeDocType=function(e){this._beginToken(bn.DOC_TYPE,e),this._attemptUntilChar(kr),this._advance(),this._endToken([this._input.substring(e.offset+2,this._index-1)])},_Tokenizer.prototype._consumePrefixAndName=function(){for(var e=this._index,t=null;this._peek!==wr&&!isPrefixEnd(this._peek);)this._advance();var r;this._peek===wr?(this._advance(),t=this._input.substring(e,this._index-1),r=this._index):r=e,this._requireCharCodeUntilFn(isNameEnd,this._index===r?1:0);var n=this._input.substring(r,this._index);return[t,n]},_Tokenizer.prototype._consumeTagOpen=function(e){var t,r,n=this._savePosition();try{if(!isAsciiLetter(this._peek))throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan());var i=this._index;for(this._consumeTagOpenStart(e),t=this._input.substring(i,this._index),r=t.toLowerCase(),this._attemptCharCodeUntilFn(isNotWhitespace);this._peek!==_r&&this._peek!==kr;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(isNotWhitespace),this._attemptCharCode(Cr)&&(this._attemptCharCodeUntilFn(isNotWhitespace),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(isNotWhitespace);this._consumeTagOpenEnd()}catch(o){if(o instanceof Rn)return this._restorePosition(n),this._beginToken(bn.TEXT,e),void this._endToken(["<"]);throw o}var a=this._getTagDefinition(t).contentType;a===x.RAW_TEXT?this._consumeRawTextWithTagClose(r,!1):a===x.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(r,!0)},_Tokenizer.prototype._consumeRawTextWithTagClose=function(e,t){var r=this,n=this._consumeRawText(t,Sr,function(){return!!r._attemptCharCode(_r)&&(r._attemptCharCodeUntilFn(isNotWhitespace),!!r._attemptStrCaseInsensitive(e)&&(r._attemptCharCodeUntilFn(isNotWhitespace),r._attemptCharCode(kr)))});this._beginToken(bn.TAG_CLOSE,n.sourceSpan.end),this._endToken([null,e])},_Tokenizer.prototype._consumeTagOpenStart=function(e){this._beginToken(bn.TAG_OPEN_START,e);var t=this._consumePrefixAndName();this._endToken(t)},_Tokenizer.prototype._consumeAttributeName=function(){this._beginToken(bn.ATTR_NAME);var e=this._consumePrefixAndName();this._endToken(e)},_Tokenizer.prototype._consumeAttributeValue=function(){this._beginToken(bn.ATTR_VALUE);var e;if(this._peek===hr||this._peek===sr){var t=this._peek;this._advance();for(var r=[];this._peek!==t;)r.push(this._readChar(!0));e=r.join(""),this._advance()}else{var n=this._index;this._requireCharCodeUntilFn(isNameEnd,1),e=this._input.substring(n,this._index)}this._endToken([this._processCarriageReturns(e)])},_Tokenizer.prototype._consumeTagOpenEnd=function(){var e=this._attemptCharCode(_r)?bn.TAG_OPEN_END_VOID:bn.TAG_OPEN_END;this._beginToken(e),this._requireCharCode(kr),this._endToken([])},_Tokenizer.prototype._consumeTagClose=function(e){this._beginToken(bn.TAG_CLOSE,e),this._attemptCharCodeUntilFn(isNotWhitespace);var t=this._consumePrefixAndName();this._attemptCharCodeUntilFn(isNotWhitespace),this._requireCharCode(kr),this._endToken(t)},_Tokenizer.prototype._consumeExpansionFormStart=function(){this._beginToken(bn.EXPANSION_FORM_START,this._getLocation()),this._requireCharCode(Qr),this._endToken([]),this._expansionCaseStack.push(bn.EXPANSION_FORM_START),this._beginToken(bn.RAW_TEXT,this._getLocation());var e=this._readUntil(yr);this._endToken([e],this._getLocation()),this._requireCharCode(yr),this._attemptCharCodeUntilFn(isNotWhitespace),this._beginToken(bn.RAW_TEXT,this._getLocation());var t=this._readUntil(yr);this._endToken([t],this._getLocation()),this._requireCharCode(yr),this._attemptCharCodeUntilFn(isNotWhitespace)},_Tokenizer.prototype._consumeExpansionCaseStart=function(){this._beginToken(bn.EXPANSION_CASE_VALUE,this._getLocation());var e=this._readUntil(Qr).trim();this._endToken([e],this._getLocation()),this._attemptCharCodeUntilFn(isNotWhitespace),this._beginToken(bn.EXPANSION_CASE_EXP_START,this._getLocation()),this._requireCharCode(Qr),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(isNotWhitespace),this._expansionCaseStack.push(bn.EXPANSION_CASE_EXP_START)},_Tokenizer.prototype._consumeExpansionCaseEnd=function(){this._beginToken(bn.EXPANSION_CASE_EXP_END,this._getLocation()),this._requireCharCode(Xr),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(isNotWhitespace),this._expansionCaseStack.pop()},_Tokenizer.prototype._consumeExpansionFormEnd=function(){this._beginToken(bn.EXPANSION_FORM_END,this._getLocation()),this._requireCharCode(Xr),this._endToken([]),this._expansionCaseStack.pop()},_Tokenizer.prototype._consumeText=function(){var e=this._getLocation();this._beginToken(bn.TEXT,e);var t=[];do this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(t.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._attemptStr(this._interpolationConfig.end)&&this._inInterpolation?(t.push(this._interpolationConfig.end),this._inInterpolation=!1):t.push(this._readChar(!0));while(!this._isTextEnd());this._endToken([this._processCarriageReturns(t.join(""))])},_Tokenizer.prototype._isTextEnd=function(){if(this._peek===Sr||this._peek===Jt)return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(isExpansionFormStart(this._input,this._index,this._interpolationConfig))return!0;if(this._peek===Xr&&this._isInExpansionCase())return!0}return!1},_Tokenizer.prototype._savePosition=function(){return[this._peek,this._index,this._column,this._line,this.tokens.length]},_Tokenizer.prototype._readUntil=function(e){var t=this._index;return this._attemptUntilChar(e),this._input.substring(t,this._index)},_Tokenizer.prototype._restorePosition=function(e){this._peek=e[0],this._index=e[1],this._column=e[2],this._line=e[3];var t=e[4];t<this.tokens.length&&(this.tokens=this.tokens.slice(0,t))},_Tokenizer.prototype._isInExpansionCase=function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===bn.EXPANSION_CASE_EXP_START},_Tokenizer.prototype._isInExpansionForm=function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===bn.EXPANSION_FORM_START},_Tokenizer}(),Nn=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Dn=function(e){function TreeError(t,r,n){e.call(this,r,n),this.elementName=t}return Nn(TreeError,e),TreeError.create=function(e,t,r){return new TreeError(e,t,r)},TreeError}(_n),Bn=function(){function ParseTreeResult(e,t){this.rootNodes=e,this.errors=t}return ParseTreeResult}(),Vn=function(){function Parser(e){this.getTagDefinition=e}return Parser.prototype.parse=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=rn);var i=tokenize(e,t,this.getTagDefinition,r,n),o=new Fn(i.tokens,this.getTagDefinition).build();return new Bn(o.rootNodes,i.errors.concat(o.errors))},Parser}(),Fn=function(){function _TreeBuilder(e,t){this.tokens=e,this.getTagDefinition=t,this._index=-1,this._rootNodes=[],this._errors=[],this._elementStack=[],this._advance()}return _TreeBuilder.prototype.build=function(){for(;this._peek.type!==bn.EOF;)this._peek.type===bn.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===bn.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===bn.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===bn.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===bn.TEXT||this._peek.type===bn.RAW_TEXT||this._peek.type===bn.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===bn.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance();return new Bn(this._rootNodes,this._errors)},_TreeBuilder.prototype._advance=function(){var e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e},_TreeBuilder.prototype._advanceIf=function(e){return this._peek.type===e?this._advance():null},_TreeBuilder.prototype._consumeCdata=function(e){this._consumeText(this._advance()),this._advanceIf(bn.CDATA_END)},_TreeBuilder.prototype._consumeComment=function(e){var t=this._advanceIf(bn.RAW_TEXT);this._advanceIf(bn.COMMENT_END);var r=isPresent(t)?t.parts[0].trim():null;this._addToParent(new En(r,e.sourceSpan))},_TreeBuilder.prototype._consumeExpansion=function(e){for(var t=this._advance(),r=this._advance(),n=[];this._peek.type===bn.EXPANSION_CASE_VALUE;){var i=this._parseExpansionCase();if(isBlank(i))return;n.push(i)}if(this._peek.type!==bn.EXPANSION_FORM_END)return void this._errors.push(Dn.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));var o=new vn(e.sourceSpan.start,this._peek.sourceSpan.end);this._addToParent(new xn(t.parts[0],r.parts[0],n,o,t.sourceSpan)),this._advance()},_TreeBuilder.prototype._parseExpansionCase=function(){var e=this._advance();if(this._peek.type!==bn.EXPANSION_CASE_EXP_START)return this._errors.push(Dn.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;var t=this._advance(),r=this._collectExpansionExpTokens(t);if(isBlank(r))return null;var n=this._advance();r.push(new Tn(bn.EOF,[],n.sourceSpan));var i=new _TreeBuilder(r,this.getTagDefinition).build();if(i.errors.length>0)return this._errors=this._errors.concat(i.errors),null;var o=new vn(e.sourceSpan.start,n.sourceSpan.end),a=new vn(t.sourceSpan.start,n.sourceSpan.end);return new Sn(e.parts[0],i.rootNodes,o,e.sourceSpan,a)},_TreeBuilder.prototype._collectExpansionExpTokens=function(e){for(var t=[],r=[bn.EXPANSION_CASE_EXP_START];;){if(this._peek.type!==bn.EXPANSION_FORM_START&&this._peek.type!==bn.EXPANSION_CASE_EXP_START||r.push(this._peek.type),this._peek.type===bn.EXPANSION_CASE_EXP_END){if(!lastOnStack(r,bn.EXPANSION_CASE_EXP_START))return this._errors.push(Dn.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(r.pop(),0==r.length)return t}if(this._peek.type===bn.EXPANSION_FORM_END){if(!lastOnStack(r,bn.EXPANSION_FORM_START))return this._errors.push(Dn.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;r.pop()}if(this._peek.type===bn.EOF)return this._errors.push(Dn.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}},_TreeBuilder.prototype._consumeText=function(e){var t=e.parts[0];if(t.length>0&&"\n"==t[0]){var r=this._getParentElement();isPresent(r)&&0==r.children.length&&this.getTagDefinition(r.name).ignoreFirstLf&&(t=t.substring(1))}t.length>0&&this._addToParent(new wn(t,e.sourceSpan))},_TreeBuilder.prototype._closeVoidElement=function(){if(this._elementStack.length>0){var e=I.last(this._elementStack);this.getTagDefinition(e.name).isVoid&&this._elementStack.pop()}},_TreeBuilder.prototype._consumeStartTag=function(e){for(var t=e.parts[0],r=e.parts[1],n=[];this._peek.type===bn.ATTR_NAME;)n.push(this._consumeAttr(this._advance()));var i=this._getElementFullName(t,r,this._getParentElement()),o=!1;if(this._peek.type===bn.TAG_OPEN_END_VOID){this._advance(),o=!0;var a=this.getTagDefinition(i);a.canSelfClose||null!==getNsPrefix(i)||a.isVoid||this._errors.push(Dn.create(i,e.sourceSpan,'Only void and foreign elements can be self closed "'+e.parts[1]+'"'))}else this._peek.type===bn.TAG_OPEN_END&&(this._advance(),o=!1);var s=this._peek.sourceSpan.start,l=new vn(e.sourceSpan.start,s),c=new kn(i,n,[],l,l,null);this._pushElement(c),o&&(this._popElement(i),c.endSourceSpan=l)},_TreeBuilder.prototype._pushElement=function(e){if(this._elementStack.length>0){var t=I.last(this._elementStack);this.getTagDefinition(t.name).isClosedByChild(e.name)&&this._elementStack.pop()}var r=this.getTagDefinition(e.name),n=this._getParentElementSkippingContainers(),i=n.parent,o=n.container;if(isPresent(i)&&r.requireExtraParent(i.name)){var a=new kn(r.parentToAdd,[],[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan);this._insertBeforeContainer(i,o,a)}this._addToParent(e),this._elementStack.push(e)},_TreeBuilder.prototype._consumeEndTag=function(e){var t=this._getElementFullName(e.parts[0],e.parts[1],this._getParentElement());this._getParentElement()&&(this._getParentElement().endSourceSpan=e.sourceSpan),this.getTagDefinition(t).isVoid?this._errors.push(Dn.create(t,e.sourceSpan,'Void elements do not have end tags "'+e.parts[1]+'"')):this._popElement(t)||this._errors.push(Dn.create(t,e.sourceSpan,'Unexpected closing tag "'+e.parts[1]+'"'))},_TreeBuilder.prototype._popElement=function(e){for(var t=this._elementStack.length-1;t>=0;t--){var r=this._elementStack[t];if(r.name==e)return I.splice(this._elementStack,t,this._elementStack.length-t),!0;if(!this.getTagDefinition(r.name).closedByParent)return!1}return!1},_TreeBuilder.prototype._consumeAttr=function(e){var t=mergeNsAndName(e.parts[0],e.parts[1]),r=e.sourceSpan.end,n="";if(this._peek.type===bn.ATTR_VALUE){var i=this._advance();n=i.parts[0],r=i.sourceSpan.end}return new Cn(t,n,new vn(e.sourceSpan.start,r))},_TreeBuilder.prototype._getParentElement=function(){return this._elementStack.length>0?I.last(this._elementStack):null},_TreeBuilder.prototype._getParentElementSkippingContainers=function(){for(var e=null,t=this._elementStack.length-1;t>=0;t--){if("ng-container"!==this._elementStack[t].name)return{parent:this._elementStack[t],container:e};e=this._elementStack[t]}return{parent:I.last(this._elementStack),container:e}},_TreeBuilder.prototype._addToParent=function(e){var t=this._getParentElement();isPresent(t)?t.children.push(e):this._rootNodes.push(e)},_TreeBuilder.prototype._insertBeforeContainer=function(e,t,r){if(t){if(e){var n=e.children.indexOf(t);e.children[n]=r}else this._rootNodes.push(r);r.children.push(t),this._elementStack.splice(this._elementStack.indexOf(t),0,r)}else this._addToParent(r),this._elementStack.push(r)},_TreeBuilder.prototype._getElementFullName=function(e,t,r){return isBlank(e)&&(e=this.getTagDefinition(t).implicitNamespacePrefix,isBlank(e)&&isPresent(r)&&(e=getNsPrefix(r.name))),mergeNsAndName(e,t)},_TreeBuilder}(),jn=function(){function _SerializerVisitor(){}return _SerializerVisitor.prototype.visitText=function(e,t){return e.value},_SerializerVisitor.prototype.visitContainer=function(e,t){var r=this;return"["+e.children.map(function(e){return e.visit(r)}).join(", ")+"]"},_SerializerVisitor.prototype.visitIcu=function(e,t){var r=this,n=Object.keys(e.cases).map(function(t){return t+" {"+e.cases[t].visit(r)+"}"});return"{"+e.expression+", "+e.type+", "+n.join(", ")+"}"},_SerializerVisitor.prototype.visitTagPlaceholder=function(e,t){var r=this;return e.isVoid?'<ph tag name="'+e.startName+'"/>':'<ph tag name="'+e.startName+'">'+e.children.map(function(e){
return e.visit(r)}).join(", ")+'</ph name="'+e.closeName+'">'},_SerializerVisitor.prototype.visitPlaceholder=function(e,t){return'<ph name="'+e.name+'">'+e.value+"</ph>"},_SerializerVisitor.prototype.visitIcuPlaceholder=function(e,t){return'<ph icu name="'+e.name+'">'+e.value.visit(this)+"</ph>"},_SerializerVisitor}(),Un=new jn,zn=function(){function Message(e,t,r,n,i){this.nodes=e,this.placeholders=t,this.placeholderToMsgIds=r,this.meaning=n,this.description=i}return Message}(),Wn=function(){function Text(e,t){this.value=e,this.sourceSpan=t}return Text.prototype.visit=function(e,t){return e.visitText(this,t)},Text}(),Hn=function(){function Container(e,t){this.children=e,this.sourceSpan=t}return Container.prototype.visit=function(e,t){return e.visitContainer(this,t)},Container}(),qn=function(){function Icu(e,t,r,n){this.expression=e,this.type=t,this.cases=r,this.sourceSpan=n}return Icu.prototype.visit=function(e,t){return e.visitIcu(this,t)},Icu}(),Gn=function(){function TagPlaceholder(e,t,r,n,i,o,a){this.tag=e,this.attrs=t,this.startName=r,this.closeName=n,this.children=i,this.isVoid=o,this.sourceSpan=a}return TagPlaceholder.prototype.visit=function(e,t){return e.visitTagPlaceholder(this,t)},TagPlaceholder}(),Kn=function(){function Placeholder(e,t,r){void 0===t&&(t=""),this.value=e,this.name=t,this.sourceSpan=r}return Placeholder.prototype.visit=function(e,t){return e.visitPlaceholder(this,t)},Placeholder}(),$n=function(){function IcuPlaceholder(e,t,r){void 0===t&&(t=""),this.value=e,this.name=t,this.sourceSpan=r}return IcuPlaceholder.prototype.visit=function(e,t){return e.visitIcuPlaceholder(this,t)},IcuPlaceholder}(),Qn={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},Yn=function(){function PlaceholderRegistry(){this._placeHolderNameCounts={},this._signatureToName={}}return PlaceholderRegistry.prototype.getStartTagPlaceholderName=function(e,t,r){var n=this._hashTag(e,t,r);if(this._signatureToName[n])return this._signatureToName[n];var i=e.toUpperCase(),o=Qn[i]||"TAG_"+i,a=this._generateUniqueName(r?o:"START_"+o);return this._signatureToName[n]=a,a},PlaceholderRegistry.prototype.getCloseTagPlaceholderName=function(e){var t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];var r=e.toUpperCase(),n=Qn[r]||"TAG_"+r,i=this._generateUniqueName("CLOSE_"+n);return this._signatureToName[t]=i,i},PlaceholderRegistry.prototype.getPlaceholderName=function(e,t){var r=e.toUpperCase(),n="PH: "+r+"="+t;if(this._signatureToName[n])return this._signatureToName[n];var i=this._generateUniqueName(r);return this._signatureToName[n]=i,i},PlaceholderRegistry.prototype._hashTag=function(e,t,r){var n="<"+e,i=Object.keys(t).sort().map(function(e){return" "+e+"="+t[e]}).join(""),o=r?"/>":"></"+e+">";return n+i+o},PlaceholderRegistry.prototype._hashClosingTag=function(e){return this._hashTag("/"+e,{},!1)},PlaceholderRegistry.prototype._generateUniqueName=function(e){var t=e,r=this._placeHolderNameCounts[t];return r?(t+="_"+r,r++):r=1,this._placeHolderNameCounts[e]=r,t},PlaceholderRegistry}(),Xn=new hn(new an),Zn=function(){function _I18nVisitor(e,t){this._expressionParser=e,this._interpolationConfig=t}return _I18nVisitor.prototype.toI18nMessage=function(e,t,r){this._isIcu=1==e.length&&e[0]instanceof xn,this._icuDepth=0,this._placeholderRegistry=new Yn,this._placeholderToContent={},this._placeholderToIds={};var n=visitAll(this,e,{});return new zn(n,this._placeholderToContent,this._placeholderToIds,t,r)},_I18nVisitor.prototype.visitElement=function(e,t){var r=visitAll(this,e.children),n={};e.attrs.forEach(function(e){n[e.name]=e.value});var i=getHtmlTagDefinition(e.name).isVoid,o=this._placeholderRegistry.getStartTagPlaceholderName(e.name,n,i);this._placeholderToContent[o]=e.sourceSpan.toString();var a="";return i||(a=this._placeholderRegistry.getCloseTagPlaceholderName(e.name),this._placeholderToContent[a]="</"+e.name+">"),new Gn(e.name,n,o,a,r,i,e.sourceSpan)},_I18nVisitor.prototype.visitAttribute=function(e,t){return this._visitTextWithInterpolation(e.value,e.sourceSpan)},_I18nVisitor.prototype.visitText=function(e,t){return this._visitTextWithInterpolation(e.value,e.sourceSpan)},_I18nVisitor.prototype.visitComment=function(e,t){return null},_I18nVisitor.prototype.visitExpansion=function(e,t){var r=this;this._icuDepth++;var n={},i=new qn(e.switchValue,e.type,n,e.sourceSpan);if(e.cases.forEach(function(e){n[e.value]=new Hn(e.expression.map(function(e){return e.visit(r,{})}),e.expSourceSpan)}),this._icuDepth--,this._isIcu||this._icuDepth>0)return i;var o=this._placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString()),a=new _I18nVisitor(this._expressionParser,this._interpolationConfig);return this._placeholderToIds[o]=digestMessage(a.toI18nMessage([e],"","")),new $n(i,o,e.sourceSpan)},_I18nVisitor.prototype.visitExpansionCase=function(e,t){throw new Error("Unreachable code")},_I18nVisitor.prototype._visitTextWithInterpolation=function(e,t){var r=this._expressionParser.splitInterpolation(e,t.start.toString(),this._interpolationConfig);if(!r)return new Wn(e,t);for(var n=[],i=new Hn(n,t),o=this._interpolationConfig,a=o.start,s=o.end,l=0;l<r.strings.length-1;l++){var c=r.expressions[l],u=_extractPlaceholderName(c)||"INTERPOLATION",p=this._placeholderRegistry.getPlaceholderName(u,c);r.strings[l].length&&n.push(new Wn(r.strings[l],t)),n.push(new Kn(c,p,t)),this._placeholderToContent[p]=a+c+s}var h=r.strings.length-1;return r.strings[h].length&&n.push(new Wn(r.strings[h],t)),i},_I18nVisitor}(),Jn=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*"([\s\S]*?)"[\s\S]*\)/g,ei=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ti=function(e){function I18nError(t,r){e.call(this,t,r)}return ei(I18nError,e),I18nError}(_n),ri="i18n",ni="i18n-",ii=/^i18n:?/,oi=function(){function ExtractionResult(e,t){this.messages=e,this.errors=t}return ExtractionResult}();!function(e){e[e.Extract=0]="Extract",e[e.Merge=1]="Merge"}(Pn||(Pn={}));var ai,si=function(){function _Visitor(e,t){this._implicitTags=e,this._implicitAttrs=t}return _Visitor.prototype.extract=function(e,t){var r=this;return this._init(Pn.Extract,t),e.forEach(function(e){return e.visit(r,null)}),this._inI18nBlock&&this._reportError(e[e.length-1],"Unclosed block"),new oi(this._messages,this._errors)},_Visitor.prototype.merge=function(e,t,r){this._init(Pn.Merge,r),this._translations=t;var n=new kn("wrapper",[],e,null,null,null),i=n.visit(this,null);return this._inI18nBlock&&this._reportError(e[e.length-1],"Unclosed block"),new Bn(i.children,this._errors)},_Visitor.prototype.visitExpansionCase=function(e,t){var r=visitAll(this,e.expression,t);if(this._mode===Pn.Merge)return new Sn(e.value,r,e.sourceSpan,e.valueSourceSpan,e.expSourceSpan)},_Visitor.prototype.visitExpansion=function(e,t){this._mayBeAddBlockChildren(e);var r=this._inIcu;this._inIcu||(this._isInTranslatableSection&&this._addMessage([e]),this._inIcu=!0);var n=visitAll(this,e.cases,t);return this._mode===Pn.Merge&&(e=new xn(e.switchValue,e.type,n,e.sourceSpan,e.switchValueSourceSpan)),this._inIcu=r,e},_Visitor.prototype.visitComment=function(e,t){var r=_isOpeningComment(e);if(r&&this._isInTranslatableSection)return void this._reportError(e,"Could not start a block inside a translatable section");var n=_isClosingComment(e);if(n&&!this._inI18nBlock)return void this._reportError(e,"Trying to close an unopened block");if(!this._inI18nNode&&!this._inIcu)if(this._inI18nBlock){if(n){if(this._depth==this._blockStartDepth){this._closeTranslatableSection(e,this._blockChildren),this._inI18nBlock=!1;var i=this._addMessage(this._blockChildren,this._blockMeaningAndDesc),o=this._translateMessage(e,i);return visitAll(this,o)}return void this._reportError(e,"I18N blocks should not cross element boundaries")}}else r&&(this._inI18nBlock=!0,this._blockStartDepth=this._depth,this._blockChildren=[],this._blockMeaningAndDesc=e.value.replace(ii,"").trim(),this._openTranslatableSection(e))},_Visitor.prototype.visitText=function(e,t){return this._isInTranslatableSection&&this._mayBeAddBlockChildren(e),e},_Visitor.prototype.visitElement=function(e,t){var r=this;this._mayBeAddBlockChildren(e),this._depth++;var n,i=this._inI18nNode,o=this._inImplicitNode,a=_getI18nAttr(e),s=this._implicitTags.some(function(t){return e.name===t})&&!this._inIcu&&!this._isInTranslatableSection,l=!o&&s;if(this._inImplicitNode=this._inImplicitNode||s,this._isInTranslatableSection||this._inIcu)(a||l)&&this._reportError(e,"Could not mark an element as translatable inside a translatable section"),this._mode==Pn.Extract&&visitAll(this,e.children),this._mode==Pn.Merge&&(n=[],e.children.forEach(function(e){var i=e.visit(r,t);i&&!r._isInTranslatableSection&&(n=n.concat(i))}));else{if(a){this._inI18nNode=!0;var c=this._addMessage(e.children,a.value);n=this._translateMessage(e,c)}else if(l){this._inI18nNode=!0;var c=this._addMessage(e.children);n=this._translateMessage(e,c)}if(this._mode==Pn.Extract){var u=a||l;u&&this._openTranslatableSection(e),visitAll(this,e.children),u&&this._closeTranslatableSection(e,e.children)}this._mode!==Pn.Merge||a||l||(n=[],e.children.forEach(function(e){var i=e.visit(r,t);i&&!r._isInTranslatableSection&&(n=n.concat(i))}))}if(this._visitAttributesOf(e),this._depth--,this._inI18nNode=i,this._inImplicitNode=o,this._mode===Pn.Merge){var p=this._translateAttributes(e);return new kn(e.name,p,n,e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}},_Visitor.prototype.visitAttribute=function(e,t){throw new Error("unreachable code")},_Visitor.prototype._init=function(e,t){this._mode=e,this._inI18nBlock=!1,this._inI18nNode=!1,this._depth=0,this._inIcu=!1,this._msgCountAtSectionStart=void 0,this._errors=[],this._messages=[],this._inImplicitNode=!1,this._createI18nMessage=createI18nMessageFactory(t)},_Visitor.prototype._visitAttributesOf=function(e){var t=this,r={},n=this._implicitAttrs[e.name]||[];e.attrs.filter(function(e){return e.name.startsWith(ni)}).forEach(function(e){return r[e.name.slice(ni.length)]=e.value}),e.attrs.forEach(function(e){e.name in r?t._addMessage([e],r[e.name]):n.some(function(t){return e.name===t})&&t._addMessage([e])})},_Visitor.prototype._addMessage=function(e,t){if(!(0==e.length||1==e.length&&e[0]instanceof Cn&&!e[0].value)){var r=_splitMeaningAndDesc(t),n=r[0],i=r[1],o=this._createI18nMessage(e,n,i);return this._messages.push(o),o}},_Visitor.prototype._translateMessage=function(e,t){if(t&&this._mode===Pn.Merge){var r=digestMessage(t),n=this._translations.get(r);if(n)return n;this._reportError(e,'Translation unavailable for message id="'+r+'"')}return[]},_Visitor.prototype._translateAttributes=function(e){var t=this,r=e.attrs,n={};r.forEach(function(e){e.name.startsWith(ni)&&(n[e.name.slice(ni.length)]=_splitMeaningAndDesc(e.value)[0])});var i=[];return r.forEach(function(r){if(r.name!==ri&&!r.name.startsWith(ni))if(r.value&&""!=r.value&&n.hasOwnProperty(r.name)){var o=n[r.name],a=t._createI18nMessage([r],o,""),s=digestMessage(a),l=t._translations.get(s);if(l)if(l[0]instanceof wn){var c=l[0].value;i.push(new Cn(r.name,c,r.sourceSpan))}else t._reportError(e,'Unexpected translation for attribute "'+r.name+'" (id="'+s+'")');else t._reportError(e,'Translation unavailable for attribute "'+r.name+'" (id="'+s+'")')}else i.push(r)}),i},_Visitor.prototype._mayBeAddBlockChildren=function(e){this._inI18nBlock&&!this._inIcu&&this._depth==this._blockStartDepth&&this._blockChildren.push(e)},_Visitor.prototype._openTranslatableSection=function(e){this._isInTranslatableSection?this._reportError(e,"Unexpected section start"):this._msgCountAtSectionStart=this._messages.length},Object.defineProperty(_Visitor.prototype,"_isInTranslatableSection",{get:function(){return void 0!==this._msgCountAtSectionStart},enumerable:!0,configurable:!0}),_Visitor.prototype._closeTranslatableSection=function(e,t){if(!this._isInTranslatableSection)return void this._reportError(e,"Unexpected section end");var r=this._msgCountAtSectionStart,n=t.reduce(function(e,t){return e+(t instanceof En?0:1)},0);if(1==n)for(var i=this._messages.length-1;i>=r;i--){var o=this._messages[i].nodes;if(!(1==o.length&&o[0]instanceof Wn)){this._messages.splice(i,1);break}}this._msgCountAtSectionStart=void 0},_Visitor.prototype._reportError=function(e,t){this._errors.push(new ti(e.sourceSpan,t))},_Visitor}(),li=function(){function MessageBundle(e,t,r){this._htmlParser=e,this._implicitTags=t,this._implicitAttrs=r,this._messageMap={}}return MessageBundle.prototype.updateFromTemplate=function(e,t,r){var n=this,i=this._htmlParser.parse(e,t,!0,r);if(i.errors.length)return i.errors;var o=extractMessages(i.rootNodes,r,this._implicitTags,this._implicitAttrs);return o.errors.length?o.errors:void o.messages.forEach(function(e){n._messageMap[digestMessage(e)]=e})},MessageBundle.prototype.getMessageMap=function(){return this._messageMap},MessageBundle.prototype.write=function(e){return e.write(this._messageMap)},MessageBundle}(),ci=function(){function XmlTagDefinition(){this.closedByParent=!1,this.contentType=x.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0}return XmlTagDefinition.prototype.requireExtraParent=function(e){return!1},XmlTagDefinition.prototype.isClosedByChild=function(e){return!1},XmlTagDefinition}(),ui=new ci,pi=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},hi=function(e){function XmlParser(){e.call(this,getXmlTagDefinition)}return pi(XmlParser,e),XmlParser.prototype.parse=function(t,r,n){return void 0===n&&(n=!1),e.prototype.parse.call(this,t,r,n,null)},XmlParser}(Vn),di=function(){function _Visitor(){}return _Visitor.prototype.visitTag=function(e){var t=this,r=this._serializeAttributes(e.attrs);if(0==e.children.length)return"<"+e.name+r+"/>";var n=e.children.map(function(e){return e.visit(t)});return"<"+e.name+r+">"+n.join("")+"</"+e.name+">"},_Visitor.prototype.visitText=function(e){return e.value},_Visitor.prototype.visitDeclaration=function(e){return"<?xml"+this._serializeAttributes(e.attrs)+" ?>"},_Visitor.prototype._serializeAttributes=function(e){var t=Object.keys(e).map(function(t){return t+'="'+e[t]+'"'}).join(" ");return t.length>0?" "+t:""},_Visitor.prototype.visitDoctype=function(e){return"<!DOCTYPE "+e.rootTag+" [\n"+e.dtd+"\n]>"},_Visitor}(),fi=new di,mi=function(){function Declaration(e){var t=this;this.attrs={},Object.keys(e).forEach(function(r){t.attrs[r]=_escapeXml(e[r])})}return Declaration.prototype.visit=function(e){return e.visitDeclaration(this)},Declaration}(),gi=function(){function Doctype(e,t){this.rootTag=e,this.dtd=t}return Doctype.prototype.visit=function(e){return e.visitDoctype(this)},Doctype}(),yi=function(){function Tag(e,t,r){var n=this;void 0===t&&(t={}),void 0===r&&(r=[]),this.name=e,this.children=r,this.attrs={},Object.keys(t).forEach(function(e){n.attrs[e]=_escapeXml(t[e])})}return Tag.prototype.visit=function(e){return e.visitTag(this)},Tag}(),vi=function(){function Text(e){this.value=_escapeXml(e)}return Text.prototype.visit=function(e){return e.visitText(this)},Text}(),bi=[[/&/g,"&amp;"],[/"/g,"&quot;"],[/'/g,"&apos;"],[/</g,"&lt;"],[/>/g,"&gt;"]],_i="1.2",wi="urn:oasis:names:tc:xliff:document:1.2",xi="en",Si="x",Ci="source",ki="target",Ei="trans-unit",Ai=function(e){return void 0===e&&(e=0),new vi("\n"+new Array(e).join(" "))},Pi=function(){function Xliff(e,t){this._htmlParser=e,this._interpolationConfig=t}return Xliff.prototype.write=function(e){var t=new Ti,r=[];Object.keys(e).forEach(function(n){var i=e[n],o=new yi(Ei,{id:n,datatype:"html"});o.children.push(Ai(8),new yi(Ci,{},t.serialize(i.nodes)),Ai(8),new yi(ki)),i.description&&o.children.push(Ai(8),new yi("note",{priority:"1",from:"description"},[new vi(i.description)])),i.meaning&&o.children.push(Ai(8),new yi("note",{priority:"1",from:"meaning"},[new vi(i.meaning)])),o.children.push(Ai(6)),r.push(Ai(6),o)});var n=new yi("body",{},r.concat([Ai(4)])),i=new yi("file",{"source-language":xi,datatype:"plaintext",original:"ng2.template"},[Ai(4),n,Ai(2)]),o=new yi("xliff",{version:_i,xmlns:wi},[Ai(2),i,Ai()]);return serialize([new mi({version:"1.0",encoding:"UTF-8"}),Ai(),o])},Xliff.prototype.load=function(e,t,r){var n=this,i=(new hi).parse(e,t);if(i.errors.length)throw new Error("xtb parse errors:\n"+i.errors.join("\n"));var o=(new Mi).parse(i.rootNodes,r),a=o.messages,s=o.errors;if(s.length)throw new Error("xtb parse errors:\n"+s.join("\n"));var l={},c=[];if(Object.keys(a).forEach(function(e){var r=n._htmlParser.parse(a[e],t,!0,n._interpolationConfig);c.push.apply(c,r.errors),l[e]=r.rootNodes}),c.length)throw new Error("xtb parse errors:\n"+c.join("\n"));return l},Xliff}(),Ti=function(){function _WriteVisitor(){}return _WriteVisitor.prototype.visitText=function(e,t){return[new vi(e.value)]},_WriteVisitor.prototype.visitContainer=function(e,t){var r=this,n=[];return e.children.forEach(function(e){return n.push.apply(n,e.visit(r))}),n},_WriteVisitor.prototype.visitIcu=function(e,t){if(this._isInIcu)throw new Error("xliff does not support nested ICU messages");this._isInIcu=!0;var r=[];return this._isInIcu=!1,r},_WriteVisitor.prototype.visitTagPlaceholder=function(e,t){var r=new yi(Si,{id:e.startName,ctype:e.tag});if(e.isVoid)return[r];var n=new yi(Si,{id:e.closeName,ctype:e.tag});return[r].concat(this.serialize(e.children),[n])},_WriteVisitor.prototype.visitPlaceholder=function(e,t){return[new yi(Si,{id:e.name})]},_WriteVisitor.prototype.visitIcuPlaceholder=function(e,t){return[new yi(Si,{id:e.name})]},_WriteVisitor.prototype.serialize=function(e){var t=this;return this._isInIcu=!1,I.flatten(e.map(function(e){return e.visit(t)}))},_WriteVisitor}(),Mi=function(){function _LoadVisitor(){}return _LoadVisitor.prototype.parse=function(e,t){var r=this;this._messageNodes=[],this._translatedMessages={},this._msgId="",this._target=[],this._errors=[],visitAll(this,e,null);var n=t.getMessageMap(),i=extractPlaceholders(t),o=extractPlaceholderToIds(t);return this._messageNodes.filter(function(e){return n.hasOwnProperty(e[0])}).sort(function(e,t){return 0==Object.keys(n[e[0]].placeholderToMsgIds).length?-1:0==Object.keys(n[t[0]].placeholderToMsgIds).length?1:0}).forEach(function(e){var t=e[0];r._placeholders=i[t]||{},r._placeholderToIds=o[t]||{},r._translatedMessages[t]=visitAll(r,e[1]).join("")}),{messages:this._translatedMessages,errors:this._errors}},_LoadVisitor.prototype.visitElement=function(e,t){switch(e.name){case Ei:this._target=null;var r=e.attrs.find(function(e){return"id"===e.name});r?this._msgId=r.value:this._addError(e,"<"+Ei+'> misses the "id" attribute'),visitAll(this,e.children,null),null!==this._msgId&&this._messageNodes.push([this._msgId,this._target]);break;case Ci:break;case ki:this._target=e.children;break;case Si:var n=e.attrs.find(function(e){return"id"===e.name});if(n){var i=n.value;if(this._placeholders.hasOwnProperty(i))return this._placeholders[i];if(this._placeholderToIds.hasOwnProperty(i)&&this._translatedMessages.hasOwnProperty(this._placeholderToIds[i]))return this._translatedMessages[this._placeholderToIds[i]];this._addError(e,'The placeholder "'+i+'" does not exists in the source message')}else this._addError(e,"<"+Si+'> misses the "id" attribute');break;default:visitAll(this,e.children,null)}},_LoadVisitor.prototype.visitAttribute=function(e,t){throw new Error("unreachable code")},_LoadVisitor.prototype.visitText=function(e,t){return e.value},_LoadVisitor.prototype.visitComment=function(e,t){return""},_LoadVisitor.prototype.visitExpansion=function(e,t){throw new Error("unreachable code")},_LoadVisitor.prototype.visitExpansionCase=function(e,t){throw new Error("unreachable code")},_LoadVisitor.prototype._addError=function(e,t){this._errors.push(new ti(e.sourceSpan,t))},_LoadVisitor}(),Ii="messagebundle",Oi="msg",Ri="ph",Li="ex",Ni='<!ELEMENT messagebundle (msg)*>\n<!ATTLIST messagebundle class CDATA #IMPLIED>\n\n<!ELEMENT msg (#PCDATA|ph|source)*>\n<!ATTLIST msg id CDATA #IMPLIED>\n<!ATTLIST msg seq CDATA #IMPLIED>\n<!ATTLIST msg name CDATA #IMPLIED>\n<!ATTLIST msg desc CDATA #IMPLIED>\n<!ATTLIST msg meaning CDATA #IMPLIED>\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\n<!ATTLIST msg xml:space (default|preserve) "default">\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\n\n<!ELEMENT source (#PCDATA)>\n\n<!ELEMENT ph (#PCDATA|ex)*>\n<!ATTLIST ph name CDATA #REQUIRED>\n\n<!ELEMENT ex (#PCDATA)>',Di=function(){function Xmb(){}return Xmb.prototype.write=function(e){var t=new Bi,r=new yi(Ii);return r.children.push(new vi("\n")),Object.keys(e).forEach(function(n){var i=e[n],o={id:n};i.description&&(o.desc=i.description),i.meaning&&(o.meaning=i.meaning),r.children.push(new vi("  "),new yi(Oi,o,t.serialize(i.nodes)),new vi("\n"))}),serialize([new mi({version:"1.0",encoding:"UTF-8"}),new vi("\n"),new gi(Ii,Ni),new vi("\n"),r])},Xmb.prototype.load=function(e,t,r){throw new Error("Unsupported")},Xmb}(),Bi=function(){function _Visitor(){}return _Visitor.prototype.visitText=function(e,t){return[new vi(e.value)]},_Visitor.prototype.visitContainer=function(e,t){var r=this,n=[];return e.children.forEach(function(e){return n.push.apply(n,e.visit(r))}),n},_Visitor.prototype.visitIcu=function(e,t){var r=this,n=[new vi("{"+e.expression+", "+e.type+", ")];return Object.keys(e.cases).forEach(function(t){n.push.apply(n,[new vi(t+" {")].concat(e.cases[t].visit(r),[new vi("} ")]))}),n.push(new vi("}")),n},_Visitor.prototype.visitTagPlaceholder=function(e,t){var r=new yi(Li,{},[new vi("<"+e.tag+">")]),n=new yi(Ri,{name:e.startName},[r]);if(e.isVoid)return[n];var i=new yi(Li,{},[new vi("</"+e.tag+">")]),o=new yi(Ri,{name:e.closeName},[i]);return[n].concat(this.serialize(e.children),[o])},_Visitor.prototype.visitPlaceholder=function(e,t){return[new yi(Ri,{name:e.name})]},_Visitor.prototype.visitIcuPlaceholder=function(e,t){return[new yi(Ri,{name:e.name})]},_Visitor.prototype.serialize=function(e){var t=this;return I.flatten(e.map(function(e){return e.visit(t)}))},_Visitor}(),Vi="translationbundle",Fi="translation",ji="ph",Ui=function(){function Xtb(e,t){this._htmlParser=e,this._interpolationConfig=t}return Xtb.prototype.write=function(e){throw new Error("Unsupported")},Xtb.prototype.load=function(e,t,r){var n=this,i=(new hi).parse(e,t);if(i.errors.length)throw new Error("xtb parse errors:\n"+i.errors.join("\n"));var o=(new zi).parse(i.rootNodes,r),a=o.messages,s=o.errors;if(s.length)throw new Error("xtb parse errors:\n"+s.join("\n"));var l={},c=[];if(Object.keys(a).forEach(function(e){var r=n._htmlParser.parse(a[e],t,!0,n._interpolationConfig);c.push.apply(c,r.errors),l[e]=r.rootNodes}),c.length)throw new Error("xtb parse errors:\n"+c.join("\n"));return l},Xtb}(),zi=function(){function _Visitor(){}return _Visitor.prototype.parse=function(e,t){var r=this;this._messageNodes=[],this._translatedMessages={},this._bundleDepth=0,this._translationDepth=0,this._errors=[],visitAll(this,e,null);var n=t.getMessageMap(),i=extractPlaceholders(t),o=extractPlaceholderToIds(t);return this._messageNodes.filter(function(e){return n.hasOwnProperty(e[0])}).sort(function(e,t){return 0==Object.keys(n[e[0]].placeholderToMsgIds).length?-1:0==Object.keys(n[t[0]].placeholderToMsgIds).length?1:0}).forEach(function(e){var t=e[0];r._placeholders=i[t]||{},r._placeholderToIds=o[t]||{},r._translatedMessages[t]=visitAll(r,e[1]).join("")}),{messages:this._translatedMessages,errors:this._errors}},_Visitor.prototype.visitElement=function(e,t){switch(e.name){case Vi:this._bundleDepth++,this._bundleDepth>1&&this._addError(e,"<"+Vi+"> elements can not be nested"),visitAll(this,e.children,null),this._bundleDepth--;break;case Fi:this._translationDepth++,this._translationDepth>1&&this._addError(e,"<"+Fi+"> elements can not be nested");var r=e.attrs.find(function(e){return"id"===e.name});r?this._messageNodes.push([r.value,e.children]):this._addError(e,"<"+Fi+'> misses the "id" attribute'),this._translationDepth--;break;case ji:var n=e.attrs.find(function(e){return"name"===e.name});if(n){var i=n.value;if(this._placeholders.hasOwnProperty(i))return this._placeholders[i];if(this._placeholderToIds.hasOwnProperty(i)&&this._translatedMessages.hasOwnProperty(this._placeholderToIds[i]))return this._translatedMessages[this._placeholderToIds[i]];this._addError(e,'The placeholder "'+i+'" does not exists in the source message')}else this._addError(e,"<"+ji+'> misses the "name" attribute');break;default:this._addError(e,"Unexpected tag")}},_Visitor.prototype.visitAttribute=function(e,t){throw new Error("unreachable code")},_Visitor.prototype.visitText=function(e,t){return e.value},_Visitor.prototype.visitComment=function(e,t){return""},_Visitor.prototype.visitExpansion=function(e,t){var r=this;e.cases.map(function(e){return e.visit(r,null)});return"{"+e.switchValue+", "+e.type+", strCases.join(' ')}"},_Visitor.prototype.visitExpansionCase=function(e,t){return e.value+" {"+visitAll(this,e.expression,null)+"}"},_Visitor.prototype._addError=function(e,t){this._errors.push(new ti(e.sourceSpan,t))},_Visitor}(),Wi=function(){function TranslationBundle(e){void 0===e&&(e={}),this._messageMap=e}return TranslationBundle.load=function(e,t,r,n){return new TranslationBundle(n.load(e,t,r))},TranslationBundle.prototype.get=function(e){return this._messageMap[e]},TranslationBundle.prototype.has=function(e){return e in this._messageMap},TranslationBundle}(),Hi=function(){function I18NHtmlParser(e,t,r){this._htmlParser=e,this._translations=t,this._translationsFormat=r}return I18NHtmlParser.prototype.parse=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=rn);var i=this._htmlParser.parse(e,t,r,n);if(!this._translations||""===this._translations)return i;var o=new li(this._htmlParser,[],{}),a=o.updateFromTemplate(e,t,n);if(a&&a.length)return new Bn(i.rootNodes,i.errors.concat(a));var s=this._createSerializer(n),l=Wi.load(this._translations,t,o,s);return mergeTranslations(i.rootNodes,l,n,[],{})},I18NHtmlParser.prototype._createSerializer=function(e){var t=(this._translationsFormat||"xlf").toLowerCase();switch(t){case"xmb":return new Di;case"xtb":return new Ui(this._htmlParser,e);case"xliff":case"xlf":default:return new Pi(this._htmlParser,e)}},I18NHtmlParser}(),qi=r.__core_private__.isDefaultChangeDetectionStrategy,Gi=r.__core_private__.ChangeDetectorStatus,Ki=r.__core_private__.LifecycleHooks,$i=r.__core_private__.LIFECYCLE_HOOKS_VALUES,Qi=r.__core_private__.ReflectorReader,Yi=r.__core_private__.AppElement,Xi=r.__core_private__.CodegenComponentFactoryResolver,Zi=r.__core_private__.AppView,Ji=r.__core_private__.DebugAppView,eo=r.__core_private__.NgModuleInjector,to=r.__core_private__.registerModuleFactory,ro=r.__core_private__.ViewType,no=r.__core_private__.MAX_INTERPOLATION_VALUES,io=r.__core_private__.checkBinding,oo=r.__core_private__.flattenNestedViewRenderNodes,ao=r.__core_private__.interpolate,so=r.__core_private__.ViewUtils,lo=r.__core_private__.DebugContext,co=r.__core_private__.StaticNodeDebugInfo,uo=r.__core_private__.devModeEqual,po=r.__core_private__.UNINITIALIZED,ho=r.__core_private__.ValueUnwrapper,fo=r.__core_private__.TemplateRef_,mo=r.__core_private__.EMPTY_ARRAY,go=r.__core_private__.EMPTY_MAP,yo=r.__core_private__.pureProxy1,vo=r.__core_private__.pureProxy2,bo=r.__core_private__.pureProxy3,_o=r.__core_private__.pureProxy4,wo=r.__core_private__.pureProxy5,xo=r.__core_private__.pureProxy6,So=r.__core_private__.pureProxy7,Co=r.__core_private__.pureProxy8,ko=r.__core_private__.pureProxy9,Eo=r.__core_private__.pureProxy10,Ao=r.__core_private__.castByValue,Po=r.__core_private__.Console,To=r.__core_private__.reflector,Mo=r.__core_private__.Reflector,Io=r.__core_private__.ReflectionCapabilities,Oo=r.__core_private__.NoOpAnimationPlayer,Ro=r.__core_private__.AnimationSequencePlayer,Lo=r.__core_private__.AnimationGroupPlayer,No=r.__core_private__.AnimationKeyframe,Do=r.__core_private__.AnimationStyles,Bo=r.__core_private__.AnimationOutput,Vo=r.__core_private__.ANY_STATE,Fo=r.__core_private__.DEFAULT_STATE,jo=r.__core_private__.EMPTY_STATE,Uo=r.__core_private__.FILL_STYLE_FLAG,zo=r.__core_private__.prepareFinalAnimationStyles,Wo=r.__core_private__.balanceAnimationKeyframes,Ho=r.__core_private__.clearStyles,qo=r.__core_private__.collectAndResolveStyles,Go=r.__core_private__.renderStyles,Ko=r.__core_private__.ComponentStillLoadingError,$o=assetUrl("core","linker/view"),Qo=assetUrl("core","linker/view_utils"),Yo=assetUrl("core","change_detection/change_detection"),Xo=assetUrl("core","animation/animation_style_util"),Zo=function(){function Identifiers(){}return Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS={name:"ANALYZE_FOR_ENTRY_COMPONENTS",moduleUrl:assetUrl("core","metadata/di"),runtime:r.ANALYZE_FOR_ENTRY_COMPONENTS},Identifiers.ViewUtils={name:"ViewUtils",moduleUrl:assetUrl("core","linker/view_utils"),runtime:so},Identifiers.AppView={name:"AppView",moduleUrl:$o,runtime:Zi},Identifiers.DebugAppView={name:"DebugAppView",moduleUrl:$o,runtime:Ji},Identifiers.AppElement={name:"AppElement",moduleUrl:assetUrl("core","linker/element"),runtime:Yi},Identifiers.ElementRef={name:"ElementRef",moduleUrl:assetUrl("core","linker/element_ref"),runtime:r.ElementRef},Identifiers.ViewContainerRef={name:"ViewContainerRef",moduleUrl:assetUrl("core","linker/view_container_ref"),runtime:r.ViewContainerRef},Identifiers.ChangeDetectorRef={name:"ChangeDetectorRef",moduleUrl:assetUrl("core","change_detection/change_detector_ref"),runtime:r.ChangeDetectorRef},Identifiers.RenderComponentType={name:"RenderComponentType",moduleUrl:assetUrl("core","render/api"),runtime:r.RenderComponentType},Identifiers.QueryList={name:"QueryList",moduleUrl:assetUrl("core","linker/query_list"),runtime:r.QueryList},Identifiers.TemplateRef={name:"TemplateRef",moduleUrl:assetUrl("core","linker/template_ref"),runtime:r.TemplateRef},Identifiers.TemplateRef_={name:"TemplateRef_",moduleUrl:assetUrl("core","linker/template_ref"),runtime:fo},Identifiers.CodegenComponentFactoryResolver={name:"CodegenComponentFactoryResolver",moduleUrl:assetUrl("core","linker/component_factory_resolver"),runtime:Xi},Identifiers.ComponentFactoryResolver={name:"ComponentFactoryResolver",moduleUrl:assetUrl("core","linker/component_factory_resolver"),runtime:r.ComponentFactoryResolver},Identifiers.ComponentFactory={name:"ComponentFactory",runtime:r.ComponentFactory,moduleUrl:assetUrl("core","linker/component_factory")},Identifiers.NgModuleFactory={name:"NgModuleFactory",runtime:r.NgModuleFactory,moduleUrl:assetUrl("core","linker/ng_module_factory")},Identifiers.NgModuleInjector={name:"NgModuleInjector",runtime:eo,moduleUrl:assetUrl("core","linker/ng_module_factory")},Identifiers.RegisterModuleFactoryFn={name:"registerModuleFactory",runtime:to,moduleUrl:assetUrl("core","linker/ng_module_factory_loader")},Identifiers.ValueUnwrapper={name:"ValueUnwrapper",moduleUrl:Yo,runtime:ho},Identifiers.Injector={name:"Injector",moduleUrl:assetUrl("core","di/injector"),runtime:r.Injector},Identifiers.ViewEncapsulation={name:"ViewEncapsulation",moduleUrl:assetUrl("core","metadata/view"),runtime:r.ViewEncapsulation},Identifiers.ViewType={name:"ViewType",moduleUrl:assetUrl("core","linker/view_type"),runtime:ro},Identifiers.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleUrl:Yo,runtime:r.ChangeDetectionStrategy},Identifiers.StaticNodeDebugInfo={name:"StaticNodeDebugInfo",moduleUrl:assetUrl("core","linker/debug_context"),runtime:co},
Identifiers.DebugContext={name:"DebugContext",moduleUrl:assetUrl("core","linker/debug_context"),runtime:lo},Identifiers.Renderer={name:"Renderer",moduleUrl:assetUrl("core","render/api"),runtime:r.Renderer},Identifiers.SimpleChange={name:"SimpleChange",moduleUrl:Yo,runtime:r.SimpleChange},Identifiers.UNINITIALIZED={name:"UNINITIALIZED",moduleUrl:Yo,runtime:po},Identifiers.ChangeDetectorStatus={name:"ChangeDetectorStatus",moduleUrl:Yo,runtime:Gi},Identifiers.checkBinding={name:"checkBinding",moduleUrl:Qo,runtime:io},Identifiers.flattenNestedViewRenderNodes={name:"flattenNestedViewRenderNodes",moduleUrl:Qo,runtime:oo},Identifiers.devModeEqual={name:"devModeEqual",moduleUrl:Yo,runtime:uo},Identifiers.interpolate={name:"interpolate",moduleUrl:Qo,runtime:ao},Identifiers.castByValue={name:"castByValue",moduleUrl:Qo,runtime:Ao},Identifiers.EMPTY_ARRAY={name:"EMPTY_ARRAY",moduleUrl:Qo,runtime:mo},Identifiers.EMPTY_MAP={name:"EMPTY_MAP",moduleUrl:Qo,runtime:go},Identifiers.pureProxies=[null,{name:"pureProxy1",moduleUrl:Qo,runtime:yo},{name:"pureProxy2",moduleUrl:Qo,runtime:vo},{name:"pureProxy3",moduleUrl:Qo,runtime:bo},{name:"pureProxy4",moduleUrl:Qo,runtime:_o},{name:"pureProxy5",moduleUrl:Qo,runtime:wo},{name:"pureProxy6",moduleUrl:Qo,runtime:xo},{name:"pureProxy7",moduleUrl:Qo,runtime:So},{name:"pureProxy8",moduleUrl:Qo,runtime:Co},{name:"pureProxy9",moduleUrl:Qo,runtime:ko},{name:"pureProxy10",moduleUrl:Qo,runtime:Eo}],Identifiers.SecurityContext={name:"SecurityContext",moduleUrl:assetUrl("core","security"),runtime:r.SecurityContext},Identifiers.AnimationKeyframe={name:"AnimationKeyframe",moduleUrl:assetUrl("core","animation/animation_keyframe"),runtime:No},Identifiers.AnimationStyles={name:"AnimationStyles",moduleUrl:assetUrl("core","animation/animation_styles"),runtime:Do},Identifiers.NoOpAnimationPlayer={name:"NoOpAnimationPlayer",moduleUrl:assetUrl("core","animation/animation_player"),runtime:Oo},Identifiers.AnimationGroupPlayer={name:"AnimationGroupPlayer",moduleUrl:assetUrl("core","animation/animation_group_player"),runtime:Lo},Identifiers.AnimationSequencePlayer={name:"AnimationSequencePlayer",moduleUrl:assetUrl("core","animation/animation_sequence_player"),runtime:Ro},Identifiers.prepareFinalAnimationStyles={name:"prepareFinalAnimationStyles",moduleUrl:Xo,runtime:zo},Identifiers.balanceAnimationKeyframes={name:"balanceAnimationKeyframes",moduleUrl:Xo,runtime:Wo},Identifiers.clearStyles={name:"clearStyles",moduleUrl:Xo,runtime:Ho},Identifiers.renderStyles={name:"renderStyles",moduleUrl:Xo,runtime:Go},Identifiers.collectAndResolveStyles={name:"collectAndResolveStyles",moduleUrl:Xo,runtime:qo},Identifiers.LOCALE_ID={name:"LOCALE_ID",moduleUrl:assetUrl("core","i18n/tokens"),runtime:r.LOCALE_ID},Identifiers.TRANSLATIONS_FORMAT={name:"TRANSLATIONS_FORMAT",moduleUrl:assetUrl("core","i18n/tokens"),runtime:r.TRANSLATIONS_FORMAT},Identifiers.AnimationOutput={name:"AnimationOutput",moduleUrl:assetUrl("core","animation/animation_output"),runtime:Bo},Identifiers}(),Jo=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ea=function(e){function HtmlParser(){e.call(this,getHtmlTagDefinition)}return Jo(HtmlParser,e),HtmlParser.prototype.parse=function(t,r,n,i){return void 0===n&&(n=!1),void 0===i&&(i=rn),e.prototype.parse.call(this,t,r,n,i)},HtmlParser.decorators=[{type:r.Injectable}],HtmlParser.ctorParameters=[],HtmlParser}(Vn),ta=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ra=["zero","one","two","few","many","other"],na=function(){function ExpansionResult(e,t,r){this.nodes=e,this.expanded=t,this.errors=r}return ExpansionResult}(),ia=function(e){function ExpansionError(t,r){e.call(this,t,r)}return ta(ExpansionError,e),ExpansionError}(_n),oa=function(){function _Expander(){this.isExpanded=!1,this.errors=[]}return _Expander.prototype.visitElement=function(e,t){return new kn(e.name,e.attrs,visitAll(this,e.children),e.sourceSpan,e.startSourceSpan,e.endSourceSpan)},_Expander.prototype.visitAttribute=function(e,t){return e},_Expander.prototype.visitText=function(e,t){return e},_Expander.prototype.visitComment=function(e,t){return e},_Expander.prototype.visitExpansion=function(e,t){return this.isExpanded=!0,"plural"==e.type?_expandPluralForm(e,this.errors):_expandDefaultForm(e,this.errors)},_Expander.prototype.visitExpansionCase=function(e,t){throw new Error("Should not be reached")},_Expander}(),aa=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},sa=function(e){function ProviderError(t,r){e.call(this,r,t)}return aa(ProviderError,e),ProviderError}(_n),la=function(){function ProviderViewContext(e,t){var r=this;this.component=e,this.sourceSpan=t,this.errors=[],this.viewQueries=_getViewQueries(e),this.viewProviders=new Map,_normalizeProviders(e.viewProviders,t,this.errors).forEach(function(e){isBlank(r.viewProviders.get(e.token.reference))&&r.viewProviders.set(e.token.reference,!0)})}return ProviderViewContext}(),ca=function(){function ProviderElementContext(e,t,r,n,i,o,a){var s=this;this._viewContext=e,this._parent=t,this._isViewRoot=r,this._directiveAsts=n,this._sourceSpan=a,this._transformedProviders=new Map,this._seenProviders=new Map,this._hasViewContainer=!1,this._attrs={},i.forEach(function(e){return s._attrs[e.name]=e.value});var l=n.map(function(e){return e.directive});this._allProviders=_resolveProvidersFromDirectives(l,a,e.errors),this._contentQueries=_getContentQueries(l);var c=new Map;T.values(this._allProviders).forEach(function(e){s._addQueryReadsTo(e.token,c)}),o.forEach(function(e){s._addQueryReadsTo(new gt({value:e.name}),c)}),isPresent(c.get(resolveIdentifierToken(Zo.ViewContainerRef).reference))&&(this._hasViewContainer=!0),T.values(this._allProviders).forEach(function(e){var t=e.eager||isPresent(c.get(e.token.reference));t&&s._getOrCreateLocalProvider(e.providerType,e.token,!0)})}return ProviderElementContext.prototype.afterElement=function(){var e=this;T.values(this._allProviders).forEach(function(t){e._getOrCreateLocalProvider(t.providerType,t.token,!1)})},Object.defineProperty(ProviderElementContext.prototype,"transformProviders",{get:function(){return T.values(this._transformedProviders)},enumerable:!0,configurable:!0}),Object.defineProperty(ProviderElementContext.prototype,"transformedDirectiveAsts",{get:function(){var e=this.transformProviders.map(function(e){return e.token.identifier}),t=I.clone(this._directiveAsts);return I.sort(t,function(t,r){return e.indexOf(t.directive.type)-e.indexOf(r.directive.type)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(ProviderElementContext.prototype,"transformedHasViewContainer",{get:function(){return this._hasViewContainer},enumerable:!0,configurable:!0}),ProviderElementContext.prototype._addQueryReadsTo=function(e,t){this._getQueriesFor(e).forEach(function(r){var n=isPresent(r.read)?r.read:e;isBlank(t.get(n.reference))&&t.set(n.reference,!0)})},ProviderElementContext.prototype._getQueriesFor=function(e){for(var t,r=[],n=this,i=0;null!==n;)t=n._contentQueries.get(e.reference),isPresent(t)&&I.addAll(r,t.filter(function(e){return e.descendants||i<=1})),n._directiveAsts.length>0&&i++,n=n._parent;return t=this._viewContext.viewQueries.get(e.reference),isPresent(t)&&I.addAll(r,t),r},ProviderElementContext.prototype._getOrCreateLocalProvider=function(e,r,n){var i=this,o=this._allProviders.get(r.reference);if(isBlank(o)||(e===t.ProviderAstType.Directive||e===t.ProviderAstType.PublicService)&&o.providerType===t.ProviderAstType.PrivateService||(e===t.ProviderAstType.PrivateService||e===t.ProviderAstType.PublicService)&&o.providerType===t.ProviderAstType.Builtin)return null;var a=this._transformedProviders.get(r.reference);if(isPresent(a))return a;if(isPresent(this._seenProviders.get(r.reference)))return this._viewContext.errors.push(new sa("Cannot instantiate cyclic dependency! "+r.name,this._sourceSpan)),null;this._seenProviders.set(r.reference,!0);var s=o.providers.map(function(e){var t,r=e.useValue,a=e.useExisting;if(isPresent(e.useExisting)){var s=i._getDependency(o.providerType,new dt({token:e.useExisting}),n);isPresent(s.token)?a=s.token:(a=null,r=s.value)}else if(isPresent(e.useFactory)){var l=isPresent(e.deps)?e.deps:e.useFactory.diDeps;t=l.map(function(e){return i._getDependency(o.providerType,e,n)})}else if(isPresent(e.useClass)){var l=isPresent(e.deps)?e.deps:e.useClass.diDeps;t=l.map(function(e){return i._getDependency(o.providerType,e,n)})}return _transformProvider(e,{useExisting:a,useValue:r,deps:t})});return a=_transformProviderAst(o,{eager:n,providers:s}),this._transformedProviders.set(r.reference,a),a},ProviderElementContext.prototype._getLocalDependency=function(e,r,n){if(void 0===n&&(n=null),r.isAttribute){var i=this._attrs[r.token.value];return new dt({isValue:!0,value:normalizeBlank(i)})}if(isPresent(r.query)||isPresent(r.viewQuery))return r;if(isPresent(r.token)){if(e===t.ProviderAstType.Directive||e===t.ProviderAstType.Component){if(r.token.reference===resolveIdentifierToken(Zo.Renderer).reference||r.token.reference===resolveIdentifierToken(Zo.ElementRef).reference||r.token.reference===resolveIdentifierToken(Zo.ChangeDetectorRef).reference||r.token.reference===resolveIdentifierToken(Zo.TemplateRef).reference)return r;r.token.reference===resolveIdentifierToken(Zo.ViewContainerRef).reference&&(this._hasViewContainer=!0)}if(r.token.reference===resolveIdentifierToken(Zo.Injector).reference)return r;if(isPresent(this._getOrCreateLocalProvider(e,r.token,n)))return r}return null},ProviderElementContext.prototype._getDependency=function(e,r,n){void 0===n&&(n=null);var i=this,o=n,a=null;if(r.isSkipSelf||(a=this._getLocalDependency(e,r,n)),r.isSelf)isBlank(a)&&r.isOptional&&(a=new dt({isValue:!0,value:null}));else{for(;isBlank(a)&&isPresent(i._parent);){var s=i;i=i._parent,s._isViewRoot&&(o=!1),a=i._getLocalDependency(t.ProviderAstType.PublicService,r,o)}isBlank(a)&&(a=!r.isHost||this._viewContext.component.type.isHost||this._viewContext.component.type.reference===r.token.reference||isPresent(this._viewContext.viewProviders.get(r.token.reference))?r:r.isOptional?a=new dt({isValue:!0,value:null}):null)}return isBlank(a)&&this._viewContext.errors.push(new sa("No provider for "+r.token.name,this._sourceSpan)),a},ProviderElementContext}(),ua=function(){function NgModuleProviderAnalyzer(e,r,n){var i=this;this._transformedProviders=new Map,this._seenProviders=new Map,this._errors=[],this._allProviders=new Map;var o=e.transitiveModule.modules.map(function(e){return e.type});o.forEach(function(e){var r=new ft({token:new gt({identifier:e}),useClass:e});_resolveProviders([r],t.ProviderAstType.PublicService,!0,n,i._errors,i._allProviders)}),_resolveProviders(_normalizeProviders(e.transitiveModule.providers.concat(r),n,this._errors),t.ProviderAstType.PublicService,!1,n,this._errors,this._allProviders)}return NgModuleProviderAnalyzer.prototype.parse=function(){var e=this;if(T.values(this._allProviders).forEach(function(t){e._getOrCreateLocalProvider(t.token,t.eager)}),this._errors.length>0){var t=this._errors.join("\n");throw new Error("Provider parse errors:\n"+t)}return T.values(this._transformedProviders)},NgModuleProviderAnalyzer.prototype._getOrCreateLocalProvider=function(e,t){var r=this,n=this._allProviders.get(e.reference);if(isBlank(n))return null;var i=this._transformedProviders.get(e.reference);if(isPresent(i))return i;if(isPresent(this._seenProviders.get(e.reference)))return this._errors.push(new sa("Cannot instantiate cyclic dependency! "+e.name,n.sourceSpan)),null;this._seenProviders.set(e.reference,!0);var o=n.providers.map(function(e){var i,o=e.useValue,a=e.useExisting;if(isPresent(e.useExisting)){var s=r._getDependency(new dt({token:e.useExisting}),t,n.sourceSpan);isPresent(s.token)?a=s.token:(a=null,o=s.value)}else if(isPresent(e.useFactory)){var l=isPresent(e.deps)?e.deps:e.useFactory.diDeps;i=l.map(function(e){return r._getDependency(e,t,n.sourceSpan)})}else if(isPresent(e.useClass)){var l=isPresent(e.deps)?e.deps:e.useClass.diDeps;i=l.map(function(e){return r._getDependency(e,t,n.sourceSpan)})}return _transformProvider(e,{useExisting:a,useValue:o,deps:i})});return i=_transformProviderAst(n,{eager:t,providers:o}),this._transformedProviders.set(e.reference,i),i},NgModuleProviderAnalyzer.prototype._getDependency=function(e,t,r){void 0===t&&(t=null);var n=!1;!e.isSkipSelf&&isPresent(e.token)&&(e.token.reference===resolveIdentifierToken(Zo.Injector).reference||e.token.reference===resolveIdentifierToken(Zo.ComponentFactoryResolver).reference?n=!0:isPresent(this._getOrCreateLocalProvider(e.token,t))&&(n=!0));var i=e;return e.isSelf&&!n&&(e.isOptional?i=new dt({isValue:!0,value:null}):this._errors.push(new sa("No provider for "+e.token.name,r))),i},NgModuleProviderAnalyzer}(),pa=function(){function ElementSchemaRegistry(){}return ElementSchemaRegistry}(),ha=function(){function StyleWithImports(e,t){this.style=e,this.styleUrls=t}return StyleWithImports}(),da=/@import\s+(?:url\()?\s*(?:(?:['"]([^'"]*))|([^;\)\s]*))[^;]*;?/g,fa=/^([^:\/?#]+):/,ma="select",ga="ng-content",ya="link",va="rel",ba="href",_a="stylesheet",wa="style",xa="script",Sa="ngNonBindable",Ca="ngProjectAs";!function(e){e[e.NG_CONTENT=0]="NG_CONTENT",e[e.STYLE=1]="STYLE",e[e.STYLESHEET=2]="STYLESHEET",e[e.SCRIPT=3]="SCRIPT",e[e.OTHER=4]="OTHER"}(ai||(ai={}));var ka,Ea=function(){function PreparsedElement(e,t,r,n,i){this.type=e,this.selectAttr=t,this.hrefAttr=r,this.nonBindable=n,this.projectAs=i}return PreparsedElement}(),Aa=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Pa=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.+))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/,Ta=1,Ma=2,Ia=3,Oa=4,Ra=5,La=6,Na=7,Da=8,Ba=9,Va=10,Fa="animate-",ja="template",Ua="template",za="*",Wa="class",Ha=".",qa="attr",Ga="class",Ka="style",$a=U.parse("*")[0],Qa=new r.OpaqueToken("TemplateTransforms"),Ya=function(e){function TemplateParseError(t,r,n){e.call(this,r,t,n)}return Aa(TemplateParseError,e),TemplateParseError}(_n),Xa=function(){function TemplateParseResult(e,t){this.templateAst=e,this.errors=t}return TemplateParseResult}(),Za=function(){function TemplateParser(e,t,r,n,i){this._exprParser=e,this._schemaRegistry=t,this._htmlParser=r,this._console=n,this.transforms=i}return TemplateParser.prototype.parse=function(e,t,r,n,i,o){var a=this.tryParse(e,t,r,n,i,o),s=a.errors.filter(function(e){return e.level===nn.WARNING}),l=a.errors.filter(function(e){return e.level===nn.FATAL});if(s.length>0&&this._console.warn("Template parse warnings:\n"+s.join("\n")),l.length>0){var c=l.join("\n");throw new Error("Template parse errors:\n"+c)}return a.templateAst},TemplateParser.prototype.tryParse=function(e,t,r,n,i,o){var a;e.template&&(a=tn.fromArray(e.template.interpolation));var s,l=this._htmlParser.parse(t,o,!0,a),c=l.errors;if(0==c.length){var u=expandNodes(l.rootNodes);c.push.apply(c,u.errors),l=new Bn(u.nodes,c)}if(l.rootNodes.length>0){var p=removeIdentifierDuplicates(r),h=removeIdentifierDuplicates(n),d=new la(e,l.rootNodes[0].sourceSpan),f=new Ja(d,p,h,i,this._exprParser,this._schemaRegistry);s=visitAll(f,l.rootNodes,is),c.push.apply(c,f.errors.concat(d.errors))}else s=[];return this._assertNoReferenceDuplicationOnTemplate(s,c),c.length>0?new Xa(s,c):(isPresent(this.transforms)&&this.transforms.forEach(function(e){s=templateVisitAll(e,s)}),new Xa(s,c))},TemplateParser.prototype._assertNoReferenceDuplicationOnTemplate=function(e,t){var r=[];e.filter(function(e){return!!e.references}).forEach(function(e){return e.references.forEach(function(e){var n=e.name;if(r.indexOf(n)<0)r.push(n);else{var i=new Ya('Reference "#'+n+'" is defined several times',e.sourceSpan,nn.FATAL);t.push(i)}})})},TemplateParser.decorators=[{type:r.Injectable}],TemplateParser.ctorParameters=[{type:hn},{type:pa},{type:Hi},{type:Po},{type:Array,decorators:[{type:r.Optional},{type:r.Inject,args:[Qa]}]}],TemplateParser}(),Ja=function(){function TemplateParseVisitor(e,t,r,n,i,o){var a=this;this.providerViewContext=e,this._schemas=n,this._exprParser=i,this._schemaRegistry=o,this.selectorMatcher=new z,this.errors=[],this.directivesIndex=new Map,this.ngContentCount=0,this.pipesByName=new Map;var s=e.component.template;s&&s.interpolation&&(this._interpolationConfig={start:s.interpolation[0],end:s.interpolation[1]}),t.forEach(function(e,t){var r=U.parse(e.selector);a.selectorMatcher.addSelectables(r,e),a.directivesIndex.set(e,t)}),r.forEach(function(e){return a.pipesByName.set(e.name,e)})}return TemplateParseVisitor.prototype._reportError=function(e,t,r){void 0===r&&(r=nn.FATAL),this.errors.push(new Ya(e,t,r))},TemplateParseVisitor.prototype._reportParserErrors=function(e,t){for(var r=0,n=e;r<n.length;r++){var i=n[r];this._reportError(i.message,t)}},TemplateParseVisitor.prototype._parseInterpolation=function(e,t){var r=t.start.toString();try{var n=this._exprParser.parseInterpolation(e,r,this._interpolationConfig);if(n&&this._reportParserErrors(n.errors,t),this._checkPipes(n,t),isPresent(n)&&n.ast.expressions.length>no)throw new Error("Only support at most "+no+" interpolation values!");return n}catch(i){return this._reportError(""+i,t),this._exprParser.wrapLiteralPrimitive("ERROR",r)}},TemplateParseVisitor.prototype._parseAction=function(e,t){var r=t.start.toString();try{var n=this._exprParser.parseAction(e,r,this._interpolationConfig);return n&&this._reportParserErrors(n.errors,t),!n||n.ast instanceof It?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",r)):(this._checkPipes(n,t),n)}catch(i){return this._reportError(""+i,t),this._exprParser.wrapLiteralPrimitive("ERROR",r)}},TemplateParseVisitor.prototype._parseBinding=function(e,t){var r=t.start.toString();try{var n=this._exprParser.parseBinding(e,r,this._interpolationConfig);return n&&this._reportParserErrors(n.errors,t),this._checkPipes(n,t),n}catch(i){return this._reportError(""+i,t),this._exprParser.wrapLiteralPrimitive("ERROR",r)}},TemplateParseVisitor.prototype._parseTemplateBindings=function(e,t){var r=this,n=t.start.toString();try{var i=this._exprParser.parseTemplateBindings(e,n);return this._reportParserErrors(i.errors,t),i.templateBindings.forEach(function(e){isPresent(e.expression)&&r._checkPipes(e.expression,t)}),i.warnings.forEach(function(e){r._reportError(e,t,nn.WARNING)}),i.templateBindings}catch(o){return this._reportError(""+o,t),[]}},TemplateParseVisitor.prototype._checkPipes=function(e,t){var r=this;if(isPresent(e)){var n=new as;e.visit(n),n.pipes.forEach(function(e){r.pipesByName.has(e)||r._reportError("The pipe '"+e+"' could not be found",t)})}},TemplateParseVisitor.prototype.visitExpansion=function(e,t){return null},TemplateParseVisitor.prototype.visitExpansionCase=function(e,t){return null},TemplateParseVisitor.prototype.visitText=function(e,t){var r=t.findNgContentIndex($a),n=this._parseInterpolation(e.value,e.sourceSpan);return isPresent(n)?new u(n,r,e.sourceSpan):new c(e.value,r,e.sourceSpan)},TemplateParseVisitor.prototype.visitAttribute=function(e,t){return new p(e.name,e.value,e.sourceSpan)},TemplateParseVisitor.prototype.visitComment=function(e,t){return null},TemplateParseVisitor.prototype.visitElement=function(e,t){var r=this,n=e.name,i=preparseElement(e);if(i.type===ai.SCRIPT||i.type===ai.STYLE)return null;if(i.type===ai.STYLESHEET&&isStyleUrlResolvable(i.hrefAttr))return null;var o=[],a=[],s=[],l=[],c=[],u=[],p=[],h=[],d=[],f=!1,m=[],v=splitNsName(n.toLowerCase())[1],b=v==ja;e.attrs.forEach(function(e){var t=r._parseAttr(b,e,o,a,c,u,s,l),n=r._parseInlineTemplateBinding(e,h,p,d);n&&f&&r._reportError("Can't have multiple template bindings on one element. Use only one attribute named 'template' or prefixed with *",e.sourceSpan),t||n||(m.push(r.visitAttribute(e,null)),o.push([e.name,e.value])),n&&(f=!0)});var _=createElementCssSelector(n,o),x=this._parseDirectives(this.selectorMatcher,_),S=x.directives,C=x.matchElement,k=[],E=this._createDirectiveAsts(b,e.name,S,a,s,e.sourceSpan,k),A=this._createElementPropertyAsts(e.name,a,E).concat(c),P=t.isTemplateElement||f,T=new ca(this.providerViewContext,t.providerContext,P,E,m,k,e.sourceSpan),M=visitAll(i.nonBindable?os:this,e.children,ns.create(b,E,b?t.providerContext:T));T.afterElement();var I,O=isPresent(i.projectAs)?U.parse(i.projectAs)[0]:_,R=t.findNgContentIndex(O);if(i.type===ai.NG_CONTENT)isPresent(e.children)&&e.children.length>0&&this._reportError("<ng-content> element cannot have content. <ng-content> must be immediately followed by </ng-content>",e.sourceSpan),I=new w((this.ngContentCount++),f?null:R,e.sourceSpan);else if(b)this._assertAllEventsPublishedByDirectives(E,u),this._assertNoComponentsNorElementBindingsOnTemplate(E,A,e.sourceSpan),I=new y(m,u,k,l,T.transformedDirectiveAsts,T.transformProviders,T.transformedHasViewContainer,M,f?null:R,e.sourceSpan);else{this._assertElementExists(C,e),this._assertOnlyOneComponent(E,e.sourceSpan);var L=f?null:t.findNgContentIndex(O);I=new g(n,m,A,u,k,T.transformedDirectiveAsts,T.transformProviders,T.transformedHasViewContainer,M,f?null:L,e.sourceSpan)}if(f){var N=createElementCssSelector(ja,h),D=this._parseDirectives(this.selectorMatcher,N).directives,B=this._createDirectiveAsts(!0,e.name,D,p,[],e.sourceSpan,[]),V=this._createElementPropertyAsts(e.name,p,B);this._assertNoComponentsNorElementBindingsOnTemplate(B,V,e.sourceSpan);var F=new ca(this.providerViewContext,t.providerContext,t.isTemplateElement,B,[],[],e.sourceSpan);F.afterElement(),I=new y([],[],[],d,F.transformedDirectiveAsts,F.transformProviders,F.transformedHasViewContainer,[I],R,e.sourceSpan)}return I},TemplateParseVisitor.prototype._parseInlineTemplateBinding=function(e,t,r,n){var i=null;if(this._normalizeAttributeName(e.name)==Ua)i=e.value;else if(e.name.startsWith(za)){var o=e.name.substring(za.length);i=0==e.value.length?o:o+" "+e.value}if(isPresent(i)){for(var a=this._parseTemplateBindings(i,e.sourceSpan),s=0;s<a.length;s++){var l=a[s];l.keyIsVar?n.push(new m(l.key,l.name,e.sourceSpan)):isPresent(l.expression)?this._parsePropertyAst(l.key,l.expression,e.sourceSpan,t,r):(t.push([l.key,""]),this._parseLiteralAttr(l.key,null,e.sourceSpan,r))}return!0}return!1},TemplateParseVisitor.prototype._parseAttr=function(e,t,r,n,i,o,a,s){var l=this._normalizeAttributeName(t.name),c=t.value,u=t.sourceSpan,p=l.match(Pa),h=!1;if(null!==p)if(h=!0,isPresent(p[Ta]))this._parsePropertyOrAnimation(p[Na],c,u,r,n,i);else if(p[Ma])if(e){var d=p[Na];this._parseVariable(d,c,u,s)}else this._reportError('"let-" is only supported on template elements.',u);else if(p[Ia]){var d=p[Na];this._parseReference(d,c,u,a)}else p[Oa]?this._parseEvent(p[Na],c,u,r,o):p[Ra]?(this._parsePropertyOrAnimation(p[Na],c,u,r,n,i),this._parseAssignmentEvent(p[Na],c,u,r,o)):p[La]?("@"==l[0]&&isPresent(c)&&c.length>0&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',u,nn.FATAL),this._parseAnimation(p[Na],c,u,r,i)):p[Da]?(this._parsePropertyOrAnimation(p[Da],c,u,r,n,i),this._parseAssignmentEvent(p[Da],c,u,r,o)):p[Ba]?this._parsePropertyOrAnimation(p[Ba],c,u,r,n,i):p[Va]&&this._parseEvent(p[Va],c,u,r,o);else h=this._parsePropertyInterpolation(l,c,u,r,n);return h||this._parseLiteralAttr(l,c,u,n),h},TemplateParseVisitor.prototype._normalizeAttributeName=function(e){return/^data-/i.test(e)?e.substring(5):e},TemplateParseVisitor.prototype._parseVariable=function(e,t,r,n){e.indexOf("-")>-1&&this._reportError('"-" is not allowed in variable names',r),n.push(new m(e,t,r))},TemplateParseVisitor.prototype._parseReference=function(e,t,r,n){e.indexOf("-")>-1&&this._reportError('"-" is not allowed in reference names',r),n.push(new rs(e,t,r))},TemplateParseVisitor.prototype._parsePropertyOrAnimation=function(e,t,r,n,i,o){var a=Fa.length,s="@"==e[0],l=1;e.substring(0,a)==Fa&&(s=!0,l=a),s?this._parseAnimation(e.substr(l),t,r,n,o):this._parsePropertyAst(e,this._parseBinding(t,r),r,n,i)},TemplateParseVisitor.prototype._parseAnimation=function(e,n,i,o,a){isPresent(n)&&0!=n.length||(n="null");var s=this._parseBinding(n,i);o.push([e,s.source]),a.push(new h(e,t.PropertyBindingType.Animation,r.SecurityContext.NONE,s,null,i))},TemplateParseVisitor.prototype._parsePropertyInterpolation=function(e,t,r,n,i){var o=this._parseInterpolation(t,r);return!!isPresent(o)&&(this._parsePropertyAst(e,o,r,n,i),!0)},TemplateParseVisitor.prototype._parsePropertyAst=function(e,t,r,n,i){n.push([e,t.source]),i.push(new ts(e,t,(!1),r))},TemplateParseVisitor.prototype._parseAssignmentEvent=function(e,t,r,n,i){this._parseEvent(e+"Change",t+"=$event",r,n,i)},TemplateParseVisitor.prototype._parseEvent=function(e,t,r,n,i){var o=splitAtColon(e,[null,e]),a=o[0],s=o[1],l=this._parseAction(t,r);n.push([e,l.source]),i.push(new d(s,a,l,r))},TemplateParseVisitor.prototype._parseLiteralAttr=function(e,t,r,n){n.push(new ts(e,this._exprParser.wrapLiteralPrimitive(t,""),(!0),r))},TemplateParseVisitor.prototype._parseDirectives=function(e,t){var r=this,n=new Array(this.directivesIndex.size),i=!1;return e.match(t,function(e,t){n[r.directivesIndex.get(t)]=t,i=i||e.hasElementSelector()}),{directives:n.filter(function(e){return!!e}),matchElement:i}},TemplateParseVisitor.prototype._createDirectiveAsts=function(e,t,r,n,i,o,a){var s=this,l=new Set,c=null,u=r.map(function(e){var r=new vn(o.start,o.end,"Directive "+e.type.name);e.isComponent&&(c=e);var u=[],p=[],h=[];return s._createDirectiveHostPropertyAsts(t,e.hostProperties,r,u),s._createDirectiveHostEventAsts(e.hostListeners,r,p),s._createDirectivePropertyAsts(e.inputs,n,h),i.forEach(function(t){(0===t.value.length&&e.isComponent||e.exportAs==t.value)&&(a.push(new f(t.name,identifierToken(e.type),t.sourceSpan)),l.add(t.name))}),new b(e,h,u,p,r)});return i.forEach(function(t){if(t.value.length>0)l.has(t.name)||s._reportError('There is no directive with "exportAs" set to "'+t.value+'"',t.sourceSpan);else if(!c){var r=null;e&&(r=resolveIdentifierToken(Zo.TemplateRef)),a.push(new f(t.name,r,t.sourceSpan))}}),u},TemplateParseVisitor.prototype._createDirectiveHostPropertyAsts=function(e,t,r,n){var i=this;t&&M.forEach(t,function(t,o){if(isString(t)){var a=i._parseBinding(t,r);n.push(i._createElementPropertyAst(e,o,a,r))}else i._reportError('Value of the host property binding "'+o+'" needs to be a string representing an expression but got "'+t+'" ('+typeof t+")",r)})},TemplateParseVisitor.prototype._createDirectiveHostEventAsts=function(e,t,r){var n=this;e&&M.forEach(e,function(e,i){isString(e)?n._parseEvent(i,e,t,[],r):n._reportError('Value of the host listener "'+i+'" needs to be a string representing an expression but got "'+e+'" ('+typeof e+")",t)})},TemplateParseVisitor.prototype._createDirectivePropertyAsts=function(e,t,r){if(e){var n=new Map;t.forEach(function(e){var t=n.get(e.name);(isBlank(t)||t.isLiteral)&&n.set(e.name,e)}),M.forEach(e,function(e,t){var i=n.get(e);i&&r.push(new v(t,i.name,i.expression,i.sourceSpan))})}},TemplateParseVisitor.prototype._createElementPropertyAsts=function(e,t,r){var n=this,i=[],o=new Map;return r.forEach(function(e){e.inputs.forEach(function(e){o.set(e.templateName,e)})}),t.forEach(function(t){!t.isLiteral&&isBlank(o.get(t.name))&&i.push(n._createElementPropertyAst(e,t.name,t.expression,t.sourceSpan))}),i},TemplateParseVisitor.prototype._createElementPropertyAst=function(e,n,i,o){var a,s,l,c=null,u=n.split(Ha);if(1===u.length){var p=u[0];if("@"==p[0])s=p.substr(1),a=t.PropertyBindingType.Animation,l=r.SecurityContext.NONE;else if(s=this._schemaRegistry.getMappedPropName(p),l=this._schemaRegistry.securityContext(e,s),a=t.PropertyBindingType.Property,this._assertNoEventBinding(s,o),!this._schemaRegistry.hasProperty(e,s,this._schemas)){var d="Can't bind to '"+s+"' since it isn't a known property of '"+e+"'.";e.indexOf("-")>-1&&(d+="\n1. If '"+e+"' is an Angular component and it has '"+s+"' input, then verify that it is part of this module."+("\n2. If '"+e+"' is a Web Component then add \"CUSTOM_ELEMENTS_SCHEMA\" to the '@NgModule.schema' of this component to suppress this message.\n")),this._reportError(d,o)}}else if(u[0]==qa){s=u[1],this._assertNoEventBinding(s,o);var f=this._schemaRegistry.getMappedPropName(s);l=this._schemaRegistry.securityContext(e,f);var m=s.indexOf(":");if(m>-1){var g=s.substring(0,m),y=s.substring(m+1);s=mergeNsAndName(g,y)}a=t.PropertyBindingType.Attribute}else u[0]==Ga?(s=u[1],a=t.PropertyBindingType.Class,l=r.SecurityContext.NONE):u[0]==Ka?(c=u.length>2?u[2]:null,s=u[1],a=t.PropertyBindingType.Style,l=r.SecurityContext.STYLE):(this._reportError("Invalid property name '"+n+"'",o),a=null,l=null);return new h(s,a,l,i,c,o)},TemplateParseVisitor.prototype._assertNoEventBinding=function(e,t){e.toLowerCase().startsWith("on")&&this._reportError("Binding to event attribute '"+e+"' is disallowed "+("for security reasons, please use ("+e.slice(2)+")=..."),t,nn.FATAL)},TemplateParseVisitor.prototype._findComponentDirectiveNames=function(e){var t=[];return e.forEach(function(e){var r=e.directive.type.name;e.directive.isComponent&&t.push(r)}),t},TemplateParseVisitor.prototype._assertOnlyOneComponent=function(e,t){var r=this._findComponentDirectiveNames(e);r.length>1&&this._reportError("More than one component: "+r.join(","),t)},TemplateParseVisitor.prototype._assertElementExists=function(e,t){var r=t.name.replace(/^:xhtml:/,"");if(!e&&!this._schemaRegistry.hasElement(r,this._schemas)){var n="'"+r+"' is not a known element:\n"+("1. If '"+r+"' is an Angular component, then verify that it is part of this module.\n")+("2. If '"+r+"' is a Web Component then add \"CUSTOM_ELEMENTS_SCHEMA\" to the '@NgModule.schema' of this component to suppress this message.");this._reportError(n,t.sourceSpan)}},TemplateParseVisitor.prototype._assertNoComponentsNorElementBindingsOnTemplate=function(e,t,r){var n=this,i=this._findComponentDirectiveNames(e);i.length>0&&this._reportError("Components on an embedded template: "+i.join(","),r),t.forEach(function(e){n._reportError("Property binding "+e.name+' not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the "directives" section.',r)})},TemplateParseVisitor.prototype._assertAllEventsPublishedByDirectives=function(e,t){var r=this,n=new Set;e.forEach(function(e){M.forEach(e.directive.outputs,function(e){n.add(e)})}),t.forEach(function(e){!isPresent(e.target)&&n.has(e.name)||r._reportError("Event binding "+e.fullName+' not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the "directives" section.',e.sourceSpan)})},TemplateParseVisitor}(),es=function(){function NonBindableVisitor(){}return NonBindableVisitor.prototype.visitElement=function(e,t){var r=preparseElement(e);if(r.type===ai.SCRIPT||r.type===ai.STYLE||r.type===ai.STYLESHEET)return null;var n=e.attrs.map(function(e){return[e.name,e.value]}),i=createElementCssSelector(e.name,n),o=t.findNgContentIndex(i),a=visitAll(this,e.children,is);return new g(e.name,visitAll(this,e.attrs),[],[],[],[],[],(!1),a,o,e.sourceSpan)},NonBindableVisitor.prototype.visitComment=function(e,t){return null},NonBindableVisitor.prototype.visitAttribute=function(e,t){return new p(e.name,e.value,e.sourceSpan)},NonBindableVisitor.prototype.visitText=function(e,t){var r=t.findNgContentIndex($a);return new c(e.value,r,e.sourceSpan)},NonBindableVisitor.prototype.visitExpansion=function(e,t){return e},NonBindableVisitor.prototype.visitExpansionCase=function(e,t){
return e},NonBindableVisitor}(),ts=function(){function BoundElementOrDirectiveProperty(e,t,r,n){this.name=e,this.expression=t,this.isLiteral=r,this.sourceSpan=n}return BoundElementOrDirectiveProperty}(),rs=function(){function ElementOrDirectiveRef(e,t,r){this.name=e,this.value=t,this.sourceSpan=r}return ElementOrDirectiveRef}(),ns=function(){function ElementContext(e,t,r,n){this.isTemplateElement=e,this._ngContentIndexMatcher=t,this._wildcardNgContentIndex=r,this.providerContext=n}return ElementContext.create=function(e,t,r){var n=new z,i=null,o=t.find(function(e){return e.directive.isComponent});if(o)for(var a=o.directive.template.ngContentSelectors,s=0;s<a.length;s++){var l=a[s];"*"===l?i=s:n.addSelectables(U.parse(a[s]),s)}return new ElementContext(e,n,i,r)},ElementContext.prototype.findNgContentIndex=function(e){var t=[];return this._ngContentIndexMatcher.match(e,function(e,r){t.push(r)}),t.sort(),isPresent(this._wildcardNgContentIndex)&&t.push(this._wildcardNgContentIndex),t.length>0?t[0]:null},ElementContext}(),is=new ns((!0),new z,null,null),os=new es,as=function(e){function PipeCollector(){e.apply(this,arguments),this.pipes=new Set}return Aa(PipeCollector,e),PipeCollector.prototype.visitPipe=function(e,t){return this.pipes.add(e.name),e.exp.visit(this),this.visitAll(e.args,t),null},PipeCollector}(Zt),ss=function(){function CompilerConfig(e){var t=void 0===e?{}:e,n=t.renderTypes,i=void 0===n?new cs:n,o=t.defaultEncapsulation,a=void 0===o?r.ViewEncapsulation.Emulated:o,s=t.genDebugInfo,l=t.logBindingUpdate,c=t.useJit,u=void 0===c||c;this.renderTypes=i,this.defaultEncapsulation=a,this._genDebugInfo=s,this._logBindingUpdate=l,this.useJit=u}return Object.defineProperty(CompilerConfig.prototype,"genDebugInfo",{get:function(){return void 0===this._genDebugInfo?r.isDevMode():this._genDebugInfo},enumerable:!0,configurable:!0}),Object.defineProperty(CompilerConfig.prototype,"logBindingUpdate",{get:function(){return void 0===this._logBindingUpdate?r.isDevMode():this._logBindingUpdate},enumerable:!0,configurable:!0}),CompilerConfig}(),ls=function(){function RenderTypes(){}return Object.defineProperty(RenderTypes.prototype,"renderer",{get:function(){return unimplemented$1()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderText",{get:function(){return unimplemented$1()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderElement",{get:function(){return unimplemented$1()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderComment",{get:function(){return unimplemented$1()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderNode",{get:function(){return unimplemented$1()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderEvent",{get:function(){return unimplemented$1()},enumerable:!0,configurable:!0}),RenderTypes}(),cs=function(){function DefaultRenderTypes(){this.renderText=null,this.renderElement=null,this.renderComment=null,this.renderNode=null,this.renderEvent=null}return Object.defineProperty(DefaultRenderTypes.prototype,"renderer",{get:function(){return resolveIdentifier(Zo.Renderer)},enumerable:!0,configurable:!0}),DefaultRenderTypes}(),us=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ps=function(){function AnimationAst(){this.startTime=0,this.playTime=0}return AnimationAst}(),hs=function(e){function AnimationStateAst(){e.apply(this,arguments)}return us(AnimationStateAst,e),AnimationStateAst}(ps),ds=function(e){function AnimationEntryAst(t,r,n){e.call(this),this.name=t,this.stateDeclarations=r,this.stateTransitions=n}return us(AnimationEntryAst,e),AnimationEntryAst.prototype.visit=function(e,t){return e.visitAnimationEntry(this,t)},AnimationEntryAst}(ps),fs=function(e){function AnimationStateDeclarationAst(t,r){e.call(this),this.stateName=t,this.styles=r}return us(AnimationStateDeclarationAst,e),AnimationStateDeclarationAst.prototype.visit=function(e,t){return e.visitAnimationStateDeclaration(this,t)},AnimationStateDeclarationAst}(hs),ms=function(){function AnimationStateTransitionExpression(e,t){this.fromState=e,this.toState=t}return AnimationStateTransitionExpression}(),gs=function(e){function AnimationStateTransitionAst(t,r){e.call(this),this.stateChanges=t,this.animation=r}return us(AnimationStateTransitionAst,e),AnimationStateTransitionAst.prototype.visit=function(e,t){return e.visitAnimationStateTransition(this,t)},AnimationStateTransitionAst}(hs),ys=function(e){function AnimationStepAst(t,r,n,i,o){e.call(this),this.startingStyles=t,this.keyframes=r,this.duration=n,this.delay=i,this.easing=o}return us(AnimationStepAst,e),AnimationStepAst.prototype.visit=function(e,t){return e.visitAnimationStep(this,t)},AnimationStepAst}(ps),vs=function(e){function AnimationStylesAst(t){e.call(this),this.styles=t}return us(AnimationStylesAst,e),AnimationStylesAst.prototype.visit=function(e,t){return e.visitAnimationStyles(this,t)},AnimationStylesAst}(ps),bs=function(e){function AnimationKeyframeAst(t,r){e.call(this),this.offset=t,this.styles=r}return us(AnimationKeyframeAst,e),AnimationKeyframeAst.prototype.visit=function(e,t){return e.visitAnimationKeyframe(this,t)},AnimationKeyframeAst}(ps),_s=function(e){function AnimationWithStepsAst(t){e.call(this),this.steps=t}return us(AnimationWithStepsAst,e),AnimationWithStepsAst}(ps),ws=function(e){function AnimationGroupAst(t){e.call(this,t)}return us(AnimationGroupAst,e),AnimationGroupAst.prototype.visit=function(e,t){return e.visitAnimationGroup(this,t)},AnimationGroupAst}(_s),xs=function(e){function AnimationSequenceAst(t){e.call(this,t)}return us(AnimationSequenceAst,e),AnimationSequenceAst.prototype.visit=function(e,t){return e.visitAnimationSequence(this,t)},AnimationSequenceAst}(_s),Ss=i.Math,Cs=function(){function StylesCollectionEntry(e,t){this.time=e,this.value=t}return StylesCollectionEntry.prototype.matches=function(e,t){return e==this.time&&t==this.value},StylesCollectionEntry}(),ks=function(){function StylesCollection(){this.styles={}}return StylesCollection.prototype.insertAtTime=function(e,t,r){var n=new Cs(t,r),i=this.styles[e];isPresent(i)||(i=this.styles[e]=[]);for(var o=0,a=i.length-1;a>=0;a--)if(i[a].time<=t){o=a+1;break}I.insert(i,o,n)},StylesCollection.prototype.getByIndex=function(e,t){var r=this.styles[e];return isPresent(r)?t>=r.length?null:r[t]:null},StylesCollection.prototype.indexOfAtOrBeforeTime=function(e,t){var r=this.styles[e];if(isPresent(r))for(var n=r.length-1;n>=0;n--)if(r[n].time<=t)return n;return null},StylesCollection}(),Es=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},As=0,Ps=1,Ts=1e3,Ms=function(e){function AnimationParseError(t){e.call(this,null,t)}return Es(AnimationParseError,e),AnimationParseError.prototype.toString=function(){return""+this.msg},AnimationParseError}(_n),Is=function(){function ParsedAnimationResult(e,t){this.ast=e,this.errors=t}return ParsedAnimationResult}(),Os=function(){function _AnimationTimings(e,t,r){this.duration=e,this.delay=t,this.easing=r}return _AnimationTimings}(),Rs=new Map,Ls=function(){function CompiledAnimationTriggerResult(e,t,r,n,i){this.name=e,this.statesMapStatement=t,this.statesVariableName=r,this.fnStatement=n,this.fnVariable=i}return CompiledAnimationTriggerResult}(),Ns=function(){function CompiledComponentAnimationResult(e,t){this.outputs=e,this.triggers=t}return CompiledComponentAnimationResult}(),Ds=function(){function AnimationCompiler(){}return AnimationCompiler.prototype.compileComponent=function(e,t){var r=[],n=[],i={},o=e.type.name;e.template.animations.forEach(function(e){var t=parseAnimationEntry(e),a=e.name;if(t.errors.length>0){var s='Unable to parse the animation sequence for "'+a+'" due to the following errors:';t.errors.forEach(function(e){s+="\n-- "+e.msg}),n.push(s)}if(i[a])n.push('The animation trigger "'+a+'" has already been registered on "'+o+'"');else{var l=o+"_"+e.name,c=new Qs(a,l),u=c.build(t.ast);r.push(u),i[e.name]=u}});var a=_validateAnimationProperties(r,t);if(a.errors.forEach(function(e){n.push(e.msg)}),n.length>0){var s="Animation parsing for "+e.type.name+" has failed due to the following errors:";throw n.forEach(function(e){return s+="\n- "+e}),new Error(s)}return Rs.set(e,r),new Ns(a.outputs,r)},AnimationCompiler}(),Bs=variable("element"),Vs=variable("defaultStateStyles"),Fs=variable("view"),js=Fs.prop("renderer"),Us=variable("currentState"),zs=variable("nextState"),Ws=variable("player"),Hs=variable("totalTime"),qs=variable("startStateStyles"),Gs=variable("endStateStyles"),Ks=variable("collectedStyles"),$s=literalMap([]),Qs=function(){function _AnimationBuilder(e,t){this.animationName=e,this._fnVarName=t+"_factory",this._statesMapVarName=t+"_states",this._statesMapVar=variable(this._statesMapVarName)}return _AnimationBuilder.prototype.visitAnimationStyles=function(e,t){var r=[];return t.isExpectingFirstStyleStep&&(r.push(qs),t.isExpectingFirstStyleStep=!1),e.styles.forEach(function(e){r.push(literalMap(M.keys(e).map(function(t){return[t,literal(e[t])]})))}),importExpr(resolveIdentifier(Zo.AnimationStyles)).instantiate([importExpr(resolveIdentifier(Zo.collectAndResolveStyles)).callFn([Ks,literalArr(r)])])},_AnimationBuilder.prototype.visitAnimationKeyframe=function(e,t){return importExpr(resolveIdentifier(Zo.AnimationKeyframe)).instantiate([literal(e.offset),e.styles.visit(this,t)])},_AnimationBuilder.prototype.visitAnimationStep=function(e,t){var r=this;if(t.endStateAnimateStep===e)return this._visitEndStateAnimation(e,t);var n=e.startingStyles.visit(this,t),i=e.keyframes.map(function(e){return e.visit(r,t)});return this._callAnimateMethod(e,n,literalArr(i),t)},_AnimationBuilder.prototype._visitEndStateAnimation=function(e,t){var r=this,n=e.startingStyles.visit(this,t),i=e.keyframes.map(function(e){return e.visit(r,t)}),o=importExpr(resolveIdentifier(Zo.balanceAnimationKeyframes)).callFn([Ks,Gs,literalArr(i)]);return this._callAnimateMethod(e,n,o,t)},_AnimationBuilder.prototype._callAnimateMethod=function(e,t,r,n){return n.totalTransitionTime+=e.duration+e.delay,js.callMethod("animate",[Bs,t,r,literal(e.duration),literal(e.delay),literal(e.easing)])},_AnimationBuilder.prototype.visitAnimationSequence=function(e,t){var r=this,n=e.steps.map(function(e){return e.visit(r,t)});return importExpr(resolveIdentifier(Zo.AnimationSequencePlayer)).instantiate([literalArr(n)])},_AnimationBuilder.prototype.visitAnimationGroup=function(e,t){var r=this,n=e.steps.map(function(e){return e.visit(r,t)});return importExpr(resolveIdentifier(Zo.AnimationGroupPlayer)).instantiate([literalArr(n)])},_AnimationBuilder.prototype.visitAnimationStateDeclaration=function(e,t){var r={};_getStylesArray(e).forEach(function(e){M.forEach(e,function(e,t){r[t]=e})}),t.stateMap.registerState(e.stateName,r)},_AnimationBuilder.prototype.visitAnimationStateTransition=function(e,t){var r=e.animation.steps,n=r[r.length-1];_isEndStateAnimateStep(n)&&(t.endStateAnimateStep=n),t.totalTransitionTime=0,t.isExpectingFirstStyleStep=!0;var i=[];e.stateChanges.forEach(function(e){i.push(_compareToAnimationStateExpr(Us,e.fromState).and(_compareToAnimationStateExpr(zs,e.toState))),e.fromState!=Vo&&t.stateMap.registerState(e.fromState),e.toState!=Vo&&t.stateMap.registerState(e.toState)});var o=e.animation.visit(this,t),a=i.reduce(function(e,t){return e.or(t)}),s=Ws.equals(Te).and(a),l=Ws.set(o).toStmt(),c=Hs.set(literal(t.totalTransitionTime)).toStmt();return new Ue(s,[l,c])},_AnimationBuilder.prototype.visitAnimationEntry=function(e,t){var r=this;e.stateDeclarations.forEach(function(e){return e.visit(r,t)}),t.stateMap.registerState(Fo,{});var n=[];n.push(Fs.callMethod("cancelActiveAnimation",[Bs,literal(this.animationName),zs.equals(literal(jo))]).toStmt()),n.push(Ks.set($s).toDeclStmt()),n.push(Ws.set(Te).toDeclStmt()),n.push(Hs.set(literal(0)).toDeclStmt()),n.push(Vs.set(this._statesMapVar.key(literal(Fo))).toDeclStmt()),n.push(qs.set(this._statesMapVar.key(Us)).toDeclStmt()),n.push(new Ue(qs.equals(Te),[qs.set(Vs).toStmt()])),n.push(Gs.set(this._statesMapVar.key(zs)).toDeclStmt()),n.push(new Ue(Gs.equals(Te),[Gs.set(Vs).toStmt()]));var i=importExpr(resolveIdentifier(Zo.renderStyles));return n.push(i.callFn([Bs,js,importExpr(resolveIdentifier(Zo.clearStyles)).callFn([qs])]).toStmt()),e.stateTransitions.forEach(function(e){return n.push(e.visit(r,t))}),n.push(new Ue(Ws.equals(Te),[Ws.set(importExpr(resolveIdentifier(Zo.NoOpAnimationPlayer)).instantiate([])).toStmt()])),n.push(Ws.callMethod("onDone",[fn([],[i.callFn([Bs,js,importExpr(resolveIdentifier(Zo.prepareFinalAnimationStyles)).callFn([qs,Gs])]).toStmt()])]).toStmt()),n.push(Fs.callMethod("queueAnimation",[Bs,literal(this.animationName),Ws,Hs,Us,zs]).toStmt()),fn([new _e(Fs.name,importType(resolveIdentifier(Zo.AppView),[J])),new _e(Bs.name,J),new _e(Us.name,J),new _e(zs.name,J)],n)},_AnimationBuilder.prototype.build=function(e){var t=new Ys,r=e.visit(this,t).toDeclStmt(this._fnVarName),n=variable(this._fnVarName),i=[];M.forEach(t.stateMap.states,function(e,t){var r=$s;if(isPresent(e)){var n=[];M.forEach(e,function(e,t){n.push([t,literal(e)])}),r=literalMap(n)}i.push([t,r])});var o=this._statesMapVar.set(literalMap(i)).toDeclStmt();return new Ls(this.animationName,o,this._statesMapVarName,r,n)},_AnimationBuilder}(),Ys=function(){function _AnimationBuilderContext(){this.stateMap=new Xs,this.endStateAnimateStep=null,this.isExpectingFirstStyleStep=!1,this.totalTransitionTime=0}return _AnimationBuilderContext}(),Xs=function(){function _AnimationBuilderStateMap(){this._states={}}return Object.defineProperty(_AnimationBuilderStateMap.prototype,"states",{get:function(){return this._states},enumerable:!0,configurable:!0}),_AnimationBuilderStateMap.prototype.registerState=function(e,t){void 0===t&&(t=null);var r=this._states[e];isBlank(r)&&(this._states[e]=t)},_AnimationBuilderStateMap}(),Zs=function(){function AnimationPropertyValidationOutput(e,t){this.outputs=e,this.errors=t}return AnimationPropertyValidationOutput}(),Js=function(){function _AnimationTemplatePropertyVisitor(e){this.errors=[],this.outputs=[],this._animationRegistry=this._buildCompileAnimationLookup(e)}return _AnimationTemplatePropertyVisitor.prototype._buildCompileAnimationLookup=function(e){var t={};return e.forEach(function(e){t[e.name]=!0}),t},_AnimationTemplatePropertyVisitor.prototype._validateAnimationInputOutputPairs=function(e,r,n,i){var o=this,a={};e.forEach(function(e){if(e.type==t.PropertyBindingType.Animation){var r=e.name;isPresent(n[r])?a[r]=!0:o.errors.push(new Ms("Couldn't find an animation entry for "+r))}}),r.forEach(function(e){if("@"==e.name[0]){var t=parseAnimationOutputName(e.name.substr(1),o.errors),r=t.name,s=t.phase;n[r]?a[r]?o.outputs.push(t):o.errors.push(new Ms("Unable to listen on (@"+r+"."+s+") because the animation trigger [@"+r+"] isn't being used on the same element")):o.errors.push(new Ms("Couldn't find the corresponding "+(i?"host-level ":"")+"animation trigger definition for (@"+r+")"))}})},_AnimationTemplatePropertyVisitor.prototype.visitElement=function(e,t){this._validateAnimationInputOutputPairs(e.inputs,e.outputs,this._animationRegistry,!1);var r=e.directives.find(function(e){return e.directive.isComponent});if(r){var n=Rs.get(r.directive);n&&this._validateAnimationInputOutputPairs(r.hostProperties,r.hostEvents,this._buildCompileAnimationLookup(n),!0)}templateVisitAll(this,e.children)},_AnimationTemplatePropertyVisitor.prototype.visitEmbeddedTemplate=function(e,t){templateVisitAll(this,e.children)},_AnimationTemplatePropertyVisitor.prototype.visitEvent=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitBoundText=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitText=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitNgContent=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitAttr=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitDirective=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitReference=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitVariable=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitDirectiveProperty=function(e,t){},_AnimationTemplatePropertyVisitor.prototype.visitElementProperty=function(e,t){},_AnimationTemplatePropertyVisitor}(),el=function(){function _ValueOutputAstTransformer(){}return _ValueOutputAstTransformer.prototype.visitArray=function(e,t){var r=this;return literalArr(e.map(function(e){return visitValue(e,r,null)}),t)},_ValueOutputAstTransformer.prototype.visitStringMap=function(e,t){var r=this,n=[];return M.forEach(e,function(e,t){n.push([t,visitValue(e,r,null)])}),literalMap(n,t)},_ValueOutputAstTransformer.prototype.visitPrimitive=function(e,t){return literal(e,t)},_ValueOutputAstTransformer.prototype.visitOther=function(e,t){if(e instanceof ht)return importExpr(e);if(e instanceof oe)return e;throw new Error("Illegal state: Don't now how to compile value "+e)},_ValueOutputAstTransformer}(),tl=function(){function _DebugState(e,t){this.nodeIndex=e,this.sourceAst=t}return _DebugState}(),rl=new tl(null,null),nl=function(){function CompileMethod(e){this._view=e,this._newState=rl,this._currState=rl,this._bodyStatements=[],this._debugEnabled=this._view.genConfig.genDebugInfo}return CompileMethod.prototype._updateDebugContextIfNeeded=function(){if(this._newState.nodeIndex!==this._currState.nodeIndex||this._newState.sourceAst!==this._currState.sourceAst){var e=this._updateDebugContext(this._newState);isPresent(e)&&this._bodyStatements.push(e.toStmt())}},CompileMethod.prototype._updateDebugContext=function(e){if(this._currState=this._newState=e,this._debugEnabled){var t=isPresent(e.sourceAst)?e.sourceAst.sourceSpan.start:null;return Ae.callMethod("debug",[literal(e.nodeIndex),isPresent(t)?literal(t.line):Te,isPresent(t)?literal(t.col):Te])}return null},CompileMethod.prototype.resetDebugInfoExpr=function(e,t){var r=this._updateDebugContext(new tl(e,t));return isPresent(r)?r:Te},CompileMethod.prototype.resetDebugInfo=function(e,t){this._newState=new tl(e,t)},CompileMethod.prototype.addStmt=function(e){this._updateDebugContextIfNeeded(),this._bodyStatements.push(e)},CompileMethod.prototype.addStmts=function(e){this._updateDebugContextIfNeeded(),I.addAll(this._bodyStatements,e)},CompileMethod.prototype.finish=function(){return this._bodyStatements},CompileMethod.prototype.isEmpty=function(){return 0===this._bodyStatements.length},CompileMethod}(),il=function(){function ViewQueryValues(e,t){this.view=e,this.values=t}return ViewQueryValues}(),ol=function(){function CompileQuery(e,t,r,n){this.meta=e,this.queryList=t,this.ownerDirectiveExpression=r,this.view=n,this._values=new il(n,[])}return CompileQuery.prototype.addValue=function(e,t){for(var r=t,n=[];isPresent(r)&&r!==this.view;){var i=r.declarationElement;n.unshift(i),r=i.view}var o=getPropertyInView(this.queryList,t,this.view),a=this._values;n.forEach(function(e){var t=a.values.length>0?a.values[a.values.length-1]:null;if(t instanceof il&&t.view===e.embeddedView)a=t;else{var r=new il(e.embeddedView,[]);a.values.push(r),a=r}}),a.values.push(e),n.length>0&&t.dirtyParentQueriesMethod.addStmt(o.callMethod("setDirty",[]).toStmt())},CompileQuery.prototype._isStatic=function(){return!this._values.values.some(function(e){return e instanceof il})},CompileQuery.prototype.afterChildren=function(e,t){var r=createQueryValues(this._values),n=[this.queryList.callMethod("reset",[literalArr(r)]).toStmt()];if(isPresent(this.ownerDirectiveExpression)){var i=this.meta.first?this.queryList.prop("first"):this.queryList;n.push(this.ownerDirectiveExpression.prop(this.meta.propertyName).set(i).toStmt())}this.meta.first||n.push(this.queryList.callMethod("notifyOnChanges",[]).toStmt()),this.meta.first&&this._isStatic()?e.addStmts(n):t.addStmt(new Ue(this.queryList.prop("dirty"),n))},CompileQuery}(),al=function(){function ViewTypeEnum(){}return ViewTypeEnum.fromValue=function(e){var t=resolveIdentifier(Zo.ViewType);switch(e){case ro.HOST:return _enumExpression(t,"HOST");case ro.COMPONENT:return _enumExpression(t,"COMPONENT");case ro.EMBEDDED:return _enumExpression(t,"EMBEDDED");default:throw Error("Inavlid ViewType value: "+e)}},ViewTypeEnum}(),sl=function(){function ViewEncapsulationEnum(){}return ViewEncapsulationEnum.fromValue=function(e){var t=resolveIdentifier(Zo.ViewEncapsulation);switch(e){case r.ViewEncapsulation.Emulated:return _enumExpression(t,"Emulated");case r.ViewEncapsulation.Native:return _enumExpression(t,"Native");case r.ViewEncapsulation.None:return _enumExpression(t,"None");default:throw Error("Inavlid ViewEncapsulation value: "+e)}},ViewEncapsulationEnum}(),ll=function(){function ChangeDetectorStatusEnum(){}return ChangeDetectorStatusEnum.fromValue=function(e){var t=resolveIdentifier(Zo.ChangeDetectorStatus);switch(e){case Gi.CheckOnce:return _enumExpression(t,"CheckOnce");case Gi.Checked:return _enumExpression(t,"Checked");case Gi.CheckAlways:return _enumExpression(t,"CheckAlways");case Gi.Detached:return _enumExpression(t,"Detached");case Gi.Errored:return _enumExpression(t,"Errored");case Gi.Destroyed:return _enumExpression(t,"Destroyed");default:throw Error("Inavlid ChangeDetectorStatus value: "+e)}},ChangeDetectorStatusEnum}(),cl=function(){function ViewConstructorVars(){}return ViewConstructorVars.viewUtils=variable("viewUtils"),ViewConstructorVars.parentInjector=variable("parentInjector"),ViewConstructorVars.declarationEl=variable("declarationEl"),ViewConstructorVars}(),ul=function(){function ViewProperties(){}return ViewProperties.renderer=Ae.prop("renderer"),ViewProperties.projectableNodes=Ae.prop("projectableNodes"),ViewProperties.viewUtils=Ae.prop("viewUtils"),ViewProperties}(),pl=function(){function EventHandlerVars(){}return EventHandlerVars.event=variable("$event"),EventHandlerVars}(),hl=function(){function InjectMethodVars(){}return InjectMethodVars.token=variable("token"),InjectMethodVars.requestNodeIndex=variable("requestNodeIndex"),InjectMethodVars.notFoundResult=variable("notFoundResult"),InjectMethodVars}(),dl=function(){function DetectChangesVars(){}return DetectChangesVars.throwOnChange=variable("throwOnChange"),DetectChangesVars.changes=variable("changes"),DetectChangesVars.changed=variable("changed"),DetectChangesVars.valUnwrapper=variable("valUnwrapper"),DetectChangesVars}(),fl=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ml=function(){function CompileNode(e,t,r,n,i){this.parent=e,this.view=t,this.nodeIndex=r,this.renderNode=n,this.sourceAst=i}return CompileNode.prototype.isNull=function(){return isBlank(this.renderNode)},CompileNode.prototype.isRootElement=function(){return this.view!=this.parent.view},CompileNode}(),gl=function(e){function CompileElement(t,r,n,i,o,a,s,l,c,u,p){var h=this;e.call(this,t,r,n,i,o),this.component=a,this._directives=s,this._resolvedProvidersArray=l,this.hasViewContainer=c,this.hasEmbeddedView=u,this._compViewExpr=null,this.instances=new Map,this._queryCount=0,this._queries=new Map,this._componentConstructorViewQueryLists=[],this.contentNodesByNgContentIndex=null,this.referenceTokens={},p.forEach(function(e){return h.referenceTokens[e.name]=e.value}),this.elementRef=importExpr(resolveIdentifier(Zo.ElementRef)).instantiate([this.renderNode]),this.instances.set(resolveIdentifierToken(Zo.ElementRef).reference,this.elementRef),this.injector=Ae.callMethod("injector",[literal(this.nodeIndex)]),this.instances.set(resolveIdentifierToken(Zo.Injector).reference,this.injector),this.instances.set(resolveIdentifierToken(Zo.Renderer).reference,Ae.prop("renderer")),(this.hasViewContainer||this.hasEmbeddedView||isPresent(this.component))&&this._createAppElement()}return fl(CompileElement,e),CompileElement.createNull=function(){return new CompileElement(null,null,null,null,null,null,[],[],(!1),(!1),[])},CompileElement.prototype._createAppElement=function(){var e="_appEl_"+this.nodeIndex,t=this.isRootElement()?null:this.parent.nodeIndex;this.view.fields.push(new Be(e,importType(resolveIdentifier(Zo.AppElement)),[pe.Private]));var r=Ae.prop(e).set(importExpr(resolveIdentifier(Zo.AppElement)).instantiate([literal(this.nodeIndex),literal(t),Ae,this.renderNode])).toStmt();this.view.createMethod.addStmt(r),this.appElement=Ae.prop(e),this.instances.set(resolveIdentifierToken(Zo.AppElement).reference,this.appElement)},CompileElement.prototype.createComponentFactoryResolver=function(e){if(e&&0!==e.length){var r=importExpr(resolveIdentifier(Zo.CodegenComponentFactoryResolver)).instantiate([literalArr(e.map(function(e){return importExpr(e)})),injectFromViewParentInjector(resolveIdentifierToken(Zo.ComponentFactoryResolver),!1)]),n=new ft({token:resolveIdentifierToken(Zo.ComponentFactoryResolver),useValue:r});this._resolvedProvidersArray.unshift(new _(n.token,(!1),(!0),[n],t.ProviderAstType.PrivateService,[],this.sourceAst.sourceSpan))}},CompileElement.prototype.setComponentView=function(e){this._compViewExpr=e,this.contentNodesByNgContentIndex=I.createFixedSize(this.component.template.ngContentSelectors.length);for(var t=0;t<this.contentNodesByNgContentIndex.length;t++)this.contentNodesByNgContentIndex[t]=[]},CompileElement.prototype.setEmbeddedView=function(e){if(this.embeddedView=e,isPresent(e)){var r=importExpr(resolveIdentifier(Zo.TemplateRef_)).instantiate([this.appElement,this.embeddedView.viewFactory]),n=new ft({token:resolveIdentifierToken(Zo.TemplateRef),useValue:r});this._resolvedProvidersArray.unshift(new _(n.token,(!1),(!0),[n],t.ProviderAstType.Builtin,[],this.sourceAst.sourceSpan))}},CompileElement.prototype.beforeChildren=function(){var e=this;this.hasViewContainer&&this.instances.set(resolveIdentifierToken(Zo.ViewContainerRef).reference,this.appElement.prop("vcRef")),this._resolvedProviders=new Map,this._resolvedProvidersArray.forEach(function(t){return e._resolvedProviders.set(t.token.reference,t)}),T.values(this._resolvedProviders).forEach(function(t){var r=t.providers.map(function(r){if(isPresent(r.useExisting))return e._getDependency(t.providerType,new dt({token:r.useExisting}));if(isPresent(r.useFactory)){var n=isPresent(r.deps)?r.deps:r.useFactory.diDeps,i=n.map(function(r){return e._getDependency(t.providerType,r)});return importExpr(r.useFactory).callFn(i)}if(isPresent(r.useClass)){var n=isPresent(r.deps)?r.deps:r.useClass.diDeps,i=n.map(function(r){return e._getDependency(t.providerType,r)});return importExpr(r.useClass).instantiate(i,importType(r.useClass))}return convertValueToOutputAst(r.useValue)}),n="_"+t.token.name+"_"+e.nodeIndex+"_"+e.instances.size,i=createProviderProperty(n,t,r,t.multiProvider,t.eager,e);e.instances.set(t.token.reference,i)});for(var t=0;t<this._directives.length;t++){var r=this._directives[t],n=this.instances.get(identifierToken(r.type).reference);r.queries.forEach(function(t){e._addQuery(t,n)})}var i=[];if(T.values(this._resolvedProviders).forEach(function(t){var r=e._getQueriesFor(t.token);I.addAll(i,r.map(function(e){return new yl(e,t.token)}))}),M.forEach(this.referenceTokens,function(t,r){var n,o=e.referenceTokens[r];n=isPresent(o)?e.instances.get(o.reference):e.renderNode,e.view.locals.set(r,n);var a=new gt({value:r});I.addAll(i,e._getQueriesFor(a).map(function(e){return new yl(e,a)}))}),i.forEach(function(t){var r;if(isPresent(t.read.identifier))r=e.instances.get(t.read.reference);else{var n=e.referenceTokens[t.read.value];r=isPresent(n)?e.instances.get(n.reference):e.elementRef}isPresent(r)&&t.query.addValue(r,e.view)}),isPresent(this.component)){var o=isPresent(this.component)?literalArr(this._componentConstructorViewQueryLists):Te,a=isPresent(this.getComponent())?this.getComponent():Te;this.view.createMethod.addStmt(this.appElement.callMethod("initComponent",[a,o,this._compViewExpr]).toStmt())}},CompileElement.prototype.afterChildren=function(e){var r=this;T.values(this._resolvedProviders).forEach(function(n){var i=r.instances.get(n.token.reference),o=n.providerType===t.ProviderAstType.PrivateService?0:e;r.view.injectorGetMethod.addStmt(createInjectInternalCondition(r.nodeIndex,o,n,i))}),T.values(this._queries).forEach(function(e){return e.forEach(function(e){return e.afterChildren(r.view.createMethod,r.view.updateContentQueriesMethod)})})},CompileElement.prototype.addContentNode=function(e,t){this.contentNodesByNgContentIndex[e].push(t)},CompileElement.prototype.getComponent=function(){return isPresent(this.component)?this.instances.get(identifierToken(this.component.type).reference):null},CompileElement.prototype.getProviderTokens=function(){return T.values(this._resolvedProviders).map(function(e){return createDiTokenExpression(e.token)})},CompileElement.prototype._getQueriesFor=function(e){for(var t,r=[],n=this,i=0;!n.isNull();)t=n._queries.get(e.reference),isPresent(t)&&I.addAll(r,t.filter(function(e){return e.meta.descendants||i<=1})),n._directives.length>0&&i++,n=n.parent;return t=this.view.componentView.viewQueries.get(e.reference),isPresent(t)&&I.addAll(r,t),r},CompileElement.prototype._addQuery=function(e,t){var r="_query_"+e.selectors[0].name+"_"+this.nodeIndex+"_"+this._queryCount++,n=createQueryList(e,t,r,this.view),i=new ol(e,n,t,this.view);return addQueryToTokenMap(this._queries,i),i},CompileElement.prototype._getLocalDependency=function(e,r){var n=null;if(isBlank(n)&&isPresent(r.query)&&(n=this._addQuery(r.query,null).queryList),isBlank(n)&&isPresent(r.viewQuery)&&(n=createQueryList(r.viewQuery,null,"_viewQuery_"+r.viewQuery.selectors[0].name+"_"+this.nodeIndex+"_"+this._componentConstructorViewQueryLists.length,this.view),this._componentConstructorViewQueryLists.push(n)),isPresent(r.token)){if(isBlank(n)&&r.token.reference===resolveIdentifierToken(Zo.ChangeDetectorRef).reference)return e===t.ProviderAstType.Component?this._compViewExpr.prop("ref"):getPropertyInView(Ae.prop("ref"),this.view,this.view.componentView);if(isBlank(n)){var i=this._resolvedProviders.get(r.token.reference);if(i&&(e===t.ProviderAstType.Directive||e===t.ProviderAstType.PublicService)&&i.providerType===t.ProviderAstType.PrivateService)return null;n=this.instances.get(r.token.reference)}}return n},CompileElement.prototype._getDependency=function(e,r){var n=this,i=null;for(r.isValue&&(i=literal(r.value)),isBlank(i)&&!r.isSkipSelf&&(i=this._getLocalDependency(e,r));isBlank(i)&&!n.parent.isNull();)n=n.parent,i=n._getLocalDependency(t.ProviderAstType.PublicService,new dt({token:r.token}));return isBlank(i)&&(i=injectFromViewParentInjector(r.token,r.isOptional)),isBlank(i)&&(i=Te),getPropertyInView(i,this.view,n.view)},CompileElement}(ml),yl=function(){function _QueryWithRead(e,t){this.query=e,this.read=isPresent(e.meta.read)?e.meta.read:t}return _QueryWithRead}(),vl=function(){function CompilePipe(e,t){var r=this;this.view=e,this.meta=t,this._purePipeProxyCount=0,this.instance=Ae.prop("_pipe_"+t.name+"_"+e.pipeCount++);var n=this.meta.type.diDeps.map(function(e){return e.token.reference===resolveIdentifierToken(Zo.ChangeDetectorRef).reference?getPropertyInView(Ae.prop("ref"),r.view,r.view.componentView):injectFromViewParentInjector(e.token,!1)});this.view.fields.push(new Be(this.instance.name,importType(this.meta.type))),this.view.createMethod.resetDebugInfo(null,null),this.view.createMethod.addStmt(Ae.prop(this.instance.name).set(importExpr(this.meta.type).instantiate(n)).toStmt())}return CompilePipe.call=function(e,t,r){var n,i=e.componentView,o=_findPipeMeta(i,t);return o.pure?(n=i.purePipes.get(t),isBlank(n)&&(n=new CompilePipe(i,o),i.purePipes.set(t,n),i.pipes.push(n))):(n=new CompilePipe(e,o),e.pipes.push(n)),n._call(e,r)},Object.defineProperty(CompilePipe.prototype,"pure",{get:function(){
return this.meta.pure},enumerable:!0,configurable:!0}),CompilePipe.prototype._call=function(e,t){if(this.meta.pure){var r=Ae.prop(this.instance.name+"_"+this._purePipeProxyCount++),n=getPropertyInView(this.instance,e,this.view);return createPureProxy(n.prop("transform").callMethod(ae.Bind,[n]),t.length,r,e),importExpr(resolveIdentifier(Zo.castByValue)).callFn([r,n.prop("transform")]).callFn(t)}return getPropertyInView(this.instance,e,this.view).callMethod("transform",t)},CompilePipe}(),bl=function(){function CompileView(e,t,r,n,i,o,a,s){var l=this;this.component=e,this.genConfig=t,this.pipeMetas=r,this.styles=n,this.animations=i,this.viewIndex=o,this.declarationElement=a,this.templateVariableBindings=s,this.nodes=[],this.rootNodesOrAppElements=[],this.bindings=[],this.classStatements=[],this.eventHandlerMethods=[],this.fields=[],this.getters=[],this.disposables=[],this.subscriptions=[],this.purePipes=new Map,this.pipes=[],this.locals=new Map,this.literalArrayCount=0,this.literalMapCount=0,this.pipeCount=0,this.createMethod=new nl(this),this.animationBindingsMethod=new nl(this),this.injectorGetMethod=new nl(this),this.updateContentQueriesMethod=new nl(this),this.dirtyParentQueriesMethod=new nl(this),this.updateViewQueriesMethod=new nl(this),this.detectChangesInInputsMethod=new nl(this),this.detectChangesRenderPropertiesMethod=new nl(this),this.afterContentLifecycleCallbacksMethod=new nl(this),this.afterViewLifecycleCallbacksMethod=new nl(this),this.destroyMethod=new nl(this),this.detachMethod=new nl(this),this.viewType=getViewType(e,o),this.className="_View_"+e.type.name+o,this.classType=importType(new ht({name:this.className})),this.viewFactory=variable(getViewFactoryName(e,o)),this.viewType===ro.COMPONENT||this.viewType===ro.HOST?this.componentView=this:this.componentView=this.declarationElement.view.componentView,this.componentContext=getPropertyInView(Ae.prop("context"),this,this.componentView);var c=new Map;if(this.viewType===ro.COMPONENT){var u=Ae.prop("context");I.forEachWithIndex(this.component.viewQueries,function(e,t){var r="_viewQuery_"+e.selectors[0].name+"_"+t,n=createQueryList(e,u,r,l),i=new ol(e,n,u,l);addQueryToTokenMap(c,i)});var p=0;this.component.type.diDeps.forEach(function(e){if(isPresent(e.viewQuery)){var t=Ae.prop("declarationAppElement").prop("componentConstructorViewQueries").key(literal(p++)),r=new ol(e.viewQuery,t,null,l);addQueryToTokenMap(c,r)}})}this.viewQueries=c,s.forEach(function(e){l.locals.set(e[1],Ae.prop("context").prop(e[0]))}),this.declarationElement.isNull()||this.declarationElement.setEmbeddedView(this)}return CompileView.prototype.callPipe=function(e,t,r){return vl.call(this,e,[t].concat(r))},CompileView.prototype.getLocal=function(e){if(e==pl.event.name)return pl.event;for(var t=this,r=t.locals.get(e);isBlank(r)&&isPresent(t.declarationElement.view);)t=t.declarationElement.view,r=t.locals.get(e);return isPresent(r)?getPropertyInView(r,this,t):null},CompileView.prototype.createLiteralArray=function(e){if(0===e.length)return importExpr(resolveIdentifier(Zo.EMPTY_ARRAY));for(var t=Ae.prop("_arr_"+this.literalArrayCount++),r=[],n=[],i=0;i<e.length;i++){var o="p"+i;r.push(new _e(o)),n.push(variable(o))}return createPureProxy(fn(r,[new Ne(literalArr(n))],new X(J)),e.length,t,this),t.callFn(e)},CompileView.prototype.createLiteralMap=function(e){if(0===e.length)return importExpr(resolveIdentifier(Zo.EMPTY_MAP));for(var t=Ae.prop("_map_"+this.literalMapCount++),r=[],n=[],i=[],o=0;o<e.length;o++){var a="p"+o;r.push(new _e(a)),n.push([e[o][0],variable(a)]),i.push(e[o][1])}return createPureProxy(fn(r,[new Ne(literalMap(n))],new Z(J)),e.length,t,this),t.callFn(i)},CompileView.prototype.afterNodes=function(){var e=this;T.values(this.viewQueries).forEach(function(t){return t.forEach(function(t){return t.afterChildren(e.createMethod,e.updateViewQueriesMethod)})})},CompileView}(),_l=function(){function CompileBinding(e,t){this.node=e,this.sourceAst=t}return CompileBinding}(),wl=function(){function ExpressionWithWrappedValueInfo(e,t,r){this.expression=e,this.needsValueUnwrapper=t,this.temporaryCount=r}return ExpressionWithWrappedValueInfo}();!function(e){e[e.Statement=0]="Statement",e[e.Expression=1]="Expression"}(ka||(ka={}));var xl,Sl=function(){function _AstToIrVisitor(e,t,r,n){this._nameResolver=e,this._implicitReceiver=t,this._valueUnwrapper=r,this.bindingIndex=n,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.needsValueUnwrapper=!1,this.temporaryCount=0}return _AstToIrVisitor.prototype.visitBinary=function(e,t){var r;switch(e.operation){case"+":r=$.Plus;break;case"-":r=$.Minus;break;case"*":r=$.Multiply;break;case"/":r=$.Divide;break;case"%":r=$.Modulo;break;case"&&":r=$.And;break;case"||":r=$.Or;break;case"==":r=$.Equals;break;case"!=":r=$.NotEquals;break;case"===":r=$.Identical;break;case"!==":r=$.NotIdentical;break;case"<":r=$.Lower;break;case">":r=$.Bigger;break;case"<=":r=$.LowerEquals;break;case">=":r=$.BiggerEquals;break;default:throw new Error("Unsupported operation "+e.operation)}return convertToStatementIfNeeded(t,new xe(r,this.visit(e.left,ka.Expression),this.visit(e.right,ka.Expression)))},_AstToIrVisitor.prototype.visitChain=function(e,t){return ensureStatementMode(t,e),this.visitAll(e.expressions,t)},_AstToIrVisitor.prototype.visitConditional=function(e,t){var r=this.visit(e.condition,ka.Expression);return convertToStatementIfNeeded(t,r.conditional(this.visit(e.trueExp,ka.Expression),this.visit(e.falseExp,ka.Expression)))},_AstToIrVisitor.prototype.visitPipe=function(e,t){var r=this.visit(e.exp,ka.Expression),n=this.visitAll(e.args,ka.Expression),i=this._nameResolver.callPipe(e.name,r,n);return this.needsValueUnwrapper=!0,convertToStatementIfNeeded(t,this._valueUnwrapper.callMethod("unwrap",[i]))},_AstToIrVisitor.prototype.visitFunctionCall=function(e,t){return convertToStatementIfNeeded(t,this.visit(e.target,ka.Expression).callFn(this.visitAll(e.args,ka.Expression)))},_AstToIrVisitor.prototype.visitImplicitReceiver=function(e,t){return ensureExpressionMode(t,e),this._implicitReceiver},_AstToIrVisitor.prototype.visitInterpolation=function(e,t){ensureExpressionMode(t,e);for(var r=[literal(e.expressions.length)],n=0;n<e.strings.length-1;n++)r.push(literal(e.strings[n])),r.push(this.visit(e.expressions[n],ka.Expression));return r.push(literal(e.strings[e.strings.length-1])),importExpr(resolveIdentifier(Zo.interpolate)).callFn(r)},_AstToIrVisitor.prototype.visitKeyedRead=function(e,t){return convertToStatementIfNeeded(t,this.visit(e.obj,ka.Expression).key(this.visit(e.key,ka.Expression)))},_AstToIrVisitor.prototype.visitKeyedWrite=function(e,t){var r=this.visit(e.obj,ka.Expression),n=this.visit(e.key,ka.Expression),i=this.visit(e.value,ka.Expression);return convertToStatementIfNeeded(t,r.key(n).set(i))},_AstToIrVisitor.prototype.visitLiteralArray=function(e,t){return convertToStatementIfNeeded(t,this._nameResolver.createLiteralArray(this.visitAll(e.expressions,t)))},_AstToIrVisitor.prototype.visitLiteralMap=function(e,t){for(var r=[],n=0;n<e.keys.length;n++)r.push([e.keys[n],this.visit(e.values[n],ka.Expression)]);return convertToStatementIfNeeded(t,this._nameResolver.createLiteralMap(r))},_AstToIrVisitor.prototype.visitLiteralPrimitive=function(e,t){return convertToStatementIfNeeded(t,literal(e.value))},_AstToIrVisitor.prototype.visitMethodCall=function(e,t){var r=this.leftMostSafeNode(e);if(r)return this.convertSafeAccess(e,r,t);var n=this.visitAll(e.args,ka.Expression),i=null,o=this.visit(e.receiver,ka.Expression);if(o===this._implicitReceiver){var a=this._nameResolver.getLocal(e.name);isPresent(a)&&(i=a.callFn(n))}return isBlank(i)&&(i=o.callMethod(e.name,n)),convertToStatementIfNeeded(t,i)},_AstToIrVisitor.prototype.visitPrefixNot=function(e,t){return convertToStatementIfNeeded(t,not(this.visit(e.expression,ka.Expression)))},_AstToIrVisitor.prototype.visitPropertyRead=function(e,t){var r=this.leftMostSafeNode(e);if(r)return this.convertSafeAccess(e,r,t);var n=null,i=this.visit(e.receiver,ka.Expression);return i===this._implicitReceiver&&(n=this._nameResolver.getLocal(e.name)),isBlank(n)&&(n=i.prop(e.name)),convertToStatementIfNeeded(t,n)},_AstToIrVisitor.prototype.visitPropertyWrite=function(e,t){var r=this.visit(e.receiver,ka.Expression);if(r===this._implicitReceiver){var n=this._nameResolver.getLocal(e.name);if(isPresent(n))throw new Error("Cannot assign to a reference or variable!")}return convertToStatementIfNeeded(t,r.prop(e.name).set(this.visit(e.value,ka.Expression)))},_AstToIrVisitor.prototype.visitSafePropertyRead=function(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)},_AstToIrVisitor.prototype.visitSafeMethodCall=function(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)},_AstToIrVisitor.prototype.visitAll=function(e,t){var r=this;return e.map(function(e){return r.visit(e,t)})},_AstToIrVisitor.prototype.visitQuote=function(e,t){throw new Error("Quotes are not supported for evaluation!")},_AstToIrVisitor.prototype.visit=function(e,t){var r=this._resultMap.get(e);return r?r:(this._nodeMap.get(e)||e).visit(this,t)},_AstToIrVisitor.prototype.convertSafeAccess=function(e,t,r){var n,i=this.visit(t.receiver,r);this.needsTemporary(t.receiver)&&(n=this.allocateTemporary(),i=n.set(i),this._resultMap.set(t.receiver,n));var o=i.isBlank();t instanceof $t?this._nodeMap.set(t,new Kt(t.span,t.receiver,t.name,t.args)):this._nodeMap.set(t,new Nt(t.span,t.receiver,t.name));var a=this.visit(e,r);return this._nodeMap.delete(t),n&&this.releaseTemporary(n),o.conditional(literal(null),a)},_AstToIrVisitor.prototype.leftMostSafeNode=function(e){var t=this,r=function(e,r){return(t._nodeMap.get(r)||r).visit(e)};return e.visit({visitBinary:function(e){return null},visitChain:function(e){return null},visitConditional:function(e){return null},visitFunctionCall:function(e){return null},visitImplicitReceiver:function(e){return null},visitInterpolation:function(e){return null},visitKeyedRead:function(e){return r(this,e.obj)},visitKeyedWrite:function(e){return null},visitLiteralArray:function(e){return null},visitLiteralMap:function(e){return null},visitLiteralPrimitive:function(e){return null},visitMethodCall:function(e){return r(this,e.receiver)},visitPipe:function(e){return null},visitPrefixNot:function(e){return null},visitPropertyRead:function(e){return r(this,e.receiver)},visitPropertyWrite:function(e){return null},visitQuote:function(e){return null},visitSafeMethodCall:function(e){return r(this,e.receiver)||e},visitSafePropertyRead:function(e){return r(this,e.receiver)||e}})},_AstToIrVisitor.prototype.needsTemporary=function(e){var t=this,r=function(e,r){return r&&(t._nodeMap.get(r)||r).visit(e)},n=function(e,t){return t.some(function(t){return r(e,t)})};return e.visit({visitBinary:function(e){return r(this,e.left)||r(this,e.right)},visitChain:function(e){return!1},visitConditional:function(e){return r(this,e.condition)||r(this,e.trueExp)||r(this,e.falseExp)},visitFunctionCall:function(e){return!0},visitImplicitReceiver:function(e){return!1},visitInterpolation:function(e){return n(this,e.expressions)},visitKeyedRead:function(e){return!1},visitKeyedWrite:function(e){return!1},visitLiteralArray:function(e){return!0},visitLiteralMap:function(e){return!0},visitLiteralPrimitive:function(e){return!1},visitMethodCall:function(e){return!0},visitPipe:function(e){return!0},visitPrefixNot:function(e){return r(this,e.expression)},visitPropertyRead:function(e){return!1},visitPropertyWrite:function(e){return!1},visitQuote:function(e){return!1},visitSafeMethodCall:function(e){return!0},visitSafePropertyRead:function(e){return!1}})},_AstToIrVisitor.prototype.allocateTemporary=function(){var e=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new se(temporaryName(this.bindingIndex,e))},_AstToIrVisitor.prototype.releaseTemporary=function(e){if(this._currentTemporary--,e.name!=temporaryName(this.bindingIndex,this._currentTemporary))throw new Error("Temporary "+e.name+" released out of order")},_AstToIrVisitor}(),Cl=function(){function CompileElementAnimationOutput(e,t){this.listener=e,this.output=t}return CompileElementAnimationOutput}(),kl=function(){function CompileEventListener(e,t,r,n){this.compileElement=e,this.eventTarget=t,this.eventName=r,this._hasComponentHostListener=!1,this._actionResultExprs=[],this._method=new nl(e.view),this._methodName="_handle_"+santitizeEventName(r)+"_"+e.nodeIndex+"_"+n,this._eventParam=new _e(pl.event.name,importType(this.compileElement.view.genConfig.renderTypes.renderEvent))}return CompileEventListener.getOrCreate=function(e,t,r,n){var i=n.find(function(e){return e.eventTarget==t&&e.eventName==r});return isBlank(i)&&(i=new CompileEventListener(e,t,r,n.length),n.push(i)),i},Object.defineProperty(CompileEventListener.prototype,"methodName",{get:function(){return this._methodName},enumerable:!0,configurable:!0}),CompileEventListener.prototype.addAction=function(e,t,r){isPresent(t)&&t.isComponent&&(this._hasComponentHostListener=!0),this._method.resetDebugInfo(this.compileElement.nodeIndex,e);var n=isPresent(r)?r:this.compileElement.view.componentContext,i=convertCdStatementToIr(this.compileElement.view,n,e.handler,this.compileElement.nodeIndex),o=i.length-1;if(o>=0){var a=i[o],s=convertStmtIntoExpression(a),l=variable("pd_"+this._actionResultExprs.length);this._actionResultExprs.push(l),isPresent(s)&&(i[o]=l.set(s.cast(J).notIdentical(literal(!1))).toDeclStmt(null,[pe.Final]))}this._method.addStmts(i)},CompileEventListener.prototype.finishMethod=function(){var e=this._hasComponentHostListener?this.compileElement.appElement.prop("componentView"):Ae,t=literal(!0);this._actionResultExprs.forEach(function(e){t=t.and(e)});var r=[e.callMethod("markPathToRootAsCheckOnce",[]).toStmt()].concat(this._method.finish()).concat([new Ne(t)]);this.compileElement.view.eventHandlerMethods.push(new Ve(this._methodName,[this._eventParam],r,ee,[pe.Private]))},CompileEventListener.prototype.listenToRenderer=function(){var e,t=Ae.callMethod("eventHandler",[Ae.prop(this._methodName).callMethod(ae.Bind,[Ae])]);e=isPresent(this.eventTarget)?ul.renderer.callMethod("listenGlobal",[literal(this.eventTarget),literal(this.eventName),t]):ul.renderer.callMethod("listen",[this.compileElement.renderNode,literal(this.eventName),t]);var r=variable("disposable_"+this.compileElement.view.disposables.length);this.compileElement.view.disposables.push(r),this.compileElement.view.createMethod.addStmt(r.set(e).toDeclStmt(ne,[pe.Private]))},CompileEventListener.prototype.listenToAnimation=function(e){var t=Ae.callMethod("eventHandler",[Ae.prop(this._methodName).callMethod(ae.Bind,[Ae])]),r=Ae.callMethod("registerAnimationOutput",[this.compileElement.renderNode,importExpr(resolveIdentifier(Zo.AnimationOutput)).instantiate([literal(e.name),literal(e.phase)]),t]).toStmt();this.compileElement.view.createMethod.addStmt(r)},CompileEventListener.prototype.listenToDirective=function(e,t){var r=variable("subscription_"+this.compileElement.view.subscriptions.length);this.compileElement.view.subscriptions.push(r);var n=Ae.callMethod("eventHandler",[Ae.prop(this._methodName).callMethod(ae.Bind,[Ae])]);this.compileElement.view.createMethod.addStmt(r.set(e.prop(t).callMethod(ae.SubscribeObservable,[n])).toDeclStmt(null,[pe.Final]))},CompileEventListener}(),El=Ae.prop("numberOfChecks").identical(new me(0)),Al=not(dl.throwOnChange),Pl=function(){function ViewBinderVisitor(e,t){var r=this;this.view=e,this.animationOutputs=t,this._nodeIndex=0,this._animationOutputsMap={},t.forEach(function(e){r._animationOutputsMap[e.fullPropertyName]=e})}return ViewBinderVisitor.prototype.visitBoundText=function(e,t){var r=this.view.nodes[this._nodeIndex++];return bindRenderText(e,r,this.view),null},ViewBinderVisitor.prototype.visitText=function(e,t){return this._nodeIndex++,null},ViewBinderVisitor.prototype.visitNgContent=function(e,t){return null},ViewBinderVisitor.prototype.visitElement=function(e,t){var r=this,n=this.view.nodes[this._nodeIndex++],i=[],o=[];return collectEventListeners(e.outputs,e.directives,n).forEach(function(e){if("@"==e.eventName[0]){var t=e.eventName.substr(1),n=r._animationOutputsMap[t];n&&o.push(new Cl(e,n))}else i.push(e)}),bindAnimationOutputs(o),bindRenderInputs(e.inputs,n),bindRenderOutputs(i),e.directives.forEach(function(e){var t=n.instances.get(e.directive.type.reference);bindDirectiveInputs(e,t,n),bindDirectiveDetectChangesLifecycleCallbacks(e,t,n),bindDirectiveHostProps(e,t,n),bindDirectiveOutputs(e,t,i)}),templateVisitAll(this,e.children,n),e.directives.forEach(function(e){var t=n.instances.get(e.directive.type.reference);bindDirectiveAfterContentLifecycleCallbacks(e.directive,t,n),bindDirectiveAfterViewLifecycleCallbacks(e.directive,t,n)}),e.providers.forEach(function(e){var t=n.instances.get(e.token.reference);bindInjectableDestroyLifecycleCallbacks(e,t,n)}),null},ViewBinderVisitor.prototype.visitEmbeddedTemplate=function(e,t){var r=this.view.nodes[this._nodeIndex++],n=collectEventListeners(e.outputs,e.directives,r);return e.directives.forEach(function(e){var t=r.instances.get(e.directive.type.reference);bindDirectiveInputs(e,t,r),bindDirectiveDetectChangesLifecycleCallbacks(e,t,r),bindDirectiveOutputs(e,t,n),bindDirectiveAfterContentLifecycleCallbacks(e.directive,t,r),bindDirectiveAfterViewLifecycleCallbacks(e.directive,t,r)}),e.providers.forEach(function(e){var t=r.instances.get(e.token.reference);bindInjectableDestroyLifecycleCallbacks(e,t,r)}),bindView(r.embeddedView,e.children,this.animationOutputs),null},ViewBinderVisitor.prototype.visitAttr=function(e,t){return null},ViewBinderVisitor.prototype.visitDirective=function(e,t){return null},ViewBinderVisitor.prototype.visitEvent=function(e,t){return null},ViewBinderVisitor.prototype.visitReference=function(e,t){return null},ViewBinderVisitor.prototype.visitVariable=function(e,t){return null},ViewBinderVisitor.prototype.visitDirectiveProperty=function(e,t){return null},ViewBinderVisitor.prototype.visitElementProperty=function(e,t){return null},ViewBinderVisitor}(),Tl="$implicit",Ml="class",Il="style",Ol="ng-container",Rl=variable("parentRenderNode"),Ll=variable("rootSelector"),Nl=function(){function ViewFactoryDependency(e,t){this.comp=e,this.placeholder=t}return ViewFactoryDependency}(),Dl=function(){function ComponentFactoryDependency(e,t){this.comp=e,this.placeholder=t}return ComponentFactoryDependency}(),Bl=function(){function ViewBuilderVisitor(e,t){this.view=e,this.targetDependencies=t,this.nestedViewCount=0,this._animationCompiler=new Ds}return ViewBuilderVisitor.prototype._isRootNode=function(e){return e.view!==this.view},ViewBuilderVisitor.prototype._addRootNodeAndProject=function(e){var t=_getOuterContainerOrSelf(e),r=t.parent,n=t.sourceAst.ngContentIndex,i=e instanceof gl&&e.hasViewContainer?e.appElement:null;this._isRootNode(r)?this.view.viewType!==ro.COMPONENT&&this.view.rootNodesOrAppElements.push(isPresent(i)?i:e.renderNode):isPresent(r.component)&&isPresent(n)&&r.addContentNode(n,isPresent(i)?i:e.renderNode)},ViewBuilderVisitor.prototype._getParentRenderNode=function(e){return e=_getOuterContainerParentOrSelf(e),this._isRootNode(e)?this.view.viewType===ro.COMPONENT?Rl:Te:isPresent(e.component)&&e.component.template.encapsulation!==r.ViewEncapsulation.Native?Te:e.renderNode},ViewBuilderVisitor.prototype.visitBoundText=function(e,t){return this._visitText(e,"",t)},ViewBuilderVisitor.prototype.visitText=function(e,t){return this._visitText(e,e.value,t)},ViewBuilderVisitor.prototype._visitText=function(e,t,r){var n="_text_"+this.view.nodes.length;this.view.fields.push(new Be(n,importType(this.view.genConfig.renderTypes.renderText)));var i=Ae.prop(n),o=new ml(r,this.view,this.view.nodes.length,i,e),a=Ae.prop(n).set(ul.renderer.callMethod("createText",[this._getParentRenderNode(r),literal(t),this.view.createMethod.resetDebugInfoExpr(this.view.nodes.length,e)])).toStmt();return this.view.nodes.push(o),this.view.createMethod.addStmt(a),this._addRootNodeAndProject(o),i},ViewBuilderVisitor.prototype.visitNgContent=function(e,t){this.view.createMethod.resetDebugInfo(null,e);var r=this._getParentRenderNode(t),n=ul.projectableNodes.key(literal(e.index),new X(importType(this.view.genConfig.renderTypes.renderNode)));return r!==Te?this.view.createMethod.addStmt(ul.renderer.callMethod("projectNodes",[r,importExpr(resolveIdentifier(Zo.flattenNestedViewRenderNodes)).callFn([n])]).toStmt()):this._isRootNode(t)?this.view.viewType!==ro.COMPONENT&&this.view.rootNodesOrAppElements.push(n):isPresent(t.component)&&isPresent(e.ngContentIndex)&&t.addContentNode(e.ngContentIndex,n),null},ViewBuilderVisitor.prototype.visitElement=function(e,t){var r,n=this,i=this.view.nodes.length,o=this.view.createMethod.resetDebugInfoExpr(i,e);r=0===i&&this.view.viewType===ro.HOST?Ae.callMethod("selectOrCreateHostElement",[literal(e.name),Ll,o]):e.name===Ol?ul.renderer.callMethod("createTemplateAnchor",[this._getParentRenderNode(t),o]):ul.renderer.callMethod("createElement",[this._getParentRenderNode(t),literal(e.name),o]);var a="_el_"+i;this.view.fields.push(new Be(a,importType(this.view.genConfig.renderTypes.renderElement))),this.view.createMethod.addStmt(Ae.prop(a).set(r).toStmt());for(var s=Ae.prop(a),l=e.directives.map(function(e){return e.directive}),c=l.find(function(e){return e.isComponent}),u=_readHtmlAttrs(e.attrs),p=_mergeHtmlAndDirectiveAttrs(u,l),h=0;h<p.length;h++){var d=p[h][0];if(e.name!==Ol){var f=p[h][1];this.view.createMethod.addStmt(ul.renderer.callMethod("setElementAttribute",[s,literal(d),literal(f)]).toStmt())}}var m=new gl(t,this.view,i,s,e,c,l,e.providers,e.hasViewContainer,(!1),e.references);this.view.nodes.push(m);var g=null;if(isPresent(c)){var y=new ht({name:getViewFactoryName(c,0)});this.targetDependencies.push(new Nl(c.type,y));var v=c.entryComponents.map(function(e){var t=new ht({name:e.name});return n.targetDependencies.push(new Dl(e,t)),t});m.createComponentFactoryResolver(v),g=variable("compView_"+i),m.setComponentView(g),this.view.createMethod.addStmt(g.set(importExpr(y).callFn([ul.viewUtils,m.injector,m.appElement])).toDeclStmt())}if(m.beforeChildren(),this._addRootNodeAndProject(m),templateVisitAll(this,e.children,m),m.afterChildren(this.view.nodes.length-i-1),isPresent(g)){var b;b=this.view.component.type.isHost?ul.projectableNodes:literalArr(m.contentNodesByNgContentIndex.map(function(e){return createFlatArray(e)})),this.view.createMethod.addStmt(g.callMethod("create",[m.getComponent(),b,Te]).toStmt())}return null},ViewBuilderVisitor.prototype.visitEmbeddedTemplate=function(e,t){var r=this.view.nodes.length,n="_anchor_"+r;this.view.fields.push(new Be(n,importType(this.view.genConfig.renderTypes.renderComment))),this.view.createMethod.addStmt(Ae.prop(n).set(ul.renderer.callMethod("createTemplateAnchor",[this._getParentRenderNode(t),this.view.createMethod.resetDebugInfoExpr(r,e)])).toStmt());var i=Ae.prop(n),o=e.variables.map(function(e){return[e.value.length>0?e.value:Tl,e.name]}),a=e.directives.map(function(e){return e.directive}),s=new gl(t,this.view,r,i,e,null,a,e.providers,e.hasViewContainer,(!0),e.references);this.view.nodes.push(s);var l=this._animationCompiler.compileComponent(this.view.component,[e]);this.nestedViewCount++;var c=new bl(this.view.component,this.view.genConfig,this.view.pipeMetas,Te,l.triggers,this.view.viewIndex+this.nestedViewCount,s,o);return this.nestedViewCount+=buildView(c,e.children,this.targetDependencies),s.beforeChildren(),this._addRootNodeAndProject(s),s.afterChildren(0),null},ViewBuilderVisitor.prototype.visitAttr=function(e,t){return null},ViewBuilderVisitor.prototype.visitDirective=function(e,t){return null},ViewBuilderVisitor.prototype.visitEvent=function(e,t){return null},ViewBuilderVisitor.prototype.visitReference=function(e,t){return null},ViewBuilderVisitor.prototype.visitVariable=function(e,t){return null},ViewBuilderVisitor.prototype.visitDirectiveProperty=function(e,t){return null},ViewBuilderVisitor.prototype.visitElementProperty=function(e,t){return null},ViewBuilderVisitor}(),Vl=function(){function ViewCompileResult(e,t,r){this.statements=e,this.viewFactoryVar=t,this.dependencies=r}return ViewCompileResult}(),Fl=function(){function ViewCompiler(e){this._genConfig=e,this._animationCompiler=new Ds}return ViewCompiler.prototype.compileComponent=function(e,t,r,n){var i=[],o=this._animationCompiler.compileComponent(e,t),a=[],s=o.triggers;s.forEach(function(e){a.push(e.statesMapStatement),a.push(e.fnStatement)});var l=new bl(e,this._genConfig,n,r,s,0,gl.createNull(),[]);return buildView(l,t,i),bindView(l,t,o.outputs),finishView(l,a),new Vl(a,l.viewFactory.name,i)},ViewCompiler.decorators=[{type:r.Injectable}],ViewCompiler.ctorParameters=[{type:ss}],ViewCompiler}(),jl=function(){function SourceModule(e,t){this.moduleUrl=e,this.source=t}return SourceModule}(),Ul=function(){function NgModulesSummary(e){this.ngModuleByComponent=e}return NgModulesSummary}(),zl=function(){function OfflineCompiler(e,t,r,n,i,o,a,s,l){this._metadataResolver=e,this._directiveNormalizer=t,this._templateParser=r,this._styleCompiler=n,this._viewCompiler=i,this._ngModuleCompiler=o,this._outputEmitter=a,this._localeId=s,this._translationFormat=l}return OfflineCompiler.prototype.analyzeModules=function(e){var t=this,r=new Map;return e.forEach(function(e){var n=t._metadataResolver.getNgModuleMetadata(e);n.declaredDirectives.forEach(function(e){e.isComponent&&r.set(e.type.reference,n)})}),new Ul(r)},OfflineCompiler.prototype.clearCache=function(){this._directiveNormalizer.clearCache(),this._metadataResolver.clearCache()},OfflineCompiler.prototype.compile=function(e,t,r,n){var i=this,o=_splitTypescriptSuffix(e)[1],a=[],s=[],l=[];return s.push.apply(s,n.map(function(e){return i._compileModule(e,a)})),Promise.all(r.map(function(e){var r=i._metadataResolver.getDirectiveMetadata(e),n=t.ngModuleByComponent.get(e);if(!n)throw new Error("Cannot determine the module for component "+r.type.name+"!");return Promise.all([r].concat(n.transitiveModule.directives).map(function(e){return i._directiveNormalizer.normalizeDirective(e).asyncResult})).then(function(e){var t=e[0],r=e.slice(1);_assertComponent(t);var c=i._styleCompiler.compileComponent(t);c.externalStylesheets.forEach(function(e){l.push(i._codgenStyles(e,o))}),s.push(i._compileComponentFactory(t,o,a)),s.push(i._compileComponent(t,r,n.transitiveModule.pipes,n.schemas,c.componentStylesheet,o,a))})})).then(function(){return a.length>0&&l.unshift(i._codegenSourceModule(_ngfactoryModuleUrl(e),a,s)),l})},OfflineCompiler.prototype._compileModule=function(e,t){var r=this._metadataResolver.getNgModuleMetadata(e),n=this._ngModuleCompiler.compile(r,[new ft({token:resolveIdentifierToken(Zo.LOCALE_ID),useValue:this._localeId}),new ft({token:resolveIdentifierToken(Zo.TRANSLATIONS_FORMAT),useValue:this._translationFormat})]);return n.dependencies.forEach(function(e){e.placeholder.name=_componentFactoryName(e.comp),e.placeholder.moduleUrl=_ngfactoryModuleUrl(e.comp.moduleUrl)}),t.push.apply(t,n.statements),n.ngModuleFactoryVar},OfflineCompiler.prototype._compileComponentFactory=function(e,t,r){var n=createHostComponentMeta(e),i=this._compileComponent(n,[e],[],[],null,t,r),o=_componentFactoryName(e.type);return r.push(variable(o).set(importExpr(resolveIdentifier(Zo.ComponentFactory),[importType(e.type)]).instantiate([literal(e.selector),variable(i),importExpr(e.type)],importType(resolveIdentifier(Zo.ComponentFactory),[importType(e.type)],[L.Const]))).toDeclStmt(null,[pe.Final])),o},OfflineCompiler.prototype._compileComponent=function(e,t,r,n,i,o,a){var s=this._templateParser.parse(e,e.template.template,t,r,n,e.type.name),l=i?variable(i.stylesVar):literalArr([]),c=this._viewCompiler.compileComponent(e,s,l,r);return i&&I.addAll(a,_resolveStyleStatements(i,o)),I.addAll(a,_resolveViewStatements(c)),c.viewFactoryVar},OfflineCompiler.prototype._codgenStyles=function(e,t){return _resolveStyleStatements(e,t),this._codegenSourceModule(_stylesModuleUrl(e.meta.moduleUrl,e.isShimmed,t),e.statements,[e.stylesVar])},OfflineCompiler.prototype._codegenSourceModule=function(e,t,r){return new jl(e,this._outputEmitter.emitStatements(e,t,r))},OfflineCompiler}(),Wl=function(){function ResourceLoader(){}return ResourceLoader.prototype.get=function(e){return null},ResourceLoader}(),Hl="asset:",ql={provide:r.PACKAGE_ROOT_URL,useValue:"/"},Gl=function(){function UrlResolver(e){void 0===e&&(e=null),this._packagePrefix=e}return UrlResolver.prototype.resolve=function(e,t){var r=t;isPresent(e)&&e.length>0&&(r=_resolveUrl(e,r));var n=_split(r),i=this._packagePrefix;if(isPresent(i)&&isPresent(n)&&"package"==n[xl.Scheme]){var o=n[xl.Path];if(this._packagePrefix!==Hl)return i=a.stripRight(i,"/"),o=a.stripLeft(o,"/"),i+"/"+o;var s=o.split(/\//);r="asset:"+s[0]+"/lib/"+s.slice(1).join("/")}return r},UrlResolver.decorators=[{type:r.Injectable}],UrlResolver.ctorParameters=[{type:void 0,decorators:[{type:r.Inject,args:[r.PACKAGE_ROOT_URL]}]}],UrlResolver}(),Kl=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");!function(e){e[e.Scheme=1]="Scheme",e[e.UserInfo=2]="UserInfo",e[e.Domain=3]="Domain",e[e.Port=4]="Port",e[e.Path=5]="Path",e[e.QueryData=6]="QueryData",e[e.Fragment=7]="Fragment"}(xl||(xl={}));var $l=function(){function DirectiveNormalizer(e,t,r,n){this._resourceLoader=e,this._urlResolver=t,this._htmlParser=r,this._config=n,this._resourceLoaderCache=new Map}return DirectiveNormalizer.prototype.clearCache=function(){this._resourceLoaderCache.clear()},DirectiveNormalizer.prototype.clearCacheFor=function(e){var t=this;e.isComponent&&(this._resourceLoaderCache.delete(e.template.templateUrl),e.template.externalStylesheets.forEach(function(e){t._resourceLoaderCache.delete(e.moduleUrl)}))},DirectiveNormalizer.prototype._fetch=function(e){var t=this._resourceLoaderCache.get(e);return t||(t=this._resourceLoader.get(e),this._resourceLoaderCache.set(e,t)),t},DirectiveNormalizer.prototype.normalizeDirective=function(e){var t=this;if(!e.isComponent)return new Xe(e,Promise.resolve(e));var r,n=null;if(isPresent(e.template.template))n=this.normalizeTemplateSync(e.type,e.template),r=Promise.resolve(n);else{if(!e.template.templateUrl)throw new Error("No template specified for component "+e.type.name);r=this.normalizeTemplateAsync(e.type,e.template)}if(n&&0===n.styleUrls.length){var i=_cloneDirectiveWithTemplate(e,n);return new Xe(i,Promise.resolve(i))}return new Xe(null,r.then(function(e){return t.normalizeExternalStylesheets(e)}).then(function(t){return _cloneDirectiveWithTemplate(e,t)}))},DirectiveNormalizer.prototype.normalizeTemplateSync=function(e,t){return this.normalizeLoadedTemplate(e,t,t.template,e.moduleUrl)},DirectiveNormalizer.prototype.normalizeTemplateAsync=function(e,t){var r=this,n=this._urlResolver.resolve(e.moduleUrl,t.templateUrl);return this._fetch(n).then(function(i){return r.normalizeLoadedTemplate(e,t,i,n)})},DirectiveNormalizer.prototype.normalizeLoadedTemplate=function(e,t,n,i){var o=tn.fromArray(t.interpolation),a=this._htmlParser.parse(n,e.name,!1,o);if(a.errors.length>0){var s=a.errors.join("\n");throw new Error("Template parse errors:\n"+s)}var l=this.normalizeStylesheet(new bt({styles:t.styles,styleUrls:t.styleUrls,moduleUrl:e.moduleUrl})),c=new Ql;visitAll(c,a.rootNodes);var u=this.normalizeStylesheet(new bt({styles:c.styles,styleUrls:c.styleUrls,moduleUrl:i})),p=l.styles.concat(u.styles),h=l.styleUrls.concat(u.styleUrls),d=t.encapsulation;return isBlank(d)&&(d=this._config.defaultEncapsulation),d===r.ViewEncapsulation.Emulated&&0===p.length&&0===h.length&&(d=r.ViewEncapsulation.None),new _t({encapsulation:d,template:n,templateUrl:i,styles:p,styleUrls:h,externalStylesheets:t.externalStylesheets,ngContentSelectors:c.ngContentSelectors,animations:t.animations,interpolation:t.interpolation})},DirectiveNormalizer.prototype.normalizeExternalStylesheets=function(e){return this._loadMissingExternalStylesheets(e.styleUrls).then(function(t){
return new _t({encapsulation:e.encapsulation,template:e.template,templateUrl:e.templateUrl,styles:e.styles,styleUrls:e.styleUrls,externalStylesheets:t,ngContentSelectors:e.ngContentSelectors,animations:e.animations,interpolation:e.interpolation})})},DirectiveNormalizer.prototype._loadMissingExternalStylesheets=function(e,t){var r=this;return void 0===t&&(t=new Map),Promise.all(e.filter(function(e){return!t.has(e)}).map(function(e){return r._fetch(e).then(function(n){var i=r.normalizeStylesheet(new bt({styles:[n],moduleUrl:e}));return t.set(e,i),r._loadMissingExternalStylesheets(i.styleUrls,t)})})).then(function(e){return T.values(t)})},DirectiveNormalizer.prototype.normalizeStylesheet=function(e){var t=this,r=e.styleUrls.filter(isStyleUrlResolvable).map(function(r){return t._urlResolver.resolve(e.moduleUrl,r)}),n=e.styles.map(function(n){var i=extractStyleUrls(t._urlResolver,e.moduleUrl,n);return r.push.apply(r,i.styleUrls),i.style});return new bt({styles:n,styleUrls:r,moduleUrl:e.moduleUrl})},DirectiveNormalizer.decorators=[{type:r.Injectable}],DirectiveNormalizer.ctorParameters=[{type:Wl},{type:Gl},{type:ea},{type:ss}],DirectiveNormalizer}(),Ql=function(){function TemplatePreparseVisitor(){this.ngContentSelectors=[],this.styles=[],this.styleUrls=[],this.ngNonBindableStackCount=0}return TemplatePreparseVisitor.prototype.visitElement=function(e,t){var r=preparseElement(e);switch(r.type){case ai.NG_CONTENT:0===this.ngNonBindableStackCount&&this.ngContentSelectors.push(r.selectAttr);break;case ai.STYLE:var n="";e.children.forEach(function(e){e instanceof wn&&(n+=e.value)}),this.styles.push(n);break;case ai.STYLESHEET:this.styleUrls.push(r.hrefAttr)}return r.nonBindable&&this.ngNonBindableStackCount++,visitAll(this,e.children),r.nonBindable&&this.ngNonBindableStackCount--,null},TemplatePreparseVisitor.prototype.visitComment=function(e,t){return null},TemplatePreparseVisitor.prototype.visitAttribute=function(e,t){return null},TemplatePreparseVisitor.prototype.visitText=function(e,t){return null},TemplatePreparseVisitor.prototype.visitExpansion=function(e,t){return null},TemplatePreparseVisitor.prototype.visitExpansionCase=function(e,t){return null},TemplatePreparseVisitor}(),Yl=function(){function DirectiveResolver(e){void 0===e&&(e=To),this._reflector=e}return DirectiveResolver.prototype.resolve=function(e,t){void 0===t&&(t=!0);var n=this._reflector.annotations(r.resolveForwardRef(e));if(isPresent(n)){var i=n.find(_isDirectiveMetadata);if(isPresent(i)){var o=this._reflector.propMetadata(e);return this._mergeWithPropertyMetadata(i,o,e)}}if(t)throw new Error("No Directive annotation found on "+stringify(e));return null},DirectiveResolver.prototype._mergeWithPropertyMetadata=function(e,t,n){var i=[],o=[],a={},s={};return M.forEach(t,function(e,t){e.forEach(function(e){if(e instanceof r.Input)isPresent(e.bindingPropertyName)?i.push(t+": "+e.bindingPropertyName):i.push(t);else if(e instanceof r.Output){var n=e;isPresent(n.bindingPropertyName)?o.push(t+": "+n.bindingPropertyName):o.push(t)}else if(e instanceof r.HostBinding){var l=e;isPresent(l.hostPropertyName)?a["["+l.hostPropertyName+"]"]=t:a["["+t+"]"]=t}else if(e instanceof r.HostListener){var c=e,u=isPresent(c.args)?c.args.join(", "):"";a["("+c.eventName+")"]=t+"("+u+")"}else e instanceof r.Query&&(s[t]=e)})}),this._merge(e,i,o,a,s,n)},DirectiveResolver.prototype._extractPublicName=function(e){return splitAtColon(e,[null,e])[1].trim()},DirectiveResolver.prototype._merge=function(e,t,n,i,o,a){var s,l=this;if(isPresent(e.inputs)){var c=e.inputs.map(function(e){return l._extractPublicName(e)});t.forEach(function(e){var t=l._extractPublicName(e);if(c.indexOf(t)>-1)throw new Error("Input '"+t+"' defined multiple times in '"+stringify(a)+"'")}),s=e.inputs.concat(t)}else s=t;var u;if(isPresent(e.outputs)){var p=e.outputs.map(function(e){return l._extractPublicName(e)});n.forEach(function(e){var t=l._extractPublicName(e);if(p.indexOf(t)>-1)throw new Error("Output event '"+t+"' defined multiple times in '"+stringify(a)+"'")}),u=e.outputs.concat(n)}else u=n;var h=isPresent(e.host)?M.merge(e.host,i):i,d=isPresent(e.queries)?M.merge(e.queries,o):o;return e instanceof r.Component?new r.Component({selector:e.selector,inputs:s,outputs:u,host:h,exportAs:e.exportAs,moduleId:e.moduleId,queries:d,changeDetection:e.changeDetection,providers:e.providers,viewProviders:e.viewProviders,entryComponents:e.entryComponents,template:e.template,templateUrl:e.templateUrl,styles:e.styles,styleUrls:e.styleUrls,encapsulation:e.encapsulation,animations:e.animations,interpolation:e.interpolation}):new r.Directive({selector:e.selector,inputs:s,outputs:u,host:h,exportAs:e.exportAs,queries:d,providers:e.providers})},DirectiveResolver.decorators=[{type:r.Injectable}],DirectiveResolver.ctorParameters=[{type:Qi}],DirectiveResolver}(),Xl=T.createFromPairs([[Ki.OnInit,r.OnInit],[Ki.OnDestroy,r.OnDestroy],[Ki.DoCheck,r.DoCheck],[Ki.OnChanges,r.OnChanges],[Ki.AfterContentInit,r.AfterContentInit],[Ki.AfterContentChecked,r.AfterContentChecked],[Ki.AfterViewInit,r.AfterViewInit],[Ki.AfterViewChecked,r.AfterViewChecked]]),Zl=T.createFromPairs([[Ki.OnInit,"ngOnInit"],[Ki.OnDestroy,"ngOnDestroy"],[Ki.DoCheck,"ngDoCheck"],[Ki.OnChanges,"ngOnChanges"],[Ki.AfterContentInit,"ngAfterContentInit"],[Ki.AfterContentChecked,"ngAfterContentChecked"],[Ki.AfterViewInit,"ngAfterViewInit"],[Ki.AfterViewChecked,"ngAfterViewChecked"]]),Jl=function(){function NgModuleResolver(e){void 0===e&&(e=To),this._reflector=e}return NgModuleResolver.prototype.resolve=function(e,t){void 0===t&&(t=!0);var r=this._reflector.annotations(e).find(_isNgModuleMetadata);if(isPresent(r))return r;if(t)throw new Error("No NgModule metadata found for '"+stringify(e)+"'.");return null},NgModuleResolver.decorators=[{type:r.Injectable}],NgModuleResolver.ctorParameters=[{type:Qi}],NgModuleResolver}(),ec=function(){function PipeResolver(e){void 0===e&&(e=To),this._reflector=e}return PipeResolver.prototype.resolve=function(e,t){void 0===t&&(t=!0);var n=this._reflector.annotations(r.resolveForwardRef(e));if(isPresent(n)){var i=n.find(_isPipeMetadata);if(isPresent(i))return i}if(t)throw new Error("No Pipe decorator found on "+stringify(e));return null},PipeResolver.decorators=[{type:r.Injectable}],PipeResolver.ctorParameters=[{type:Qi}],PipeResolver}(),tc=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},rc=function(){function CompileMetadataResolver(e,t,r,n,i){void 0===i&&(i=To),this._ngModuleResolver=e,this._directiveResolver=t,this._pipeResolver=r,this._schemaRegistry=n,this._reflector=i,this._directiveCache=new Map,this._pipeCache=new Map,this._ngModuleCache=new Map,this._ngModuleOfTypes=new Map,this._anonymousTypes=new Map,this._anonymousTypeIndex=0}return CompileMetadataResolver.prototype.sanitizeTokenName=function(e){var t=stringify(e);if(t.indexOf("(")>=0){var r=this._anonymousTypes.get(e);isBlank(r)&&(this._anonymousTypes.set(e,this._anonymousTypeIndex++),r=this._anonymousTypes.get(e)),t="anonymous_token_"+r+"_"}return sanitizeIdentifier(t)},CompileMetadataResolver.prototype.clearCacheFor=function(e){this._directiveCache.delete(e),this._pipeCache.delete(e),this._ngModuleOfTypes.delete(e),this._ngModuleCache.clear()},CompileMetadataResolver.prototype.clearCache=function(){this._directiveCache.clear(),this._pipeCache.clear(),this._ngModuleCache.clear(),this._ngModuleOfTypes.clear()},CompileMetadataResolver.prototype.getAnimationEntryMetadata=function(e){var t=this,r=e.definitions.map(function(e){return t.getAnimationStateMetadata(e)});return new tt(e.name,r)},CompileMetadataResolver.prototype.getAnimationStateMetadata=function(e){if(e instanceof r.AnimationStateDeclarationMetadata){var t=this.getAnimationStyleMetadata(e.styles);return new nt(e.stateNameExpr,t)}return e instanceof r.AnimationStateTransitionMetadata?new it(e.stateChangeExpr,this.getAnimationMetadata(e.steps)):null},CompileMetadataResolver.prototype.getAnimationStyleMetadata=function(e){return new st(e.offset,e.styles)},CompileMetadataResolver.prototype.getAnimationMetadata=function(e){var t=this;if(e instanceof r.AnimationStyleMetadata)return this.getAnimationStyleMetadata(e);if(e instanceof r.AnimationKeyframesSequenceMetadata)return new at(e.steps.map(function(e){return t.getAnimationStyleMetadata(e)}));if(e instanceof r.AnimationAnimateMetadata){var n=this.getAnimationMetadata(e.styles);return new lt(e.timings,n)}if(e instanceof r.AnimationWithStepsMetadata){var i=e.steps.map(function(e){return t.getAnimationMetadata(e)});return e instanceof r.AnimationGroupMetadata?new pt(i):new ut(i)}return null},CompileMetadataResolver.prototype.getDirectiveMetadata=function(e,t){var n=this;void 0===t&&(t=!0),e=r.resolveForwardRef(e);var i=this._directiveCache.get(e);if(isBlank(i)){var o=this._directiveResolver.resolve(e,t);if(!o)return null;var a=null,s=null,l=[],c=staticTypeModuleUrl(e),u=[],p=o.selector;if(o instanceof r.Component){var h=o;assertArrayOfStrings("styles",h.styles),assertInterpolationSymbols("interpolation",h.interpolation);var d=isPresent(h.animations)?h.animations.map(function(e){return n.getAnimationEntryMetadata(e)}):null;assertArrayOfStrings("styles",h.styles),assertArrayOfStrings("styleUrls",h.styleUrls),a=new _t({encapsulation:h.encapsulation,template:h.template,templateUrl:h.templateUrl,styles:h.styles,styleUrls:h.styleUrls,animations:d,interpolation:h.interpolation}),s=h.changeDetection,isPresent(o.viewProviders)&&(l=this.getProvidersMetadata(o.viewProviders,u,'viewProviders for "'+stringify(e)+'"')),c=componentModuleUrl(this._reflector,e,h),h.entryComponents&&(u=flattenArray(h.entryComponents).map(function(e){return n.getTypeMetadata(e,staticTypeModuleUrl(e))}).concat(u)),p||(p=this._schemaRegistry.getDefaultComponentElementName())}else if(!p)throw new Error("Directive "+stringify(e)+" has no selector, please add it!");var f=[];isPresent(o.providers)&&(f=this.getProvidersMetadata(o.providers,u,'providers for "'+stringify(e)+'"'));var m=[],g=[];isPresent(o.queries)&&(m=this.getQueriesMetadata(o.queries,!1,e),g=this.getQueriesMetadata(o.queries,!0,e)),i=wt.create({selector:p,exportAs:o.exportAs,isComponent:isPresent(a),type:this.getTypeMetadata(e,c),template:a,changeDetection:s,inputs:o.inputs,outputs:o.outputs,host:o.host,providers:f,viewProviders:l,queries:m,viewQueries:g,entryComponents:u}),this._directiveCache.set(e,i)}return i},CompileMetadataResolver.prototype.getNgModuleMetadata=function(e,t){var n=this;void 0===t&&(t=!0),e=r.resolveForwardRef(e);var i=this._ngModuleCache.get(e);if(!i){var o=this._ngModuleResolver.resolve(e,t);if(!o)return null;var a=[],s=[],l=[],c=[],u=[],p=[],h=[],d=[],f=[],m=[];o.imports&&flattenArray(o.imports).forEach(function(t){var r;if(isValidType(t))r=t;else if(t&&t.ngModule){var i=t;r=i.ngModule,i.providers&&h.push.apply(h,n.getProvidersMetadata(i.providers,d,"provider for the NgModule '"+stringify(r)+"'"))}if(!r)throw new Error("Unexpected value '"+stringify(t)+"' imported by the module '"+stringify(e)+"'");var o=n.getNgModuleMetadata(r,!1);if(null===o)throw new Error("Unexpected "+n._getTypeDescriptor(t)+" '"+stringify(t)+"' imported by the module '"+stringify(e)+"'");u.push(o)}),o.exports&&flattenArray(o.exports).forEach(function(t){if(!isValidType(t))throw new Error("Unexpected value '"+stringify(t)+"' exported by the module '"+stringify(e)+"'");var r,i,o;if(r=n.getDirectiveMetadata(t,!1))s.push(r);else if(i=n.getPipeMetadata(t,!1))c.push(i);else{if(!(o=n.getNgModuleMetadata(t,!1)))throw new Error("Unexpected "+n._getTypeDescriptor(t)+" '"+stringify(t)+"' exported by the module '"+stringify(e)+"'");p.push(o)}});var g=this._getTransitiveNgModuleMetadata(u,p);if(o.declarations&&flattenArray(o.declarations).forEach(function(t){if(!isValidType(t))throw new Error("Unexpected value '"+stringify(t)+"' declared by the module '"+stringify(e)+"'");var r,i;if(r=n.getDirectiveMetadata(t,!1))n._addDirectiveToModule(r,e,g,a,!0);else{if(!(i=n.getPipeMetadata(t,!1)))throw new Error("Unexpected "+n._getTypeDescriptor(t)+" '"+stringify(t)+"' declared by the module '"+stringify(e)+"'");n._addPipeToModule(i,e,g,l,!0)}}),o.providers&&h.push.apply(h,this.getProvidersMetadata(o.providers,d,"provider for the NgModule '"+stringify(e)+"'")),o.entryComponents&&d.push.apply(d,flattenArray(o.entryComponents).map(function(e){return n.getTypeMetadata(e,staticTypeModuleUrl(e))})),o.bootstrap){var y=flattenArray(o.bootstrap).map(function(t){if(!isValidType(t))throw new Error("Unexpected value '"+stringify(t)+"' used in the bootstrap property of module '"+stringify(e)+"'");return n.getTypeMetadata(t,staticTypeModuleUrl(t))});f.push.apply(f,y)}d.push.apply(d,f),o.schemas&&m.push.apply(m,flattenArray(o.schemas)),(v=g.entryComponents).push.apply(v,d),(b=g.providers).push.apply(b,h),i=new St({type:this.getTypeMetadata(e,staticTypeModuleUrl(e)),providers:h,entryComponents:d,bootstrapComponents:f,schemas:m,declaredDirectives:a,exportedDirectives:s,declaredPipes:l,exportedPipes:c,importedModules:u,exportedModules:p,transitiveModule:g,id:o.id}),g.modules.push(i),this._verifyModule(i),this._ngModuleCache.set(e,i)}return i;var v,b},CompileMetadataResolver.prototype._verifyModule=function(e){e.exportedDirectives.forEach(function(t){if(!e.transitiveModule.directivesSet.has(t.type.reference))throw new Error("Can't export directive "+stringify(t.type.reference)+" from "+stringify(e.type.reference)+" as it was neither declared nor imported!")}),e.exportedPipes.forEach(function(t){if(!e.transitiveModule.pipesSet.has(t.type.reference))throw new Error("Can't export pipe "+stringify(t.type.reference)+" from "+stringify(e.type.reference)+" as it was neither declared nor imported!")})},CompileMetadataResolver.prototype._getTypeDescriptor=function(e){return null!==this._directiveResolver.resolve(e,!1)?"directive":null!==this._pipeResolver.resolve(e,!1)?"pipe":null!==this._ngModuleResolver.resolve(e,!1)?"module":e.provide?"provider":"value"},CompileMetadataResolver.prototype._addTypeToModule=function(e,t){var r=this._ngModuleOfTypes.get(e);if(r&&r!==t)throw new Error("Type "+stringify(e)+" is part of the declarations of 2 modules: "+stringify(r)+" and "+stringify(t)+"! "+("Please consider moving "+stringify(e)+" to a higher module that imports "+stringify(r)+" and "+stringify(t)+". ")+("You can also create a new NgModule that exports and includes "+stringify(e)+" then import that NgModule in "+stringify(r)+" and "+stringify(t)+"."));this._ngModuleOfTypes.set(e,t)},CompileMetadataResolver.prototype._getTransitiveNgModuleMetadata=function(e,t){var r=getTransitiveModules(e.concat(t),!0),n=flattenArray(r.map(function(e){return e.providers})),i=flattenArray(r.map(function(e){return e.entryComponents})),o=getTransitiveModules(e,!1),a=flattenArray(o.map(function(e){return e.exportedDirectives})),s=flattenArray(o.map(function(e){return e.exportedPipes}));return new Ct(r,n,i,a,s)},CompileMetadataResolver.prototype._addDirectiveToModule=function(e,t,r,n,i){return void 0===i&&(i=!1),!(!i&&r.directivesSet.has(e.type.reference))&&(r.directivesSet.add(e.type.reference),r.directives.push(e),n.push(e),this._addTypeToModule(e.type.reference,t),!0)},CompileMetadataResolver.prototype._addPipeToModule=function(e,t,r,n,i){return void 0===i&&(i=!1),!(!i&&r.pipesSet.has(e.type.reference))&&(r.pipesSet.add(e.type.reference),r.pipes.push(e),n.push(e),this._addTypeToModule(e.type.reference,t),!0)},CompileMetadataResolver.prototype.getTypeMetadata=function(e,t,n){return void 0===n&&(n=null),e=r.resolveForwardRef(e),new yt({name:this.sanitizeTokenName(e),moduleUrl:t,reference:e,diDeps:this.getDependenciesMetadata(e,n),lifecycleHooks:$i.filter(function(t){return hasLifecycleHook(t,e)})})},CompileMetadataResolver.prototype.getFactoryMetadata=function(e,t,n){return void 0===n&&(n=null),e=r.resolveForwardRef(e),new mt({name:this.sanitizeTokenName(e),moduleUrl:t,reference:e,diDeps:this.getDependenciesMetadata(e,n)})},CompileMetadataResolver.prototype.getPipeMetadata=function(e,t){void 0===t&&(t=!0),e=r.resolveForwardRef(e);var n=this._pipeCache.get(e);if(isBlank(n)){var i=this._pipeResolver.resolve(e,t);if(!i)return null;n=new xt({type:this.getTypeMetadata(e,staticTypeModuleUrl(e)),name:i.name,pure:i.pure}),this._pipeCache.set(e,n)}return n},CompileMetadataResolver.prototype.getDependenciesMetadata=function(e,t){var n=this,i=!1,o=isPresent(t)?t:this._reflector.parameters(e);isBlank(o)&&(o=[]);var a=o.map(function(t){var o=!1,a=!1,s=!1,l=!1,c=!1,u=null,p=null,h=null;return isArray(t)?t.forEach(function(e){e instanceof r.Host?a=!0:e instanceof r.Self?s=!0:e instanceof r.SkipSelf?l=!0:e instanceof r.Optional?c=!0:e instanceof r.Attribute?(o=!0,h=e.attributeName):e instanceof r.Query?e.isViewQuery?p=e:u=e:e instanceof r.Inject?h=e.token:isValidType(e)&&isBlank(h)&&(h=e)}):h=t,isBlank(h)?(i=!0,null):new dt({isAttribute:o,isHost:a,isSelf:s,isSkipSelf:l,isOptional:c,query:isPresent(u)?n.getQueryMetadata(u,null,e):null,viewQuery:isPresent(p)?n.getQueryMetadata(p,null,e):null,token:n.getTokenMetadata(h)})});if(i){var s=a.map(function(e){return e?stringify(e.token):"?"}).join(", ");throw new Error("Can't resolve all parameters for "+stringify(e)+": ("+s+").")}return a},CompileMetadataResolver.prototype.getTokenMetadata=function(e){e=r.resolveForwardRef(e);var t;return t=new gt(isString(e)?{value:e}:{identifier:new ht({reference:e,name:this.sanitizeTokenName(e),moduleUrl:staticTypeModuleUrl(e)})})},CompileMetadataResolver.prototype.getProvidersMetadata=function(e,t,n){var i=this,o=[];return e.forEach(function(a,s){a=r.resolveForwardRef(a),a&&"object"==typeof a&&a.hasOwnProperty("provide")&&(a=new kt(a.provide,a));var l;if(isArray(a))l=i.getProvidersMetadata(a,t,n);else if(a instanceof kt){var c=i.getTokenMetadata(a.token);c.reference===resolveIdentifierToken(Zo.ANALYZE_FOR_ENTRY_COMPONENTS).reference?t.push.apply(t,i._getEntryComponentsFromProvider(a)):l=i.getProviderMetadata(a)}else{if(!isValidType(a)){var u=e.reduce(function(e,t,r){return r<s?e.push(""+stringify(t)):r==s?e.push("?"+stringify(t)+"?"):r==s+1&&e.push("..."),e},[]).join(", ");throw new Error("Invalid "+(n?n:"provider")+" - only instances of Provider and Type are allowed, got: ["+u+"]")}l=i.getTypeMetadata(a,staticTypeModuleUrl(a))}l&&o.push(l)}),o},CompileMetadataResolver.prototype._getEntryComponentsFromProvider=function(e){var t=this,r=[],n=[];if(e.useFactory||e.useExisting||e.useClass)throw new Error("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!");if(!e.multi)throw new Error("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!");return convertToCompileValue(e.useValue,n),n.forEach(function(e){var n=t.getDirectiveMetadata(e.reference,!1);n&&r.push(n.type)}),r},CompileMetadataResolver.prototype.getProviderMetadata=function(e){var t,r=null,n=null;return isPresent(e.useClass)?(r=this.getTypeMetadata(e.useClass,staticTypeModuleUrl(e.useClass),e.dependencies),t=r.diDeps):isPresent(e.useFactory)&&(n=this.getFactoryMetadata(e.useFactory,staticTypeModuleUrl(e.useFactory),e.dependencies),t=n.diDeps),new ft({token:this.getTokenMetadata(e.token),useClass:r,useValue:convertToCompileValue(e.useValue,[]),useFactory:n,useExisting:isPresent(e.useExisting)?this.getTokenMetadata(e.useExisting):null,deps:t,multi:e.multi})},CompileMetadataResolver.prototype.getQueriesMetadata=function(e,t,r){var n=this,i=[];return M.forEach(e,function(e,o){e.isViewQuery===t&&i.push(n.getQueryMetadata(e,o,r))}),i},CompileMetadataResolver.prototype._queryVarBindings=function(e){return a.split(e,/\s*,\s*/g)},CompileMetadataResolver.prototype.getQueryMetadata=function(e,t,r){var n,i=this;if(isString(e.selector))n=this._queryVarBindings(e.selector).map(function(e){return i.getTokenMetadata(e)});else{if(!isPresent(e.selector))throw new Error("Can't construct a query for the property \""+t+'" of "'+stringify(r)+"\" since the query selector wasn't defined.");n=[this.getTokenMetadata(e.selector)]}return new vt({selectors:n,first:e.first,descendants:e.descendants,propertyName:t,read:isPresent(e.read)?this.getTokenMetadata(e.read):null})},CompileMetadataResolver.decorators=[{type:r.Injectable}],CompileMetadataResolver.ctorParameters=[{type:Jl},{type:Yl},{type:ec},{type:pa},{type:Qi}],CompileMetadataResolver}(),nc=function(e){function _CompileValueConverter(){e.apply(this,arguments)}return tc(_CompileValueConverter,e),_CompileValueConverter.prototype.visitOther=function(e,t){var r;return r=new ht(isStaticSymbol(e)?{name:e.name,moduleUrl:e.filePath,reference:e}:{reference:e}),t.push(r),r},_CompileValueConverter}(Ye),ic=function(){function ComponentFactoryDependency(e,t){this.comp=e,this.placeholder=t}return ComponentFactoryDependency}(),oc=function(){function NgModuleCompileResult(e,t,r){this.statements=e,this.ngModuleFactoryVar=t,this.dependencies=r}return NgModuleCompileResult}(),ac=function(){function NgModuleCompiler(){}return NgModuleCompiler.prototype.compile=function(e,t){var r=isPresent(e.type.moduleUrl)?"in NgModule "+e.type.name+" in "+e.type.moduleUrl:"in NgModule "+e.type.name,n=new yn("",r),i=new vn(new gn(n,null,null,null),new gn(n,null,null,null)),o=[],a=[],s=e.transitiveModule.entryComponents.map(function(t){var r=new ht({name:t.name});return e.bootstrapComponents.indexOf(t)>-1&&a.push(r),o.push(new ic(t,r)),r}),l=new sc(e,s,a,i),c=new ua(e,t,i);c.parse().forEach(function(e){return l.addProvider(e)});var u=l.build(),p=e.type.name+"NgFactory",h=variable(p).set(importExpr(resolveIdentifier(Zo.NgModuleFactory)).instantiate([variable(u.name),importExpr(e.type)],importType(resolveIdentifier(Zo.NgModuleFactory),[importType(e.type)],[L.Const]))).toDeclStmt(null,[pe.Final]),d=[u,h];if(e.id){var f=importExpr(resolveIdentifier(Zo.RegisterModuleFactoryFn)).callFn([literal(e.id),variable(p)]).toStmt();d.push(f)}return new oc(d,p,o)},NgModuleCompiler.decorators=[{type:r.Injectable}],NgModuleCompiler.ctorParameters=[],NgModuleCompiler}(),sc=function(){function _InjectorBuilder(e,t,r,n){this._ngModuleMeta=e,this._entryComponentFactories=t,this._bootstrapComponentFactories=r,this._sourceSpan=n,this._tokens=[],this._instances=new Map,this._fields=[],this._createStmts=[],this._destroyStmts=[],this._getters=[]}return _InjectorBuilder.prototype.addProvider=function(e){var t=this,r=e.providers.map(function(e){return t._getProviderValue(e)}),n="_"+e.token.name+"_"+this._instances.size,i=this._createProviderProperty(n,e,r,e.multiProvider,e.eager);e.lifecycleHooks.indexOf(Ki.OnDestroy)!==-1&&this._destroyStmts.push(i.callMethod("ngOnDestroy",[]).toStmt()),this._tokens.push(e.token),this._instances.set(e.token.reference,i)},_InjectorBuilder.prototype.build=function(){var e=this,t=this._tokens.map(function(t){var r=e._instances.get(t.reference);return new Ue(cc.token.identical(createDiTokenExpression(t)),[new Ne(r)])}),r=[new Ve("createInternal",[],this._createStmts.concat(new Ne(this._instances.get(this._ngModuleMeta.type.reference))),importType(this._ngModuleMeta.type)),new Ve("getInternal",[new _e(cc.token.name,J),new _e(cc.notFoundResult.name,J)],t.concat([new Ne(cc.notFoundResult)]),J),new Ve("destroyInternal",[],this._destroyStmts)],n=new Ve(null,[new _e(lc.parent.name,importType(resolveIdentifier(Zo.Injector)))],[Pe.callFn([variable(lc.parent.name),literalArr(this._entryComponentFactories.map(function(e){return importExpr(e)})),literalArr(this._bootstrapComponentFactories.map(function(e){return importExpr(e)}))]).toStmt()]),i=this._ngModuleMeta.type.name+"Injector";return new je(i,importExpr(resolveIdentifier(Zo.NgModuleInjector),[importType(this._ngModuleMeta.type)]),this._fields,this._getters,n,r)},_InjectorBuilder.prototype._getProviderValue=function(e){var t,r=this;if(isPresent(e.useExisting))t=this._getDependency(new dt({token:e.useExisting}));else if(isPresent(e.useFactory)){var n=isPresent(e.deps)?e.deps:e.useFactory.diDeps,i=n.map(function(e){return r._getDependency(e)});t=importExpr(e.useFactory).callFn(i)}else if(isPresent(e.useClass)){var n=isPresent(e.deps)?e.deps:e.useClass.diDeps,i=n.map(function(e){return r._getDependency(e)});t=importExpr(e.useClass).instantiate(i,importType(e.useClass))}else t=convertValueToOutputAst(e.useValue);return t},_InjectorBuilder.prototype._createProviderProperty=function(e,t,r,n,i){var o,a;if(n?(o=literalArr(r),a=new X(J)):(o=r[0],a=r[0].type),isBlank(a)&&(a=J),i)this._fields.push(new Be(e,a)),this._createStmts.push(Ae.prop(e).set(o).toStmt());else{var s="_"+e;this._fields.push(new Be(s,a));var l=[new Ue(Ae.prop(s).isBlank(),[Ae.prop(s).set(o).toStmt()]),new Ne(Ae.prop(s))];this._getters.push(new Fe(e,l,a))}return Ae.prop(e)},_InjectorBuilder.prototype._getDependency=function(e){var t=null;if(e.isValue&&(t=literal(e.value)),e.isSkipSelf||(!e.token||e.token.reference!==resolveIdentifierToken(Zo.Injector).reference&&e.token.reference!==resolveIdentifierToken(Zo.ComponentFactoryResolver).reference||(t=Ae),isBlank(t)&&(t=this._instances.get(e.token.reference))),isBlank(t)){var r=[createDiTokenExpression(e.token)];e.isOptional&&r.push(Te),t=lc.parent.callMethod("get",r)}return t},_InjectorBuilder}(),lc=function(){function InjectorProps(){}return InjectorProps.parent=Ae.prop("parent"),InjectorProps}(),cc=function(){function InjectMethodVars(){}return InjectMethodVars.token=variable("token"),InjectMethodVars.notFoundResult=variable("notFoundResult"),InjectMethodVars}(),uc=/'|\\|\n|\r|\$/g,pc=/^[$A-Z_][0-9A-Z_$]*$/i,hc=variable("error"),dc=variable("stack"),fc=function(){function _EmittedLine(e){this.indent=e,this.parts=[]}return _EmittedLine}(),mc=function(){function EmitterVisitorContext(e,t){this._exportedVars=e,this._indent=t,this._classes=[],this._lines=[new fc(t)]}return EmitterVisitorContext.createRoot=function(e){return new EmitterVisitorContext(e,0)},Object.defineProperty(EmitterVisitorContext.prototype,"_currentLine",{get:function(){return this._lines[this._lines.length-1]},enumerable:!0,configurable:!0}),EmitterVisitorContext.prototype.isExportedVar=function(e){return this._exportedVars.indexOf(e)!==-1},EmitterVisitorContext.prototype.println=function(e){void 0===e&&(e=""),this.print(e,!0)},EmitterVisitorContext.prototype.lineIsEmpty=function(){return 0===this._currentLine.parts.length},EmitterVisitorContext.prototype.print=function(e,t){void 0===t&&(t=!1),e.length>0&&this._currentLine.parts.push(e),t&&this._lines.push(new fc(this._indent))},EmitterVisitorContext.prototype.removeEmptyLastLine=function(){this.lineIsEmpty()&&this._lines.pop()},EmitterVisitorContext.prototype.incIndent=function(){this._indent++,this._currentLine.indent=this._indent},EmitterVisitorContext.prototype.decIndent=function(){this._indent--,this._currentLine.indent=this._indent},EmitterVisitorContext.prototype.pushClass=function(e){this._classes.push(e)},EmitterVisitorContext.prototype.popClass=function(){return this._classes.pop()},Object.defineProperty(EmitterVisitorContext.prototype,"currentClass",{get:function(){return this._classes.length>0?this._classes[this._classes.length-1]:null},enumerable:!0,configurable:!0}),EmitterVisitorContext.prototype.toSource=function(){var e=this._lines;return 0===e[e.length-1].parts.length&&(e=e.slice(0,e.length-1)),e.map(function(e){return e.parts.length>0?_createIndent(e.indent)+e.parts.join(""):""}).join("\n")},EmitterVisitorContext}(),gc=function(){function AbstractEmitterVisitor(e){this._escapeDollarInStrings=e}return AbstractEmitterVisitor.prototype.visitExpressionStmt=function(e,t){return e.expr.visitExpression(this,t),t.println(";"),null},AbstractEmitterVisitor.prototype.visitReturnStmt=function(e,t){return t.print("return "),e.value.visitExpression(this,t),t.println(";"),null},AbstractEmitterVisitor.prototype.visitIfStmt=function(e,t){t.print("if ("),e.condition.visitExpression(this,t),t.print(") {");var r=isPresent(e.falseCase)&&e.falseCase.length>0;return e.trueCase.length<=1&&!r?(t.print(" "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(" ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),r&&(t.println("} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println("}"),null},AbstractEmitterVisitor.prototype.visitThrowStmt=function(e,t){return t.print("throw "),e.error.visitExpression(this,t),t.println(";"),null},AbstractEmitterVisitor.prototype.visitCommentStmt=function(e,t){var r=e.comment.split("\n");return r.forEach(function(e){t.println("// "+e)}),null},AbstractEmitterVisitor.prototype.visitWriteVarExpr=function(e,t){var r=t.lineIsEmpty();return r||t.print("("),t.print(e.name+" = "),e.value.visitExpression(this,t),r||t.print(")"),null},AbstractEmitterVisitor.prototype.visitWriteKeyExpr=function(e,t){var r=t.lineIsEmpty();return r||t.print("("),e.receiver.visitExpression(this,t),t.print("["),e.index.visitExpression(this,t),t.print("] = "),e.value.visitExpression(this,t),r||t.print(")"),null},AbstractEmitterVisitor.prototype.visitWritePropExpr=function(e,t){var r=t.lineIsEmpty();return r||t.print("("),e.receiver.visitExpression(this,t),t.print("."+e.name+" = "),e.value.visitExpression(this,t),r||t.print(")"),null},AbstractEmitterVisitor.prototype.visitInvokeMethodExpr=function(e,t){e.receiver.visitExpression(this,t);var r=e.name;return isPresent(e.builtin)&&(r=this.getBuiltinMethodName(e.builtin),isBlank(r))?null:(t.print("."+r+"("),this.visitAllExpressions(e.args,t,","),t.print(")"),null)},AbstractEmitterVisitor.prototype.visitInvokeFunctionExpr=function(e,t){return e.fn.visitExpression(this,t),t.print("("),this.visitAllExpressions(e.args,t,","),t.print(")"),null},AbstractEmitterVisitor.prototype.visitReadVarExpr=function(e,t){var r=e.name;if(isPresent(e.builtin))switch(e.builtin){case ie.Super:r="super";break;case ie.This:r="this";break;case ie.CatchError:r=hc.name;break;case ie.CatchStack:r=dc.name;break;default:throw new Error("Unknown builtin variable "+e.builtin)}return t.print(r),null},AbstractEmitterVisitor.prototype.visitInstantiateExpr=function(e,t){return t.print("new "),e.classExpr.visitExpression(this,t),t.print("("),this.visitAllExpressions(e.args,t,","),t.print(")"),null},AbstractEmitterVisitor.prototype.visitLiteralExpr=function(e,t,r){void 0===r&&(r="null");var n=e.value;return isString(n)?t.print(escapeIdentifier(n,this._escapeDollarInStrings)):isBlank(n)?t.print(r):t.print(""+n),null},AbstractEmitterVisitor.prototype.visitConditionalExpr=function(e,t){return t.print("("),e.condition.visitExpression(this,t),t.print("? "),e.trueCase.visitExpression(this,t),t.print(": "),e.falseCase.visitExpression(this,t),t.print(")"),null},AbstractEmitterVisitor.prototype.visitNotExpr=function(e,t){return t.print("!"),e.condition.visitExpression(this,t),null},AbstractEmitterVisitor.prototype.visitBinaryOperatorExpr=function(e,t){var r;switch(e.operator){case $.Equals:r="==";break;case $.Identical:r="===";break;case $.NotEquals:r="!=";break;case $.NotIdentical:r="!==";break;case $.And:r="&&";break;case $.Or:r="||";break;case $.Plus:r="+";break;case $.Minus:r="-";break;case $.Divide:r="/";break;case $.Multiply:r="*";break;case $.Modulo:r="%";break;case $.Lower:r="<";break;case $.LowerEquals:r="<=";break;case $.Bigger:r=">";break;case $.BiggerEquals:r=">=";break;default:throw new Error("Unknown operator "+e.operator)}return t.print("("),e.lhs.visitExpression(this,t),t.print(" "+r+" "),e.rhs.visitExpression(this,t),t.print(")"),null},AbstractEmitterVisitor.prototype.visitReadPropExpr=function(e,t){return e.receiver.visitExpression(this,t),t.print("."),t.print(e.name),null},AbstractEmitterVisitor.prototype.visitReadKeyExpr=function(e,t){return e.receiver.visitExpression(this,t),t.print("["),e.index.visitExpression(this,t),t.print("]"),null},AbstractEmitterVisitor.prototype.visitLiteralArrayExpr=function(e,t){var r=e.entries.length>1;return t.print("[",r),t.incIndent(),this.visitAllExpressions(e.entries,t,",",r),t.decIndent(),t.print("]",r),null},AbstractEmitterVisitor.prototype.visitLiteralMapExpr=function(e,t){
var r=this,n=e.entries.length>1;return t.print("{",n),t.incIndent(),this.visitAllObjects(function(e){t.print(escapeIdentifier(e[0],r._escapeDollarInStrings,!1)+": "),e[1].visitExpression(r,t)},e.entries,t,",",n),t.decIndent(),t.print("}",n),null},AbstractEmitterVisitor.prototype.visitAllExpressions=function(e,t,r,n){var i=this;void 0===n&&(n=!1),this.visitAllObjects(function(e){return e.visitExpression(i,t)},e,t,r,n)},AbstractEmitterVisitor.prototype.visitAllObjects=function(e,t,r,n,i){void 0===i&&(i=!1);for(var o=0;o<t.length;o++)o>0&&r.print(n,i),e(t[o]);i&&r.println()},AbstractEmitterVisitor.prototype.visitAllStatements=function(e,t){var r=this;e.forEach(function(e){return e.visitStatement(r,t)})},AbstractEmitterVisitor}(),yc=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},vc="asset://debug/lib",bc=function(){function TypeScriptEmitter(e){this._importGenerator=e}return TypeScriptEmitter.prototype.emitStatements=function(e,t,r){var n=this,i=new _c(e),o=mc.createRoot(r);i.visitAllStatements(t,o);var a=[];return i.importsWithPrefixes.forEach(function(t,r){a.push("imp"+("ort * as "+t+" from '"+n._importGenerator.getImportPath(e,r)+"';"))}),a.push(o.toSource()),a.join("\n")},TypeScriptEmitter}(),_c=function(e){function _TsEmitterVisitor(t){e.call(this,!1),this._moduleUrl=t,this.importsWithPrefixes=new Map}return yc(_TsEmitterVisitor,e),_TsEmitterVisitor.prototype.visitType=function(e,t,r){void 0===r&&(r="any"),isPresent(e)?e.visitType(this,t):t.print(r)},_TsEmitterVisitor.prototype.visitLiteralExpr=function(t,r){e.prototype.visitLiteralExpr.call(this,t,r,"(null as any)")},_TsEmitterVisitor.prototype.visitExternalExpr=function(e,t){return this._visitIdentifier(e.value,e.typeParams,t),null},_TsEmitterVisitor.prototype.visitDeclareVarStmt=function(e,t){return t.isExportedVar(e.name)&&t.print("export "),e.hasModifier(pe.Final)?t.print("const"):t.print("var"),t.print(" "+e.name+":"),this.visitType(e.type,t),t.print(" = "),e.value.visitExpression(this,t),t.println(";"),null},_TsEmitterVisitor.prototype.visitCastExpr=function(e,t){return t.print("(<"),e.type.visitType(this,t),t.print(">"),e.value.visitExpression(this,t),t.print(")"),null},_TsEmitterVisitor.prototype.visitDeclareClassStmt=function(e,t){var r=this;return t.pushClass(e),t.isExportedVar(e.name)&&t.print("export "),t.print("class "+e.name),isPresent(e.parent)&&(t.print(" extends "),e.parent.visitExpression(this,t)),t.println(" {"),t.incIndent(),e.fields.forEach(function(e){return r._visitClassField(e,t)}),isPresent(e.constructorMethod)&&this._visitClassConstructor(e,t),e.getters.forEach(function(e){return r._visitClassGetter(e,t)}),e.methods.forEach(function(e){return r._visitClassMethod(e,t)}),t.decIndent(),t.println("}"),t.popClass(),null},_TsEmitterVisitor.prototype._visitClassField=function(e,t){e.hasModifier(pe.Private)&&t.print("/*private*/ "),t.print(e.name),t.print(":"),this.visitType(e.type,t),t.println(";")},_TsEmitterVisitor.prototype._visitClassGetter=function(e,t){e.hasModifier(pe.Private)&&t.print("private "),t.print("get "+e.name+"()"),t.print(":"),this.visitType(e.type,t),t.println(" {"),t.incIndent(),this.visitAllStatements(e.body,t),t.decIndent(),t.println("}")},_TsEmitterVisitor.prototype._visitClassConstructor=function(e,t){t.print("constructor("),this._visitParams(e.constructorMethod.params,t),t.println(") {"),t.incIndent(),this.visitAllStatements(e.constructorMethod.body,t),t.decIndent(),t.println("}")},_TsEmitterVisitor.prototype._visitClassMethod=function(e,t){e.hasModifier(pe.Private)&&t.print("private "),t.print(e.name+"("),this._visitParams(e.params,t),t.print("):"),this.visitType(e.type,t,"void"),t.println(" {"),t.incIndent(),this.visitAllStatements(e.body,t),t.decIndent(),t.println("}")},_TsEmitterVisitor.prototype.visitFunctionExpr=function(e,t){return t.print("("),this._visitParams(e.params,t),t.print("):"),this.visitType(e.type,t,"void"),t.println(" => {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print("}"),null},_TsEmitterVisitor.prototype.visitDeclareFunctionStmt=function(e,t){return t.isExportedVar(e.name)&&t.print("export "),t.print("function "+e.name+"("),this._visitParams(e.params,t),t.print("):"),this.visitType(e.type,t,"void"),t.println(" {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println("}"),null},_TsEmitterVisitor.prototype.visitTryCatchStmt=function(e,t){t.println("try {"),t.incIndent(),this.visitAllStatements(e.bodyStmts,t),t.decIndent(),t.println("} catch ("+hc.name+") {"),t.incIndent();var r=[dc.set(hc.prop("stack")).toDeclStmt(null,[pe.Final])].concat(e.catchStmts);return this.visitAllStatements(r,t),t.decIndent(),t.println("}"),null},_TsEmitterVisitor.prototype.visitBuiltintType=function(e,t){var r;switch(e.name){case G.Bool:r="boolean";break;case G.Dynamic:r="any";break;case G.Function:r="Function";break;case G.Number:r="number";break;case G.Int:r="number";break;case G.String:r="string";break;default:throw new Error("Unsupported builtin type "+e.name)}return t.print(r),null},_TsEmitterVisitor.prototype.visitExternalType=function(e,t){return this._visitIdentifier(e.value,e.typeParams,t),null},_TsEmitterVisitor.prototype.visitArrayType=function(e,t){return this.visitType(e.of,t),t.print("[]"),null},_TsEmitterVisitor.prototype.visitMapType=function(e,t){return t.print("{[key: string]:"),this.visitType(e.valueType,t),t.print("}"),null},_TsEmitterVisitor.prototype.getBuiltinMethodName=function(e){var t;switch(e){case ae.ConcatArray:t="concat";break;case ae.SubscribeObservable:t="subscribe";break;case ae.Bind:t="bind";break;default:throw new Error("Unknown builtin method: "+e)}return t},_TsEmitterVisitor.prototype._visitParams=function(e,t){var r=this;this.visitAllObjects(function(e){t.print(e.name),t.print(":"),r.visitType(e.type,t)},e,t,",")},_TsEmitterVisitor.prototype._visitIdentifier=function(e,t,r){var n=this;if(isBlank(e.name))throw new Error("Internal error: unknown identifier "+e);if(isPresent(e.moduleUrl)&&e.moduleUrl!=this._moduleUrl){var i=this.importsWithPrefixes.get(e.moduleUrl);isBlank(i)&&(i="import"+this.importsWithPrefixes.size,this.importsWithPrefixes.set(e.moduleUrl,i)),r.print(i+".")}e.reference&&e.reference.members?(r.print(e.reference.name),r.print("."),r.print(e.reference.members.join("."))):r.print(e.name),isPresent(t)&&t.length>0&&(r.print("<"),this.visitAllObjects(function(e){return e.visitType(n,r)},t,r,","),r.print(">"))},_TsEmitterVisitor}(gc),wc=function(){function _ExecutionContext(e,t,r,n){this.parent=e,this.instance=t,this.className=r,this.vars=n}return _ExecutionContext.prototype.createChildWihtLocalVars=function(){return new _ExecutionContext(this,this.instance,this.className,new Map)},_ExecutionContext}(),xc=function(){function ReturnValue(e){this.value=e}return ReturnValue}(),Sc=function(){function StatementInterpreter(){}return StatementInterpreter.prototype.debugAst=function(e){return debugOutputAstAsTypeScript(e)},StatementInterpreter.prototype.visitDeclareVarStmt=function(e,t){return t.vars.set(e.name,e.value.visitExpression(this,t)),null},StatementInterpreter.prototype.visitWriteVarExpr=function(e,t){for(var r=e.value.visitExpression(this,t),n=t;null!=n;){if(n.vars.has(e.name))return n.vars.set(e.name,r),r;n=n.parent}throw new Error("Not declared variable "+e.name)},StatementInterpreter.prototype.visitReadVarExpr=function(e,t){var r=e.name;if(isPresent(e.builtin))switch(e.builtin){case ie.Super:return t.instance.__proto__;case ie.This:return t.instance;case ie.CatchError:r=Cc;break;case ie.CatchStack:r=kc;break;default:throw new Error("Unknown builtin variable "+e.builtin)}for(var n=t;null!=n;){if(n.vars.has(r))return n.vars.get(r);n=n.parent}throw new Error("Not declared variable "+r)},StatementInterpreter.prototype.visitWriteKeyExpr=function(e,t){var r=e.receiver.visitExpression(this,t),n=e.index.visitExpression(this,t),i=e.value.visitExpression(this,t);return r[n]=i,i},StatementInterpreter.prototype.visitWritePropExpr=function(e,t){var r=e.receiver.visitExpression(this,t),n=e.value.visitExpression(this,t);return r[e.name]=n,n},StatementInterpreter.prototype.visitInvokeMethodExpr=function(e,t){var r,n=e.receiver.visitExpression(this,t),i=this.visitAllExpressions(e.args,t);if(isPresent(e.builtin))switch(e.builtin){case ae.ConcatArray:r=I.concat(n,i[0]);break;case ae.SubscribeObservable:r=n.subscribe({next:i[0]});break;case ae.Bind:r=n.bind(i[0]);break;default:throw new Error("Unknown builtin method "+e.builtin)}else r=n[e.name].apply(n,i);return r},StatementInterpreter.prototype.visitInvokeFunctionExpr=function(e,t){var r=this.visitAllExpressions(e.args,t),n=e.fn;if(n instanceof se&&n.builtin===ie.Super)return t.instance.constructor.prototype.constructor.apply(t.instance,r),null;var i=e.fn.visitExpression(this,t);return i.apply(null,r)},StatementInterpreter.prototype.visitReturnStmt=function(e,t){return new xc(e.value.visitExpression(this,t))},StatementInterpreter.prototype.visitDeclareClassStmt=function(e,t){var r=createDynamicClass(e,t,this);return t.vars.set(e.name,r),null},StatementInterpreter.prototype.visitExpressionStmt=function(e,t){return e.expr.visitExpression(this,t)},StatementInterpreter.prototype.visitIfStmt=function(e,t){var r=e.condition.visitExpression(this,t);return r?this.visitAllStatements(e.trueCase,t):isPresent(e.falseCase)?this.visitAllStatements(e.falseCase,t):null},StatementInterpreter.prototype.visitTryCatchStmt=function(e,t){try{return this.visitAllStatements(e.bodyStmts,t)}catch(r){var n=t.createChildWihtLocalVars();return n.vars.set(Cc,r),n.vars.set(kc,r.stack),this.visitAllStatements(e.catchStmts,n)}},StatementInterpreter.prototype.visitThrowStmt=function(e,t){throw e.error.visitExpression(this,t)},StatementInterpreter.prototype.visitCommentStmt=function(e,t){return null},StatementInterpreter.prototype.visitInstantiateExpr=function(e,t){var r=this.visitAllExpressions(e.args,t),n=e.classExpr.visitExpression(this,t);return new(n.bind.apply(n,[void 0].concat(r)))},StatementInterpreter.prototype.visitLiteralExpr=function(e,t){return e.value},StatementInterpreter.prototype.visitExternalExpr=function(e,t){return e.value.reference},StatementInterpreter.prototype.visitConditionalExpr=function(e,t){return e.condition.visitExpression(this,t)?e.trueCase.visitExpression(this,t):isPresent(e.falseCase)?e.falseCase.visitExpression(this,t):null},StatementInterpreter.prototype.visitNotExpr=function(e,t){return!e.condition.visitExpression(this,t)},StatementInterpreter.prototype.visitCastExpr=function(e,t){return e.value.visitExpression(this,t)},StatementInterpreter.prototype.visitFunctionExpr=function(e,t){var r=e.params.map(function(e){return e.name});return _declareFn(r,e.statements,t,this)},StatementInterpreter.prototype.visitDeclareFunctionStmt=function(e,t){var r=e.params.map(function(e){return e.name});return t.vars.set(e.name,_declareFn(r,e.statements,t,this)),null},StatementInterpreter.prototype.visitBinaryOperatorExpr=function(e,t){var r=this,n=function(){return e.lhs.visitExpression(r,t)},i=function(){return e.rhs.visitExpression(r,t)};switch(e.operator){case $.Equals:return n()==i();case $.Identical:return n()===i();case $.NotEquals:return n()!=i();case $.NotIdentical:return n()!==i();case $.And:return n()&&i();case $.Or:return n()||i();case $.Plus:return n()+i();case $.Minus:return n()-i();case $.Divide:return n()/i();case $.Multiply:return n()*i();case $.Modulo:return n()%i();case $.Lower:return n()<i();case $.LowerEquals:return n()<=i();case $.Bigger:return n()>i();case $.BiggerEquals:return n()>=i();default:throw new Error("Unknown operator "+e.operator)}},StatementInterpreter.prototype.visitReadPropExpr=function(e,t){var r,n=e.receiver.visitExpression(this,t);return r=n[e.name]},StatementInterpreter.prototype.visitReadKeyExpr=function(e,t){var r=e.receiver.visitExpression(this,t),n=e.index.visitExpression(this,t);return r[n]},StatementInterpreter.prototype.visitLiteralArrayExpr=function(e,t){return this.visitAllExpressions(e.entries,t)},StatementInterpreter.prototype.visitLiteralMapExpr=function(e,t){var r=this,n={};return e.entries.forEach(function(e){return n[e[0]]=e[1].visitExpression(r,t)}),n},StatementInterpreter.prototype.visitAllExpressions=function(e,t){var r=this;return e.map(function(e){return e.visitExpression(r,t)})},StatementInterpreter.prototype.visitAllStatements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=n.visitStatement(this,t);if(i instanceof xc)return i}return null},StatementInterpreter}(),Cc="error",kc="stack",Ec=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Ac=function(e){function AbstractJsEmitterVisitor(){e.call(this,!1)}return Ec(AbstractJsEmitterVisitor,e),AbstractJsEmitterVisitor.prototype.visitDeclareClassStmt=function(e,t){var r=this;return t.pushClass(e),this._visitClassConstructor(e,t),isPresent(e.parent)&&(t.print(e.name+".prototype = Object.create("),e.parent.visitExpression(this,t),t.println(".prototype);")),e.getters.forEach(function(n){return r._visitClassGetter(e,n,t)}),e.methods.forEach(function(n){return r._visitClassMethod(e,n,t)}),t.popClass(),null},AbstractJsEmitterVisitor.prototype._visitClassConstructor=function(e,t){t.print("function "+e.name+"("),isPresent(e.constructorMethod)&&this._visitParams(e.constructorMethod.params,t),t.println(") {"),t.incIndent(),isPresent(e.constructorMethod)&&e.constructorMethod.body.length>0&&(t.println("var self = this;"),this.visitAllStatements(e.constructorMethod.body,t)),t.decIndent(),t.println("}")},AbstractJsEmitterVisitor.prototype._visitClassGetter=function(e,t,r){r.println("Object.defineProperty("+e.name+".prototype, '"+t.name+"', { get: function() {"),r.incIndent(),t.body.length>0&&(r.println("var self = this;"),this.visitAllStatements(t.body,r)),r.decIndent(),r.println("}});")},AbstractJsEmitterVisitor.prototype._visitClassMethod=function(e,t,r){r.print(e.name+".prototype."+t.name+" = function("),this._visitParams(t.params,r),r.println(") {"),r.incIndent(),t.body.length>0&&(r.println("var self = this;"),this.visitAllStatements(t.body,r)),r.decIndent(),r.println("};")},AbstractJsEmitterVisitor.prototype.visitReadVarExpr=function(t,r){if(t.builtin===ie.This)r.print("self");else{if(t.builtin===ie.Super)throw new Error("'super' needs to be handled at a parent ast node, not at the variable level!");e.prototype.visitReadVarExpr.call(this,t,r)}return null},AbstractJsEmitterVisitor.prototype.visitDeclareVarStmt=function(e,t){return t.print("var "+e.name+" = "),e.value.visitExpression(this,t),t.println(";"),null},AbstractJsEmitterVisitor.prototype.visitCastExpr=function(e,t){return e.value.visitExpression(this,t),null},AbstractJsEmitterVisitor.prototype.visitInvokeFunctionExpr=function(t,r){var n=t.fn;return n instanceof se&&n.builtin===ie.Super?(r.currentClass.parent.visitExpression(this,r),r.print(".call(this"),t.args.length>0&&(r.print(", "),this.visitAllExpressions(t.args,r,",")),r.print(")")):e.prototype.visitInvokeFunctionExpr.call(this,t,r),null},AbstractJsEmitterVisitor.prototype.visitFunctionExpr=function(e,t){return t.print("function("),this._visitParams(e.params,t),t.println(") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print("}"),null},AbstractJsEmitterVisitor.prototype.visitDeclareFunctionStmt=function(e,t){return t.print("function "+e.name+"("),this._visitParams(e.params,t),t.println(") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println("}"),null},AbstractJsEmitterVisitor.prototype.visitTryCatchStmt=function(e,t){t.println("try {"),t.incIndent(),this.visitAllStatements(e.bodyStmts,t),t.decIndent(),t.println("} catch ("+hc.name+") {"),t.incIndent();var r=[dc.set(hc.prop("stack")).toDeclStmt(null,[pe.Final])].concat(e.catchStmts);return this.visitAllStatements(r,t),t.decIndent(),t.println("}"),null},AbstractJsEmitterVisitor.prototype._visitParams=function(e,t){this.visitAllObjects(function(e){return t.print(e.name)},e,t,",")},AbstractJsEmitterVisitor.prototype.getBuiltinMethodName=function(e){var t;switch(e){case ae.ConcatArray:t="concat";break;case ae.SubscribeObservable:t="subscribe";break;case ae.Bind:t="bind";break;default:throw new Error("Unknown builtin method: "+e)}return t},AbstractJsEmitterVisitor}(gc),Pc=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Tc=function(e){function JitEmitterVisitor(){e.apply(this,arguments),this._evalArgNames=[],this._evalArgValues=[]}return Pc(JitEmitterVisitor,e),JitEmitterVisitor.prototype.getArgs=function(){for(var e={},t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e},JitEmitterVisitor.prototype.visitExternalExpr=function(e,t){var r=e.value.reference,n=this._evalArgValues.indexOf(r);if(n===-1){n=this._evalArgValues.length,this._evalArgValues.push(r);var i=isPresent(e.value.name)?sanitizeIdentifier(e.value.name):"val";this._evalArgNames.push(sanitizeIdentifier("jit_"+i+n))}return t.print(this._evalArgNames[n]),null},JitEmitterVisitor}(Ac),Mc=function(){function ShadowCss(){this.strictStyling=!0}return ShadowCss.prototype.shimCssText=function(e,t,r){void 0===r&&(r="");var n=extractSourceMappingUrl(e);return e=stripComments(e),e=this._insertDirectives(e),this._scopeCssText(e,t,r)+n},ShadowCss.prototype._insertDirectives=function(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)},ShadowCss.prototype._insertPolyfillDirectivesInCssText=function(e){return a.replaceAllMapped(e,Ic,function(e){return e[1]+"{"})},ShadowCss.prototype._insertPolyfillRulesInCssText=function(e){return a.replaceAllMapped(e,Oc,function(e){var t=e[0];return t=a.replace(t,e[1],""),t=a.replace(t,e[2],""),e[3]+t})},ShadowCss.prototype._scopeCssText=function(e,t,r){var n=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),isPresent(t)&&(e=this._scopeSelectors(e,t,r)),e=e+"\n"+n,e.trim()},ShadowCss.prototype._extractUnscopedRulesFromCssText=function(e){var t,r="";for(Rc.lastIndex=0;null!==(t=Rc.exec(e));){var n=t[0];n=a.replace(n,t[2],""),n=a.replace(n,t[1],t[3]),r+=n+"\n\n"}return r},ShadowCss.prototype._convertColonHost=function(e){return this._convertColonRule(e,Bc,this._colonHostPartReplacer)},ShadowCss.prototype._convertColonHostContext=function(e){return this._convertColonRule(e,Vc,this._colonHostContextPartReplacer)},ShadowCss.prototype._convertColonRule=function(e,t,r){return a.replaceAllMapped(e,t,function(e){if(isPresent(e[2])){for(var t=e[2].split(","),n=[],i=0;i<t.length;i++){var o=t[i];if(isBlank(o))break;o=o.trim(),n.push(r(Fc,o,e[3]))}return n.join(",")}return Fc+e[3]})},ShadowCss.prototype._colonHostContextPartReplacer=function(e,t,r){return a.contains(t,Lc)?this._colonHostPartReplacer(e,t,r):e+t+r+", "+t+" "+e+r},ShadowCss.prototype._colonHostPartReplacer=function(e,t,r){return e+a.replace(t,Lc,"")+r},ShadowCss.prototype._convertShadowDOMSelectors=function(e){return jc.reduce(function(e,t){return a.replaceAll(e,t," ")},e)},ShadowCss.prototype._scopeSelectors=function(e,t,r){var n=this;return processRules(e,function(e){var i=e.selector,o=e.content;return"@"!=e.selector[0]||e.selector.startsWith("@page")?i=n._scopeSelector(e.selector,t,r,n.strictStyling):(e.selector.startsWith("@media")||e.selector.startsWith("@supports"))&&(o=n._scopeSelectors(e.content,t,r)),new Jc(i,o)})},ShadowCss.prototype._scopeSelector=function(e,t,r,n){var i=this;return e.split(",").map(function(e){return e.trim().split(Uc)}).map(function(e){var o=e[0],a=e.slice(1),s=function(e){return i._selectorNeedsScoping(e,t)?n?i._applyStrictSelectorScope(e,t,r):i._applySelectorScope(e,t,r):e};return[s(o)].concat(a).join(" ")}).join(", ")},ShadowCss.prototype._selectorNeedsScoping=function(e,t){var r=this._makeScopeMatcher(t);return!r.test(e)},ShadowCss.prototype._makeScopeMatcher=function(e){var t=/\[/g,r=/\]/g;return e=a.replaceAll(e,t,"\\["),e=a.replaceAll(e,r,"\\]"),new RegExp("^("+e+")"+zc,"m")},ShadowCss.prototype._applySelectorScope=function(e,t,r){return this._applySimpleSelectorScope(e,t,r)},ShadowCss.prototype._applySimpleSelectorScope=function(e,t,r){if(Wc.lastIndex=0,Wc.test(e)){var n=this.strictStyling?"["+r+"]":t;return e=a.replace(e,Fc,n),a.replaceAll(e,Wc,n+" ")}return t+" "+e},ShadowCss.prototype._applyStrictSelectorScope=function(e,t,r){var n=this,i=/\[is=([^\]]*)\]/g;t=t.replace(i,function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t[0]});for(var o,a="["+t+"]",s=function(e){var i=e.trim();if(0==i.length)return"";if(e.indexOf(Fc)>-1)i=n._applySimpleSelectorScope(e,t,r);else{var o=e.replace(Wc,"");if(o.length>0){var s=o.match(/([^:]*)(:*)(.*)/);null!==s&&(i=s[1]+a+s[2]+s[3])}}return i},l=/( |>|\+|~)\s*/g,c=e.indexOf(Fc),u="",p=0;null!==(o=l.exec(e));){var h=o[1],d=e.slice(p,o.index).trim(),f=p>=c?s(d):d;u+=f+" "+h+" ",p=l.lastIndex}return u+s(e.substring(p))},ShadowCss.prototype._insertPolyfillHostInCssText=function(e){return e.replace(qc,Nc).replace(Hc,Lc)},ShadowCss}(),Ic=/polyfill-next-selector[^}]*content:[\s]*?['"](.*?)['"][;\s]*}([^{]*?){/gim,Oc=/(polyfill-rule)[^}]*(content:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,Rc=/(polyfill-unscoped-rule)[^}]*(content:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,Lc="-shadowcsshost",Nc="-shadowcsscontext",Dc=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",Bc=new RegExp("("+Lc+Dc,"gim"),Vc=new RegExp("("+Nc+Dc,"gim"),Fc=Lc+"-no-combinator",jc=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],Uc=/(?:>>>)|(?:\/deep\/)/g,zc="([>\\s~+[.,{:][\\s\\S]*)?$",Wc=/-shadowcsshost/gim,Hc=/:host/gim,qc=/:host-context/gim,Gc=/\/\*\s*[\s\S]*?\*\//g,Kc=/\/\*\s*#\s*sourceMappingURL=[\s\S]+?\*\//,$c=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,Qc=/([{}])/g,Yc="{",Xc="}",Zc="%BLOCK%",Jc=function(){function CssRule(e,t){this.selector=e,this.content=t}return CssRule}(),eu=function(){function StringWithEscapedBlocks(e,t){this.escapedString=e,this.blocks=t}return StringWithEscapedBlocks}(),tu="%COMP%",ru="_nghost-"+tu,nu="_ngcontent-"+tu,iu=function(){function StylesCompileDependency(e,t,r){this.moduleUrl=e,this.isShimmed=t,this.valuePlaceholder=r}return StylesCompileDependency}(),ou=function(){function StylesCompileResult(e,t){this.componentStylesheet=e,this.externalStylesheets=t}return StylesCompileResult}(),au=function(){function CompiledStylesheet(e,t,r,n,i){this.statements=e,this.stylesVar=t,this.dependencies=r,this.isShimmed=n,this.meta=i}return CompiledStylesheet}(),su=function(){function StyleCompiler(e){this._urlResolver=e,this._shadowCss=new Mc}return StyleCompiler.prototype.compileComponent=function(e){var t=this,r=[],n=this._compileStyles(e,new bt({styles:e.template.styles,styleUrls:e.template.styleUrls,moduleUrl:e.type.moduleUrl}),!0);return e.template.externalStylesheets.forEach(function(n){var i=t._compileStyles(e,n,!1);r.push(i)}),new ou(n,r)},StyleCompiler.prototype._compileStyles=function(e,t,n){for(var i=this,o=e.template.encapsulation===r.ViewEncapsulation.Emulated,a=t.styles.map(function(e){return literal(i._shimIfNeeded(e,o))}),s=[],l=0;l<t.styleUrls.length;l++){var c=new ht({name:getStylesVarName(null)});s.push(new iu(t.styleUrls[l],o,c)),a.push(new ge(c))}var u=getStylesVarName(n?e:null),p=variable(u).set(literalArr(a,new X(J,[L.Const]))).toDeclStmt(null,[pe.Final]);return new au([p],u,s,o,t)},StyleCompiler.prototype._shimIfNeeded=function(e,t){return t?this._shadowCss.shimCssText(e,nu,ru):e},StyleCompiler.decorators=[{type:r.Injectable}],StyleCompiler.ctorParameters=[{type:Gl}],StyleCompiler}(),lu=function(){function RuntimeCompiler(e,t,r,n,i,o,a,s){this._injector=e,this._metadataResolver=t,this._templateNormalizer=r,this._templateParser=n,this._styleCompiler=i,this._viewCompiler=o,this._ngModuleCompiler=a,this._compilerConfig=s,this._compiledTemplateCache=new Map,this._compiledHostTemplateCache=new Map,this._compiledNgModuleCache=new Map}return Object.defineProperty(RuntimeCompiler.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),RuntimeCompiler.prototype.compileModuleSync=function(e){return this._compileModuleAndComponents(e,!0).syncResult},RuntimeCompiler.prototype.compileModuleAsync=function(e){return this._compileModuleAndComponents(e,!1).asyncResult},RuntimeCompiler.prototype.compileModuleAndAllComponentsSync=function(e){return this._compileModuleAndAllComponents(e,!0).syncResult},RuntimeCompiler.prototype.compileModuleAndAllComponentsAsync=function(e){return this._compileModuleAndAllComponents(e,!1).asyncResult},RuntimeCompiler.prototype._compileModuleAndComponents=function(e,t){var r=this._compileComponents(e,t),n=this._compileModule(e);return new Xe(n,r.then(function(){return n}))},RuntimeCompiler.prototype._compileModuleAndAllComponents=function(e,t){var n=this,i=this._compileComponents(e,t),o=this._compileModule(e),a=this._metadataResolver.getNgModuleMetadata(e),s=[],l=new Set;a.transitiveModule.modules.forEach(function(e){e.declaredDirectives.forEach(function(e){if(e.isComponent){var t=n._createCompiledHostTemplate(e.type.reference);l.add(t),s.push(t.proxyComponentFactory)}})});var c=new r.ModuleWithComponentFactories(o,s),u=function(){return l.forEach(function(e){n._compileTemplate(e)}),c},p=t?Promise.resolve(u()):i.then(u);return new Xe(c,p)},RuntimeCompiler.prototype._compileModule=function(e){var t=this,n=this._compiledNgModuleCache.get(e);if(!n){var i=this._metadataResolver.getNgModuleMetadata(e),o=[this._metadataResolver.getProviderMetadata(new kt(r.Compiler,{useFactory:function(){return new uu(t,i.type.reference)}}))],a=this._ngModuleCompiler.compile(i,o);a.dependencies.forEach(function(e){e.placeholder.reference=t._assertComponentKnown(e.comp.reference,!0).proxyComponentFactory,e.placeholder.name="compFactory_"+e.comp.name}),n=this._compilerConfig.useJit?jitStatements(i.type.name+".ngfactory.js",a.statements,a.ngModuleFactoryVar):interpretStatements(a.statements,a.ngModuleFactoryVar),this._compiledNgModuleCache.set(i.type.reference,n)}return n},RuntimeCompiler.prototype._compileComponents=function(e,t){var r=this,n=new Set,i=[],o=this._metadataResolver.getNgModuleMetadata(e);o.transitiveModule.modules.forEach(function(e){e.declaredDirectives.forEach(function(t){t.isComponent&&(n.add(r._createCompiledTemplate(t,e)),t.entryComponents.forEach(function(e){n.add(r._createCompiledHostTemplate(e.reference))}))}),e.entryComponents.forEach(function(e){n.add(r._createCompiledHostTemplate(e.reference))})}),n.forEach(function(e){if(e.loading){if(t)throw new Ko(e.compType.reference);i.push(e.loading)}});var a=function(){n.forEach(function(e){r._compileTemplate(e)})};return t?(a(),Promise.resolve(null)):Promise.all(i).then(a)},RuntimeCompiler.prototype.clearCacheFor=function(e){this._compiledNgModuleCache.delete(e),this._metadataResolver.clearCacheFor(e),this._compiledHostTemplateCache.delete(e);var t=this._compiledTemplateCache.get(e);t&&(this._templateNormalizer.clearCacheFor(t.normalizedCompMeta),this._compiledTemplateCache.delete(e))},RuntimeCompiler.prototype.clearCache=function(){this._metadataResolver.clearCache(),this._compiledTemplateCache.clear(),this._compiledHostTemplateCache.clear(),this._templateNormalizer.clearCache(),this._compiledNgModuleCache.clear()},RuntimeCompiler.prototype._createCompiledHostTemplate=function(e){var t=this._compiledHostTemplateCache.get(e);if(isBlank(t)){var r=this._metadataResolver.getDirectiveMetadata(e);assertComponent(r);var n=createHostComponentMeta(r);t=new cu((!0),r.selector,r.type,[r],[],[],this._templateNormalizer.normalizeDirective(n)),this._compiledHostTemplateCache.set(e,t)}return t},RuntimeCompiler.prototype._createCompiledTemplate=function(e,t){var r=this._compiledTemplateCache.get(e.type.reference);return isBlank(r)&&(assertComponent(e),r=new cu((!1),e.selector,e.type,t.transitiveModule.directives,t.transitiveModule.pipes,t.schemas,this._templateNormalizer.normalizeDirective(e)),this._compiledTemplateCache.set(e.type.reference,r)),r},RuntimeCompiler.prototype._assertComponentKnown=function(e,t){var r=t?this._compiledHostTemplateCache.get(e):this._compiledTemplateCache.get(e);if(!r)throw t?new Error("Illegal state: Compiled view for component "+stringify(e)+" does not exist!"):new Error("Component "+stringify(e)+" is not part of any NgModule or the module has not been imported into your module.");return r},RuntimeCompiler.prototype._assertComponentLoaded=function(e,t){var r=this._assertComponentKnown(e,t);if(r.loading)throw new Error("Illegal state: CompiledTemplate for "+stringify(e)+" (isHost: "+t+") is still loading!");return r},RuntimeCompiler.prototype._compileTemplate=function(e){var t=this;if(!e.isCompiled){var r=e.normalizedCompMeta,n=new Map,i=this._styleCompiler.compileComponent(r);i.externalStylesheets.forEach(function(e){n.set(e.meta.moduleUrl,e)}),this._resolveStylesCompileResult(i.componentStylesheet,n);var o=e.viewComponentTypes.map(function(e){return t._assertComponentLoaded(e,!1).normalizedCompMeta}),a=this._templateParser.parse(r,r.template.template,e.viewDirectives.concat(o),e.viewPipes,e.schemas,r.type.name),s=this._viewCompiler.compileComponent(r,a,variable(i.componentStylesheet.stylesVar),e.viewPipes);s.dependencies.forEach(function(e){var r;if(e instanceof Nl){var n=e;r=t._assertComponentLoaded(n.comp.reference,!1),n.placeholder.reference=r.proxyViewFactory,n.placeholder.name="viewFactory_"+n.comp.name}else if(e instanceof Dl){var i=e;r=t._assertComponentLoaded(i.comp.reference,!0),i.placeholder.reference=r.proxyComponentFactory,i.placeholder.name="compFactory_"+i.comp.name}});var l,c=i.componentStylesheet.statements.concat(s.statements);l=this._compilerConfig.useJit?jitStatements(""+e.compType.name+(e.isHost?"_Host":"")+".ngfactory.js",c,s.viewFactoryVar):interpretStatements(c,s.viewFactoryVar),e.compiled(l)}},RuntimeCompiler.prototype._resolveStylesCompileResult=function(e,t){var r=this;e.dependencies.forEach(function(e,n){var i=t.get(e.moduleUrl),o=r._resolveAndEvalStylesCompileResult(i,t);e.valuePlaceholder.reference=o,e.valuePlaceholder.name="importedStyles"+n})},RuntimeCompiler.prototype._resolveAndEvalStylesCompileResult=function(e,t){return this._resolveStylesCompileResult(e,t),this._compilerConfig.useJit?jitStatements(e.meta.moduleUrl+".css.js",e.statements,e.stylesVar):interpretStatements(e.statements,e.stylesVar)},RuntimeCompiler.decorators=[{type:r.Injectable}],RuntimeCompiler.ctorParameters=[{type:r.Injector},{type:rc},{type:$l},{type:Za},{type:su},{type:Fl},{type:ac},{type:ss}],RuntimeCompiler}(),cu=function(){function CompiledTemplate(e,t,n,i,o,a,s){var l=this;this.isHost=e,this.compType=n,this.viewPipes=o,this.schemas=a,this._viewFactory=null,this.loading=null,this._normalizedCompMeta=null,this.isCompiled=!1,this.isCompiledWithDeps=!1,this.viewComponentTypes=[],this.viewDirectives=[],i.forEach(function(e){e.isComponent?l.viewComponentTypes.push(e.type.reference):l.viewDirectives.push(e)}),this.proxyViewFactory=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(!l._viewFactory)throw new Error("Illegal state: CompiledTemplate for "+stringify(l.compType)+" is not compiled yet!");return l._viewFactory.apply(null,e)},this.proxyComponentFactory=e?new r.ComponentFactory(t,this.proxyViewFactory,n.reference):null,s.syncResult?this._normalizedCompMeta=s.syncResult:this.loading=s.asyncResult.then(function(e){l._normalizedCompMeta=e,l.loading=null})}return Object.defineProperty(CompiledTemplate.prototype,"normalizedCompMeta",{get:function(){if(this.loading)throw new Error("Template is still loading for "+this.compType.name+"!");return this._normalizedCompMeta;
},enumerable:!0,configurable:!0}),CompiledTemplate.prototype.compiled=function(e){this._viewFactory=e,this.isCompiled=!0},CompiledTemplate.prototype.depsCompiled=function(){this.isCompiledWithDeps=!0},CompiledTemplate}(),uu=function(){function ModuleBoundCompiler(e,t){this._delegate=e,this._ngModule=t}return Object.defineProperty(ModuleBoundCompiler.prototype,"_injector",{get:function(){return this._delegate.injector},enumerable:!0,configurable:!0}),ModuleBoundCompiler.prototype.compileModuleSync=function(e){return this._delegate.compileModuleSync(e)},ModuleBoundCompiler.prototype.compileModuleAsync=function(e){return this._delegate.compileModuleAsync(e)},ModuleBoundCompiler.prototype.compileModuleAndAllComponentsSync=function(e){return this._delegate.compileModuleAndAllComponentsSync(e)},ModuleBoundCompiler.prototype.compileModuleAndAllComponentsAsync=function(e){return this._delegate.compileModuleAndAllComponentsAsync(e)},ModuleBoundCompiler.prototype.clearCache=function(){this._delegate.clearCache()},ModuleBoundCompiler.prototype.clearCacheFor=function(e){this._delegate.clearCacheFor(e)},ModuleBoundCompiler}(),pu={};registerContext(r.SecurityContext.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),registerContext(r.SecurityContext.STYLE,["*|style"]),registerContext(r.SecurityContext.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","img|srcset","input|src","ins|cite","q|cite","source|src","source|srcset","track|src","video|poster","video|src"]),registerContext(r.SecurityContext.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"]);var hu=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},du="boolean",fu="number",mu="string",gu="object",yu=["[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop","[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*beforecopy,*beforecut,*beforepaste,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*message,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*paste,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*search,*seeked,*seeking,*select,*selectstart,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate","abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*beforecopy,*beforecut,*beforepaste,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*message,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*paste,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*search,*seeked,*seeking,*select,*selectstart,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate","media^[HTMLElement]|!autoplay,!controls,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,#playbackRate,preload,src,%srcObject,#volume",":svg:^[HTMLElement]|*abort,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","keygen^[HTMLElement]|!autofocus,challenge,!disabled,keytype,name","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow^[HTMLElement]|","source^[HTMLElement]|media,sizes,src,srcset,type","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:cursor^:svg:|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime"],vu={"class":"className",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},bu=function(e){function DomElementSchemaRegistry(){var t=this;e.call(this),this._schema={},yu.forEach(function(e){var r={},n=e.split("|"),i=n[0],o=n[1],a=o.split(","),s=i.split("^"),l=s[0],c=s[1];l.split(",").forEach(function(e){return t._schema[e.toLowerCase()]=r});var u=c&&t._schema[c.toLowerCase()];u&&Object.keys(u).forEach(function(e){r[e]=u[e]}),a.forEach(function(e){if(e.length>0)switch(e[0]){case"*":break;case"!":r[e.substring(1)]=du;break;case"#":r[e.substring(1)]=fu;break;case"%":r[e.substring(1)]=gu;break;default:r[e]=mu}})})}return hu(DomElementSchemaRegistry,e),DomElementSchemaRegistry.prototype.hasProperty=function(e,t,n){if(n.some(function(e){return e.name===r.NO_ERRORS_SCHEMA.name}))return!0;if(e.indexOf("-")>-1){if("ng-container"===e||"ng-content"===e)return!1;if(n.some(function(e){return e.name===r.CUSTOM_ELEMENTS_SCHEMA.name}))return!0}var i=this._schema[e.toLowerCase()]||this._schema.unknown;return!!i[t]},DomElementSchemaRegistry.prototype.hasElement=function(e,t){if(t.some(function(e){return e.name===r.NO_ERRORS_SCHEMA.name}))return!0;if(e.indexOf("-")>-1){if("ng-container"===e||"ng-content"===e)return!0;if(t.some(function(e){return e.name===r.CUSTOM_ELEMENTS_SCHEMA.name}))return!0}return!!this._schema[e.toLowerCase()]},DomElementSchemaRegistry.prototype.securityContext=function(e,t){e=e.toLowerCase(),t=t.toLowerCase();var n=pu[e+"|"+t];return n?n:(n=pu["*|"+t],n?n:r.SecurityContext.NONE)},DomElementSchemaRegistry.prototype.getMappedPropName=function(e){return vu[e]||e},DomElementSchemaRegistry.prototype.getDefaultComponentElementName=function(){return"ng-component"},DomElementSchemaRegistry.decorators=[{type:r.Injectable}],DomElementSchemaRegistry.ctorParameters=[],DomElementSchemaRegistry}(pa),_u={get:function(e){throw new Error("No ResourceLoader implementation has been provided. Can't read the url \""+e+'"')}},wu=[{provide:Mo,useValue:To},{provide:Qi,useExisting:Mo},{provide:Wl,useValue:_u},Po,an,hn,ea,{provide:Hi,useFactory:function(e,t,r){return new Hi(e,t,r)},deps:[ea,[new r.Optional,new r.Inject(r.TRANSLATIONS)],[new r.Optional,new r.Inject(r.TRANSLATIONS_FORMAT)]]},Za,$l,rc,ql,su,Fl,ac,{provide:ss,useValue:new ss},lu,{provide:r.Compiler,useExisting:lu},bu,{provide:pa,useExisting:bu},Gl,Yl,ec,Jl],xu=function(){function RuntimeCompilerFactory(e){this._defaultOptions=[{useDebug:r.isDevMode(),useJit:!0,defaultEncapsulation:r.ViewEncapsulation.Emulated}].concat(e)}return RuntimeCompilerFactory.prototype.createCompiler=function(e){void 0===e&&(e=[]);var t=_mergeOptions(this._defaultOptions.concat(e)),n=r.ReflectiveInjector.resolveAndCreate([wu,{provide:ss,useFactory:function(){return new ss({genDebugInfo:t.useDebug,useJit:t.useJit,defaultEncapsulation:t.defaultEncapsulation,logBindingUpdate:t.useDebug})},deps:[]},t.providers]);return n.get(r.Compiler)},RuntimeCompilerFactory.decorators=[{type:r.Injectable}],RuntimeCompilerFactory.ctorParameters=[{type:Array,decorators:[{type:r.Inject,args:[r.COMPILER_OPTIONS]}]}],RuntimeCompilerFactory}(),Su=r.createPlatformFactory(r.platformCore,"coreDynamic",[{provide:r.COMPILER_OPTIONS,useValue:{},multi:!0},{provide:r.CompilerFactory,useClass:xu},{provide:r.PLATFORM_INITIALIZER,useValue:_initReflector,multi:!0}]),Cu=/asset:([^\/]+)\/([^\/]+)\/(.+)/,ku=function(){function ImportGenerator(){}return ImportGenerator.parseAssetUrl=function(e){return Eu.parse(e)},ImportGenerator}(),Eu=function(){function AssetUrl(e,t,r){this.packageName=e,this.firstLevelDir=t,this.modulePath=r}return AssetUrl.parse=function(e,t){void 0===t&&(t=!0);var r=e.match(Cu);if(null!==r)return new AssetUrl(r[1],r[2],r[3]);if(t)return null;throw new Error("Url "+e+" is not a valid asset: url")},AssetUrl}(),Au={SelectorMatcher:z,CssSelector:U,AssetUrl:Eu,ImportGenerator:ku,CompileMetadataResolver:rc,HtmlParser:ea,InterpolationConfig:tn,DirectiveNormalizer:$l,Lexer:an,Parser:hn,ParseLocation:gn,ParseError:_n,ParseErrorLevel:nn,ParseSourceFile:yn,ParseSourceSpan:vn,TemplateParser:Za,DomElementSchemaRegistry:bu,StyleCompiler:su,ViewCompiler:Fl,NgModuleCompiler:ac,TypeScriptEmitter:bc};t.COMPILER_PROVIDERS=wu,t.CompileDiDependencyMetadata=dt,t.CompileDirectiveMetadata=wt,t.CompileFactoryMetadata=mt,t.CompileIdentifierMetadata=ht,t.CompileMetadataWithIdentifier=et,t.CompilePipeMetadata=xt,t.CompileProviderMetadata=ft,t.CompileQueryMetadata=vt,t.CompileTemplateMetadata=_t,t.CompileTokenMetadata=gt,t.CompileTypeMetadata=yt,t.CompilerConfig=ss,t.DEFAULT_PACKAGE_URL_PROVIDER=ql,t.DirectiveResolver=Yl,t.NgModuleResolver=Jl,t.OfflineCompiler=zl,t.PipeResolver=ec,t.RenderTypes=ls,t.ResourceLoader=Wl,t.RuntimeCompiler=lu,t.SourceModule=jl,t.TEMPLATE_TRANSFORMS=Qa,t.UrlResolver=Gl,t.createOfflineCompileUrlResolver=createOfflineCompileUrlResolver,t.platformCoreDynamic=Su,t.DEFAULT_INTERPOLATION_CONFIG=rn,t.InterpolationConfig=tn,t.ElementSchemaRegistry=pa,t.I18NHtmlParser=Hi,t.MessageBundle=li,t.Xliff=Pi,t.Xmb=Di,t.Xtb=Ui,t.TextAst=c,t.BoundTextAst=u,t.AttrAst=p,t.BoundElementPropertyAst=h,t.BoundEventAst=d,t.ReferenceAst=f,t.VariableAst=m,t.ElementAst=g,t.EmbeddedTemplateAst=y,t.BoundDirectivePropertyAst=v,t.DirectiveAst=b,t.ProviderAst=_,t.NgContentAst=w,t.templateVisitAll=templateVisitAll,t.__compiler_private__=Au})}).call(t,function(){return this}())},function(e,t,r){(function(e){!function(e,n){n(t,r(4),r(5))}(this,function(t,r,n){"use strict";function scheduleMicroTask(e){Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function getTypeNameForDebugging(e){return e.name?e.name:typeof e}function isPresent(e){return void 0!==e&&null!==e}function isBlank(e){return void 0===e||null===e}function isString(e){return"string"==typeof e}function isFunction(e){return"function"==typeof e}function isPromise(e){return isPresent(e)&&isFunction(e.then)}function isArray(e){return Array.isArray(e)}function stringify(e){if("string"==typeof e)return e;if(void 0===e||null===e)return""+e;if(e.overriddenName)return e.overriddenName;if(e.name)return e.name;var t=e.toString(),r=t.indexOf("\n");return r===-1?t:t.substring(0,r)}function looseIdentical(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function getMapKey(e){return e}function isJsObject(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function print(e){console.log(e)}function warn(e){console.warn(e)}function getSymbolIterator(){if(isBlank(l))if(isPresent(i.Symbol)&&isPresent(Symbol.iterator))l=Symbol.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),t=0;t<e.length;++t){var r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(l=r)}return l}function isPrimitive(e){return!isJsObject(e)}function extractAnnotation(e){return isFunction(e)&&e.hasOwnProperty("annotation")&&(e=e.annotation),e}function applyParams(e,t){if(e===Object||e===String||e===Function||e===Number||e===Array)throw new Error("Can not use native "+stringify(e)+" as constructor");if(isFunction(e))return e;if(e instanceof Array){var r=e,n=r.length-1,i=e[n];if(!isFunction(i))throw new Error("Last position of Class method array must be Function in key "+t+" was '"+stringify(i)+"'");if(n!=i.length)throw new Error("Number of annotations ("+n+") does not match number of arguments ("+i.length+") in the function: "+stringify(i));for(var o=[],a=0,s=r.length-1;a<s;a++){var l=[];o.push(l);var c=r[a];if(c instanceof Array)for(var p=0;p<c.length;p++)l.push(extractAnnotation(c[p]));else isFunction(c)?l.push(extractAnnotation(c)):l.push(c)}return u.defineMetadata("parameters",o,i),i}throw new Error("Only Function or Array is supported in Class definition for key '"+t+"' is '"+stringify(e)+"'")}function Class(e){var t=applyParams(e.hasOwnProperty("constructor")?e.constructor:void 0,"constructor"),r=t.prototype;if(e.hasOwnProperty("extends")){if(!isFunction(e.extends))throw new Error("Class definition 'extends' property must be a constructor function was: "+stringify(e.extends));t.prototype=r=Object.create(e.extends.prototype)}for(var n in e)"extends"!=n&&"prototype"!=n&&e.hasOwnProperty(n)&&(r[n]=applyParams(e[n],n));this&&this.annotations instanceof Array&&u.defineMetadata("annotations",this.annotations,t);var i=t.name;return i&&"constructor"!==i||(t.overriddenName="class"+c++),t}function makeDecorator(e,t,r,n){function DecoratorFactory(e){if(!u||!u.getMetadata)throw"reflect-metadata shim is required when using class decorators";if(this instanceof DecoratorFactory)return i.call(this,e),this;var t=new DecoratorFactory(e),r=isFunction(this)&&this.annotations instanceof Array?this.annotations:[];r.push(t);var o=function(e){var r=u.getOwnMetadata("annotations",e)||[];return r.push(t),u.defineMetadata("annotations",r,e),e};return o.annotations=r,o.Class=Class,n&&n(o),o}void 0===n&&(n=null);var i=makeMetadataCtor([t]);return r&&(DecoratorFactory.prototype=Object.create(r.prototype)),DecoratorFactory.prototype.toString=function(){return"@"+e},DecoratorFactory.annotationCls=DecoratorFactory,DecoratorFactory}function makeMetadataCtor(e){function ctor(){for(var t=this,r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];e.forEach(function(e,n){var i=r[n];if(Array.isArray(e)){var o=i&&void 0!==i?i:e[1];t[e[0]]=o}else for(var a in e){var o=i&&void 0!==i[a]?i[a]:e[a];t[a]=o}})}return ctor}function makeParamDecorator(e,t,r){function ParamDecoratorFactory(){function ParamDecorator(e,t,n){for(var i=u.getMetadata("parameters",e)||[];i.length<=n;)i.push(null);i[n]=i[n]||[];var o=i[n];return o.push(r),u.defineMetadata("parameters",i,e),e}for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(this instanceof ParamDecoratorFactory)return n.apply(this,e),this;var r=new((i=ParamDecoratorFactory).bind.apply(i,[void 0].concat(e)));return ParamDecorator.annotation=r,ParamDecorator;var i}var n=makeMetadataCtor(t);return r&&(ParamDecoratorFactory.prototype=Object.create(r.prototype)),ParamDecoratorFactory.prototype.toString=function(){return"@"+e},ParamDecoratorFactory.annotationCls=ParamDecoratorFactory,ParamDecoratorFactory}function makePropDecorator(e,t,r){function PropDecoratorFactory(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(this instanceof PropDecoratorFactory)return n.apply(this,e),this;var r=new((i=PropDecoratorFactory).bind.apply(i,[void 0].concat(e)));return function(e,t){var n=u.getOwnMetadata("propMetadata",e.constructor)||{};n[t]=n[t]||[],n[t].unshift(r),u.defineMetadata("propMetadata",n,e.constructor)};var i}var n=makeMetadataCtor(t);return r&&(PropDecoratorFactory.prototype=Object.create(r.prototype)),PropDecoratorFactory.prototype.toString=function(){return"@"+e},PropDecoratorFactory.annotationCls=PropDecoratorFactory,PropDecoratorFactory}function isDefaultChangeDetectionStrategy(e){return isBlank(e)||e===t.ChangeDetectionStrategy.Default}function forwardRef(e){return e.__forward_ref__=forwardRef,e.toString=function(){return stringify(this())},e}function resolveForwardRef(e){return isFunction(e)&&e.hasOwnProperty("__forward_ref__")&&e.__forward_ref__===forwardRef?e():e}function unimplemented(){throw new Error("unimplemented")}function _flattenArray(e,t){if(isPresent(e))for(var r=0;r<e.length;r++){var n=e[r];isArray(n)?_flattenArray(n,t):t.push(n)}return t}function isListLikeIterable(e){return!!isJsObject(e)&&(isArray(e)||!(e instanceof re)&&getSymbolIterator()in e)}function areIterablesEqual(e,t,r){for(var n=e[getSymbolIterator()](),i=t[getSymbolIterator()]();;){var o=n.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!r(o.value,a.value))return!1}}function iterateListLike(e,t){if(isArray(e))for(var r=0;r<e.length;r++)t(e[r]);else for(var n,i=e[getSymbolIterator()]();!(n=i.next()).done;)t(n.value)}function findFirstClosedCycle(e){for(var t=[],r=0;r<e.length;++r){if(ue.contains(t,e[r]))return t.push(e[r]),t;t.push(e[r])}return t}function constructResolvingPath(e){if(e.length>1){var t=findFirstClosedCycle(ue.reversed(e)),r=t.map(function(e){return stringify(e.token)});return" ("+r.join(" -> ")+")"}return""}function convertTsickleDecoratorIntoMetadata(e){return e?e.map(function(e){var t=e.type,r=t.annotationCls,n=e.args?e.args:[];return new(r.bind.apply(r,[void 0].concat(n)))}):[]}function _mergeMaps(e,t){ce.forEach(t,function(t,r){return e.set(r,t)})}function resolveReflectiveFactory(e){var t,r;if(isPresent(e.useClass)){var n=resolveForwardRef(e.useClass);t=Me.factory(n),r=_dependenciesFor(n)}else isPresent(e.useExisting)?(t=function(e){return e},r=[Ie.fromKey(xe.get(e.useExisting))]):isPresent(e.useFactory)?(t=e.useFactory,r=constructDependencies(e.useFactory,e.deps)):(t=function(){return e.useValue},r=Oe);return new Le(t,r)}function resolveReflectiveProvider(e){return new Re(xe.get(e.provide),[resolveReflectiveFactory(e)],e.multi)}function resolveReflectiveProviders(e){var t=_normalizeProviders(e,[]),r=t.map(resolveReflectiveProvider);return le.values(mergeResolvedReflectiveProviders(r,new Map))}function mergeResolvedReflectiveProviders(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=t.get(n.key.id);if(isPresent(i)){if(n.multiProvider!==i.multiProvider)throw new we(i,n);if(n.multiProvider)for(var o=0;o<n.resolvedFactories.length;o++)i.resolvedFactories.push(n.resolvedFactories[o]);else t.set(n.key.id,n)}else{var a;a=n.multiProvider?new Re(n.key,ue.clone(n.resolvedFactories),n.multiProvider):n,t.set(n.key.id,a)}}return t}function _normalizeProviders(e,t){return e.forEach(function(e){if(e instanceof ke)t.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)t.push(e);else{if(!(e instanceof Array))throw new ve(e);_normalizeProviders(e,t)}}),t}function constructDependencies(e,t){if(isBlank(t))return _dependenciesFor(e);var r=t.map(function(e){return[e]});return t.map(function(t){return _extractToken(e,t,r)})}function _dependenciesFor(e){var t=Me.parameters(e);if(isBlank(t))return[];if(t.some(isBlank))throw new be(e,t);return t.map(function(r){return _extractToken(e,r,t)})}function _extractToken(e,t,r){var n=[],i=null,o=!1;if(!isArray(t))return t instanceof p?_createDependency(t.token,o,null,null,n):_createDependency(t,o,null,null,n);for(var a=null,s=null,l=0;l<t.length;++l){var c=t[l];c instanceof ke?i=c:c instanceof p?i=c.token:c instanceof h?o=!0:c instanceof f?s=c:c instanceof g?s=c:c instanceof m&&(a=c)}if(i=resolveForwardRef(i),isPresent(i))return _createDependency(i,o,a,s,n);throw new be(e,r)}function _createDependency(e,t,r,n,i){return new Ie(xe.get(e),t,r,n,i)}function _mapProviders(e,t){for(var r=new Array(e._proto.numberOfProviders),n=0;n<e._proto.numberOfProviders;++n)r[n]=t(e._proto.getProviderAtIndex(n));return r}function _appIdRandomProviderFactory(){return""+_randomChar()+_randomChar()+_randomChar()}function _randomChar(){return s.fromCharCode(97+a.floor(25*a.random()))}function _throwError(){throw new Error("Runtime compiler is not loaded")}function getPreviousIndex(e,t,r){var n=e.previousIndex;if(null===n)return n;var i=0;return r&&n<r.length&&(i=r[n]),n+t+i}function devModeEqual(e,t){return isListLikeIterable(e)&&isListLikeIterable(t)?areIterablesEqual(e,t,devModeEqual):!(isListLikeIterable(e)||isPrimitive(e)||isListLikeIterable(t)||isPrimitive(t))||looseIdentical(e,t)}function detectWTF(){var e=o.wtf;return!(!e||!(Mt=e.trace))&&(It=Mt.events,!0)}function createScope(e,t){return void 0===t&&(t=null),It.createScope(e,t)}function leave(e,t){return Mt.leaveScope(e,t),t}function startTimeRange(e,t){return Mt.beginTimeRange(e,t)}function endTimeRange(e){Mt.endTimeRange(e)}function noopScope(e,t){return null}function flattenNestedViewRenderNodes(e){return _flattenNestedViewRenderNodes(e,[])}function _flattenNestedViewRenderNodes(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n instanceof Wt){var i=n;if(t.push(i.nativeElement),isPresent(i.nestedViews))for(var o=0;o<i.nestedViews.length;o++)_flattenNestedViewRenderNodes(i.nestedViews[o].rootNodesOrAppElements,t)}else t.push(n)}return t}function ensureSlotCount(e,t){var r;if(isBlank(e))r=Qt;else if(e.length<t){var n=e.length;r=ue.createFixedSize(t);for(var i=0;i<t;i++)r[i]=i<n?e[i]:Qt}else r=e;return r}function interpolate(e,t,r,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y,v,b){switch(e){case 1:return t+_toStringWithNull(r)+n;case 2:return t+_toStringWithNull(r)+n+_toStringWithNull(i)+o;case 3:return t+_toStringWithNull(r)+n+_toStringWithNull(i)+o+_toStringWithNull(a)+s;case 4:return t+_toStringWithNull(r)+n+_toStringWithNull(i)+o+_toStringWithNull(a)+s+_toStringWithNull(l)+c;case 5:return t+_toStringWithNull(r)+n+_toStringWithNull(i)+o+_toStringWithNull(a)+s+_toStringWithNull(l)+c+_toStringWithNull(u)+p;case 6:return t+_toStringWithNull(r)+n+_toStringWithNull(i)+o+_toStringWithNull(a)+s+_toStringWithNull(l)+c+_toStringWithNull(u)+p+_toStringWithNull(h)+d;case 7:return t+_toStringWithNull(r)+n+_toStringWithNull(i)+o+_toStringWithNull(a)+s+_toStringWithNull(l)+c+_toStringWithNull(u)+p+_toStringWithNull(h)+d+_toStringWithNull(f)+m;case 8:return t+_toStringWithNull(r)+n+_toStringWithNull(i)+o+_toStringWithNull(a)+s+_toStringWithNull(l)+c+_toStringWithNull(u)+p+_toStringWithNull(h)+d+_toStringWithNull(f)+m+_toStringWithNull(g)+y;case 9:return t+_toStringWithNull(r)+n+_toStringWithNull(i)+o+_toStringWithNull(a)+s+_toStringWithNull(l)+c+_toStringWithNull(u)+p+_toStringWithNull(h)+d+_toStringWithNull(f)+m+_toStringWithNull(g)+y+_toStringWithNull(v)+b;default:throw new Error("Does not support more than 9 expressions")}}function _toStringWithNull(e){return null!=e?e.toString():""}function checkBinding(e,t,r){if(e){if(!devModeEqual(t,r))throw new qt(t,r);return!1}return!looseIdentical(t,r)}function castByValue(e,t){return e}function pureProxy1(e){var t,r=yt;return function(n){return looseIdentical(r,n)||(r=n,t=e(n)),t}}function pureProxy2(e){var t,r=yt,n=yt;return function(i,o){return looseIdentical(r,i)&&looseIdentical(n,o)||(r=i,n=o,t=e(i,o)),t}}function pureProxy3(e){var t,r=yt,n=yt,i=yt;return function(o,a,s){return looseIdentical(r,o)&&looseIdentical(n,a)&&looseIdentical(i,s)||(r=o,n=a,i=s,t=e(o,a,s)),t}}function pureProxy4(e){var t,r,n,i,o;return r=n=i=o=yt,function(a,s,l,c){return looseIdentical(r,a)&&looseIdentical(n,s)&&looseIdentical(i,l)&&looseIdentical(o,c)||(r=a,n=s,i=l,o=c,t=e(a,s,l,c)),t}}function pureProxy5(e){var t,r,n,i,o,a;return r=n=i=o=a=yt,function(s,l,c,u,p){return looseIdentical(r,s)&&looseIdentical(n,l)&&looseIdentical(i,c)&&looseIdentical(o,u)&&looseIdentical(a,p)||(r=s,n=l,i=c,o=u,a=p,t=e(s,l,c,u,p)),t}}function pureProxy6(e){var t,r,n,i,o,a,s;return r=n=i=o=a=s=yt,function(l,c,u,p,h,d){return looseIdentical(r,l)&&looseIdentical(n,c)&&looseIdentical(i,u)&&looseIdentical(o,p)&&looseIdentical(a,h)&&looseIdentical(s,d)||(r=l,n=c,i=u,o=p,a=h,s=d,t=e(l,c,u,p,h,d)),t}}function pureProxy7(e){var t,r,n,i,o,a,s,l;return r=n=i=o=a=s=l=yt,function(c,u,p,h,d,f,m){return looseIdentical(r,c)&&looseIdentical(n,u)&&looseIdentical(i,p)&&looseIdentical(o,h)&&looseIdentical(a,d)&&looseIdentical(s,f)&&looseIdentical(l,m)||(r=c,n=u,i=p,o=h,a=d,s=f,l=m,t=e(c,u,p,h,d,f,m)),t}}function pureProxy8(e){var t,r,n,i,o,a,s,l,c;return r=n=i=o=a=s=l=c=yt,function(u,p,h,d,f,m,g,y){return looseIdentical(r,u)&&looseIdentical(n,p)&&looseIdentical(i,h)&&looseIdentical(o,d)&&looseIdentical(a,f)&&looseIdentical(s,m)&&looseIdentical(l,g)&&looseIdentical(c,y)||(r=u,n=p,i=h,o=d,a=f,s=m,l=g,c=y,t=e(u,p,h,d,f,m,g,y)),t}}function pureProxy9(e){var t,r,n,i,o,a,s,l,c,u;return r=n=i=o=a=s=l=c=u=yt,function(p,h,d,f,m,g,y,v,b){return looseIdentical(r,p)&&looseIdentical(n,h)&&looseIdentical(i,d)&&looseIdentical(o,f)&&looseIdentical(a,m)&&looseIdentical(s,g)&&looseIdentical(l,y)&&looseIdentical(c,v)&&looseIdentical(u,b)||(r=p,n=h,i=d,o=f,a=m,s=g,l=y,c=v,
u=b,t=e(p,h,d,f,m,g,y,v,b)),t}}function pureProxy10(e){var t,r,n,i,o,a,s,l,c,u,p;return r=n=i=o=a=s=l=c=u=p=yt,function(h,d,f,m,g,y,v,b,_,w){return looseIdentical(r,h)&&looseIdentical(n,d)&&looseIdentical(i,f)&&looseIdentical(o,m)&&looseIdentical(a,g)&&looseIdentical(s,y)&&looseIdentical(l,v)&&looseIdentical(c,b)&&looseIdentical(u,_)&&looseIdentical(p,w)||(r=h,n=d,i=f,o=m,a=g,s=y,l=v,c=b,u=_,p=w,t=e(h,d,f,m,g,y,v,b,_,w)),t}}function setTestabilityGetter(e){gr=e}function enableProdMode(){if(br)throw new Error("Cannot enable prod mode after platform setup.");vr=!1}function isDevMode(){return br=!0,vr}function createPlatform(e){if(isPresent(zt)&&!zt.destroyed)throw new Error("There can be only one platform. Destroy the previous one to create a new one.");zt=e.get(_r);var t=e.get(Ye,null);return isPresent(t)&&t.forEach(function(e){return e()}),zt}function createPlatformFactory(e,t,r){void 0===r&&(r=[]);var n=new y("Platform: "+t);return function(t){return void 0===t&&(t=[]),getPlatform()||(e?e(r.concat(t).concat({provide:n,useValue:!0})):createPlatform(ze.resolveAndCreate(r.concat(t).concat({provide:n,useValue:!0})))),assertPlatform(n)}}function assertPlatform(e){var t=getPlatform();if(isBlank(t))throw new Error("No platform exists!");if(isPresent(t)&&isBlank(t.injector.get(e,null)))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}function destroyPlatform(){isPresent(zt)&&!zt.destroyed&&zt.destroy()}function getPlatform(){return isPresent(zt)&&!zt.destroyed?zt:null}function _callAndReportToErrorHandler(e,t){try{var r=t();return isPromise(r)?r.catch(function(t){throw e.handleError(t),t}):r}catch(n){throw e.handleError(n),n}}function registerModuleFactory(e,t){var r=Mr.get(e);if(r)throw new Error("Duplicate module registered for "+e+" - "+r.moduleType.name+" vs "+t.moduleType.name);Mr.set(e,t)}function getModuleFactory(e){var t=Mr.get(e);if(!t)throw new Error("No module with ID "+e+" loaded");return t}function checkNotEmpty(e,t,r){if(!e)throw new Error("Cannot find '"+r+"' in '"+t+"'");return e}function queueAnimation(e){jr.push(e)}function triggerQueuedAnimations(){for(var e=0;e<jr.length;e++){var t=jr[e];t.play()}jr=[]}function asNativeElements(e){return e.map(function(e){return e.nativeElement})}function _queryElementChildren(e,t,r){e.childNodes.forEach(function(e){e instanceof $r&&(t(e)&&r.push(e),_queryElementChildren(e,t,r))})}function _queryNodeChildren(e,t,r){e instanceof $r&&e.childNodes.forEach(function(e){t(e)&&r.push(e),e instanceof $r&&_queryNodeChildren(e,t,r)})}function getDebugNode(e){return Qr.get(e)}function indexDebugNode(e){Qr.set(e.nativeNode,e)}function removeDebugNodeFromIndex(e){Qr.delete(e.nativeNode)}function _reflector(){return Me}function _iterableDiffersFactory(){return Ct}function _keyValueDiffersFactory(){return kt}function animate(e,t){void 0===t&&(t=null);var r=t;if(!isPresent(r)){var n={};r=new xn([n],1)}return new Sn(e,r)}function group(e){return new En(e)}function sequence(e){return new kn(e)}function style(e){var t,r=null;return isString(e)?t=[e]:(t=isArray(e)?e:[e],t.forEach(function(e){var t=e.offset;isPresent(t)&&(r=null==r?parseFloat(t):r)})),new xn(t,r)}function state(e,t){return new vn(e,t)}function keyframes(e){return new wn(e)}function transition(e,t){var r=isArray(t)?new kn(t):t;return new bn(e,r)}function trigger(e,t){return new gn(e,t)}function prepareFinalAnimationStyles(e,t,r){void 0===r&&(r=null);var n={};return ce.forEach(t,function(e,t){n[t]=e==mn?r:e.toString()}),ce.forEach(e,function(e,t){isPresent(n[t])||(n[t]=r)}),n}function balanceAnimationKeyframes(e,t,r){var n=r.length-1,i=r[0],o=flattenStyles(i.styles.styles),a={},s=!1;ce.forEach(e,function(e,t){o[t]||(o[t]=e,a[t]=e,s=!0)});var l=ce.merge({},o),c=r[n];ue.insert(c.styles.styles,0,t);var u=flattenStyles(c.styles.styles),p={},h=!1;return ce.forEach(l,function(e,t){isPresent(u[t])||(p[t]=mn,h=!0)}),h&&c.styles.styles.push(p),ce.forEach(u,function(e,t){isPresent(o[t])||(a[t]=mn,s=!0)}),s&&i.styles.styles.push(a),r}function clearStyles(e){var t={};return ce.keys(e).forEach(function(e){t[e]=null}),t}function collectAndResolveStyles(e,t){return t.map(function(t){var r={};return ce.forEach(t,function(t,n){t==rn&&(t=e[n],isPresent(t)||(t=mn)),e[n]=t,r[n]=t}),r})}function renderStyles(e,t,r){ce.forEach(r,function(r,n){t.setElementStyle(e,n,r)})}function flattenStyles(e){var t={};return e.forEach(function(e){ce.forEach(e,function(e,r){t[r]=e})}),t}function _findLastRenderNode(e){var t;if(e instanceof Wt){var r=e;if(t=r.nativeElement,isPresent(r.nestedViews))for(var n=r.nestedViews.length-1;n>=0;n--){var i=r.nestedViews[n];i.rootNodesOrAppElements.length>0&&(t=_findLastRenderNode(i.rootNodesOrAppElements[i.rootNodesOrAppElements.length-1]))}}else t=e;return t}var i;i="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:e:window;var o=i,a=o.Math;o.assert=function(e){};var s=function(){function StringWrapper(){}return StringWrapper.fromCharCode=function(e){return String.fromCharCode(e)},StringWrapper.charCodeAt=function(e,t){return e.charCodeAt(t)},StringWrapper.split=function(e,t){return e.split(t)},StringWrapper.equals=function(e,t){return e===t},StringWrapper.stripLeft=function(e,t){if(e&&e.length){for(var r=0,n=0;n<e.length&&e[n]==t;n++)r++;e=e.substring(r)}return e},StringWrapper.stripRight=function(e,t){if(e&&e.length){for(var r=e.length,n=e.length-1;n>=0&&e[n]==t;n--)r--;e=e.substring(0,r)}return e},StringWrapper.replace=function(e,t,r){return e.replace(t,r)},StringWrapper.replaceAll=function(e,t,r){return e.replace(t,r)},StringWrapper.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},StringWrapper.replaceAllMapped=function(e,t,r){return e.replace(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.splice(-2,2),r(e)})},StringWrapper.contains=function(e,t){return e.indexOf(t)!=-1},StringWrapper.compare=function(e,t){return e<t?-1:e>t?1:0},StringWrapper}(),l=(function(){function NumberWrapper(){}return NumberWrapper.toFixed=function(e,t){return e.toFixed(t)},NumberWrapper.equal=function(e,t){return e===t},NumberWrapper.parseIntAutoRadix=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t},NumberWrapper.parseInt=function(e,t){if(10==t){if(/^(\-|\+)?[0-9]+$/.test(e))return parseInt(e,t)}else if(16==t){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(e))return parseInt(e,t)}else{var r=parseInt(e,t);if(!isNaN(r))return r}throw new Error("Invalid integer literal when parsing "+e+" in base "+t)},Object.defineProperty(NumberWrapper,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),NumberWrapper.isNumeric=function(e){return!isNaN(e-parseFloat(e))},NumberWrapper.isNaN=function(e){return isNaN(e)},NumberWrapper.isInteger=function(e){return Number.isInteger(e)},NumberWrapper}(),null),c=0,u=o.Reflect,p=makeParamDecorator("Inject",[["token",void 0]]),h=makeParamDecorator("Optional",[]),d=makeParamDecorator("Injectable",[]),f=makeParamDecorator("Self",[]),m=makeParamDecorator("SkipSelf",[]),g=makeParamDecorator("Host",[]),y=function(){function OpaqueToken(e){this._desc=e}return OpaqueToken.prototype.toString=function(){return"Token "+this._desc},OpaqueToken.decorators=[{type:d}],OpaqueToken.ctorParameters=[null],OpaqueToken}(),v=new y("AnalyzeForEntryComponents"),b=makeParamDecorator("Attribute",[["attributeName",void 0]]),_=function(){function Query(){}return Query}(),w=makePropDecorator("ContentChildren",[["selector",void 0],{first:!1,isViewQuery:!1,descendants:!1,read:void 0}],_),x=makePropDecorator("ContentChild",[["selector",void 0],{first:!0,isViewQuery:!1,descendants:!1,read:void 0}],_),S=makePropDecorator("ViewChildren",[["selector",void 0],{first:!1,isViewQuery:!0,descendants:!0,read:void 0}],_),C=makePropDecorator("ViewChild",[["selector",void 0],{first:!0,isViewQuery:!0,descendants:!0,read:void 0}],_);t.ChangeDetectionStrategy,function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(t.ChangeDetectionStrategy||(t.ChangeDetectionStrategy={}));var k;!function(e){e[e.CheckOnce=0]="CheckOnce",e[e.Checked=1]="Checked",e[e.CheckAlways=2]="CheckAlways",e[e.Detached=3]="Detached",e[e.Errored=4]="Errored",e[e.Destroyed=5]="Destroyed"}(k||(k={}));var E,A=[t.ChangeDetectionStrategy.OnPush,t.ChangeDetectionStrategy.Default],P=makeDecorator("Directive",{selector:void 0,inputs:void 0,outputs:void 0,host:void 0,providers:void 0,exportAs:void 0,queries:void 0}),T=makeDecorator("Component",{selector:void 0,inputs:void 0,outputs:void 0,host:void 0,exportAs:void 0,moduleId:void 0,providers:void 0,viewProviders:void 0,changeDetection:t.ChangeDetectionStrategy.Default,queries:void 0,templateUrl:void 0,template:void 0,styleUrls:void 0,styles:void 0,animations:void 0,encapsulation:void 0,interpolation:void 0,entryComponents:void 0},P),M=makeDecorator("Pipe",{name:void 0,pure:!0}),I=makePropDecorator("Input",[["bindingPropertyName",void 0]]),O=makePropDecorator("Output",[["bindingPropertyName",void 0]]),R=makePropDecorator("HostBinding",[["hostPropertyName",void 0]]),L=makePropDecorator("HostListener",[["eventName",void 0],["args",[]]]);!function(e){e[e.OnInit=0]="OnInit",e[e.OnDestroy=1]="OnDestroy",e[e.DoCheck=2]="DoCheck",e[e.OnChanges=3]="OnChanges",e[e.AfterContentInit=4]="AfterContentInit",e[e.AfterContentChecked=5]="AfterContentChecked",e[e.AfterViewInit=6]="AfterViewInit",e[e.AfterViewChecked=7]="AfterViewChecked"}(E||(E={}));var N=[E.OnInit,E.OnDestroy,E.DoCheck,E.OnChanges,E.AfterContentInit,E.AfterContentChecked,E.AfterViewInit,E.AfterViewChecked],D=function(){function OnChanges(){}return OnChanges}(),B=function(){function OnInit(){}return OnInit}(),V=function(){function DoCheck(){}return DoCheck}(),F=function(){function OnDestroy(){}return OnDestroy}(),j=function(){function AfterContentInit(){}return AfterContentInit}(),U=function(){function AfterContentChecked(){}return AfterContentChecked}(),z=function(){function AfterViewInit(){}return AfterViewInit}(),W=function(){function AfterViewChecked(){}return AfterViewChecked}(),H={name:"custom-elements"},q={name:"no-errors-schema"},G=makeDecorator("NgModule",{providers:void 0,declarations:void 0,imports:void 0,exports:void 0,entryComponents:void 0,bootstrap:void 0,schemas:void 0,id:void 0});t.ViewEncapsulation,function(e){e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None"}(t.ViewEncapsulation||(t.ViewEncapsulation={}));var K=[t.ViewEncapsulation.Emulated,t.ViewEncapsulation.Native,t.ViewEncapsulation.None],$=function(){function ViewMetadata(e){var t=void 0===e?{}:e,r=t.templateUrl,n=t.template,i=t.encapsulation,o=t.styles,a=t.styleUrls,s=t.animations,l=t.interpolation;this.templateUrl=r,this.template=n,this.styleUrls=a,this.styles=o,this.encapsulation=i,this.animations=s,this.interpolation=l}return ViewMetadata}(),Q=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Y=function(e){function BaseError(t){var r=e.call(this,t);this._nativeError=r}return Q(BaseError,e),Object.defineProperty(BaseError.prototype,"message",{get:function(){return this._nativeError.message},set:function(e){this._nativeError.message=e},enumerable:!0,configurable:!0}),Object.defineProperty(BaseError.prototype,"name",{get:function(){return this._nativeError.name},enumerable:!0,configurable:!0}),Object.defineProperty(BaseError.prototype,"stack",{get:function(){return this._nativeError.stack},set:function(e){this._nativeError.stack=e},enumerable:!0,configurable:!0}),BaseError.prototype.toString=function(){return this._nativeError.toString()},BaseError}(Error),X=function(e){function WrappedError(t,r){e.call(this,t+" caused by: "+(r instanceof Error?r.message:r)),this.originalError=r}return Q(WrappedError,e),Object.defineProperty(WrappedError.prototype,"stack",{get:function(){return(this.originalError instanceof Error?this.originalError:this._nativeError).stack},enumerable:!0,configurable:!0}),WrappedError}(Y),Z=new Object,J=Z,ee=function(){function _NullInjector(){}return _NullInjector.prototype.get=function(e,t){if(void 0===t&&(t=Z),t===Z)throw new Error("No provider for "+stringify(e)+"!");return t},_NullInjector}(),te=function(){function Injector(){}return Injector.prototype.get=function(e,t){return unimplemented()},Injector.THROW_IF_NOT_FOUND=Z,Injector.NULL=new ee,Injector}(),re=o.Map,ne=o.Set,ie=function(){try{if(1===new re([[1,2]]).size)return function(e){return new re(e)}}catch(e){}return function(e){for(var t=new re,r=0;r<e.length;r++){var n=e[r];t.set(n[0],n[1])}return t}}(),oe=function(){try{if(new re(new re))return function(e){return new re(e)}}catch(e){}return function(e){var t=new re;return e.forEach(function(e,r){t.set(r,e)}),t}}(),ae=function(){return(new re).keys().next?function(e){for(var t,r=e.keys();!(t=r.next()).done;)e.set(t.value,null)}:function(e){e.forEach(function(t,r){e.set(r,null)})}}(),se=function(){try{if((new re).values().next)return function(e,t){return t?Array.from(e.values()):Array.from(e.keys())}}catch(e){}return function(e,t){var r=ue.createFixedSize(e.size),n=0;return e.forEach(function(e,i){r[n]=t?e:i,n++}),r}}(),le=function(){function MapWrapper(){}return MapWrapper.clone=function(e){return oe(e)},MapWrapper.createFromStringMap=function(e){var t=new re;for(var r in e)t.set(r,e[r]);return t},MapWrapper.toStringMap=function(e){var t={};return e.forEach(function(e,r){return t[r]=e}),t},MapWrapper.createFromPairs=function(e){return ie(e)},MapWrapper.clearValues=function(e){ae(e)},MapWrapper.iterable=function(e){return e},MapWrapper.keys=function(e){return se(e,!1)},MapWrapper.values=function(e){return se(e,!0)},MapWrapper}(),ce=function(){function StringMapWrapper(){}return StringMapWrapper.create=function(){return{}},StringMapWrapper.contains=function(e,t){return e.hasOwnProperty(t)},StringMapWrapper.get=function(e,t){return e.hasOwnProperty(t)?e[t]:void 0},StringMapWrapper.set=function(e,t,r){e[t]=r},StringMapWrapper.keys=function(e){return Object.keys(e)},StringMapWrapper.values=function(e){return Object.keys(e).map(function(t){return e[t]})},StringMapWrapper.isEmpty=function(e){for(var t in e)return!1;return!0},StringMapWrapper.delete=function(e,t){delete e[t]},StringMapWrapper.forEach=function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];t(e[i],i)}},StringMapWrapper.merge=function(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];r[o]=e[o]}for(var a=0,s=Object.keys(t);a<s.length;a++){var o=s[a];r[o]=t[o]}return r},StringMapWrapper.equals=function(e,t){var r=Object.keys(e),n=Object.keys(t);if(r.length!=n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i];if(e[o]!==t[o])return!1}return!0},StringMapWrapper}(),ue=function(){function ListWrapper(){}return ListWrapper.createFixedSize=function(e){return new Array(e)},ListWrapper.createGrowableSize=function(e){return new Array(e)},ListWrapper.clone=function(e){return e.slice(0)},ListWrapper.forEachWithIndex=function(e,t){for(var r=0;r<e.length;r++)t(e[r],r)},ListWrapper.first=function(e){return e?e[0]:null},ListWrapper.last=function(e){return e&&0!=e.length?e[e.length-1]:null},ListWrapper.indexOf=function(e,t,r){return void 0===r&&(r=0),e.indexOf(t,r)},ListWrapper.contains=function(e,t){return e.indexOf(t)!==-1},ListWrapper.reversed=function(e){var t=ListWrapper.clone(e);return t.reverse()},ListWrapper.concat=function(e,t){return e.concat(t)},ListWrapper.insert=function(e,t,r){e.splice(t,0,r)},ListWrapper.removeAt=function(e,t){var r=e[t];return e.splice(t,1),r},ListWrapper.removeAll=function(e,t){for(var r=0;r<t.length;++r){var n=e.indexOf(t[r]);e.splice(n,1)}},ListWrapper.remove=function(e,t){var r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)},ListWrapper.clear=function(e){e.length=0},ListWrapper.isEmpty=function(e){return 0==e.length},ListWrapper.fill=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=null),e.fill(t,r,null===n?e.length:n)},ListWrapper.equals=function(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},ListWrapper.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},ListWrapper.splice=function(e,t,r){return e.splice(t,r)},ListWrapper.sort=function(e,t){isPresent(t)?e.sort(t):e.sort()},ListWrapper.toString=function(e){return e.toString()},ListWrapper.toJSON=function(e){return JSON.stringify(e)},ListWrapper.maximum=function(e,t){if(0==e.length)return null;for(var r=null,n=-(1/0),i=0;i<e.length;i++){var o=e[i];if(!isBlank(o)){var a=t(o);a>n&&(r=o,n=a)}}return r},ListWrapper.flatten=function(e){var t=[];return _flattenArray(e,t),t},ListWrapper.addAll=function(e,t){for(var r=0;r<t.length;r++)e.push(t[r])},ListWrapper}(),pe=function(){var e=new ne([1,2,3]);return 3===e.size?function(e){return new ne(e)}:function(e){var t=new ne(e);if(t.size!==e.length)for(var r=0;r<e.length;r++)t.add(e[r]);return t}}(),he=function(){function SetWrapper(){}return SetWrapper.createFromList=function(e){return pe(e)},SetWrapper.has=function(e,t){return e.has(t)},SetWrapper.delete=function(e,t){e.delete(t)},SetWrapper}(),de=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},fe=function(e){function AbstractProviderError(t,r,n){e.call(this,"DI Error"),this.keys=[r],this.injectors=[t],this.constructResolvingMessage=n,this.message=this.constructResolvingMessage(this.keys)}return de(AbstractProviderError,e),AbstractProviderError.prototype.addKey=function(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)},AbstractProviderError}(Y),me=function(e){function NoProviderError(t,r){e.call(this,t,r,function(e){var t=stringify(ue.first(e).token);return"No provider for "+t+"!"+constructResolvingPath(e)})}return de(NoProviderError,e),NoProviderError}(fe),ge=function(e){function CyclicDependencyError(t,r){e.call(this,t,r,function(e){return"Cannot instantiate cyclic dependency!"+constructResolvingPath(e)})}return de(CyclicDependencyError,e),CyclicDependencyError}(fe),ye=function(e){function InstantiationError(t,r,n,i){e.call(this,"DI Error",r),this.keys=[i],this.injectors=[t]}return de(InstantiationError,e),InstantiationError.prototype.addKey=function(e,t){this.injectors.push(e),this.keys.push(t)},Object.defineProperty(InstantiationError.prototype,"message",{get:function(){var e=stringify(ue.first(this.keys).token);return this.originalError.message+": Error during instantiation of "+e+"!"+constructResolvingPath(this.keys)+"."},enumerable:!0,configurable:!0}),Object.defineProperty(InstantiationError.prototype,"causeKey",{get:function(){return this.keys[0]},enumerable:!0,configurable:!0}),InstantiationError}(X),ve=function(e){function InvalidProviderError(t){e.call(this,"Invalid provider - only instances of Provider and Type are allowed, got: "+t)}return de(InvalidProviderError,e),InvalidProviderError}(Y),be=function(e){function NoAnnotationError(t,r){e.call(this,NoAnnotationError._genMessage(t,r))}return de(NoAnnotationError,e),NoAnnotationError._genMessage=function(e,t){for(var r=[],n=0,i=t.length;n<i;n++){var o=t[n];isBlank(o)||0==o.length?r.push("?"):r.push(o.map(stringify).join(" "))}return"Cannot resolve all parameters for '"+stringify(e)+"'("+r.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+stringify(e)+"' is decorated with Injectable."},NoAnnotationError}(Y),_e=function(e){function OutOfBoundsError(t){e.call(this,"Index "+t+" is out-of-bounds.")}return de(OutOfBoundsError,e),OutOfBoundsError}(Y),we=function(e){function MixingMultiProvidersWithRegularProvidersError(t,r){e.call(this,"Cannot mix multi providers and regular providers, got: "+t.toString()+" "+r.toString())}return de(MixingMultiProvidersWithRegularProvidersError,e),MixingMultiProvidersWithRegularProvidersError}(Y),xe=function(){function ReflectiveKey(e,t){if(this.token=e,this.id=t,isBlank(e))throw new Error("Token must be defined!")}return Object.defineProperty(ReflectiveKey.prototype,"displayName",{get:function(){return stringify(this.token)},enumerable:!0,configurable:!0}),ReflectiveKey.get=function(e){return Ce.get(resolveForwardRef(e))},Object.defineProperty(ReflectiveKey,"numberOfKeys",{get:function(){return Ce.numberOfKeys},enumerable:!0,configurable:!0}),ReflectiveKey}(),Se=function(){function KeyRegistry(){this._allKeys=new Map}return KeyRegistry.prototype.get=function(e){if(e instanceof xe)return e;if(this._allKeys.has(e))return this._allKeys.get(e);var t=new xe(e,xe.numberOfKeys);return this._allKeys.set(e,t),t},Object.defineProperty(KeyRegistry.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),KeyRegistry}(),Ce=new Se,ke=Function,Ee=function(){function ReflectionCapabilities(e){this._reflect=e||o.Reflect}return ReflectionCapabilities.prototype.isReflectionEnabled=function(){return!0},ReflectionCapabilities.prototype.factory=function(e){var t=e.prototype;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var i=Object.create(t);return e.apply(i,r),i}},ReflectionCapabilities.prototype._zipTypesAndAnnotations=function(e,t){var r;r="undefined"==typeof e?new Array(t.length):new Array(e.length);for(var n=0;n<r.length;n++)"undefined"==typeof e?r[n]=[]:e[n]!=Object?r[n]=[e[n]]:r[n]=[],isPresent(t)&&isPresent(t[n])&&(r[n]=r[n].concat(t[n]));return r},ReflectionCapabilities.prototype.parameters=function(e){if(isPresent(e.parameters))return e.parameters;if(isPresent(e.ctorParameters)){var t=e.ctorParameters,r=t.map(function(e){return e&&e.type}),n=t.map(function(e){return e&&convertTsickleDecoratorIntoMetadata(e.decorators)});return this._zipTypesAndAnnotations(r,n)}if(isPresent(this._reflect)&&isPresent(this._reflect.getMetadata)){var i=this._reflect.getMetadata("parameters",e),o=this._reflect.getMetadata("design:paramtypes",e);if(isPresent(o)||isPresent(i))return this._zipTypesAndAnnotations(o,i)}var a=new Array(e.length);return a.fill(void 0),a},ReflectionCapabilities.prototype.annotations=function(e){if(isPresent(e.annotations)){var t=e.annotations;return isFunction(t)&&t.annotations&&(t=t.annotations),t}if(isPresent(e.decorators))return convertTsickleDecoratorIntoMetadata(e.decorators);if(isPresent(this._reflect)&&isPresent(this._reflect.getMetadata)){var t=this._reflect.getMetadata("annotations",e);if(isPresent(t))return t}return[]},ReflectionCapabilities.prototype.propMetadata=function(e){if(isPresent(e.propMetadata)){var t=e.propMetadata;return isFunction(t)&&t.propMetadata&&(t=t.propMetadata),t}if(isPresent(e.propDecorators)){var r=e.propDecorators,n={};return Object.keys(r).forEach(function(e){n[e]=convertTsickleDecoratorIntoMetadata(r[e])}),n}if(isPresent(this._reflect)&&isPresent(this._reflect.getMetadata)){var t=this._reflect.getMetadata("propMetadata",e);if(isPresent(t))return t}return{}},ReflectionCapabilities.prototype.interfaces=function(e){return[]},ReflectionCapabilities.prototype.hasLifecycleHook=function(e,t,r){if(!(e instanceof ke))return!1;var n=e.prototype;return!!n[r]},ReflectionCapabilities.prototype.getter=function(e){return new Function("o","return o."+e+";")},ReflectionCapabilities.prototype.setter=function(e){return new Function("o","v","return o."+e+" = v;")},ReflectionCapabilities.prototype.method=function(e){var t="if (!o."+e+") throw new Error('\""+e+"\" is undefined');\n        return o."+e+".apply(o, args);";return new Function("o","args",t)},ReflectionCapabilities.prototype.importUri=function(e){return"object"==typeof e&&e.filePath?e.filePath:"./"+stringify(e)},ReflectionCapabilities.prototype.resolveIdentifier=function(e,t,r){return r},ReflectionCapabilities.prototype.resolveEnum=function(e,t){return e[t]},ReflectionCapabilities}(),Ae=function(){function ReflectorReader(){}return ReflectorReader}(),Pe=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Te=function(e){function Reflector(t){e.call(this),this._injectableInfo=new re,this._getters=new re,this._setters=new re,this._methods=new re,this._usedKeys=null,this.reflectionCapabilities=t}return Pe(Reflector,e),Reflector.prototype.updateCapabilities=function(e){this.reflectionCapabilities=e},Reflector.prototype.isReflectionEnabled=function(){return this.reflectionCapabilities.isReflectionEnabled()},Reflector.prototype.trackUsage=function(){this._usedKeys=new ne},Reflector.prototype.listUnusedKeys=function(){var e=this;if(null==this._usedKeys)throw new Error("Usage tracking is disabled");var t=le.keys(this._injectableInfo);return t.filter(function(t){return!he.has(e._usedKeys,t)})},Reflector.prototype.registerFunction=function(e,t){this._injectableInfo.set(e,t)},Reflector.prototype.registerType=function(e,t){this._injectableInfo.set(e,t)},Reflector.prototype.registerGetters=function(e){_mergeMaps(this._getters,e)},Reflector.prototype.registerSetters=function(e){_mergeMaps(this._setters,e)},Reflector.prototype.registerMethods=function(e){_mergeMaps(this._methods,e)},Reflector.prototype.factory=function(e){if(this._containsReflectionInfo(e)){var t=this._getReflectionInfo(e).factory;return isPresent(t)?t:null}return this.reflectionCapabilities.factory(e)},Reflector.prototype.parameters=function(e){if(this._injectableInfo.has(e)){var t=this._getReflectionInfo(e).parameters;return isPresent(t)?t:[]}return this.reflectionCapabilities.parameters(e)},Reflector.prototype.annotations=function(e){if(this._injectableInfo.has(e)){var t=this._getReflectionInfo(e).annotations;return isPresent(t)?t:[]}return this.reflectionCapabilities.annotations(e)},Reflector.prototype.propMetadata=function(e){if(this._injectableInfo.has(e)){var t=this._getReflectionInfo(e).propMetadata;return isPresent(t)?t:{}}return this.reflectionCapabilities.propMetadata(e)},Reflector.prototype.interfaces=function(e){if(this._injectableInfo.has(e)){var t=this._getReflectionInfo(e).interfaces;return isPresent(t)?t:[]}return this.reflectionCapabilities.interfaces(e)},Reflector.prototype.hasLifecycleHook=function(e,t,r){var n=this.interfaces(e);return n.indexOf(t)!==-1||this.reflectionCapabilities.hasLifecycleHook(e,t,r)},Reflector.prototype.getter=function(e){return this._getters.has(e)?this._getters.get(e):this.reflectionCapabilities.getter(e)},Reflector.prototype.setter=function(e){return this._setters.has(e)?this._setters.get(e):this.reflectionCapabilities.setter(e)},Reflector.prototype.method=function(e){return this._methods.has(e)?this._methods.get(e):this.reflectionCapabilities.method(e)},Reflector.prototype._getReflectionInfo=function(e){return isPresent(this._usedKeys)&&this._usedKeys.add(e),this._injectableInfo.get(e)},Reflector.prototype._containsReflectionInfo=function(e){return this._injectableInfo.has(e)},Reflector.prototype.importUri=function(e){return this.reflectionCapabilities.importUri(e)},Reflector.prototype.resolveIdentifier=function(e,t,r){return this.reflectionCapabilities.resolveIdentifier(e,t,r)},Reflector.prototype.resolveEnum=function(e,t){return this.reflectionCapabilities.resolveEnum(e,t)},Reflector}(Ae),Me=new Te(new Ee),Ie=function(){function ReflectiveDependency(e,t,r,n,i){this.key=e,this.optional=t,this.lowerBoundVisibility=r,this.upperBoundVisibility=n,this.properties=i}return ReflectiveDependency.fromKey=function(e){return new ReflectiveDependency(e,(!1),null,null,[])},ReflectiveDependency}(),Oe=[],Re=function(){function ResolvedReflectiveProvider_(e,t,r){this.key=e,this.resolvedFactories=t,this.multiProvider=r}return Object.defineProperty(ResolvedReflectiveProvider_.prototype,"resolvedFactory",{get:function(){return this.resolvedFactories[0]},enumerable:!0,configurable:!0}),ResolvedReflectiveProvider_}(),Le=function(){function ResolvedReflectiveFactory(e,t){this.factory=e,this.dependencies=t}return ResolvedReflectiveFactory}(),Ne=10,De=new Object,Be=function(){function ReflectiveProtoInjectorInlineStrategy(e,t){this.provider0=null,this.provider1=null,this.provider2=null,this.provider3=null,this.provider4=null,this.provider5=null,this.provider6=null,this.provider7=null,this.provider8=null,this.provider9=null,this.keyId0=null,this.keyId1=null,this.keyId2=null,this.keyId3=null,this.keyId4=null,this.keyId5=null,this.keyId6=null,this.keyId7=null,this.keyId8=null,this.keyId9=null;var r=t.length;r>0&&(this.provider0=t[0],this.keyId0=t[0].key.id),r>1&&(this.provider1=t[1],this.keyId1=t[1].key.id),r>2&&(this.provider2=t[2],this.keyId2=t[2].key.id),r>3&&(this.provider3=t[3],this.keyId3=t[3].key.id),r>4&&(this.provider4=t[4],this.keyId4=t[4].key.id),r>5&&(this.provider5=t[5],this.keyId5=t[5].key.id),r>6&&(this.provider6=t[6],this.keyId6=t[6].key.id),r>7&&(this.provider7=t[7],this.keyId7=t[7].key.id),r>8&&(this.provider8=t[8],this.keyId8=t[8].key.id),r>9&&(this.provider9=t[9],this.keyId9=t[9].key.id)}return ReflectiveProtoInjectorInlineStrategy.prototype.getProviderAtIndex=function(e){if(0==e)return this.provider0;if(1==e)return this.provider1;if(2==e)return this.provider2;if(3==e)return this.provider3;if(4==e)return this.provider4;if(5==e)return this.provider5;if(6==e)return this.provider6;if(7==e)return this.provider7;if(8==e)return this.provider8;if(9==e)return this.provider9;throw new _e(e)},ReflectiveProtoInjectorInlineStrategy.prototype.createInjectorStrategy=function(e){return new je(e,this)},ReflectiveProtoInjectorInlineStrategy}(),Ve=function(){function ReflectiveProtoInjectorDynamicStrategy(e,t){this.providers=t;var r=t.length;this.keyIds=ue.createFixedSize(r);for(var n=0;n<r;n++)this.keyIds[n]=t[n].key.id}return ReflectiveProtoInjectorDynamicStrategy.prototype.getProviderAtIndex=function(e){if(e<0||e>=this.providers.length)throw new _e(e);return this.providers[e]},ReflectiveProtoInjectorDynamicStrategy.prototype.createInjectorStrategy=function(e){return new Ue(this,e)},ReflectiveProtoInjectorDynamicStrategy}(),Fe=function(){function ReflectiveProtoInjector(e){this.numberOfProviders=e.length,this._strategy=e.length>Ne?new Ve(this,e):new Be(this,e)}return ReflectiveProtoInjector.fromResolvedProviders=function(e){return new ReflectiveProtoInjector(e)},ReflectiveProtoInjector.prototype.getProviderAtIndex=function(e){return this._strategy.getProviderAtIndex(e)},ReflectiveProtoInjector}(),je=function(){function ReflectiveInjectorInlineStrategy(e,t){this.injector=e,this.protoStrategy=t,this.obj0=De,this.obj1=De,this.obj2=De,this.obj3=De,this.obj4=De,this.obj5=De,this.obj6=De,this.obj7=De,this.obj8=De,this.obj9=De}return ReflectiveInjectorInlineStrategy.prototype.resetConstructionCounter=function(){this.injector._constructionCounter=0},ReflectiveInjectorInlineStrategy.prototype.instantiateProvider=function(e){return this.injector._new(e)},ReflectiveInjectorInlineStrategy.prototype.getObjByKeyId=function(e){var t=this.protoStrategy,r=this.injector;return t.keyId0===e?(this.obj0===De&&(this.obj0=r._new(t.provider0)),this.obj0):t.keyId1===e?(this.obj1===De&&(this.obj1=r._new(t.provider1)),this.obj1):t.keyId2===e?(this.obj2===De&&(this.obj2=r._new(t.provider2)),this.obj2):t.keyId3===e?(this.obj3===De&&(this.obj3=r._new(t.provider3)),this.obj3):t.keyId4===e?(this.obj4===De&&(this.obj4=r._new(t.provider4)),this.obj4):t.keyId5===e?(this.obj5===De&&(this.obj5=r._new(t.provider5)),this.obj5):t.keyId6===e?(this.obj6===De&&(this.obj6=r._new(t.provider6)),this.obj6):t.keyId7===e?(this.obj7===De&&(this.obj7=r._new(t.provider7)),this.obj7):t.keyId8===e?(this.obj8===De&&(this.obj8=r._new(t.provider8)),this.obj8):t.keyId9===e?(this.obj9===De&&(this.obj9=r._new(t.provider9)),this.obj9):De},ReflectiveInjectorInlineStrategy.prototype.getObjAtIndex=function(e){if(0==e)return this.obj0;if(1==e)return this.obj1;if(2==e)return this.obj2;
if(3==e)return this.obj3;if(4==e)return this.obj4;if(5==e)return this.obj5;if(6==e)return this.obj6;if(7==e)return this.obj7;if(8==e)return this.obj8;if(9==e)return this.obj9;throw new _e(e)},ReflectiveInjectorInlineStrategy.prototype.getMaxNumberOfObjects=function(){return Ne},ReflectiveInjectorInlineStrategy}(),Ue=function(){function ReflectiveInjectorDynamicStrategy(e,t){this.protoStrategy=e,this.injector=t,this.objs=ue.createFixedSize(e.providers.length),ue.fill(this.objs,De)}return ReflectiveInjectorDynamicStrategy.prototype.resetConstructionCounter=function(){this.injector._constructionCounter=0},ReflectiveInjectorDynamicStrategy.prototype.instantiateProvider=function(e){return this.injector._new(e)},ReflectiveInjectorDynamicStrategy.prototype.getObjByKeyId=function(e){for(var t=this.protoStrategy,r=0;r<t.keyIds.length;r++)if(t.keyIds[r]===e)return this.objs[r]===De&&(this.objs[r]=this.injector._new(t.providers[r])),this.objs[r];return De},ReflectiveInjectorDynamicStrategy.prototype.getObjAtIndex=function(e){if(e<0||e>=this.objs.length)throw new _e(e);return this.objs[e]},ReflectiveInjectorDynamicStrategy.prototype.getMaxNumberOfObjects=function(){return this.objs.length},ReflectiveInjectorDynamicStrategy}(),ze=function(){function ReflectiveInjector(){}return ReflectiveInjector.resolve=function(e){return resolveReflectiveProviders(e)},ReflectiveInjector.resolveAndCreate=function(e,t){void 0===t&&(t=null);var r=ReflectiveInjector.resolve(e);return ReflectiveInjector.fromResolvedProviders(r,t)},ReflectiveInjector.fromResolvedProviders=function(e,t){return void 0===t&&(t=null),new We(Fe.fromResolvedProviders(e),t)},Object.defineProperty(ReflectiveInjector.prototype,"parent",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),ReflectiveInjector.prototype.resolveAndCreateChild=function(e){return unimplemented()},ReflectiveInjector.prototype.createChildFromResolved=function(e){return unimplemented()},ReflectiveInjector.prototype.resolveAndInstantiate=function(e){return unimplemented()},ReflectiveInjector.prototype.instantiateResolved=function(e){return unimplemented()},ReflectiveInjector}(),We=function(){function ReflectiveInjector_(e,t){void 0===t&&(t=null),this._constructionCounter=0,this._proto=e,this._parent=t,this._strategy=e._strategy.createInjectorStrategy(this)}return ReflectiveInjector_.prototype.get=function(e,t){return void 0===t&&(t=J),this._getByKey(xe.get(e),null,null,t)},ReflectiveInjector_.prototype.getAt=function(e){return this._strategy.getObjAtIndex(e)},Object.defineProperty(ReflectiveInjector_.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(ReflectiveInjector_.prototype,"internalStrategy",{get:function(){return this._strategy},enumerable:!0,configurable:!0}),ReflectiveInjector_.prototype.resolveAndCreateChild=function(e){var t=ze.resolve(e);return this.createChildFromResolved(t)},ReflectiveInjector_.prototype.createChildFromResolved=function(e){var t=new Fe(e),r=new ReflectiveInjector_(t);return r._parent=this,r},ReflectiveInjector_.prototype.resolveAndInstantiate=function(e){return this.instantiateResolved(ze.resolve([e])[0])},ReflectiveInjector_.prototype.instantiateResolved=function(e){return this._instantiateProvider(e)},ReflectiveInjector_.prototype._new=function(e){if(this._constructionCounter++>this._strategy.getMaxNumberOfObjects())throw new ge(this,e.key);return this._instantiateProvider(e)},ReflectiveInjector_.prototype._instantiateProvider=function(e){if(e.multiProvider){for(var t=ue.createFixedSize(e.resolvedFactories.length),r=0;r<e.resolvedFactories.length;++r)t[r]=this._instantiate(e,e.resolvedFactories[r]);return t}return this._instantiate(e,e.resolvedFactories[0])},ReflectiveInjector_.prototype._instantiate=function(e,t){var r,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y,v,b,_,w,x=t.factory,S=t.dependencies,C=S.length;try{r=C>0?this._getByReflectiveDependency(e,S[0]):null,n=C>1?this._getByReflectiveDependency(e,S[1]):null,i=C>2?this._getByReflectiveDependency(e,S[2]):null,o=C>3?this._getByReflectiveDependency(e,S[3]):null,a=C>4?this._getByReflectiveDependency(e,S[4]):null,s=C>5?this._getByReflectiveDependency(e,S[5]):null,l=C>6?this._getByReflectiveDependency(e,S[6]):null,c=C>7?this._getByReflectiveDependency(e,S[7]):null,u=C>8?this._getByReflectiveDependency(e,S[8]):null,p=C>9?this._getByReflectiveDependency(e,S[9]):null,h=C>10?this._getByReflectiveDependency(e,S[10]):null,d=C>11?this._getByReflectiveDependency(e,S[11]):null,f=C>12?this._getByReflectiveDependency(e,S[12]):null,m=C>13?this._getByReflectiveDependency(e,S[13]):null,g=C>14?this._getByReflectiveDependency(e,S[14]):null,y=C>15?this._getByReflectiveDependency(e,S[15]):null,v=C>16?this._getByReflectiveDependency(e,S[16]):null,b=C>17?this._getByReflectiveDependency(e,S[17]):null,_=C>18?this._getByReflectiveDependency(e,S[18]):null,w=C>19?this._getByReflectiveDependency(e,S[19]):null}catch(k){throw(k instanceof fe||k instanceof ye)&&k.addKey(this,e.key),k}var E;try{switch(C){case 0:E=x();break;case 1:E=x(r);break;case 2:E=x(r,n);break;case 3:E=x(r,n,i);break;case 4:E=x(r,n,i,o);break;case 5:E=x(r,n,i,o,a);break;case 6:E=x(r,n,i,o,a,s);break;case 7:E=x(r,n,i,o,a,s,l);break;case 8:E=x(r,n,i,o,a,s,l,c);break;case 9:E=x(r,n,i,o,a,s,l,c,u);break;case 10:E=x(r,n,i,o,a,s,l,c,u,p);break;case 11:E=x(r,n,i,o,a,s,l,c,u,p,h);break;case 12:E=x(r,n,i,o,a,s,l,c,u,p,h,d);break;case 13:E=x(r,n,i,o,a,s,l,c,u,p,h,d,f);break;case 14:E=x(r,n,i,o,a,s,l,c,u,p,h,d,f,m);break;case 15:E=x(r,n,i,o,a,s,l,c,u,p,h,d,f,m,g);break;case 16:E=x(r,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y);break;case 17:E=x(r,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y,v);break;case 18:E=x(r,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y,v,b);break;case 19:E=x(r,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y,v,b,_);break;case 20:E=x(r,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y,v,b,_,w);break;default:throw new Error("Cannot instantiate '"+e.key.displayName+"' because it has more than 20 dependencies")}}catch(k){throw new ye(this,k,k.stack,e.key)}return E},ReflectiveInjector_.prototype._getByReflectiveDependency=function(e,t){return this._getByKey(t.key,t.lowerBoundVisibility,t.upperBoundVisibility,t.optional?null:J)},ReflectiveInjector_.prototype._getByKey=function(e,t,r,n){return e===He?this:r instanceof f?this._getByKeySelf(e,n):this._getByKeyDefault(e,n,t)},ReflectiveInjector_.prototype._throwOrNull=function(e,t){if(t!==J)return t;throw new me(this,e)},ReflectiveInjector_.prototype._getByKeySelf=function(e,t){var r=this._strategy.getObjByKeyId(e.id);return r!==De?r:this._throwOrNull(e,t)},ReflectiveInjector_.prototype._getByKeyDefault=function(e,t,r){var n;for(n=r instanceof m?this._parent:this;n instanceof ReflectiveInjector_;){var i=n,o=i._strategy.getObjByKeyId(e.id);if(o!==De)return o;n=i._parent}return null!==n?n.get(e.token,t):this._throwOrNull(e,t)},Object.defineProperty(ReflectiveInjector_.prototype,"displayName",{get:function(){var e=_mapProviders(this,function(e){return' "'+e.key.displayName+'" '}).join(", ");return"ReflectiveInjector(providers: ["+e+"])"},enumerable:!0,configurable:!0}),ReflectiveInjector_.prototype.toString=function(){return this.displayName},ReflectiveInjector_}(),He=xe.get(te),qe=function(){function ErrorHandler(e){void 0===e&&(e=!0),this._console=console,this.rethrowError=e}return ErrorHandler.prototype.handleError=function(e){var t=this._findOriginalError(e),r=this._findOriginalStack(e),n=this._findContext(e);if(this._console.error("EXCEPTION: "+this._extractMessage(e)),t&&this._console.error("ORIGINAL EXCEPTION: "+this._extractMessage(t)),r&&(this._console.error("ORIGINAL STACKTRACE:"),this._console.error(r)),n&&(this._console.error("ERROR CONTEXT:"),this._console.error(n)),this.rethrowError)throw e},ErrorHandler.prototype._extractMessage=function(e){return e instanceof Error?e.message:e.toString()},ErrorHandler.prototype._findContext=function(e){return e?e.context?e.context:this._findContext(e.originalError):null},ErrorHandler.prototype._findOriginalError=function(e){for(var t=e.originalError;t&&t.originalError;)t=t.originalError;return t},ErrorHandler.prototype._findOriginalStack=function(e){if(!(e instanceof Error))return null;for(var t=e,r=t.stack;t instanceof Error&&t.originalError;)t=t.originalError,t instanceof Error&&t.stack&&(r=t.stack);return r},ErrorHandler}(),Ge=new y("Application Initializer"),Ke=function(){function ApplicationInitStatus(e){var t=this;this._done=!1;var r=[];if(e)for(var n=0;n<e.length;n++){var i=e[n]();isPromise(i)&&r.push(i)}this._donePromise=Promise.all(r).then(function(){t._done=!0}),0===r.length&&(this._done=!0)}return Object.defineProperty(ApplicationInitStatus.prototype,"done",{get:function(){return this._done},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationInitStatus.prototype,"donePromise",{get:function(){return this._donePromise},enumerable:!0,configurable:!0}),ApplicationInitStatus.decorators=[{type:d}],ApplicationInitStatus.ctorParameters=[{type:Array,decorators:[{type:p,args:[Ge]},{type:h}]}],ApplicationInitStatus}(),$e=new y("AppId"),Qe={provide:$e,useFactory:_appIdRandomProviderFactory,deps:[]},Ye=new y("Platform Initializer"),Xe=new y("appBootstrapListener"),Ze=new y("Application Packages Root URL"),Je=function(){function Console(){}return Console.prototype.log=function(e){print(e)},Console.prototype.warn=function(e){warn(e)},Console.decorators=[{type:d}],Console.ctorParameters=[],Console}(),et=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},tt=function(e){function ComponentStillLoadingError(t){e.call(this,"Can't compile synchronously as "+stringify(t)+" is still being loaded!"),this.compType=t}return et(ComponentStillLoadingError,e),ComponentStillLoadingError}(Y),rt=function(){function ModuleWithComponentFactories(e,t){this.ngModuleFactory=e,this.componentFactories=t}return ModuleWithComponentFactories}(),nt=function(){function Compiler(){}return Compiler.prototype.compileModuleSync=function(e){throw _throwError()},Compiler.prototype.compileModuleAsync=function(e){throw _throwError()},Compiler.prototype.compileModuleAndAllComponentsSync=function(e){throw _throwError()},Compiler.prototype.compileModuleAndAllComponentsAsync=function(e){throw _throwError()},Compiler.prototype.clearCache=function(){},Compiler.prototype.clearCacheFor=function(e){},Compiler}(),it=new y("compilerOptions"),ot=function(){function CompilerFactory(){}return CompilerFactory}(),at=function(){function DefaultIterableDifferFactory(){}return DefaultIterableDifferFactory.prototype.supports=function(e){return isListLikeIterable(e)},DefaultIterableDifferFactory.prototype.create=function(e,t){return new lt(t)},DefaultIterableDifferFactory}(),st=function(e,t){return t},lt=function(){function DefaultIterableDiffer(e){this._trackByFn=e,this._length=null,this._collection=null,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=isPresent(this._trackByFn)?this._trackByFn:st}return Object.defineProperty(DefaultIterableDiffer.prototype,"collection",{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultIterableDiffer.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),DefaultIterableDiffer.prototype.forEachItem=function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)},DefaultIterableDiffer.prototype.forEachOperation=function(e){for(var t=this._itHead,r=this._removalsHead,n=0,i=null;t||r;){var o=!r||t&&t.currentIndex<getPreviousIndex(r,n,i)?t:r,a=getPreviousIndex(o,n,i),s=o.currentIndex;if(o===r)n--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)n++;else{i||(i=[]);var l=a-n,c=s-n;if(l!=c){for(var u=0;u<l;u++){var p=u<i.length?i[u]:i[u]=0,h=p+u;c<=h&&h<l&&(i[u]=p+1)}var d=o.previousIndex;i[d]=c-l}}a!==s&&e(o,a,s)}},DefaultIterableDiffer.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)},DefaultIterableDiffer.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},DefaultIterableDiffer.prototype.forEachMovedItem=function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)},DefaultIterableDiffer.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},DefaultIterableDiffer.prototype.forEachIdentityChange=function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)},DefaultIterableDiffer.prototype.diff=function(e){if(isBlank(e)&&(e=[]),!isListLikeIterable(e))throw new Error("Error trying to diff '"+e+"'");return this.check(e)?this:null},DefaultIterableDiffer.prototype.onDestroy=function(){},DefaultIterableDiffer.prototype.check=function(e){var t=this;this._reset();var r,n,i,o=this._itHead,a=!1;if(isArray(e)){var s=e;for(this._length=e.length,r=0;r<this._length;r++)n=s[r],i=this._trackByFn(r,n),null!==o&&looseIdentical(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,n,i,r)),looseIdentical(o.item,n)||this._addIdentityChange(o,n)):(o=this._mismatch(o,n,i,r),a=!0),o=o._next}else r=0,iterateListLike(e,function(e){i=t._trackByFn(r,e),null!==o&&looseIdentical(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,r)),looseIdentical(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,r),a=!0),o=o._next,r++}),this._length=r;return this._truncate(o),this._collection=e,this.isDirty},Object.defineProperty(DefaultIterableDiffer.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),DefaultIterableDiffer.prototype._reset=function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},DefaultIterableDiffer.prototype._mismatch=function(e,t,r,n){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),e=null===this._linkedRecords?null:this._linkedRecords.get(r,n),null!==e?(looseIdentical(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,n)):(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r),null!==e?(looseIdentical(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,n)):e=this._addAfter(new ct(t,r),i,n)),e},DefaultIterableDiffer.prototype._verifyReinsertion=function(e,t,r,n){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r);return null!==i?e=this._reinsertAfter(i,e._prev,n):e.currentIndex!=n&&(e.currentIndex=n,this._addToMoves(e,n)),e},DefaultIterableDiffer.prototype._truncate=function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},DefaultIterableDiffer.prototype._reinsertAfter=function(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var n=e._prevRemoved,i=e._nextRemoved;return null===n?this._removalsHead=i:n._nextRemoved=i,null===i?this._removalsTail=n:i._prevRemoved=n,this._insertAfter(e,t,r),this._addToMoves(e,r),e},DefaultIterableDiffer.prototype._moveAfter=function(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e},DefaultIterableDiffer.prototype._addAfter=function(e,t,r){return this._insertAfter(e,t,r),null===this._additionsTail?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e},DefaultIterableDiffer.prototype._insertAfter=function(e,t,r){var n=null===t?this._itHead:t._next;return e._next=n,e._prev=t,null===n?this._itTail=e:n._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new pt),this._linkedRecords.put(e),e.currentIndex=r,e},DefaultIterableDiffer.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},DefaultIterableDiffer.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e},DefaultIterableDiffer.prototype._addToMoves=function(e,t){return e.previousIndex===t?e:(null===this._movesTail?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e,e)},DefaultIterableDiffer.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pt),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},DefaultIterableDiffer.prototype._addIdentityChange=function(e,t){return e.item=t,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e},DefaultIterableDiffer.prototype.toString=function(){var e=[];this.forEachItem(function(t){return e.push(t)});var t=[];this.forEachPreviousItem(function(e){return t.push(e)});var r=[];this.forEachAddedItem(function(e){return r.push(e)});var n=[];this.forEachMovedItem(function(e){return n.push(e)});var i=[];this.forEachRemovedItem(function(e){return i.push(e)});var o=[];return this.forEachIdentityChange(function(e){return o.push(e)}),"collection: "+e.join(", ")+"\nprevious: "+t.join(", ")+"\nadditions: "+r.join(", ")+"\nmoves: "+n.join(", ")+"\nremovals: "+i.join(", ")+"\nidentityChanges: "+o.join(", ")+"\n"},DefaultIterableDiffer}(),ct=function(){function CollectionChangeRecord(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}return CollectionChangeRecord.prototype.toString=function(){return this.previousIndex===this.currentIndex?stringify(this.item):stringify(this.item)+"["+stringify(this.previousIndex)+"->"+stringify(this.currentIndex)+"]"},CollectionChangeRecord}(),ut=function(){function _DuplicateItemRecordList(){this._head=null,this._tail=null}return _DuplicateItemRecordList.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},_DuplicateItemRecordList.prototype.get=function(e,t){var r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<r.currentIndex)&&looseIdentical(r.trackById,e))return r;return null},_DuplicateItemRecordList.prototype.remove=function(e){var t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head},_DuplicateItemRecordList}(),pt=function(){function _DuplicateMap(){this.map=new Map}return _DuplicateMap.prototype.put=function(e){var t=getMapKey(e.trackById),r=this.map.get(t);isPresent(r)||(r=new ut,this.map.set(t,r)),r.add(e)},_DuplicateMap.prototype.get=function(e,t){void 0===t&&(t=null);var r=getMapKey(e),n=this.map.get(r);return isBlank(n)?null:n.get(e,t)},_DuplicateMap.prototype.remove=function(e){var t=getMapKey(e.trackById),r=this.map.get(t);return r.remove(e)&&this.map.delete(t),e},Object.defineProperty(_DuplicateMap.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),_DuplicateMap.prototype.clear=function(){this.map.clear()},_DuplicateMap.prototype.toString=function(){return"_DuplicateMap("+stringify(this.map)+")"},_DuplicateMap}(),ht=function(){function DefaultKeyValueDifferFactory(){}return DefaultKeyValueDifferFactory.prototype.supports=function(e){return e instanceof Map||isJsObject(e)},DefaultKeyValueDifferFactory.prototype.create=function(e){return new dt},DefaultKeyValueDifferFactory}(),dt=function(){function DefaultKeyValueDiffer(){this._records=new Map,this._mapHead=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(DefaultKeyValueDiffer.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),DefaultKeyValueDiffer.prototype.forEachItem=function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)},DefaultKeyValueDiffer.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)},DefaultKeyValueDiffer.prototype.forEachChangedItem=function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)},DefaultKeyValueDiffer.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},DefaultKeyValueDiffer.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},DefaultKeyValueDiffer.prototype.diff=function(e){if(e){if(!(e instanceof Map||isJsObject(e)))throw new Error("Error trying to diff '"+e+"'")}else e=new Map;return this.check(e)?this:null},DefaultKeyValueDiffer.prototype.onDestroy=function(){},DefaultKeyValueDiffer.prototype.check=function(e){var t=this;this._reset();var r=this._records,n=this._mapHead,i=null,o=null,a=!1;return this._forEach(e,function(e,s){var l;n&&s===n.key?(l=n,t._maybeAddToChanges(l,e)):(a=!0,null!==n&&(t._removeFromSeq(i,n),t._addToRemovals(n)),r.has(s)?(l=r.get(s),t._maybeAddToChanges(l,e)):(l=new ft(s),r.set(s,l),l.currentValue=e,t._addToAdditions(l))),a&&(t._isInRemovals(l)&&t._removeFromRemovals(l),null==o?t._mapHead=l:o._next=l),i=n,o=l,n=n&&n._next}),this._truncate(i,n),this.isDirty},DefaultKeyValueDiffer.prototype._reset=function(){if(this.isDirty){var e=void 0;for(e=this._previousMapHead=this._mapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=this._removalsTail=null}},DefaultKeyValueDiffer.prototype._truncate=function(e,t){for(;null!==t;){null===e?this._mapHead=null:e._next=null;var r=t._next;this._addToRemovals(t),e=t,t=r}for(var n=this._removalsHead;null!==n;n=n._nextRemoved)n.previousValue=n.currentValue,n.currentValue=null,this._records.delete(n.key)},DefaultKeyValueDiffer.prototype._maybeAddToChanges=function(e,t){looseIdentical(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))},DefaultKeyValueDiffer.prototype._isInRemovals=function(e){return e===this._removalsHead||null!==e._nextRemoved||null!==e._prevRemoved},DefaultKeyValueDiffer.prototype._addToRemovals=function(e){null===this._removalsHead?this._removalsHead=this._removalsTail=e:(this._removalsTail._nextRemoved=e,e._prevRemoved=this._removalsTail,this._removalsTail=e)},DefaultKeyValueDiffer.prototype._removeFromSeq=function(e,t){var r=t._next;null===e?this._mapHead=r:e._next=r,t._next=null},DefaultKeyValueDiffer.prototype._removeFromRemovals=function(e){var t=e._prevRemoved,r=e._nextRemoved;null===t?this._removalsHead=r:t._nextRemoved=r,null===r?this._removalsTail=t:r._prevRemoved=t,e._prevRemoved=e._nextRemoved=null},DefaultKeyValueDiffer.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},DefaultKeyValueDiffer.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},DefaultKeyValueDiffer.prototype.toString=function(){var e,t=[],r=[],n=[],i=[],o=[];for(e=this._mapHead;null!==e;e=e._next)t.push(stringify(e));for(e=this._previousMapHead;null!==e;e=e._nextPrevious)r.push(stringify(e));for(e=this._changesHead;null!==e;e=e._nextChanged)n.push(stringify(e));for(e=this._additionsHead;null!==e;e=e._nextAdded)i.push(stringify(e));for(e=this._removalsHead;null!==e;e=e._nextRemoved)o.push(stringify(e));return"map: "+t.join(", ")+"\nprevious: "+r.join(", ")+"\nadditions: "+i.join(", ")+"\nchanges: "+n.join(", ")+"\nremovals: "+o.join(", ")+"\n"},DefaultKeyValueDiffer.prototype._forEach=function(e,t){e instanceof Map?e.forEach(t):ce.forEach(e,t)},DefaultKeyValueDiffer}(),ft=function(){function KeyValueChangeRecord(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._nextAdded=null,this._nextRemoved=null,this._prevRemoved=null,this._nextChanged=null}return KeyValueChangeRecord.prototype.toString=function(){return looseIdentical(this.previousValue,this.currentValue)?stringify(this.key):stringify(this.key)+"["+stringify(this.previousValue)+"->"+stringify(this.currentValue)+"]"},KeyValueChangeRecord}(),mt=function(){function IterableDiffers(e){this.factories=e}return IterableDiffers.create=function(e,t){if(isPresent(t)){var r=ue.clone(t.factories);return e=e.concat(r),new IterableDiffers(e)}return new IterableDiffers(e)},IterableDiffers.extend=function(e){return{provide:IterableDiffers,useFactory:function(t){if(isBlank(t))throw new Error("Cannot extend IterableDiffers without a parent injector");return IterableDiffers.create(e,t)},deps:[[IterableDiffers,new m,new h]]}},IterableDiffers.prototype.find=function(e){var t=this.factories.find(function(t){return t.supports(e)});if(isPresent(t))return t;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+getTypeNameForDebugging(e)+"'")},IterableDiffers}(),gt=function(){function KeyValueDiffers(e){this.factories=e}return KeyValueDiffers.create=function(e,t){if(isPresent(t)){var r=ue.clone(t.factories);return e=e.concat(r),new KeyValueDiffers(e)}return new KeyValueDiffers(e)},KeyValueDiffers.extend=function(e){return{provide:KeyValueDiffers,useFactory:function(t){if(isBlank(t))throw new Error("Cannot extend KeyValueDiffers without a parent injector");return KeyValueDiffers.create(e,t)},deps:[[KeyValueDiffers,new m,new h]]}},KeyValueDiffers.prototype.find=function(e){var t=this.factories.find(function(t){return t.supports(e)});if(isPresent(t))return t;throw new Error("Cannot find a differ supporting object '"+e+"'")},KeyValueDiffers}(),yt={toString:function(){return"CD_INIT_VALUE"}},vt=function(){function WrappedValue(e){this.wrapped=e}return WrappedValue.wrap=function(e){return new WrappedValue(e)},WrappedValue}(),bt=function(){function ValueUnwrapper(){this.hasWrappedValue=!1}return ValueUnwrapper.prototype.unwrap=function(e){return e instanceof vt?(this.hasWrappedValue=!0,e.wrapped):e},ValueUnwrapper.prototype.reset=function(){this.hasWrappedValue=!1},ValueUnwrapper}(),_t=function(){function SimpleChange(e,t){this.previousValue=e,this.currentValue=t}return SimpleChange.prototype.isFirstChange=function(){return this.previousValue===yt},SimpleChange}(),wt=function(){function ChangeDetectorRef(){}return ChangeDetectorRef}(),xt=[new ht],St=[new at],Ct=new mt(St),kt=new gt(xt),Et=function(){function RenderComponentType(e,t,r,n,i,o){this.id=e,this.templateUrl=t,this.slotCount=r,this.encapsulation=n,this.styles=i,this.animations=o}return RenderComponentType}(),At=function(){function RenderDebugInfo(){}return Object.defineProperty(RenderDebugInfo.prototype,"injector",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"component",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"providerTokens",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"references",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"context",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"source",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),RenderDebugInfo}(),Pt=function(){function Renderer(){}return Renderer}(),Tt=function(){function RootRenderer(){}return RootRenderer}();t.SecurityContext,function(e){e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL"}(t.SecurityContext||(t.SecurityContext={}));var Mt,It,Ot,Rt=function(){function Sanitizer(){}return Sanitizer}(),Lt=function(){function ElementRef(e){this.nativeElement=e}return ElementRef}(),Nt=detectWTF(),Dt=Nt?createScope:function(e,t){return noopScope},Bt=Nt?leave:function(e,t){return t},Vt=Nt?startTimeRange:function(e,t){return null},Ft=Nt?endTimeRange:function(e){return null},jt=function(){function ViewContainerRef(){}return Object.defineProperty(ViewContainerRef.prototype,"element",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef.prototype,"injector",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef.prototype,"parentInjector",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef.prototype,"length",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),ViewContainerRef}(),Ut=function(){function ViewContainerRef_(e){this._element=e,this._createComponentInContainerScope=Dt("ViewContainerRef#createComponent()"),this._insertScope=Dt("ViewContainerRef#insert()"),this._removeScope=Dt("ViewContainerRef#remove()"),this._detachScope=Dt("ViewContainerRef#detach()")}return ViewContainerRef_.prototype.get=function(e){return this._element.nestedViews[e].ref},Object.defineProperty(ViewContainerRef_.prototype,"length",{get:function(){var e=this._element.nestedViews;return isPresent(e)?e.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef_.prototype,"element",{get:function(){return this._element.elementRef},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef_.prototype,"injector",{get:function(){return this._element.injector},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef_.prototype,"parentInjector",{get:function(){return this._element.parentInjector},enumerable:!0,configurable:!0}),ViewContainerRef_.prototype.createEmbeddedView=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=-1);var n=e.createEmbeddedView(t);return this.insert(n,r),n},ViewContainerRef_.prototype.createComponent=function(e,t,r,n){void 0===t&&(t=-1),void 0===r&&(r=null),void 0===n&&(n=null);var i=this._createComponentInContainerScope(),o=isPresent(r)?r:this._element.parentInjector,a=e.create(o,n);return this.insert(a.hostView,t),Bt(i,a)},ViewContainerRef_.prototype.insert=function(e,t){void 0===t&&(t=-1);var r=this._insertScope();t==-1&&(t=this.length);var n=e;return this._element.attachView(n.internalView,t),Bt(r,n)},ViewContainerRef_.prototype.move=function(e,t){var r=this._insertScope();if(t!=-1){var n=e;return this._element.moveView(n.internalView,t),Bt(r,n)}},ViewContainerRef_.prototype.indexOf=function(e){
return ue.indexOf(this._element.nestedViews,e.internalView)},ViewContainerRef_.prototype.remove=function(e){void 0===e&&(e=-1);var t=this._removeScope();e==-1&&(e=this.length-1);var r=this._element.detachView(e);r.destroy(),Bt(t)},ViewContainerRef_.prototype.detach=function(e){void 0===e&&(e=-1);var t=this._detachScope();e==-1&&(e=this.length-1);var r=this._element.detachView(e);return Bt(t,r.ref)},ViewContainerRef_.prototype.clear=function(){for(var e=this.length-1;e>=0;e--)this.remove(e)},ViewContainerRef_}();!function(e){e[e.HOST=0]="HOST",e[e.COMPONENT=1]="COMPONENT",e[e.EMBEDDED=2]="EMBEDDED"}(Ot||(Ot={}));var zt,Wt=function(){function AppElement(e,t,r,n){this.index=e,this.parentIndex=t,this.parentView=r,this.nativeElement=n,this.nestedViews=null,this.componentView=null}return Object.defineProperty(AppElement.prototype,"elementRef",{get:function(){return new Lt(this.nativeElement)},enumerable:!0,configurable:!0}),Object.defineProperty(AppElement.prototype,"vcRef",{get:function(){return new Ut(this)},enumerable:!0,configurable:!0}),AppElement.prototype.initComponent=function(e,t,r){this.component=e,this.componentConstructorViewQueries=t,this.componentView=r},Object.defineProperty(AppElement.prototype,"parentInjector",{get:function(){return this.parentView.injector(this.parentIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(AppElement.prototype,"injector",{get:function(){return this.parentView.injector(this.index)},enumerable:!0,configurable:!0}),AppElement.prototype.mapNestedViews=function(e,t){var r=[];return isPresent(this.nestedViews)&&this.nestedViews.forEach(function(n){n.clazz===e&&r.push(t(n))}),r},AppElement.prototype.moveView=function(e,t){var r=this.nestedViews.indexOf(e);if(e.type===Ot.COMPONENT)throw new Error("Component views can't be moved!");var n=this.nestedViews;null==n&&(n=[],this.nestedViews=n),ue.removeAt(n,r),ue.insert(n,t,e);var i;if(t>0){var o=n[t-1];i=o.lastRootNode}else i=this.nativeElement;isPresent(i)&&e.renderer.attachViewAfter(i,e.flatRootNodes),e.markContentChildAsMoved(this)},AppElement.prototype.attachView=function(e,t){if(e.type===Ot.COMPONENT)throw new Error("Component views can't be moved!");var r=this.nestedViews;null==r&&(r=[],this.nestedViews=r),ue.insert(r,t,e);var n;if(t>0){var i=r[t-1];n=i.lastRootNode}else n=this.nativeElement;isPresent(n)&&e.renderer.attachViewAfter(n,e.flatRootNodes),e.addToContentChildren(this)},AppElement.prototype.detachView=function(e){var t=ue.removeAt(this.nestedViews,e);if(t.type===Ot.COMPONENT)throw new Error("Component views can't be moved!");return t.detach(),t.removeFromContentChildren(this),t},AppElement}(),Ht=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},qt=function(e){function ExpressionChangedAfterItHasBeenCheckedError(t,r){var n="Expression has changed after it was checked. Previous value: '"+t+"'. Current value: '"+r+"'.";t===yt&&(n+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),e.call(this,n)}return Ht(ExpressionChangedAfterItHasBeenCheckedError,e),ExpressionChangedAfterItHasBeenCheckedError}(Y),Gt=function(e){function ViewWrappedError(t,r){e.call(this,"Error in "+r.source,t),this.context=r}return Ht(ViewWrappedError,e),ViewWrappedError}(X),Kt=function(e){function ViewDestroyedError(t){e.call(this,"Attempt to use a destroyed view: "+t)}return Ht(ViewDestroyedError,e),ViewDestroyedError}(Y),$t=function(){function ViewUtils(e,t,r){this._renderer=e,this._appId=t,this._nextCompTypeId=0,this.sanitizer=r}return ViewUtils.prototype.createRenderComponentType=function(e,t,r,n,i){return new Et(this._appId+"-"+this._nextCompTypeId++,e,t,r,n,i)},ViewUtils.prototype.renderComponent=function(e){return this._renderer.renderComponent(e)},ViewUtils.decorators=[{type:d}],ViewUtils.ctorParameters=[{type:Tt},{type:void 0,decorators:[{type:p,args:[$e]}]},{type:Rt}],ViewUtils}(),Qt=[],Yt=9,Xt=[],Zt={},Jt=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},er=function(){function ComponentRef(){}return Object.defineProperty(ComponentRef.prototype,"location",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"injector",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"instance",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"hostView",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"changeDetectorRef",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"componentType",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),ComponentRef}(),tr=function(e){function ComponentRef_(t,r){e.call(this),this._hostElement=t,this._componentType=r}return Jt(ComponentRef_,e),Object.defineProperty(ComponentRef_.prototype,"location",{get:function(){return this._hostElement.elementRef},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"injector",{get:function(){return this._hostElement.injector},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"instance",{get:function(){return this._hostElement.component},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"hostView",{get:function(){return this._hostElement.parentView.ref},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"changeDetectorRef",{get:function(){return this._hostElement.parentView.ref},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"componentType",{get:function(){return this._componentType},enumerable:!0,configurable:!0}),ComponentRef_.prototype.destroy=function(){this._hostElement.parentView.destroy()},ComponentRef_.prototype.onDestroy=function(e){this.hostView.onDestroy(e)},ComponentRef_}(er),rr=new Object,nr=function(){function ComponentFactory(e,t,r){this.selector=e,this._viewFactory=t,this._componentType=r}return Object.defineProperty(ComponentFactory.prototype,"componentType",{get:function(){return this._componentType},enumerable:!0,configurable:!0}),ComponentFactory.prototype.create=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n=e.get($t);isBlank(t)&&(t=[]);var i=this._viewFactory(n,e,null),o=i.create(rr,t,r);return new tr(o,this._componentType)},ComponentFactory}(),ir=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},or=function(e){function NoComponentFactoryError(t){e.call(this,"No component factory found for "+stringify(t)),this.component=t}return ir(NoComponentFactoryError,e),NoComponentFactoryError}(Y),ar=function(){function _NullComponentFactoryResolver(){}return _NullComponentFactoryResolver.prototype.resolveComponentFactory=function(e){throw new or(e)},_NullComponentFactoryResolver}(),sr=function(){function ComponentFactoryResolver(){}return ComponentFactoryResolver.NULL=new ar,ComponentFactoryResolver}(),lr=function(){function CodegenComponentFactoryResolver(e,t){this._parent=t,this._factories=new Map;for(var r=0;r<e.length;r++){var n=e[r];this._factories.set(n.componentType,n)}}return CodegenComponentFactoryResolver.prototype.resolveComponentFactory=function(e){var t=this._factories.get(e);return t||(t=this._parent.resolveComponentFactory(e)),t},CodegenComponentFactoryResolver}(),cr=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ur=function(e){function EventEmitter(t){void 0===t&&(t=!1),e.call(this),this.__isAsync=t}return cr(EventEmitter,e),EventEmitter.prototype.emit=function(t){e.prototype.next.call(this,t)},EventEmitter.prototype.subscribe=function(t,r,n){var i,o=function(e){return null},a=function(){return null};return t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},r&&(o=this.__isAsync?function(e){setTimeout(function(){return r(e)})}:function(e){r(e)}),n&&(a=this.__isAsync?function(){setTimeout(function(){return n()})}:function(){n()})),e.prototype.subscribe.call(this,i,o,a)},EventEmitter}(r.Subject),pr=function(){function NgZoneImpl(e){var t=this,r=e.trace,n=e.onEnter,i=e.onLeave,o=e.setMicrotask,a=e.setMacrotask,s=e.onError;if(this.onEnter=n,this.onLeave=i,this.setMicrotask=o,this.setMacrotask=a,this.onError=s,"undefined"==typeof Zone)throw new Error("Angular requires Zone.js prolyfill.");Zone.assertZonePatched(),this.outer=this.inner=Zone.current,Zone.wtfZoneSpec&&(this.inner=this.inner.fork(Zone.wtfZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this.inner=this.inner.fork(Zone.longStackTraceZoneSpec)),this.inner=this.inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,r,n,i,o,a){try{return t.onEnter(),e.invokeTask(n,i,o,a)}finally{t.onLeave()}},onInvoke:function(e,r,n,i,o,a,s){try{return t.onEnter(),e.invoke(n,i,o,a,s)}finally{t.onLeave()}},onHasTask:function(e,r,n,i){e.hasTask(n,i),r===n&&("microTask"==i.change?t.setMicrotask(i.microTask):"macroTask"==i.change&&t.setMacrotask(i.macroTask))},onHandleError:function(e,r,n,i){return e.handleError(n,i),t.onError(i),!1}})}return NgZoneImpl.isInAngularZone=function(){return Zone.current.get("isAngularZone")===!0},NgZoneImpl.prototype.runInner=function(e){return this.inner.run(e)},NgZoneImpl.prototype.runInnerGuarded=function(e){return this.inner.runGuarded(e)},NgZoneImpl.prototype.runOuter=function(e){return this.outer.run(e)},NgZoneImpl}(),hr=function(){function NgZone(e){var t=this,r=e.enableLongStackTrace,n=void 0!==r&&r;this._hasPendingMicrotasks=!1,this._hasPendingMacrotasks=!1,this._isStable=!0,this._nesting=0,this._onUnstable=new ur((!1)),this._onMicrotaskEmpty=new ur((!1)),this._onStable=new ur((!1)),this._onErrorEvents=new ur((!1)),this._zoneImpl=new pr({trace:n,onEnter:function(){t._nesting++,t._isStable&&(t._isStable=!1,t._onUnstable.emit(null))},onLeave:function(){t._nesting--,t._checkStable()},setMicrotask:function(e){t._hasPendingMicrotasks=e,t._checkStable()},setMacrotask:function(e){t._hasPendingMacrotasks=e},onError:function(e){return t._onErrorEvents.emit(e)}})}return NgZone.isInAngularZone=function(){return pr.isInAngularZone()},NgZone.assertInAngularZone=function(){if(!pr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},NgZone.assertNotInAngularZone=function(){if(pr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},NgZone.prototype._checkStable=function(){var e=this;if(0==this._nesting&&!this._hasPendingMicrotasks&&!this._isStable)try{this._nesting++,this._onMicrotaskEmpty.emit(null)}finally{if(this._nesting--,!this._hasPendingMicrotasks)try{this.runOutsideAngular(function(){return e._onStable.emit(null)})}finally{this._isStable=!0}}},Object.defineProperty(NgZone.prototype,"onUnstable",{get:function(){return this._onUnstable},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"onMicrotaskEmpty",{get:function(){return this._onMicrotaskEmpty},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"onStable",{get:function(){return this._onStable},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"onError",{get:function(){return this._onErrorEvents},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"isStable",{get:function(){return this._isStable},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"hasPendingMicrotasks",{get:function(){return this._hasPendingMicrotasks},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"hasPendingMacrotasks",{get:function(){return this._hasPendingMacrotasks},enumerable:!0,configurable:!0}),NgZone.prototype.run=function(e){return this._zoneImpl.runInner(e)},NgZone.prototype.runGuarded=function(e){return this._zoneImpl.runInnerGuarded(e)},NgZone.prototype.runOutsideAngular=function(e){return this._zoneImpl.runOuter(e)},NgZone}(),dr=function(){function Testability(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return Testability.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){hr.assertNotInAngularZone(),scheduleMicroTask(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},Testability.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},Testability.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},Testability.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},Testability.prototype._runCallbacksIfReady=function(){var e=this;this.isStable()?scheduleMicroTask(function(){for(;0!==e._callbacks.length;)e._callbacks.pop()(e._didWork);e._didWork=!1}):this._didWork=!0},Testability.prototype.whenStable=function(e){this._callbacks.push(e),this._runCallbacksIfReady()},Testability.prototype.getPendingRequestCount=function(){return this._pendingCount},Testability.prototype.findBindings=function(e,t,r){return[]},Testability.prototype.findProviders=function(e,t,r){return[]},Testability.decorators=[{type:d}],Testability.ctorParameters=[{type:hr}],Testability}(),fr=function(){function TestabilityRegistry(){this._applications=new re,gr.addToWindow(this)}return TestabilityRegistry.prototype.registerApplication=function(e,t){this._applications.set(e,t)},TestabilityRegistry.prototype.getTestability=function(e){return this._applications.get(e)},TestabilityRegistry.prototype.getAllTestabilities=function(){return le.values(this._applications)},TestabilityRegistry.prototype.getAllRootElements=function(){return le.keys(this._applications)},TestabilityRegistry.prototype.findTestabilityInTree=function(e,t){return void 0===t&&(t=!0),gr.findTestabilityInTree(this,e,t)},TestabilityRegistry.decorators=[{type:d}],TestabilityRegistry.ctorParameters=[],TestabilityRegistry}(),mr=function(){function _NoopGetTestability(){}return _NoopGetTestability.prototype.addToWindow=function(e){},_NoopGetTestability.prototype.findTestabilityInTree=function(e,t,r){return null},_NoopGetTestability}(),gr=new mr,yr=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},vr=!0,br=!1,_r=function(){function PlatformRef(){}return PlatformRef.prototype.bootstrapModuleFactory=function(e){throw unimplemented()},PlatformRef.prototype.bootstrapModule=function(e,t){throw void 0===t&&(t=[]),unimplemented()},Object.defineProperty(PlatformRef.prototype,"injector",{get:function(){throw unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformRef.prototype,"destroyed",{get:function(){throw unimplemented()},enumerable:!0,configurable:!0}),PlatformRef}(),wr=function(e){function PlatformRef_(t){e.call(this),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return yr(PlatformRef_,e),PlatformRef_.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(PlatformRef_.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformRef_.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),PlatformRef_.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");ue.clone(this._modules).forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},PlatformRef_.prototype.bootstrapModuleFactory=function(e){return this._bootstrapModuleFactoryWithZone(e,null)},PlatformRef_.prototype._bootstrapModuleFactoryWithZone=function(e,t){var r=this;return t||(t=new hr({enableLongStackTrace:isDevMode()})),t.run(function(){var n=ze.resolveAndCreate([{provide:hr,useValue:t}],r.injector),i=e.create(n),o=i.injector.get(qe,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(function(){return ue.remove(r._modules,i)}),t.onError.subscribe({next:function(e){o.handleError(e)}}),_callAndReportToErrorHandler(o,function(){var e=i.injector.get(Ke);return e.donePromise.then(function(){return r._moduleDoBootstrap(i),i})})})},PlatformRef_.prototype.bootstrapModule=function(e,t){return void 0===t&&(t=[]),this._bootstrapModuleWithZone(e,t,null)},PlatformRef_.prototype._bootstrapModuleWithZone=function(e,t,r,n){var i=this;void 0===t&&(t=[]);var o=this.injector.get(ot),a=o.createCompiler(t instanceof Array?t:[t]);return n?a.compileModuleAndAllComponentsAsync(e).then(function(e){var t=e.ngModuleFactory,o=e.componentFactories;return n(o),i._bootstrapModuleFactoryWithZone(t,r)}):a.compileModuleAsync(e).then(function(e){return i._bootstrapModuleFactoryWithZone(e,r)})},PlatformRef_.prototype._moduleDoBootstrap=function(e){var t=e.injector.get(xr);if(e.bootstrapFactories.length>0)e.bootstrapFactories.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+stringify(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(t)}},PlatformRef_.decorators=[{type:d}],PlatformRef_.ctorParameters=[{type:te}],PlatformRef_}(_r),xr=function(){function ApplicationRef(){}return Object.defineProperty(ApplicationRef.prototype,"componentTypes",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationRef.prototype,"components",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),ApplicationRef}(),Sr=function(e){function ApplicationRef_(t,r,n,i,o,a,s,l){var c=this;e.call(this),this._zone=t,this._console=r,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._testabilityRegistry=s,this._testability=l,this._bootstrapListeners=[],this._rootComponents=[],this._rootComponentTypes=[],this._changeDetectorRefs=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._enforceNoNewChanges=isDevMode(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run(function(){c.tick()})}})}return yr(ApplicationRef_,e),ApplicationRef_.prototype.registerChangeDetector=function(e){this._changeDetectorRefs.push(e)},ApplicationRef_.prototype.unregisterChangeDetector=function(e){ue.remove(this._changeDetectorRefs,e)},ApplicationRef_.prototype.bootstrap=function(e){var t=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");var r;r=e instanceof nr?e:this._componentFactoryResolver.resolveComponentFactory(e),this._rootComponentTypes.push(r.componentType);var n=r.create(this._injector,[],r.selector);n.onDestroy(function(){t._unloadComponent(n)});var i=n.injector.get(dr,null);return isPresent(i)&&n.injector.get(fr).registerApplication(n.location.nativeElement,i),this._loadComponent(n),isDevMode()&&this._console.log("Angular 2 is running in the development mode. Call enableProdMode() to enable the production mode."),n},ApplicationRef_.prototype._loadComponent=function(e){this._changeDetectorRefs.push(e.changeDetectorRef),this.tick(),this._rootComponents.push(e);var t=this._injector.get(Xe,[]).concat(this._bootstrapListeners);t.forEach(function(t){return t(e)})},ApplicationRef_.prototype._unloadComponent=function(e){ue.contains(this._rootComponents,e)&&(this.unregisterChangeDetector(e.changeDetectorRef),ue.remove(this._rootComponents,e))},ApplicationRef_.prototype.tick=function(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var e=ApplicationRef_._tickScope();try{this._runningTick=!0,this._changeDetectorRefs.forEach(function(e){return e.detectChanges()}),this._enforceNoNewChanges&&this._changeDetectorRefs.forEach(function(e){return e.checkNoChanges()})}finally{this._runningTick=!1,Bt(e)}},ApplicationRef_.prototype.ngOnDestroy=function(){ue.clone(this._rootComponents).forEach(function(e){return e.destroy()})},Object.defineProperty(ApplicationRef_.prototype,"componentTypes",{get:function(){return this._rootComponentTypes},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationRef_.prototype,"components",{get:function(){return this._rootComponents},enumerable:!0,configurable:!0}),ApplicationRef_._tickScope=Dt("ApplicationRef#tick()"),ApplicationRef_.decorators=[{type:d}],ApplicationRef_.ctorParameters=[{type:hr},{type:Je},{type:te},{type:qe},{type:sr},{type:Ke},{type:fr,decorators:[{type:h}]},{type:dr,decorators:[{type:h}]}],ApplicationRef_}(xr),Cr=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},kr=function(){function NgModuleRef(){}return Object.defineProperty(NgModuleRef.prototype,"injector",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(NgModuleRef.prototype,"componentFactoryResolver",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(NgModuleRef.prototype,"instance",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),NgModuleRef}(),Er=function(){function NgModuleFactory(e,t){this._injectorClass=e,this._moduleType=t}return Object.defineProperty(NgModuleFactory.prototype,"moduleType",{get:function(){return this._moduleType},enumerable:!0,configurable:!0}),NgModuleFactory.prototype.create=function(e){e||(e=te.NULL);var t=new this._injectorClass(e);return t.create(),t},NgModuleFactory}(),Ar=new Object,Pr=function(e){function NgModuleInjector(t,r,n){e.call(this,r,t.get(sr,sr.NULL)),this.parent=t,this.bootstrapFactories=n,this._destroyListeners=[],this._destroyed=!1}return Cr(NgModuleInjector,e),NgModuleInjector.prototype.create=function(){this.instance=this.createInternal()},NgModuleInjector.prototype.get=function(e,t){if(void 0===t&&(t=J),e===te||e===sr)return this;var r=this.getInternal(e,Ar);return r===Ar?this.parent.get(e,t):r},Object.defineProperty(NgModuleInjector.prototype,"injector",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(NgModuleInjector.prototype,"componentFactoryResolver",{get:function(){return this},enumerable:!0,configurable:!0}),NgModuleInjector.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+stringify(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,this.destroyInternal(),this._destroyListeners.forEach(function(e){return e()})},NgModuleInjector.prototype.onDestroy=function(e){this._destroyListeners.push(e)},NgModuleInjector}(lr),Tr=function(){function NgModuleFactoryLoader(){}return NgModuleFactoryLoader}(),Mr=new Map,Ir=function(){function QueryList(){this._dirty=!0,this._results=[],this._emitter=new ur}return Object.defineProperty(QueryList.prototype,"changes",{get:function(){return this._emitter},enumerable:!0,configurable:!0}),Object.defineProperty(QueryList.prototype,"length",{get:function(){return this._results.length},enumerable:!0,configurable:!0}),Object.defineProperty(QueryList.prototype,"first",{get:function(){return this._results[0]},enumerable:!0,configurable:!0}),Object.defineProperty(QueryList.prototype,"last",{get:function(){return this._results[this.length-1]},enumerable:!0,configurable:!0}),QueryList.prototype.map=function(e){return this._results.map(e)},QueryList.prototype.filter=function(e){return this._results.filter(e)},QueryList.prototype.reduce=function(e,t){return this._results.reduce(e,t)},QueryList.prototype.forEach=function(e){this._results.forEach(e)},QueryList.prototype.some=function(e){return this._results.some(e)},QueryList.prototype.toArray=function(){return this._results.slice()},QueryList.prototype[getSymbolIterator()]=function(){return this._results[getSymbolIterator()]()},QueryList.prototype.toString=function(){return this._results.toString()},QueryList.prototype.reset=function(e){this._results=ue.flatten(e),this._dirty=!1},QueryList.prototype.notifyOnChanges=function(){this._emitter.emit(this)},QueryList.prototype.setDirty=function(){this._dirty=!0},Object.defineProperty(QueryList.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),QueryList}(),Or="#",Rr="NgFactory",Lr=function(){function SystemJsNgModuleLoaderConfig(){}return SystemJsNgModuleLoaderConfig}(),Nr={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Dr=function(){function SystemJsNgModuleLoader(e,t){this._compiler=e,this._config=t||Nr}return SystemJsNgModuleLoader.prototype.load=function(e){var t=this._compiler instanceof nt;return t?this.loadFactory(e):this.loadAndCompile(e)},SystemJsNgModuleLoader.prototype.loadAndCompile=function(e){var t=this,r=e.split(Or),n=r[0],i=r[1];return void 0===i&&(i="default"),System.import(n).then(function(e){return e[i]}).then(function(e){return checkNotEmpty(e,n,i)}).then(function(e){return t._compiler.compileModuleAsync(e)})},SystemJsNgModuleLoader.prototype.loadFactory=function(e){var t=e.split(Or),r=t[0],n=t[1],i=Rr;return void 0===n&&(n="default",i=""),System.import(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(e){return e[n+i]}).then(function(e){return checkNotEmpty(e,r,n)})},SystemJsNgModuleLoader.decorators=[{type:d}],SystemJsNgModuleLoader.ctorParameters=[{type:nt},{type:Lr,decorators:[{type:h}]}],SystemJsNgModuleLoader}(),Br=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Vr=function(){function TemplateRef(){}return Object.defineProperty(TemplateRef.prototype,"elementRef",{get:function(){return null},enumerable:!0,configurable:!0}),TemplateRef}(),Fr=function(e){function TemplateRef_(t,r){e.call(this),this._appElement=t,this._viewFactory=r}return Br(TemplateRef_,e),TemplateRef_.prototype.createEmbeddedView=function(e){var t=this._viewFactory(this._appElement.parentView.viewUtils,this._appElement.parentInjector,this._appElement);return t.create(e||{},null,null),t.ref},Object.defineProperty(TemplateRef_.prototype,"elementRef",{get:function(){return this._appElement.elementRef},enumerable:!0,configurable:!0}),TemplateRef_}(Vr),jr=[],Ur=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},zr=function(){function ViewRef(){}return Object.defineProperty(ViewRef.prototype,"destroyed",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),ViewRef}(),Wr=function(e){function EmbeddedViewRef(){e.apply(this,arguments)}return Ur(EmbeddedViewRef,e),Object.defineProperty(EmbeddedViewRef.prototype,"context",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(EmbeddedViewRef.prototype,"rootNodes",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),EmbeddedViewRef}(zr),Hr=function(){function ViewRef_(e){this._view=e,this._view=e,this._originalMode=this._view.cdMode}return Object.defineProperty(ViewRef_.prototype,"internalView",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(ViewRef_.prototype,"rootNodes",{get:function(){return this._view.flatRootNodes},enumerable:!0,configurable:!0}),Object.defineProperty(ViewRef_.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(ViewRef_.prototype,"destroyed",{get:function(){return this._view.destroyed},enumerable:!0,configurable:!0}),ViewRef_.prototype.markForCheck=function(){this._view.markPathToRootAsCheckOnce()},ViewRef_.prototype.detach=function(){this._view.cdMode=k.Detached},ViewRef_.prototype.detectChanges=function(){this._view.detectChanges(!1),triggerQueuedAnimations()},ViewRef_.prototype.checkNoChanges=function(){this._view.detectChanges(!0)},ViewRef_.prototype.reattach=function(){this._view.cdMode=this._originalMode,this.markForCheck()},ViewRef_.prototype.onDestroy=function(e){this._view.disposables.push(e)},ViewRef_.prototype.destroy=function(){this._view.destroy()},ViewRef_}(),qr=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Gr=function(){function EventListener(e,t){this.name=e,this.callback=t}return EventListener}(),Kr=function(){function DebugNode(e,t,r){this._debugInfo=r,this.nativeNode=e,isPresent(t)&&t instanceof $r?t.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(DebugNode.prototype,"injector",{get:function(){return isPresent(this._debugInfo)?this._debugInfo.injector:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"componentInstance",{get:function(){return isPresent(this._debugInfo)?this._debugInfo.component:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"context",{get:function(){return isPresent(this._debugInfo)?this._debugInfo.context:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"references",{get:function(){return isPresent(this._debugInfo)?this._debugInfo.references:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"providerTokens",{get:function(){return isPresent(this._debugInfo)?this._debugInfo.providerTokens:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"source",{get:function(){return isPresent(this._debugInfo)?this._debugInfo.source:null},enumerable:!0,configurable:!0}),DebugNode}(),$r=function(e){function DebugElement(t,r,n){e.call(this,t,r,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}return qr(DebugElement,e),DebugElement.prototype.addChild=function(e){isPresent(e)&&(this.childNodes.push(e),e.parent=this)},DebugElement.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);t!==-1&&(e.parent=null,this.childNodes.splice(t,1))},DebugElement.prototype.insertChildrenAfter=function(e,t){var r=this.childNodes.indexOf(e);if(r!==-1){var n=this.childNodes.slice(0,r+1),i=this.childNodes.slice(r+1);this.childNodes=ue.concat(ue.concat(n,t),i);for(var o=0;o<t.length;++o){var a=t[o];isPresent(a.parent)&&a.parent.removeChild(a),a.parent=this}}},DebugElement.prototype.query=function(e){var t=this.queryAll(e);return t.length>0?t[0]:null},DebugElement.prototype.queryAll=function(e){var t=[];return _queryElementChildren(this,e,t),t},DebugElement.prototype.queryAllNodes=function(e){
var t=[];return _queryNodeChildren(this,e,t),t},Object.defineProperty(DebugElement.prototype,"children",{get:function(){var e=[];return this.childNodes.forEach(function(t){t instanceof DebugElement&&e.push(t)}),e},enumerable:!0,configurable:!0}),DebugElement.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(r){r.name==e&&r.callback(t)})},DebugElement}(Kr),Qr=new Map,Yr=[wr,{provide:_r,useExisting:wr},{provide:Te,useFactory:_reflector,deps:[]},{provide:Ae,useExisting:Te},fr,Je],Xr=createPlatformFactory(null,"core",Yr),Zr=new y("LocaleId"),Jr=new y("Translations"),en=new y("TranslationsFormat"),tn=function(){function ApplicationModule(){}return ApplicationModule.decorators=[{type:G,args:[{providers:[Sr,{provide:xr,useExisting:Sr},Ke,nt,Qe,$t,{provide:mt,useFactory:_iterableDiffersFactory},{provide:gt,useFactory:_keyValueDiffersFactory},{provide:Zr,useValue:"en-US"}]}]}],ApplicationModule.ctorParameters=[],ApplicationModule}(),rn="true",nn="*",on="*",an="void",sn=o.Math,ln=function(){function AnimationGroupPlayer(e){var t=this;this._players=e,this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this.parentPlayer=null;var r=0,n=this._players.length;0==n?scheduleMicroTask(function(){return t._onFinish()}):this._players.forEach(function(e){e.parentPlayer=t,e.onDone(function(){++r>=n&&t._onFinish()})})}return AnimationGroupPlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,isPresent(this.parentPlayer)||this.destroy(),this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},AnimationGroupPlayer.prototype.init=function(){this._players.forEach(function(e){return e.init()})},AnimationGroupPlayer.prototype.onStart=function(e){this._onStartFns.push(e)},AnimationGroupPlayer.prototype.onDone=function(e){this._onDoneFns.push(e)},AnimationGroupPlayer.prototype.hasStarted=function(){return this._started},AnimationGroupPlayer.prototype.play=function(){isPresent(this.parentPlayer)||this.init(),this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0),this._players.forEach(function(e){return e.play()})},AnimationGroupPlayer.prototype.pause=function(){this._players.forEach(function(e){return e.pause()})},AnimationGroupPlayer.prototype.restart=function(){this._players.forEach(function(e){return e.restart()})},AnimationGroupPlayer.prototype.finish=function(){this._onFinish(),this._players.forEach(function(e){return e.finish()})},AnimationGroupPlayer.prototype.destroy=function(){this._onFinish(),this._players.forEach(function(e){return e.destroy()})},AnimationGroupPlayer.prototype.reset=function(){this._players.forEach(function(e){return e.reset()})},AnimationGroupPlayer.prototype.setPosition=function(e){this._players.forEach(function(t){t.setPosition(e)})},AnimationGroupPlayer.prototype.getPosition=function(){var e=0;return this._players.forEach(function(t){var r=t.getPosition();e=sn.min(r,e)}),e},AnimationGroupPlayer}(),cn=function(){function AnimationKeyframe(e,t){this.offset=e,this.styles=t}return AnimationKeyframe}(),un=function(){function AnimationOutput(e,t,r){this.name=e,this.phase=t,this.fullPropertyName=r}return AnimationOutput}(),pn=function(){function AnimationPlayer(){}return Object.defineProperty(AnimationPlayer.prototype,"parentPlayer",{get:function(){throw new Error("NOT IMPLEMENTED: Base Class")},set:function(e){throw new Error("NOT IMPLEMENTED: Base Class")},enumerable:!0,configurable:!0}),AnimationPlayer}(),hn=function(){function NoOpAnimationPlayer(){var e=this;this._onDoneFns=[],this._onStartFns=[],this._started=!1,this.parentPlayer=null,scheduleMicroTask(function(){return e._onFinish()})}return NoOpAnimationPlayer.prototype._onFinish=function(){this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[]},NoOpAnimationPlayer.prototype.onStart=function(e){this._onStartFns.push(e)},NoOpAnimationPlayer.prototype.onDone=function(e){this._onDoneFns.push(e)},NoOpAnimationPlayer.prototype.hasStarted=function(){return this._started},NoOpAnimationPlayer.prototype.init=function(){},NoOpAnimationPlayer.prototype.play=function(){this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]),this._started=!0},NoOpAnimationPlayer.prototype.pause=function(){},NoOpAnimationPlayer.prototype.restart=function(){},NoOpAnimationPlayer.prototype.finish=function(){this._onFinish()},NoOpAnimationPlayer.prototype.destroy=function(){},NoOpAnimationPlayer.prototype.reset=function(){},NoOpAnimationPlayer.prototype.setPosition=function(e){},NoOpAnimationPlayer.prototype.getPosition=function(){return 0},NoOpAnimationPlayer}(),dn=function(){function AnimationSequencePlayer(e){var t=this;this._players=e,this._currentIndex=0,this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this.parentPlayer=null,this._players.forEach(function(e){e.parentPlayer=t}),this._onNext(!1)}return AnimationSequencePlayer.prototype._onNext=function(e){var t=this;if(!this._finished)if(0==this._players.length)this._activePlayer=new hn,scheduleMicroTask(function(){return t._onFinish()});else if(this._currentIndex>=this._players.length)this._activePlayer=new hn,this._onFinish();else{var r=this._players[this._currentIndex++];r.onDone(function(){return t._onNext(!0)}),this._activePlayer=r,e&&r.play()}},AnimationSequencePlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,isPresent(this.parentPlayer)||this.destroy(),this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},AnimationSequencePlayer.prototype.init=function(){this._players.forEach(function(e){return e.init()})},AnimationSequencePlayer.prototype.onStart=function(e){this._onStartFns.push(e)},AnimationSequencePlayer.prototype.onDone=function(e){this._onDoneFns.push(e)},AnimationSequencePlayer.prototype.hasStarted=function(){return this._started},AnimationSequencePlayer.prototype.play=function(){isPresent(this.parentPlayer)||this.init(),this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0),this._activePlayer.play()},AnimationSequencePlayer.prototype.pause=function(){this._activePlayer.pause()},AnimationSequencePlayer.prototype.restart=function(){this._players.length>0&&(this.reset(),this._players[0].restart())},AnimationSequencePlayer.prototype.reset=function(){this._players.forEach(function(e){return e.reset()})},AnimationSequencePlayer.prototype.finish=function(){this._onFinish(),this._players.forEach(function(e){return e.finish()})},AnimationSequencePlayer.prototype.destroy=function(){this._onFinish(),this._players.forEach(function(e){return e.destroy()})},AnimationSequencePlayer.prototype.setPosition=function(e){this._players[0].setPosition(e)},AnimationSequencePlayer.prototype.getPosition=function(){return this._players[0].getPosition()},AnimationSequencePlayer}(),fn=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},mn="*",gn=function(){function AnimationEntryMetadata(e,t){this.name=e,this.definitions=t}return AnimationEntryMetadata}(),yn=function(){function AnimationStateMetadata(){}return AnimationStateMetadata}(),vn=function(e){function AnimationStateDeclarationMetadata(t,r){e.call(this),this.stateNameExpr=t,this.styles=r}return fn(AnimationStateDeclarationMetadata,e),AnimationStateDeclarationMetadata}(yn),bn=function(e){function AnimationStateTransitionMetadata(t,r){e.call(this),this.stateChangeExpr=t,this.steps=r}return fn(AnimationStateTransitionMetadata,e),AnimationStateTransitionMetadata}(yn),_n=function(){function AnimationMetadata(){}return AnimationMetadata}(),wn=function(e){function AnimationKeyframesSequenceMetadata(t){e.call(this),this.steps=t}return fn(AnimationKeyframesSequenceMetadata,e),AnimationKeyframesSequenceMetadata}(_n),xn=function(e){function AnimationStyleMetadata(t,r){void 0===r&&(r=null),e.call(this),this.styles=t,this.offset=r}return fn(AnimationStyleMetadata,e),AnimationStyleMetadata}(_n),Sn=function(e){function AnimationAnimateMetadata(t,r){e.call(this),this.timings=t,this.styles=r}return fn(AnimationAnimateMetadata,e),AnimationAnimateMetadata}(_n),Cn=function(e){function AnimationWithStepsMetadata(){e.call(this)}return fn(AnimationWithStepsMetadata,e),Object.defineProperty(AnimationWithStepsMetadata.prototype,"steps",{get:function(){throw new Error("NOT IMPLEMENTED: Base Class")},enumerable:!0,configurable:!0}),AnimationWithStepsMetadata}(_n),kn=function(e){function AnimationSequenceMetadata(t){e.call(this),this._steps=t}return fn(AnimationSequenceMetadata,e),Object.defineProperty(AnimationSequenceMetadata.prototype,"steps",{get:function(){return this._steps},enumerable:!0,configurable:!0}),AnimationSequenceMetadata}(Cn),En=function(e){function AnimationGroupMetadata(t){e.call(this),this._steps=t}return fn(AnimationGroupMetadata,e),Object.defineProperty(AnimationGroupMetadata.prototype,"steps",{get:function(){return this._steps},enumerable:!0,configurable:!0}),AnimationGroupMetadata}(Cn),An=function(){function AnimationStyles(e){this.styles=e}return AnimationStyles}(),Pn=function(){function DebugDomRootRenderer(e){this._delegate=e}return DebugDomRootRenderer.prototype.renderComponent=function(e){return new Tn(this._delegate.renderComponent(e))},DebugDomRootRenderer}(),Tn=function(){function DebugDomRenderer(e){this._delegate=e}return DebugDomRenderer.prototype.selectRootElement=function(e,t){var r=this._delegate.selectRootElement(e,t),n=new $r(r,null,t);return indexDebugNode(n),r},DebugDomRenderer.prototype.createElement=function(e,t,r){var n=this._delegate.createElement(e,t,r),i=new $r(n,getDebugNode(e),r);return i.name=t,indexDebugNode(i),n},DebugDomRenderer.prototype.createViewRoot=function(e){return this._delegate.createViewRoot(e)},DebugDomRenderer.prototype.createTemplateAnchor=function(e,t){var r=this._delegate.createTemplateAnchor(e,t),n=new Kr(r,getDebugNode(e),t);return indexDebugNode(n),r},DebugDomRenderer.prototype.createText=function(e,t,r){var n=this._delegate.createText(e,t,r),i=new Kr(n,getDebugNode(e),r);return indexDebugNode(i),n},DebugDomRenderer.prototype.projectNodes=function(e,t){var r=getDebugNode(e);if(isPresent(r)&&r instanceof $r){var n=r;t.forEach(function(e){n.addChild(getDebugNode(e))})}this._delegate.projectNodes(e,t)},DebugDomRenderer.prototype.attachViewAfter=function(e,t){var r=getDebugNode(e);if(isPresent(r)){var n=r.parent;if(t.length>0&&isPresent(n)){var i=[];t.forEach(function(e){return i.push(getDebugNode(e))}),n.insertChildrenAfter(r,i)}}this._delegate.attachViewAfter(e,t)},DebugDomRenderer.prototype.detachView=function(e){e.forEach(function(e){var t=getDebugNode(e);isPresent(t)&&isPresent(t.parent)&&t.parent.removeChild(t)}),this._delegate.detachView(e)},DebugDomRenderer.prototype.destroyView=function(e,t){t.forEach(function(e){removeDebugNodeFromIndex(getDebugNode(e))}),this._delegate.destroyView(e,t)},DebugDomRenderer.prototype.listen=function(e,t,r){var n=getDebugNode(e);return isPresent(n)&&n.listeners.push(new Gr(t,r)),this._delegate.listen(e,t,r)},DebugDomRenderer.prototype.listenGlobal=function(e,t,r){return this._delegate.listenGlobal(e,t,r)},DebugDomRenderer.prototype.setElementProperty=function(e,t,r){var n=getDebugNode(e);isPresent(n)&&n instanceof $r&&(n.properties[t]=r),this._delegate.setElementProperty(e,t,r)},DebugDomRenderer.prototype.setElementAttribute=function(e,t,r){var n=getDebugNode(e);isPresent(n)&&n instanceof $r&&(n.attributes[t]=r),this._delegate.setElementAttribute(e,t,r)},DebugDomRenderer.prototype.setBindingDebugInfo=function(e,t,r){this._delegate.setBindingDebugInfo(e,t,r)},DebugDomRenderer.prototype.setElementClass=function(e,t,r){var n=getDebugNode(e);isPresent(n)&&n instanceof $r&&(n.classes[t]=r),this._delegate.setElementClass(e,t,r)},DebugDomRenderer.prototype.setElementStyle=function(e,t,r){var n=getDebugNode(e);isPresent(n)&&n instanceof $r&&(n.styles[t]=r),this._delegate.setElementStyle(e,t,r)},DebugDomRenderer.prototype.invokeElementMethod=function(e,t,r){this._delegate.invokeElementMethod(e,t,r)},DebugDomRenderer.prototype.setText=function(e,t){this._delegate.setText(e,t)},DebugDomRenderer.prototype.animate=function(e,t,r,n,i,o){return this._delegate.animate(e,t,r,n,i,o)},DebugDomRenderer}(),Mn=function(){function StaticNodeDebugInfo(e,t,r){this.providerTokens=e,this.componentToken=t,this.refTokens=r}return StaticNodeDebugInfo}(),In=function(){function DebugContext(e,t,r,n){this._view=e,this._nodeIndex=t,this._tplRow=r,this._tplCol=n}return Object.defineProperty(DebugContext.prototype,"_staticNodeInfo",{get:function(){return isPresent(this._nodeIndex)?this._view.staticNodeDebugInfos[this._nodeIndex]:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"component",{get:function(){var e=this._staticNodeInfo;return isPresent(e)&&isPresent(e.componentToken)?this.injector.get(e.componentToken):null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"componentRenderElement",{get:function(){for(var e=this._view;isPresent(e.declarationAppElement)&&e.type!==Ot.COMPONENT;)e=e.declarationAppElement.parentView;return isPresent(e.declarationAppElement)?e.declarationAppElement.nativeElement:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"injector",{get:function(){return this._view.injector(this._nodeIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"renderNode",{get:function(){return isPresent(this._nodeIndex)&&this._view.allNodes?this._view.allNodes[this._nodeIndex]:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"providerTokens",{get:function(){var e=this._staticNodeInfo;return isPresent(e)?e.providerTokens:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"source",{get:function(){return this._view.componentType.templateUrl+":"+this._tplRow+":"+this._tplCol},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"references",{get:function(){var e=this,t={},r=this._staticNodeInfo;if(isPresent(r)){var n=r.refTokens;ce.forEach(n,function(r,n){var i;i=isBlank(r)?e._view.allNodes?e._view.allNodes[e._nodeIndex]:null:e._view.injectorGet(r,e._nodeIndex,null),t[n]=i})}return t},enumerable:!0,configurable:!0}),DebugContext}(),On=function(){function AnimationTransitionEvent(e){var t=e.fromState,r=e.toState,n=e.totalTime;this.fromState=t,this.toState=r,this.totalTime=n}return AnimationTransitionEvent}(),Rn=function(){function ViewAnimationMap(){this._map=new re,this._allPlayers=[]}return Object.defineProperty(ViewAnimationMap.prototype,"length",{get:function(){return this.getAllPlayers().length},enumerable:!0,configurable:!0}),ViewAnimationMap.prototype.find=function(e,t){var r=this._map.get(e);if(isPresent(r))return r[t]},ViewAnimationMap.prototype.findAllPlayersByElement=function(e){var t=this._map.get(e);return t?ce.values(t):[]},ViewAnimationMap.prototype.set=function(e,t,r){var n=this._map.get(e);isPresent(n)||(n={});var i=n[t];isPresent(i)&&this.remove(e,t),n[t]=r,this._allPlayers.push(r),this._map.set(e,n)},ViewAnimationMap.prototype.getAllPlayers=function(){return this._allPlayers},ViewAnimationMap.prototype.remove=function(e,t){var r=this._map.get(e);if(isPresent(r)){var n=r[t];delete r[t];var i=this._allPlayers.indexOf(n);ue.removeAt(this._allPlayers,i),ce.isEmpty(r)&&this._map.delete(e)}},ViewAnimationMap}(),Ln=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Nn=new Object,Dn=function(e){function ElementInjector(t,r){e.call(this),this._view=t,this._nodeIndex=r}return Ln(ElementInjector,e),ElementInjector.prototype.get=function(e,t){void 0===t&&(t=J);var r=Nn;return r===Nn&&(r=this._view.injectorGet(e,this._nodeIndex,Nn)),r===Nn&&(r=this._view.parentInjector.get(e,t)),r},ElementInjector}(te),Bn=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Vn=Dt("AppView#check(ascii id)"),Fn=function(){function AppView(e,t,r,n,i,o,a){this.clazz=e,this.componentType=t,this.type=r,this.viewUtils=n,this.parentInjector=i,this.declarationAppElement=o,this.cdMode=a,this.contentChildren=[],this.viewChildren=[],this.viewContainerElement=null,this.numberOfChecks=0,this.animationPlayers=new Rn,this._animationListeners=new Map,this.ref=new Hr(this),r===Ot.COMPONENT||r===Ot.HOST?this.renderer=n.renderComponent(t):this.renderer=o.parentView.renderer}return Object.defineProperty(AppView.prototype,"destroyed",{get:function(){return this.cdMode===k.Destroyed},enumerable:!0,configurable:!0}),AppView.prototype.cancelActiveAnimation=function(e,t,r){if(void 0===r&&(r=!1),r)this.animationPlayers.findAllPlayersByElement(e).forEach(function(e){return e.destroy()});else{var n=this.animationPlayers.find(e,t);isPresent(n)&&n.destroy()}},AppView.prototype.queueAnimation=function(e,t,r,n,i,o){var a=this;queueAnimation(r);var s=new On({fromState:i,toState:o,totalTime:n});this.animationPlayers.set(e,t,r),r.onDone(function(){a.triggerAnimationOutput(e,t,"done",s),a.animationPlayers.remove(e,t)}),r.onStart(function(){a.triggerAnimationOutput(e,t,"start",s)})},AppView.prototype.triggerAnimationOutput=function(e,t,r,n){var i=this._animationListeners.get(e);if(isPresent(i)&&i.length)for(var o=0;o<i.length;o++){var a=i[o];if(a.output.name==t&&a.output.phase==r){a.handler(n);break}}},AppView.prototype.registerAnimationOutput=function(e,t,r){var n=new Un(t,r),i=this._animationListeners.get(e);isPresent(i)||this._animationListeners.set(e,i=[]),i.push(n)},AppView.prototype.create=function(e,t,r){this.context=e;var n;switch(this.type){case Ot.COMPONENT:n=ensureSlotCount(t,this.componentType.slotCount);break;case Ot.EMBEDDED:n=this.declarationAppElement.parentView.projectableNodes;break;case Ot.HOST:n=t}return this._hasExternalHostElement=isPresent(r),this.projectableNodes=n,this.createInternal(r)},AppView.prototype.createInternal=function(e){return null},AppView.prototype.init=function(e,t,r,n){this.rootNodesOrAppElements=e,this.allNodes=t,this.disposables=r,this.subscriptions=n,this.type===Ot.COMPONENT&&(this.declarationAppElement.parentView.viewChildren.push(this),this.dirtyParentQueriesInternal())},AppView.prototype.selectOrCreateHostElement=function(e,t,r){var n;return n=isPresent(t)?this.renderer.selectRootElement(t,r):this.renderer.createElement(null,e,r)},AppView.prototype.injectorGet=function(e,t,r){return this.injectorGetInternal(e,t,r)},AppView.prototype.injectorGetInternal=function(e,t,r){return r},AppView.prototype.injector=function(e){return isPresent(e)?new Dn(this,e):this.parentInjector},AppView.prototype.destroy=function(){this._hasExternalHostElement?this.renderer.detachView(this.flatRootNodes):isPresent(this.viewContainerElement)&&this.viewContainerElement.detachView(this.viewContainerElement.nestedViews.indexOf(this)),this._destroyRecurse()},AppView.prototype._destroyRecurse=function(){if(this.cdMode!==k.Destroyed){for(var e=this.contentChildren,t=0;t<e.length;t++)e[t]._destroyRecurse();e=this.viewChildren;for(var t=0;t<e.length;t++)e[t]._destroyRecurse();this.destroyLocal(),this.cdMode=k.Destroyed}},AppView.prototype.destroyLocal=function(){for(var e=this,t=this.type===Ot.COMPONENT?this.declarationAppElement.nativeElement:null,r=0;r<this.disposables.length;r++)this.disposables[r]();for(var r=0;r<this.subscriptions.length;r++)this.subscriptions[r].unsubscribe();if(this.destroyInternal(),this.dirtyParentQueriesInternal(),0==this.animationPlayers.length)this.renderer.destroyView(t,this.allNodes);else{var n=new ln(this.animationPlayers.getAllPlayers());n.onDone(function(){e.renderer.destroyView(t,e.allNodes)})}},AppView.prototype.destroyInternal=function(){},AppView.prototype.detachInternal=function(){},AppView.prototype.detach=function(){var e=this;if(this.detachInternal(),0==this.animationPlayers.length)this.renderer.detachView(this.flatRootNodes);else{var t=new ln(this.animationPlayers.getAllPlayers());t.onDone(function(){e.renderer.detachView(e.flatRootNodes)})}},Object.defineProperty(AppView.prototype,"changeDetectorRef",{get:function(){return this.ref},enumerable:!0,configurable:!0}),Object.defineProperty(AppView.prototype,"parent",{get:function(){return isPresent(this.declarationAppElement)?this.declarationAppElement.parentView:null},enumerable:!0,configurable:!0}),Object.defineProperty(AppView.prototype,"flatRootNodes",{get:function(){return flattenNestedViewRenderNodes(this.rootNodesOrAppElements)},enumerable:!0,configurable:!0}),Object.defineProperty(AppView.prototype,"lastRootNode",{get:function(){var e=this.rootNodesOrAppElements.length>0?this.rootNodesOrAppElements[this.rootNodesOrAppElements.length-1]:null;return _findLastRenderNode(e)},enumerable:!0,configurable:!0}),AppView.prototype.dirtyParentQueriesInternal=function(){},AppView.prototype.detectChanges=function(e){var t=Vn(this.clazz);this.cdMode!==k.Checked&&this.cdMode!==k.Errored&&(this.cdMode===k.Destroyed&&this.throwDestroyedError("detectChanges"),this.detectChangesInternal(e),this.cdMode===k.CheckOnce&&(this.cdMode=k.Checked),this.numberOfChecks++,Bt(t))},AppView.prototype.detectChangesInternal=function(e){this.detectContentChildrenChanges(e),this.detectViewChildrenChanges(e)},AppView.prototype.detectContentChildrenChanges=function(e){for(var t=0;t<this.contentChildren.length;++t){var r=this.contentChildren[t];r.cdMode!==k.Detached&&r.detectChanges(e)}},AppView.prototype.detectViewChildrenChanges=function(e){for(var t=0;t<this.viewChildren.length;++t){var r=this.viewChildren[t];r.cdMode!==k.Detached&&r.detectChanges(e)}},AppView.prototype.markContentChildAsMoved=function(e){this.dirtyParentQueriesInternal()},AppView.prototype.addToContentChildren=function(e){e.parentView.contentChildren.push(this),this.viewContainerElement=e,this.dirtyParentQueriesInternal()},AppView.prototype.removeFromContentChildren=function(e){ue.remove(e.parentView.contentChildren,this),this.dirtyParentQueriesInternal(),this.viewContainerElement=null},AppView.prototype.markAsCheckOnce=function(){this.cdMode=k.CheckOnce},AppView.prototype.markPathToRootAsCheckOnce=function(){for(var e=this;isPresent(e)&&e.cdMode!==k.Detached;){e.cdMode===k.Checked&&(e.cdMode=k.CheckOnce);var t=e.type===Ot.COMPONENT?e.declarationAppElement:e.viewContainerElement;e=isPresent(t)?t.parentView:null}},AppView.prototype.eventHandler=function(e){return e},AppView.prototype.throwDestroyedError=function(e){throw new Kt(e)},AppView}(),jn=function(e){function DebugAppView(t,r,n,i,o,a,s,l){e.call(this,t,r,n,i,o,a,s),this.staticNodeDebugInfos=l,this._currentDebugContext=null}return Bn(DebugAppView,e),DebugAppView.prototype.create=function(t,r,n){this._resetDebug();try{return e.prototype.create.call(this,t,r,n)}catch(i){throw this._rethrowWithContext(i),i}},DebugAppView.prototype.injectorGet=function(t,r,n){this._resetDebug();try{return e.prototype.injectorGet.call(this,t,r,n)}catch(i){throw this._rethrowWithContext(i),i}},DebugAppView.prototype.detach=function(){this._resetDebug();try{e.prototype.detach.call(this)}catch(t){throw this._rethrowWithContext(t),t}},DebugAppView.prototype.destroyLocal=function(){this._resetDebug();try{e.prototype.destroyLocal.call(this)}catch(t){throw this._rethrowWithContext(t),t}},DebugAppView.prototype.detectChanges=function(t){this._resetDebug();try{e.prototype.detectChanges.call(this,t)}catch(r){throw this._rethrowWithContext(r),r}},DebugAppView.prototype._resetDebug=function(){this._currentDebugContext=null},DebugAppView.prototype.debug=function(e,t,r){return this._currentDebugContext=new In(this,e,t,r)},DebugAppView.prototype._rethrowWithContext=function(e){if(!(e instanceof Gt)&&(e instanceof qt||(this.cdMode=k.Errored),isPresent(this._currentDebugContext)))throw new Gt(e,this._currentDebugContext)},DebugAppView.prototype.eventHandler=function(t){var r=this,n=e.prototype.eventHandler.call(this,t);return function(e){r._resetDebug();try{return n(e)}catch(t){throw r._rethrowWithContext(t),t}}},DebugAppView}(Fn),Un=function(){function _AnimationOutputWithHandler(e,t){this.output=e,this.handler=t}return _AnimationOutputWithHandler}(),zn={isDefaultChangeDetectionStrategy:isDefaultChangeDetectionStrategy,ChangeDetectorStatus:k,CHANGE_DETECTION_STRATEGY_VALUES:A,constructDependencies:constructDependencies,LifecycleHooks:E,LIFECYCLE_HOOKS_VALUES:N,ReflectorReader:Ae,CodegenComponentFactoryResolver:lr,AppElement:Wt,AppView:Fn,DebugAppView:jn,NgModuleInjector:Pr,registerModuleFactory:registerModuleFactory,ViewType:Ot,MAX_INTERPOLATION_VALUES:Yt,checkBinding:checkBinding,flattenNestedViewRenderNodes:flattenNestedViewRenderNodes,interpolate:interpolate,ViewUtils:$t,VIEW_ENCAPSULATION_VALUES:K,ViewMetadata:$,DebugContext:In,StaticNodeDebugInfo:Mn,devModeEqual:devModeEqual,UNINITIALIZED:yt,ValueUnwrapper:bt,RenderDebugInfo:At,TemplateRef_:Fr,ReflectionCapabilities:Ee,makeDecorator:makeDecorator,DebugDomRootRenderer:Pn,EMPTY_ARRAY:Xt,EMPTY_MAP:Zt,pureProxy1:pureProxy1,pureProxy2:pureProxy2,pureProxy3:pureProxy3,pureProxy4:pureProxy4,pureProxy5:pureProxy5,pureProxy6:pureProxy6,pureProxy7:pureProxy7,pureProxy8:pureProxy8,pureProxy9:pureProxy9,pureProxy10:pureProxy10,castByValue:castByValue,Console:Je,reflector:Me,Reflector:Te,NoOpAnimationPlayer:hn,AnimationPlayer:pn,AnimationSequencePlayer:dn,AnimationGroupPlayer:ln,AnimationKeyframe:cn,prepareFinalAnimationStyles:prepareFinalAnimationStyles,balanceAnimationKeyframes:balanceAnimationKeyframes,flattenStyles:flattenStyles,clearStyles:clearStyles,renderStyles:renderStyles,collectAndResolveStyles:collectAndResolveStyles,AnimationStyles:An,AnimationOutput:un,ANY_STATE:nn,DEFAULT_STATE:on,EMPTY_STATE:an,FILL_STYLE_FLAG:rn,ComponentStillLoadingError:tt};t.createPlatform=createPlatform,t.assertPlatform=assertPlatform,t.destroyPlatform=destroyPlatform,t.getPlatform=getPlatform,t.PlatformRef=_r,t.ApplicationRef=xr,t.enableProdMode=enableProdMode,t.isDevMode=isDevMode,t.createPlatformFactory=createPlatformFactory,t.APP_ID=$e,t.PACKAGE_ROOT_URL=Ze,t.PLATFORM_INITIALIZER=Ye,t.APP_BOOTSTRAP_LISTENER=Xe,t.APP_INITIALIZER=Ge,t.ApplicationInitStatus=Ke,t.DebugElement=$r,t.DebugNode=Kr,t.asNativeElements=asNativeElements,t.getDebugNode=getDebugNode,t.Testability=dr,t.TestabilityRegistry=fr,t.setTestabilityGetter=setTestabilityGetter,t.TRANSLATIONS=Jr,t.TRANSLATIONS_FORMAT=en,t.LOCALE_ID=Zr,t.ApplicationModule=tn,t.wtfCreateScope=Dt,t.wtfLeave=Bt,t.wtfStartTimeRange=Vt,t.wtfEndTimeRange=Ft,t.Type=ke,t.EventEmitter=ur,t.ErrorHandler=qe,t.AnimationTransitionEvent=On,t.AnimationPlayer=pn,t.Sanitizer=Rt,t.ANALYZE_FOR_ENTRY_COMPONENTS=v,t.Attribute=b,t.ContentChild=x,t.ContentChildren=w,t.Query=_,t.ViewChild=C,t.ViewChildren=S,t.Component=T,t.Directive=P,t.HostBinding=R,t.HostListener=L,t.Input=I,t.Output=O,t.Pipe=M,t.AfterContentChecked=U,t.AfterContentInit=j,t.AfterViewChecked=W,t.AfterViewInit=z,t.DoCheck=V,t.OnChanges=D,t.OnDestroy=F,t.OnInit=B,t.CUSTOM_ELEMENTS_SCHEMA=H,t.NO_ERRORS_SCHEMA=q,t.NgModule=G,t.Class=Class,t.forwardRef=forwardRef,t.resolveForwardRef=resolveForwardRef,t.Injector=te,t.ReflectiveInjector=ze,t.ResolvedReflectiveFactory=Le,t.ReflectiveKey=xe,t.OpaqueToken=y,t.Inject=p,t.Optional=h,t.Injectable=d,t.Self=f,t.SkipSelf=m,t.Host=g,t.NgZone=hr,t.RenderComponentType=Et,t.Renderer=Pt,t.RootRenderer=Tt,t.COMPILER_OPTIONS=it,t.Compiler=nt,t.CompilerFactory=ot,t.ModuleWithComponentFactories=rt,t.ComponentFactory=nr,t.ComponentRef=er,t.ComponentFactoryResolver=sr,t.ElementRef=Lt,t.NgModuleFactory=Er,t.NgModuleRef=kr,t.NgModuleFactoryLoader=Tr,t.getModuleFactory=getModuleFactory,t.QueryList=Ir,t.SystemJsNgModuleLoader=Dr,t.SystemJsNgModuleLoaderConfig=Lr,t.TemplateRef=Vr,t.ViewContainerRef=jt,t.EmbeddedViewRef=Wr,t.ViewRef=zr,t.ChangeDetectorRef=wt,t.CollectionChangeRecord=ct,t.DefaultIterableDiffer=lt,t.IterableDiffers=mt,t.KeyValueChangeRecord=ft,t.KeyValueDiffers=gt,t.SimpleChange=_t,t.WrappedValue=vt,t.platformCore=Xr,t.__core_private__=zn,t.AUTO_STYLE=mn,t.AnimationEntryMetadata=gn,t.AnimationStateMetadata=yn,t.AnimationStateDeclarationMetadata=vn,t.AnimationStateTransitionMetadata=bn,t.AnimationMetadata=_n,t.AnimationKeyframesSequenceMetadata=wn,t.AnimationStyleMetadata=xn,t.AnimationAnimateMetadata=Sn,t.AnimationWithStepsMetadata=Cn,t.AnimationSequenceMetadata=kn,t.AnimationGroupMetadata=En,t.animate=animate,t.group=group,t.sequence=sequence,t.style=style,t.state=state,t.keyframes=keyframes,t.transition=transition,t.trigger=trigger})}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(5),o=r(8),a=r(10),s=r(19),l=r(20),c=r(17),u=function(e){function SubjectSubscriber(t){e.call(this,t),this.destination=t}return n(SubjectSubscriber,e),SubjectSubscriber}(o.Subscriber);t.SubjectSubscriber=u;var p=function(e){function Subject(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(Subject,e),Subject.prototype[c.$$rxSubscriber]=function(){return new u(this)},Subject.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},Subject.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},Subject.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new l.SubjectSubscription(this,e))},Subject.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},Subject.create=function(e,t){return new h(e,t)},Subject}(i.Observable);t.Subject=p;var h=function(e){function AnonymousSubject(t,r){e.call(this),this.destination=t,this.source=r}return n(AnonymousSubject,e),AnonymousSubject.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},AnonymousSubject.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},AnonymousSubject.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},AnonymousSubject}(p);t.AnonymousSubject=h},function(e,t,r){"use strict";var n=r(6),i=r(7),o=r(18),a=function(){function Observable(e){this._isScalar=!1,e&&(this._subscribe=e)}return Observable.prototype.lift=function(e){var t=new Observable;return t.source=this,t.operator=e,t},Observable.prototype.subscribe=function(e,t,r){var n=this.operator,o=i.toSubscriber(e,t,r);if(n?n.call(o,this):o.add(this._subscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},Observable.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),
!t)throw new Error("no Promise impl found");return new t(function(t,n){var i=r.subscribe(function(t){if(i)try{e(t)}catch(r){n(r),i.unsubscribe()}else e(t)},n,t)})},Observable.prototype._subscribe=function(e){return this.source.subscribe(e)},Observable.prototype[o.$$observable]=function(){return this},Observable.create=function(e){return new Observable(e)},Observable}();t.Observable=a},function(e,t){(function(e){"use strict";var r={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};t.root=r[typeof self]&&self||r[typeof window]&&window;var n=r[typeof e]&&e;!n||n.global!==n&&n.window!==n||(t.root=n)}).call(t,function(){return this}())},function(e,t,r){"use strict";function toSubscriber(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.$$rxSubscriber])return e[i.$$rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber}var n=r(8),i=r(17);t.toSubscriber=toSubscriber},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(9),o=r(10),a=r(16),s=r(17),l=function(e){function Subscriber(t,r,n){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!t){this.destination=a.empty;break}if("object"==typeof t){t instanceof Subscriber?(this.destination=t,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,t,r,n)}}return n(Subscriber,e),Subscriber.prototype[s.$$rxSubscriber]=function(){return this},Subscriber.create=function(e,t,r){var n=new Subscriber(e,t,r);return n.syncErrorThrowable=!1,n},Subscriber.prototype.next=function(e){this.isStopped||this._next(e)},Subscriber.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(e){this.destination.next(e)},Subscriber.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber}(o.Subscription);t.Subscriber=l;var c=function(e){function SafeSubscriber(t,r,n,o){e.call(this),this._parent=t;var a,s=this;i.isFunction(r)?a=r:r&&(s=r,a=r.next,n=r.error,o=r.complete,i.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this)),this._context=s,this._next=a,this._error=n,this._complete=o}return n(SafeSubscriber,e),SafeSubscriber.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parent;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},SafeSubscriber.prototype.error=function(e){if(!this.isStopped){var t=this._parent;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},SafeSubscriber.prototype.complete=function(){if(!this.isStopped){var e=this._parent;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(r){throw this.unsubscribe(),r}},SafeSubscriber.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(n){return e.syncErrorValue=n,e.syncErrorThrown=!0,!0}return!1},SafeSubscriber.prototype._unsubscribe=function(){var e=this._parent;this._context=null,this._parent=null,e.unsubscribe()},SafeSubscriber}(l)},function(e,t){"use strict";function isFunction(e){return"function"==typeof e}t.isFunction=isFunction},function(e,t,r){"use strict";var n=r(11),i=r(12),o=r(9),a=r(13),s=r(14),l=r(15),c=function(){function Subscription(e){this.closed=!1,e&&(this._unsubscribe=e)}return Subscription.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){this.closed=!0;var r=this,c=r._unsubscribe,u=r._subscriptions;if(this._subscriptions=null,o.isFunction(c)){var p=a.tryCatch(c).call(this);p===s.errorObject&&(t=!0,(e=e||[]).push(s.errorObject.e))}if(n.isArray(u))for(var h=-1,d=u.length;++h<d;){var f=u[h];if(i.isObject(f)){var p=a.tryCatch(f.unsubscribe).call(f);if(p===s.errorObject){t=!0,e=e||[];var m=s.errorObject.e;m instanceof l.UnsubscriptionError?e=e.concat(m.errors):e.push(m)}}}if(t)throw new l.UnsubscriptionError(e)}},Subscription.prototype.add=function(e){if(!e||e===Subscription.EMPTY)return Subscription.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new Subscription(e);case"object":if(t.closed||"function"!=typeof t.unsubscribe)break;this.closed?t.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(t);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return t},Subscription.prototype.remove=function(e){if(null!=e&&e!==this&&e!==Subscription.EMPTY){var t=this._subscriptions;if(t){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}}},Subscription.EMPTY=function(e){return e.closed=!0,e}(new Subscription),Subscription}();t.Subscription=c},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function isObject(e){return null!=e&&"object"==typeof e}t.isObject=isObject},function(e,t,r){"use strict";function tryCatcher(){try{return n.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}function tryCatch(e){return n=e,tryCatcher}var n,i=r(14);t.tryCatch=tryCatch},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},n=function(e){function UnsubscriptionError(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(UnsubscriptionError,e),UnsubscriptionError}(Error);t.UnsubscriptionError=n},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,r){"use strict";var n=r(6),i=n.root.Symbol;t.$$rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber"},function(e,t,r){"use strict";function getSymbolObservable(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var n=r(6);t.getSymbolObservable=getSymbolObservable,t.$$observable=getSymbolObservable(n.root)},function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},n=function(e){function ObjectUnsubscribedError(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(ObjectUnsubscribedError,e),ObjectUnsubscribedError}(Error);t.ObjectUnsubscribedError=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(10),o=function(e){function SubjectSubscription(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return n(SubjectSubscription,e),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);r!==-1&&t.splice(r,1)}}},SubjectSubscription}(i.Subscription);t.SubjectSubscription=o},function(e,t,r){(function(e){!function(e,n){n(t,r(22),r(3))}(this,function(t,r,n){"use strict";function isPresent(e){return void 0!==e&&null!==e}function isBlank(e){return void 0===e||null===e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isFunction(e){return"function"==typeof e}function isArray(e){return Array.isArray(e)}function stringify(e){if("string"==typeof e)return e;if(void 0===e||null===e)return""+e;if(e.overriddenName)return e.overriddenName;if(e.name)return e.name;var t=e.toString(),r=t.indexOf("\n");return r===-1?t:t.substring(0,r)}function setValueOnPath(e,t,r){for(var n=t.split("."),i=e;n.length>1;){var o=n.shift();i=i.hasOwnProperty(o)&&isPresent(i[o])?i[o]:i[o]={}}void 0!==i&&null!==i||(i={}),i[n.shift()]=r}function _flattenArray(e,t){if(isPresent(e))for(var r=0;r<e.length;r++){var n=e[r];isArray(n)?_flattenArray(n,t):t.push(n)}return t}function camelCaseToDashCase(e){return p.replaceAllMapped(e,b,function(e){return"-"+e[1].toLowerCase()})}function dashCaseToCamelCase(e){return p.replaceAllMapped(e,_,function(e){return e[1].toUpperCase()})}function getDOM(){return w}function setRootDomAdapter(e){isBlank(w)&&(w=e)}function _computeStyle(e,t){return getDOM().getComputedStyle(e)[t]}function _populateStyles(e,t,r){var i={};return t.styles.forEach(function(e){y.forEach(e,function(e,t){var r=dashCaseToCamelCase(t);i[r]=e==n.AUTO_STYLE?e:e.toString()+_resolveStyleUnit(e,t,r)})}),y.forEach(r,function(e,t){isPresent(i[t])||(i[t]=e)}),i}function _resolveStyleUnit(e,t,r){var n="";if(_isPixelDimensionStyle(r)&&0!=e&&"0"!=e)if(isNumber(e))n="px";else if(0==_findDimensionalSuffix(e.toString()).length)throw new Error("Please provide a CSS unit value for "+t+":"+e);return n}function _findDimensionalSuffix(e){for(var t=0;t<e.length;t++){var r=p.charCodeAt(e,t);if(!(r>=k&&r<=E||r==A))return e.substring(t,e.length)}return""}function _isPixelDimensionStyle(e){switch(e){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}function getBaseElementHref(){return isBlank(D)&&(D=document.querySelector("base"),isBlank(D))?null:D.getAttribute("href")}function relativePath(e){return isBlank(B)&&(B=document.createElement("a")),B.setAttribute("href",e),"/"===B.pathname.charAt(0)?B.pathname:"/"+B.pathname}function parseCookieValue(e,t){t=encodeURIComponent(t);for(var r=0,n=e.split(";");r<n.length;r++){var i=n[r],o=i.indexOf("="),a=o==-1?[i,""]:[i.slice(0,o),i.slice(o+1)],s=a[0],l=a[1];if(s.trim()===t)return decodeURIComponent(l)}return null}function supportsState(){return!!window.history.pushState}function moveNodesAfterSibling(e,t){var r=getDOM().parentElement(e);if(t.length>0&&isPresent(r)){var n=getDOM().nextSibling(e);if(isPresent(n))for(var i=0;i<t.length;i++)getDOM().insertBefore(n,t[i]);else for(var i=0;i<t.length;i++)getDOM().appendChild(r,t[i])}}function appendNodes(e,t){for(var r=0;r<t.length;r++)getDOM().appendChild(e,t[r])}function decoratePreventDefault(e){return function(t){var r=e(t);r===!1&&getDOM().preventDefault(t)}}function _shimContentAttribute(e){return p.replaceAll(oe,re,e)}function _shimHostAttribute(e){return p.replaceAll(ie,re,e)}function _flattenStyles(e,t,r){for(var n=0;n<t.length;n++){var i=t[n];isArray(i)?_flattenStyles(e,i,r):(i=p.replaceAll(i,re,e),r.push(i))}return r}function splitNamespace(e){if(":"!=e[0])return[null,e];var t=e.match(ae);return[t[1],t[2]]}function inspectNativeElement(e){return n.getDebugNode(e)}function _createConditionalRootRenderer(e,t){return n.isDevMode()?_createRootRenderer(e,t):e}function _createRootRenderer(e,t){return getDOM().setGlobalVar(le,inspectNativeElement),getDOM().setGlobalVar(ce,y.merge(se,_ngProbeTokensToMap(t||[]))),new o(e)}function _ngProbeTokensToMap(e){return e.reduce(function(e,t){return e[t.name]=t.token,e},{})}function sanitizeUrl(e){return e=String(e),e.match(ke)||e.match(Ee)?e:(n.isDevMode()&&getDOM().log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function sanitizeSrcset(e){return e=String(e),e.split(",").map(function(e){return sanitizeUrl(e.trim())}).join(", ")}function getInertElement(){if(Ae)return Ae;Pe=getDOM();var e=Pe.createElement("template");if("content"in e)return e;var t=Pe.createHtmlDocument();if(Ae=Pe.querySelector(t,"body"),null==Ae){var r=Pe.createElement("html",t);Ae=Pe.createElement("body",t),Pe.appendChild(r,Ae),Pe.appendChild(t,r)}return Ae}function tagSet(e){for(var t={},r=0,n=e.split(",");r<n.length;r++){var i=n[r];t[i]=!0}return t}function merge(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var r={},n=0,i=e;n<i.length;n++){var o=i[n];for(var a in o)o.hasOwnProperty(a)&&(r[a]=!0)}return r}function encodeEntities(e){return e.replace(/&/g,"&amp;").replace(Ue,function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(r-56320)+65536)+";"}).replace(ze,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function stripCustomNsAttrs(e){Pe.attributeMap(e).forEach(function(t,r){"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||Pe.removeAttribute(e,r)});for(var t=0,r=Pe.childNodesAsList(e);t<r.length;t++){var n=r[t];Pe.isElementNode(n)&&stripCustomNsAttrs(n)}}function sanitizeHtml(e){try{var t=getInertElement(),r=e?String(e):"",i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,Pe.setInnerHTML(t,r),Pe.defaultDoc().documentMode&&stripCustomNsAttrs(t),o=Pe.getInnerHTML(t)}while(r!==o);for(var a=new je,s=a.sanitizeChildren(Pe.getTemplateContent(t)||t),l=Pe.getTemplateContent(t)||t,c=0,u=Pe.childNodesAsList(l);c<u.length;c++){var p=u[c];Pe.removeChild(l,p)}return n.isDevMode()&&a.sanitizedSomething&&Pe.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}catch(h){throw Ae=null,h}}function hasBalancedQuotes(e){for(var t=!0,r=!0,n=0;n<e.length;n++){var i=e.charAt(n);"'"===i&&r?t=!t:'"'===i&&t&&(r=!r)}return t&&r}function sanitizeStyle(e){if(e=String(e).trim(),!e)return"";var t=e.match($e);return t&&sanitizeUrl(t[1])===t[1]||e.match(Ke)&&hasBalancedQuotes(e)?e:(n.isDevMode()&&getDOM().log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}function initDomAdapter(){N.makeCurrent(),j.init()}function errorHandler(){return new n.ErrorHandler}function _document(){return getDOM().defaultDoc()}function _resolveDefaultAnimationDriver(){return getDOM().supportsWebAnimation()?new C:l.NOOP}function enableDebugTools(e){return ht.ng=new ut(e),e}function disableDebugTools(){delete ht.ng}var i,o=n.__core_private__.DebugDomRootRenderer,a=n.__core_private__.NoOpAnimationPlayer,s=function(){function _NoOpAnimationDriver(){}return _NoOpAnimationDriver.prototype.animate=function(e,t,r,n,i,o){return new a},_NoOpAnimationDriver}(),l=function(){function AnimationDriver(){}return AnimationDriver.NOOP=new s,AnimationDriver}();i="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:e:window;var c=i,u=c.Date;c.assert=function(e){};var p=function(){function StringWrapper(){}return StringWrapper.fromCharCode=function(e){return String.fromCharCode(e)},StringWrapper.charCodeAt=function(e,t){return e.charCodeAt(t)},StringWrapper.split=function(e,t){return e.split(t)},StringWrapper.equals=function(e,t){return e===t},StringWrapper.stripLeft=function(e,t){if(e&&e.length){for(var r=0,n=0;n<e.length&&e[n]==t;n++)r++;e=e.substring(r)}return e},StringWrapper.stripRight=function(e,t){if(e&&e.length){for(var r=e.length,n=e.length-1;n>=0&&e[n]==t;n--)r--;e=e.substring(0,r)}return e},StringWrapper.replace=function(e,t,r){return e.replace(t,r)},StringWrapper.replaceAll=function(e,t,r){return e.replace(t,r)},StringWrapper.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},StringWrapper.replaceAllMapped=function(e,t,r){return e.replace(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.splice(-2,2),r(e)})},StringWrapper.contains=function(e,t){return e.indexOf(t)!=-1},StringWrapper.compare=function(e,t){return e<t?-1:e>t?1:0},StringWrapper}(),h=function(){function NumberWrapper(){}return NumberWrapper.toFixed=function(e,t){return e.toFixed(t)},NumberWrapper.equal=function(e,t){return e===t},NumberWrapper.parseIntAutoRadix=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t},NumberWrapper.parseInt=function(e,t){if(10==t){if(/^(\-|\+)?[0-9]+$/.test(e))return parseInt(e,t)}else if(16==t){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(e))return parseInt(e,t)}else{var r=parseInt(e,t);if(!isNaN(r))return r}throw new Error("Invalid integer literal when parsing "+e+" in base "+t)},Object.defineProperty(NumberWrapper,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),NumberWrapper.isNumeric=function(e){return!isNaN(e-parseFloat(e))},NumberWrapper.isNaN=function(e){return isNaN(e)},NumberWrapper.isInteger=function(e){return Number.isInteger(e)},NumberWrapper}(),d=function(){function Json(){}return Json.parse=function(e){return c.JSON.parse(e)},Json.stringify=function(e){return c.JSON.stringify(e,null,2)},Json}(),f=function(){function DateWrapper(){}return DateWrapper.create=function(e,t,r,n,i,o,a){return void 0===t&&(t=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),new u(e,t-1,r,n,i,o,a)},DateWrapper.fromISOString=function(e){return new u(e)},DateWrapper.fromMillis=function(e){return new u(e)},DateWrapper.toMillis=function(e){return e.getTime()},DateWrapper.now=function(){return new u},DateWrapper.toJson=function(e){return e.toJSON()},DateWrapper}(),m=c.Map,g=c.Set,y=(function(){try{if(1===new m([[1,2]]).size)return function(e){return new m(e)}}catch(e){}return function(e){for(var t=new m,r=0;r<e.length;r++){var n=e[r];t.set(n[0],n[1])}return t}}(),function(){try{if(new m(new m))return function(e){return new m(e)}}catch(e){}return function(e){var t=new m;return e.forEach(function(e,r){t.set(r,e)}),t}}(),function(){return(new m).keys().next?function(e){for(var t,r=e.keys();!(t=r.next()).done;)e.set(t.value,null)}:function(e){e.forEach(function(t,r){e.set(r,null)})}}(),function(){try{if((new m).values().next)return function(e,t){return t?Array.from(e.values()):Array.from(e.keys())}}catch(e){}return function(e,t){var r=v.createFixedSize(e.size),n=0;return e.forEach(function(e,i){r[n]=t?e:i,n++}),r}}(),function(){function StringMapWrapper(){}return StringMapWrapper.create=function(){return{}},StringMapWrapper.contains=function(e,t){return e.hasOwnProperty(t)},StringMapWrapper.get=function(e,t){return e.hasOwnProperty(t)?e[t]:void 0},StringMapWrapper.set=function(e,t,r){e[t]=r},StringMapWrapper.keys=function(e){return Object.keys(e)},StringMapWrapper.values=function(e){return Object.keys(e).map(function(t){return e[t]})},StringMapWrapper.isEmpty=function(e){for(var t in e)return!1;return!0},StringMapWrapper.delete=function(e,t){delete e[t]},StringMapWrapper.forEach=function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];t(e[i],i)}},StringMapWrapper.merge=function(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];r[o]=e[o]}for(var a=0,s=Object.keys(t);a<s.length;a++){var o=s[a];r[o]=t[o]}return r},StringMapWrapper.equals=function(e,t){var r=Object.keys(e),n=Object.keys(t);if(r.length!=n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i];if(e[o]!==t[o])return!1}return!0},StringMapWrapper}()),v=function(){function ListWrapper(){}return ListWrapper.createFixedSize=function(e){return new Array(e)},ListWrapper.createGrowableSize=function(e){return new Array(e)},ListWrapper.clone=function(e){return e.slice(0)},ListWrapper.forEachWithIndex=function(e,t){for(var r=0;r<e.length;r++)t(e[r],r)},ListWrapper.first=function(e){return e?e[0]:null},ListWrapper.last=function(e){return e&&0!=e.length?e[e.length-1]:null},ListWrapper.indexOf=function(e,t,r){return void 0===r&&(r=0),e.indexOf(t,r)},ListWrapper.contains=function(e,t){return e.indexOf(t)!==-1},ListWrapper.reversed=function(e){var t=ListWrapper.clone(e);return t.reverse()},ListWrapper.concat=function(e,t){return e.concat(t)},ListWrapper.insert=function(e,t,r){e.splice(t,0,r)},ListWrapper.removeAt=function(e,t){var r=e[t];return e.splice(t,1),r},ListWrapper.removeAll=function(e,t){for(var r=0;r<t.length;++r){var n=e.indexOf(t[r]);e.splice(n,1)}},ListWrapper.remove=function(e,t){var r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)},ListWrapper.clear=function(e){e.length=0},ListWrapper.isEmpty=function(e){return 0==e.length},ListWrapper.fill=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=null),e.fill(t,r,null===n?e.length:n)},ListWrapper.equals=function(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},ListWrapper.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},ListWrapper.splice=function(e,t,r){return e.splice(t,r)},ListWrapper.sort=function(e,t){isPresent(t)?e.sort(t):e.sort()},ListWrapper.toString=function(e){return e.toString()},ListWrapper.toJSON=function(e){return JSON.stringify(e)},ListWrapper.maximum=function(e,t){if(0==e.length)return null;for(var r=null,n=-(1/0),i=0;i<e.length;i++){var o=e[i];if(!isBlank(o)){var a=t(o);a>n&&(r=o,n=a)}}return r},ListWrapper.flatten=function(e){var t=[];return _flattenArray(e,t),t},ListWrapper.addAll=function(e,t){for(var r=0;r<t.length;r++)e.push(t[r])},ListWrapper}(),b=(function(){var e=new g([1,2,3]);return 3===e.size?function(e){return new g(e)}:function(e){var t=new g(e);if(t.size!==e.length)for(var r=0;r<e.length;r++)t.add(e[r]);return t}}(),/([A-Z])/g),_=/-([a-z])/g,w=null,x=function(){function DomAdapter(){this.resourceLoaderType=null}return Object.defineProperty(DomAdapter.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),DomAdapter}(),S=function(){function WebAnimationsPlayer(e,t,r){this.element=e,this.keyframes=t,this.options=r,this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._initialized=!1,this._started=!1,this.parentPlayer=null,this._duration=r.duration}return WebAnimationsPlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,isPresent(this.parentPlayer)||this.destroy(),this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])},WebAnimationsPlayer.prototype.init=function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes.map(function(t){var r={};return y.forEach(t,function(t,i){r[i]=t==n.AUTO_STYLE?_computeStyle(e.element,i):t}),r});this._player=this._triggerWebAnimation(this.element,t,this.options),this.reset(),this._player.onfinish=function(){return e._onFinish()}}},WebAnimationsPlayer.prototype._triggerWebAnimation=function(e,t,r){return e.animate(t,r)},WebAnimationsPlayer.prototype.onStart=function(e){this._onStartFns.push(e)},WebAnimationsPlayer.prototype.onDone=function(e){this._onDoneFns.push(e)},WebAnimationsPlayer.prototype.play=function(){this.init(),this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0),this._player.play()},WebAnimationsPlayer.prototype.pause=function(){this.init(),this._player.pause()},WebAnimationsPlayer.prototype.finish=function(){this.init(),this._onFinish(),this._player.finish()},WebAnimationsPlayer.prototype.reset=function(){this._player.cancel()},WebAnimationsPlayer.prototype.restart=function(){this.reset(),this.play()},WebAnimationsPlayer.prototype.hasStarted=function(){return this._started},WebAnimationsPlayer.prototype.destroy=function(){this.reset(),this._onFinish()},Object.defineProperty(WebAnimationsPlayer.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0}),WebAnimationsPlayer.prototype.setPosition=function(e){this._player.currentTime=e*this.totalTime},WebAnimationsPlayer.prototype.getPosition=function(){return this._player.currentTime/this.totalTime},WebAnimationsPlayer}(),C=function(){function WebAnimationsDriver(){}return WebAnimationsDriver.prototype.animate=function(e,t,r,n,i,o){var a=[],s={};if(isPresent(t)&&t.styles.length>0&&(s=_populateStyles(e,t,{}),s.offset=0,a.push(s)),r.forEach(function(t){var r=_populateStyles(e,t.styles,s);r.offset=t.offset,a.push(r)}),1==a.length){var l=a[0];l.offset=null,a=[l,l]}var c={duration:n,delay:i,fill:"both"};return o&&(c.easing=o),new S(e,a,c)},WebAnimationsDriver}(),k=48,E=57,A=46,P=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},T=function(e){function GenericBrowserDomAdapter(){var t=this;e.call(this),this._animationPrefix=null,this._transitionEnd=null;try{var r=this.createElement("div",this.defaultDoc());if(isPresent(this.getStyle(r,"animationName")))this._animationPrefix="";else for(var n=["Webkit","Moz","O","ms"],i=0;i<n.length;i++)if(isPresent(this.getStyle(r,n[i]+"AnimationName"))){this._animationPrefix="-"+n[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};y.forEach(o,function(e,n){isPresent(t.getStyle(r,n))&&(t._transitionEnd=e)})}catch(a){this._animationPrefix=null,this._transitionEnd=null}}return P(GenericBrowserDomAdapter,e),GenericBrowserDomAdapter.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},GenericBrowserDomAdapter.prototype.resolveAndSetHref=function(e,t,r){e.href=null==r?t:t+"/../"+r},GenericBrowserDomAdapter.prototype.supportsDOMEvents=function(){return!0},GenericBrowserDomAdapter.prototype.supportsNativeShadowDOM=function(){return isFunction(this.defaultDoc().body.createShadowRoot)},GenericBrowserDomAdapter.prototype.getAnimationPrefix=function(){return isPresent(this._animationPrefix)?this._animationPrefix:""},GenericBrowserDomAdapter.prototype.getTransitionEnd=function(){return isPresent(this._transitionEnd)?this._transitionEnd:""},GenericBrowserDomAdapter.prototype.supportsAnimation=function(){return isPresent(this._animationPrefix)&&isPresent(this._transitionEnd)},GenericBrowserDomAdapter}(x),M=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},I={"class":"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},O=3,R={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},L={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"},N=function(e){function BrowserDomAdapter(){e.apply(this,arguments)}return M(BrowserDomAdapter,e),BrowserDomAdapter.prototype.parse=function(e){throw new Error("parse not implemented")},BrowserDomAdapter.makeCurrent=function(){setRootDomAdapter(new BrowserDomAdapter)},BrowserDomAdapter.prototype.hasProperty=function(e,t){return t in e},BrowserDomAdapter.prototype.setProperty=function(e,t,r){e[t]=r},BrowserDomAdapter.prototype.getProperty=function(e,t){return e[t]},BrowserDomAdapter.prototype.invoke=function(e,t,r){e[t].apply(e,r)},BrowserDomAdapter.prototype.logError=function(e){window.console.error?window.console.error(e):window.console.log(e)},BrowserDomAdapter.prototype.log=function(e){window.console.log(e)},BrowserDomAdapter.prototype.logGroup=function(e){window.console.group?(window.console.group(e),this.logError(e)):window.console.log(e)},BrowserDomAdapter.prototype.logGroupEnd=function(){window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(BrowserDomAdapter.prototype,"attrToPropMap",{get:function(){return I},enumerable:!0,configurable:!0}),BrowserDomAdapter.prototype.query=function(e){return document.querySelector(e)},BrowserDomAdapter.prototype.querySelector=function(e,t){return e.querySelector(t)},BrowserDomAdapter.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},BrowserDomAdapter.prototype.on=function(e,t,r){e.addEventListener(t,r,!1)},BrowserDomAdapter.prototype.onAndCancel=function(e,t,r){return e.addEventListener(t,r,!1),function(){e.removeEventListener(t,r,!1)}},BrowserDomAdapter.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},BrowserDomAdapter.prototype.createMouseEvent=function(e){var t=document.createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},BrowserDomAdapter.prototype.createEvent=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t},BrowserDomAdapter.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},BrowserDomAdapter.prototype.isPrevented=function(e){return e.defaultPrevented||isPresent(e.returnValue)&&!e.returnValue},BrowserDomAdapter.prototype.getInnerHTML=function(e){return e.innerHTML},BrowserDomAdapter.prototype.getTemplateContent=function(e){return"content"in e&&e instanceof HTMLTemplateElement?e.content:null},BrowserDomAdapter.prototype.getOuterHTML=function(e){return e.outerHTML},BrowserDomAdapter.prototype.nodeName=function(e){return e.nodeName},BrowserDomAdapter.prototype.nodeValue=function(e){return e.nodeValue},BrowserDomAdapter.prototype.type=function(e){return e.type},BrowserDomAdapter.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},BrowserDomAdapter.prototype.firstChild=function(e){return e.firstChild},BrowserDomAdapter.prototype.nextSibling=function(e){return e.nextSibling},BrowserDomAdapter.prototype.parentElement=function(e){return e.parentNode},BrowserDomAdapter.prototype.childNodes=function(e){return e.childNodes},BrowserDomAdapter.prototype.childNodesAsList=function(e){for(var t=e.childNodes,r=v.createFixedSize(t.length),n=0;n<t.length;n++)r[n]=t[n];return r},BrowserDomAdapter.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},BrowserDomAdapter.prototype.appendChild=function(e,t){e.appendChild(t)},BrowserDomAdapter.prototype.removeChild=function(e,t){e.removeChild(t)},BrowserDomAdapter.prototype.replaceChild=function(e,t,r){e.replaceChild(t,r)},BrowserDomAdapter.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},BrowserDomAdapter.prototype.insertBefore=function(e,t){e.parentNode.insertBefore(t,e)},BrowserDomAdapter.prototype.insertAllBefore=function(e,t){t.forEach(function(t){return e.parentNode.insertBefore(t,e)})},BrowserDomAdapter.prototype.insertAfter=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},BrowserDomAdapter.prototype.setInnerHTML=function(e,t){e.innerHTML=t},BrowserDomAdapter.prototype.getText=function(e){return e.textContent},BrowserDomAdapter.prototype.setText=function(e,t){e.textContent=t},BrowserDomAdapter.prototype.getValue=function(e){return e.value},BrowserDomAdapter.prototype.setValue=function(e,t){e.value=t},BrowserDomAdapter.prototype.getChecked=function(e){return e.checked},BrowserDomAdapter.prototype.setChecked=function(e,t){e.checked=t},BrowserDomAdapter.prototype.createComment=function(e){
return document.createComment(e)},BrowserDomAdapter.prototype.createTemplate=function(e){var t=document.createElement("template");return t.innerHTML=e,t},BrowserDomAdapter.prototype.createElement=function(e,t){return void 0===t&&(t=document),t.createElement(e)},BrowserDomAdapter.prototype.createElementNS=function(e,t,r){return void 0===r&&(r=document),r.createElementNS(e,t)},BrowserDomAdapter.prototype.createTextNode=function(e,t){return void 0===t&&(t=document),t.createTextNode(e)},BrowserDomAdapter.prototype.createScriptTag=function(e,t,r){void 0===r&&(r=document);var n=r.createElement("SCRIPT");return n.setAttribute(e,t),n},BrowserDomAdapter.prototype.createStyleElement=function(e,t){void 0===t&&(t=document);var r=t.createElement("style");return this.appendChild(r,this.createTextNode(e)),r},BrowserDomAdapter.prototype.createShadowRoot=function(e){return e.createShadowRoot()},BrowserDomAdapter.prototype.getShadowRoot=function(e){return e.shadowRoot},BrowserDomAdapter.prototype.getHost=function(e){return e.host},BrowserDomAdapter.prototype.clone=function(e){return e.cloneNode(!0)},BrowserDomAdapter.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},BrowserDomAdapter.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},BrowserDomAdapter.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},BrowserDomAdapter.prototype.addClass=function(e,t){e.classList.add(t)},BrowserDomAdapter.prototype.removeClass=function(e,t){e.classList.remove(t)},BrowserDomAdapter.prototype.hasClass=function(e,t){return e.classList.contains(t)},BrowserDomAdapter.prototype.setStyle=function(e,t,r){e.style[t]=r},BrowserDomAdapter.prototype.removeStyle=function(e,t){e.style[t]=null},BrowserDomAdapter.prototype.getStyle=function(e,t){return e.style[t]},BrowserDomAdapter.prototype.hasStyle=function(e,t,r){void 0===r&&(r=null);var n=this.getStyle(e,t)||"";return r?n==r:n.length>0},BrowserDomAdapter.prototype.tagName=function(e){return e.tagName},BrowserDomAdapter.prototype.attributeMap=function(e){for(var t=new Map,r=e.attributes,n=0;n<r.length;n++){var i=r[n];t.set(i.name,i.value)}return t},BrowserDomAdapter.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},BrowserDomAdapter.prototype.hasAttributeNS=function(e,t,r){return e.hasAttributeNS(t,r)},BrowserDomAdapter.prototype.getAttribute=function(e,t){return e.getAttribute(t)},BrowserDomAdapter.prototype.getAttributeNS=function(e,t,r){return e.getAttributeNS(t,r)},BrowserDomAdapter.prototype.setAttribute=function(e,t,r){e.setAttribute(t,r)},BrowserDomAdapter.prototype.setAttributeNS=function(e,t,r,n){e.setAttributeNS(t,r,n)},BrowserDomAdapter.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},BrowserDomAdapter.prototype.removeAttributeNS=function(e,t,r){e.removeAttributeNS(t,r)},BrowserDomAdapter.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},BrowserDomAdapter.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},BrowserDomAdapter.prototype.defaultDoc=function(){return document},BrowserDomAdapter.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},BrowserDomAdapter.prototype.getTitle=function(){return document.title},BrowserDomAdapter.prototype.setTitle=function(e){document.title=e||""},BrowserDomAdapter.prototype.elementMatches=function(e,t){var r=!1;return e instanceof HTMLElement&&(e.matches?r=e.matches(t):e.msMatchesSelector?r=e.msMatchesSelector(t):e.webkitMatchesSelector&&(r=e.webkitMatchesSelector(t))),r},BrowserDomAdapter.prototype.isTemplateElement=function(e){return e instanceof HTMLElement&&"TEMPLATE"==e.nodeName},BrowserDomAdapter.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},BrowserDomAdapter.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},BrowserDomAdapter.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},BrowserDomAdapter.prototype.hasShadowRoot=function(e){return isPresent(e.shadowRoot)&&e instanceof HTMLElement},BrowserDomAdapter.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},BrowserDomAdapter.prototype.importIntoDoc=function(e){var t=e;return this.isTemplateElement(e)&&(t=this.content(e)),document.importNode(t,!0)},BrowserDomAdapter.prototype.adoptNode=function(e){return document.adoptNode(e)},BrowserDomAdapter.prototype.getHref=function(e){return e.href},BrowserDomAdapter.prototype.getEventKey=function(e){var t=e.key;if(isBlank(t)){if(t=e.keyIdentifier,isBlank(t))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===O&&L.hasOwnProperty(t)&&(t=L[t]))}return R.hasOwnProperty(t)&&(t=R[t]),t},BrowserDomAdapter.prototype.getGlobalEventTarget=function(e){return"window"==e?window:"document"==e?document:"body"==e?document.body:void 0},BrowserDomAdapter.prototype.getHistory=function(){return window.history},BrowserDomAdapter.prototype.getLocation=function(){return window.location},BrowserDomAdapter.prototype.getBaseHref=function(){var e=getBaseElementHref();return isBlank(e)?null:relativePath(e)},BrowserDomAdapter.prototype.resetBaseElement=function(){D=null},BrowserDomAdapter.prototype.getUserAgent=function(){return window.navigator.userAgent},BrowserDomAdapter.prototype.setData=function(e,t,r){this.setAttribute(e,"data-"+t,r)},BrowserDomAdapter.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},BrowserDomAdapter.prototype.getComputedStyle=function(e){return getComputedStyle(e)},BrowserDomAdapter.prototype.setGlobalVar=function(e,t){setValueOnPath(c,e,t)},BrowserDomAdapter.prototype.supportsWebAnimation=function(){return isFunction(Element.prototype.animate)},BrowserDomAdapter.prototype.performanceNow=function(){return isPresent(window.performance)&&isPresent(window.performance.now)?window.performance.now():f.toMillis(f.now())},BrowserDomAdapter.prototype.supportsCookies=function(){return!0},BrowserDomAdapter.prototype.getCookie=function(e){return parseCookieValue(document.cookie,e)},BrowserDomAdapter.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},BrowserDomAdapter}(T),D=null,B=null,V=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},F=function(e){function BrowserPlatformLocation(){e.call(this),this._init()}return V(BrowserPlatformLocation,e),BrowserPlatformLocation.prototype._init=function(){this._location=getDOM().getLocation(),this._history=getDOM().getHistory()},Object.defineProperty(BrowserPlatformLocation.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),BrowserPlatformLocation.prototype.getBaseHrefFromDOM=function(){return getDOM().getBaseHref()},BrowserPlatformLocation.prototype.onPopState=function(e){getDOM().getGlobalEventTarget("window").addEventListener("popstate",e,!1)},BrowserPlatformLocation.prototype.onHashChange=function(e){getDOM().getGlobalEventTarget("window").addEventListener("hashchange",e,!1)},Object.defineProperty(BrowserPlatformLocation.prototype,"pathname",{get:function(){return this._location.pathname},set:function(e){this._location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(BrowserPlatformLocation.prototype,"search",{get:function(){return this._location.search},enumerable:!0,configurable:!0}),Object.defineProperty(BrowserPlatformLocation.prototype,"hash",{get:function(){return this._location.hash},enumerable:!0,configurable:!0}),BrowserPlatformLocation.prototype.pushState=function(e,t,r){supportsState()?this._history.pushState(e,t,r):this._location.hash=r},BrowserPlatformLocation.prototype.replaceState=function(e,t,r){supportsState()?this._history.replaceState(e,t,r):this._location.hash=r},BrowserPlatformLocation.prototype.forward=function(){this._history.forward()},BrowserPlatformLocation.prototype.back=function(){this._history.back()},BrowserPlatformLocation.decorators=[{type:n.Injectable}],BrowserPlatformLocation.ctorParameters=[],BrowserPlatformLocation}(r.PlatformLocation),j=function(){function BrowserGetTestability(){}return BrowserGetTestability.init=function(){n.setTestabilityGetter(new BrowserGetTestability)},BrowserGetTestability.prototype.addToWindow=function(e){c.getAngularTestability=function(t,r){void 0===r&&(r=!0);var n=e.findTestabilityInTree(t,r);if(null==n)throw new Error("Could not find testability for element.");return n},c.getAllAngularTestabilities=function(){return e.getAllTestabilities()},c.getAllAngularRootElements=function(){return e.getAllRootElements()};var t=function(e){var t=c.getAllAngularTestabilities(),r=t.length,n=!1,i=function(t){n=n||t,r--,0==r&&e(n)};t.forEach(function(e){e.whenStable(i)})};c.frameworkStabilizers||(c.frameworkStabilizers=v.createGrowableSize(0)),c.frameworkStabilizers.push(t)},BrowserGetTestability.prototype.findTestabilityInTree=function(e,t,r){if(null==t)return null;var n=e.getTestability(t);return isPresent(n)?n:r?getDOM().isShadowRoot(t)?this.findTestabilityInTree(e,getDOM().getHost(t),!0):this.findTestabilityInTree(e,getDOM().parentElement(t),!0):null},BrowserGetTestability}(),U=function(){function Title(){}return Title.prototype.getTitle=function(){return getDOM().getTitle()},Title.prototype.setTitle=function(e){getDOM().setTitle(e)},Title}(),z=new n.OpaqueToken("DocumentToken"),W=new n.OpaqueToken("EventManagerPlugins"),H=function(){function EventManager(e,t){var r=this;this._zone=t,e.forEach(function(e){return e.manager=r}),this._plugins=e.slice().reverse()}return EventManager.prototype.addEventListener=function(e,t,r){var n=this._findPluginFor(t);return n.addEventListener(e,t,r)},EventManager.prototype.addGlobalEventListener=function(e,t,r){var n=this._findPluginFor(t);return n.addGlobalEventListener(e,t,r)},EventManager.prototype.getZone=function(){return this._zone},EventManager.prototype._findPluginFor=function(e){for(var t=this._plugins,r=0;r<t.length;r++){var n=t[r];if(n.supports(e))return n}throw new Error("No event manager plugin found for event "+e)},EventManager.decorators=[{type:n.Injectable}],EventManager.ctorParameters=[{type:Array,decorators:[{type:n.Inject,args:[W]}]},{type:n.NgZone}],EventManager}(),q=function(){function EventManagerPlugin(){}return EventManagerPlugin.prototype.supports=function(e){return!1},EventManagerPlugin.prototype.addEventListener=function(e,t,r){throw"not implemented"},EventManagerPlugin.prototype.addGlobalEventListener=function(e,t,r){throw"not implemented"},EventManagerPlugin}(),G=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},K=function(){function SharedStylesHost(){this._styles=[],this._stylesSet=new Set}return SharedStylesHost.prototype.addStyles=function(e){var t=this,r=[];e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),t._styles.push(e),r.push(e))}),this.onStylesAdded(r)},SharedStylesHost.prototype.onStylesAdded=function(e){},SharedStylesHost.prototype.getAllStyles=function(){return this._styles},SharedStylesHost.decorators=[{type:n.Injectable}],SharedStylesHost.ctorParameters=[],SharedStylesHost}(),$=function(e){function DomSharedStylesHost(t){e.call(this),this._hostNodes=new Set,this._hostNodes.add(t.head)}return G(DomSharedStylesHost,e),DomSharedStylesHost.prototype._addStylesToHost=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];getDOM().appendChild(t,getDOM().createStyleElement(n))}},DomSharedStylesHost.prototype.addHost=function(e){this._addStylesToHost(this._styles,e),this._hostNodes.add(e)},DomSharedStylesHost.prototype.removeHost=function(e){this._hostNodes.delete(e)},DomSharedStylesHost.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach(function(r){t._addStylesToHost(e,r)})},DomSharedStylesHost.decorators=[{type:n.Injectable}],DomSharedStylesHost.ctorParameters=[{type:void 0,decorators:[{type:n.Inject,args:[z]}]}],DomSharedStylesHost}(K),Q=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Y={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},X="template bindings={}",Z=/^template bindings=(.*)$/,J=function(){function DomRootRenderer(e,t,r,n){this.document=e,this.eventManager=t,this.sharedStylesHost=r,this.animationDriver=n,this.registeredComponents=new Map}return DomRootRenderer.prototype.renderComponent=function(e){var t=this.registeredComponents.get(e.id);return isBlank(t)&&(t=new te(this,e,this.animationDriver),this.registeredComponents.set(e.id,t)),t},DomRootRenderer}(),ee=function(e){function DomRootRenderer_(t,r,n,i){e.call(this,t,r,n,i)}return Q(DomRootRenderer_,e),DomRootRenderer_.decorators=[{type:n.Injectable}],DomRootRenderer_.ctorParameters=[{type:void 0,decorators:[{type:n.Inject,args:[z]}]},{type:H},{type:$},{type:l}],DomRootRenderer_}(J),te=function(){function DomRenderer(e,t,r){this._rootRenderer=e,this.componentProto=t,this._animationDriver=r,this._styles=_flattenStyles(t.id,t.styles,[]),t.encapsulation!==n.ViewEncapsulation.Native&&this._rootRenderer.sharedStylesHost.addStyles(this._styles),this.componentProto.encapsulation===n.ViewEncapsulation.Emulated?(this._contentAttr=_shimContentAttribute(t.id),this._hostAttr=_shimHostAttribute(t.id)):(this._contentAttr=null,this._hostAttr=null)}return DomRenderer.prototype.selectRootElement=function(e,t){var r;if(isString(e)){if(r=getDOM().querySelector(this._rootRenderer.document,e),isBlank(r))throw new Error('The selector "'+e+'" did not match any elements')}else r=e;return getDOM().clearNodes(r),r},DomRenderer.prototype.createElement=function(e,t,r){var n=splitNamespace(t),i=isPresent(n[0])?getDOM().createElementNS(Y[n[0]],n[1]):getDOM().createElement(n[1]);return isPresent(this._contentAttr)&&getDOM().setAttribute(i,this._contentAttr,""),isPresent(e)&&getDOM().appendChild(e,i),i},DomRenderer.prototype.createViewRoot=function(e){var t;if(this.componentProto.encapsulation===n.ViewEncapsulation.Native){t=getDOM().createShadowRoot(e),this._rootRenderer.sharedStylesHost.addHost(t);for(var r=0;r<this._styles.length;r++)getDOM().appendChild(t,getDOM().createStyleElement(this._styles[r]))}else isPresent(this._hostAttr)&&getDOM().setAttribute(e,this._hostAttr,""),t=e;return t},DomRenderer.prototype.createTemplateAnchor=function(e,t){var r=getDOM().createComment(X);return isPresent(e)&&getDOM().appendChild(e,r),r},DomRenderer.prototype.createText=function(e,t,r){var n=getDOM().createTextNode(t);return isPresent(e)&&getDOM().appendChild(e,n),n},DomRenderer.prototype.projectNodes=function(e,t){isBlank(e)||appendNodes(e,t)},DomRenderer.prototype.attachViewAfter=function(e,t){moveNodesAfterSibling(e,t)},DomRenderer.prototype.detachView=function(e){for(var t=0;t<e.length;t++)getDOM().remove(e[t])},DomRenderer.prototype.destroyView=function(e,t){this.componentProto.encapsulation===n.ViewEncapsulation.Native&&isPresent(e)&&this._rootRenderer.sharedStylesHost.removeHost(getDOM().getShadowRoot(e))},DomRenderer.prototype.listen=function(e,t,r){return this._rootRenderer.eventManager.addEventListener(e,t,decoratePreventDefault(r))},DomRenderer.prototype.listenGlobal=function(e,t,r){return this._rootRenderer.eventManager.addGlobalEventListener(e,t,decoratePreventDefault(r))},DomRenderer.prototype.setElementProperty=function(e,t,r){getDOM().setProperty(e,t,r)},DomRenderer.prototype.setElementAttribute=function(e,t,r){var n,i=splitNamespace(t);isPresent(i[0])&&(t=i[0]+":"+i[1],n=Y[i[0]]),isPresent(r)?isPresent(n)?getDOM().setAttributeNS(e,n,t,r):getDOM().setAttribute(e,t,r):isPresent(n)?getDOM().removeAttributeNS(e,n,i[1]):getDOM().removeAttribute(e,t)},DomRenderer.prototype.setBindingDebugInfo=function(e,t,r){var n=camelCaseToDashCase(t);if(getDOM().isCommentNode(e)){var i=p.replaceAll(getDOM().getText(e),/\n/g,"").match(Z),o=d.parse(i[1]);o[n]=r,getDOM().setText(e,p.replace(X,"{}",d.stringify(o)))}else this.setElementAttribute(e,t,r)},DomRenderer.prototype.setElementClass=function(e,t,r){r?getDOM().addClass(e,t):getDOM().removeClass(e,t)},DomRenderer.prototype.setElementStyle=function(e,t,r){isPresent(r)?getDOM().setStyle(e,t,stringify(r)):getDOM().removeStyle(e,t)},DomRenderer.prototype.invokeElementMethod=function(e,t,r){getDOM().invoke(e,t,r)},DomRenderer.prototype.setText=function(e,t){getDOM().setText(e,t)},DomRenderer.prototype.animate=function(e,t,r,n,i,o){return this._animationDriver.animate(e,t,r,n,i,o)},DomRenderer}(),re=/%COMP%/g,ne="%COMP%",ie="_nghost-"+ne,oe="_ngcontent-"+ne,ae=/^:([^:]+):(.+)$/,se={ApplicationRef:n.ApplicationRef,NgZone:n.NgZone},le="ng.probe",ce="ng.coreTokens",ue=function(){function NgProbeToken(e,t){this.name=e,this.token=t}return NgProbeToken}(),pe=[{provide:n.RootRenderer,useFactory:_createConditionalRootRenderer,deps:[J,[ue,new n.Optional]]}],he=([{provide:n.RootRenderer,useFactory:_createRootRenderer,deps:[J,[ue,new n.Optional]]}],this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),de=function(e){function DomEventsPlugin(){e.apply(this,arguments)}return he(DomEventsPlugin,e),DomEventsPlugin.prototype.supports=function(e){return!0},DomEventsPlugin.prototype.addEventListener=function(e,t,r){var n=this.manager.getZone(),i=function(e){return n.runGuarded(function(){return r(e)})};return this.manager.getZone().runOutsideAngular(function(){return getDOM().onAndCancel(e,t,i)})},DomEventsPlugin.prototype.addGlobalEventListener=function(e,t,r){var n=getDOM().getGlobalEventTarget(e),i=this.manager.getZone(),o=function(e){return i.runGuarded(function(){return r(e)})};return this.manager.getZone().runOutsideAngular(function(){return getDOM().onAndCancel(n,t,o)})},DomEventsPlugin.decorators=[{type:n.Injectable}],DomEventsPlugin.ctorParameters=[],DomEventsPlugin}(q),fe=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},me={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ge=function(e){function HammerGesturesPluginCommon(){e.call(this)}return fe(HammerGesturesPluginCommon,e),HammerGesturesPluginCommon.prototype.supports=function(e){return e=e.toLowerCase(),y.contains(me,e)},HammerGesturesPluginCommon}(q),ye=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},ve=new n.OpaqueToken("HammerGestureConfig"),be=function(){function HammerGestureConfig(){this.events=[],this.overrides={}}return HammerGestureConfig.prototype.buildHammer=function(e){var t=new Hammer(e);t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0});for(var r in this.overrides)t.get(r).set(this.overrides[r]);return t},HammerGestureConfig.decorators=[{type:n.Injectable}],HammerGestureConfig.ctorParameters=[],HammerGestureConfig}(),_e=function(e){function HammerGesturesPlugin(t){e.call(this),this._config=t}return ye(HammerGesturesPlugin,e),HammerGesturesPlugin.prototype.supports=function(t){if(!e.prototype.supports.call(this,t)&&!this.isCustomEvent(t))return!1;if(!isPresent(window.Hammer))throw new Error("Hammer.js is not loaded, can not bind "+t+" event");return!0},HammerGesturesPlugin.prototype.addEventListener=function(e,t,r){var n=this,i=this.manager.getZone();return t=t.toLowerCase(),i.runOutsideAngular(function(){var o=n._config.buildHammer(e),a=function(e){i.runGuarded(function(){r(e)})};return o.on(t,a),function(){o.off(t,a)}})},HammerGesturesPlugin.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},HammerGesturesPlugin.decorators=[{type:n.Injectable}],HammerGesturesPlugin.ctorParameters=[{type:be,decorators:[{type:n.Inject,args:[ve]}]}],HammerGesturesPlugin}(ge),we=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},xe=["alt","control","meta","shift"],Se={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Ce=function(e){function KeyEventsPlugin(){e.call(this)}return we(KeyEventsPlugin,e),KeyEventsPlugin.prototype.supports=function(e){return isPresent(KeyEventsPlugin.parseEventName(e))},KeyEventsPlugin.prototype.addEventListener=function(e,t,r){var n=KeyEventsPlugin.parseEventName(t),i=KeyEventsPlugin.eventCallback(e,y.get(n,"fullKey"),r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return getDOM().onAndCancel(e,y.get(n,"domEventName"),i)})},KeyEventsPlugin.parseEventName=function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||!p.equals(r,"keydown")&&!p.equals(r,"keyup"))return null;var n=KeyEventsPlugin._normalizeKey(t.pop()),i="";if(xe.forEach(function(e){v.contains(t,e)&&(v.remove(t,e),i+=e+".")}),i+=n,0!=t.length||0===n.length)return null;var o=y.create();return y.set(o,"domEventName",r),y.set(o,"fullKey",i),o},KeyEventsPlugin.getEventFullKey=function(e){var t="",r=getDOM().getEventKey(e);return r=r.toLowerCase(),p.equals(r," ")?r="space":p.equals(r,".")&&(r="dot"),xe.forEach(function(n){if(n!=r){var i=y.get(Se,n);i(e)&&(t+=n+".")}}),t+=r},KeyEventsPlugin.eventCallback=function(e,t,r,n){return function(e){p.equals(KeyEventsPlugin.getEventFullKey(e),t)&&n.runGuarded(function(){return r(e)})}},KeyEventsPlugin._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},KeyEventsPlugin.decorators=[{type:n.Injectable}],KeyEventsPlugin.ctorParameters=[],KeyEventsPlugin}(q),ke=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Ee=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,Ae=null,Pe=null,Te=tagSet("area,br,col,hr,img,wbr"),Me=tagSet("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ie=tagSet("rp,rt"),Oe=merge(Ie,Me),Re=merge(Me,tagSet("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Le=merge(Ie,tagSet("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ne=merge(Te,Re,Le,Oe),De=tagSet("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Be=tagSet("srcset"),Ve=tagSet("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fe=merge(De,Be,Ve),je=function(){function SanitizingHtmlSerializer(){this.sanitizedSomething=!1,this.buf=[]}return SanitizingHtmlSerializer.prototype.sanitizeChildren=function(e){for(var t=e.firstChild;t;)if(Pe.isElementNode(t)?this.startElement(t):Pe.isTextNode(t)?this.chars(Pe.nodeValue(t)):this.sanitizedSomething=!0,Pe.firstChild(t))t=Pe.firstChild(t);else for(;t;){if(Pe.isElementNode(t)&&this.endElement(t),Pe.nextSibling(t)){t=Pe.nextSibling(t);break}t=Pe.parentElement(t)}return this.buf.join("")},SanitizingHtmlSerializer.prototype.startElement=function(e){var t=this,r=Pe.nodeName(e).toLowerCase();return Ne.hasOwnProperty(r)?(this.buf.push("<"),this.buf.push(r),Pe.attributeMap(e).forEach(function(e,r){var n=r.toLowerCase();return Fe.hasOwnProperty(n)?(De[n]&&(e=sanitizeUrl(e)),Be[n]&&(e=sanitizeSrcset(e)),t.buf.push(" "),t.buf.push(r),t.buf.push('="'),t.buf.push(encodeEntities(e)),void t.buf.push('"')):void(t.sanitizedSomething=!0)}),void this.buf.push(">")):void(this.sanitizedSomething=!0)},SanitizingHtmlSerializer.prototype.endElement=function(e){var t=Pe.nodeName(e).toLowerCase();Ne.hasOwnProperty(t)&&!Te.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},SanitizingHtmlSerializer.prototype.chars=function(e){this.buf.push(encodeEntities(e))},SanitizingHtmlSerializer}(),Ue=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ze=/([^\#-~ |!])/g,We="[-,.\"'%_!# a-zA-Z0-9]+",He="(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?",qe="(?:rgb|hsl)a?",Ge="\\([-0-9.%, a-zA-Z]+\\)",Ke=new RegExp("^("+We+"|(?:"+He+"|"+qe+")"+Ge+")$","g"),$e=/^url\(([^)]+)\)$/,Qe=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},Ye=function(){function DomSanitizer(){}return DomSanitizer}(),Xe=function(e){function DomSanitizerImpl(){e.apply(this,arguments)}return Qe(DomSanitizerImpl,e),DomSanitizerImpl.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case n.SecurityContext.NONE:return t;case n.SecurityContext.HTML:return t instanceof Je?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),sanitizeHtml(String(t)));case n.SecurityContext.STYLE:return t instanceof et?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),sanitizeStyle(t));case n.SecurityContext.SCRIPT:if(t instanceof tt)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case n.SecurityContext.URL:return t instanceof nt||t instanceof rt?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),sanitizeUrl(String(t)));case n.SecurityContext.RESOURCE_URL:if(t instanceof nt)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},DomSanitizerImpl.prototype.checkNotSafeValue=function(e,t){if(e instanceof Ze)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},DomSanitizerImpl.prototype.bypassSecurityTrustHtml=function(e){return new Je(e)},DomSanitizerImpl.prototype.bypassSecurityTrustStyle=function(e){return new et(e)},DomSanitizerImpl.prototype.bypassSecurityTrustScript=function(e){return new tt(e)},DomSanitizerImpl.prototype.bypassSecurityTrustUrl=function(e){return new rt(e)},DomSanitizerImpl.prototype.bypassSecurityTrustResourceUrl=function(e){return new nt(e)},DomSanitizerImpl.decorators=[{type:n.Injectable}],DomSanitizerImpl.ctorParameters=[],DomSanitizerImpl}(Ye),Ze=function(){function SafeValueImpl(e){this.changingThisBreaksApplicationSecurity=e}return SafeValueImpl.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},SafeValueImpl}(),Je=function(e){function SafeHtmlImpl(){e.apply(this,arguments)}return Qe(SafeHtmlImpl,e),SafeHtmlImpl.prototype.getTypeName=function(){return"HTML"},SafeHtmlImpl}(Ze),et=function(e){function SafeStyleImpl(){e.apply(this,arguments)}return Qe(SafeStyleImpl,e),SafeStyleImpl.prototype.getTypeName=function(){return"Style"},SafeStyleImpl}(Ze),tt=function(e){function SafeScriptImpl(){e.apply(this,arguments)}return Qe(SafeScriptImpl,e),SafeScriptImpl.prototype.getTypeName=function(){return"Script"},SafeScriptImpl}(Ze),rt=function(e){function SafeUrlImpl(){e.apply(this,arguments)}return Qe(SafeUrlImpl,e),SafeUrlImpl.prototype.getTypeName=function(){return"URL"},SafeUrlImpl}(Ze),nt=function(e){function SafeResourceUrlImpl(){e.apply(this,arguments)}return Qe(SafeResourceUrlImpl,e),SafeResourceUrlImpl.prototype.getTypeName=function(){return"ResourceURL"},SafeResourceUrlImpl}(Ze),it=[{provide:n.PLATFORM_INITIALIZER,useValue:initDomAdapter,multi:!0},{provide:r.PlatformLocation,useClass:F}],ot=[{provide:n.Sanitizer,useExisting:Ye},{provide:Ye,useClass:Xe}],at=n.createPlatformFactory(n.platformCore,"browser",it),st=function(){function BrowserModule(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return BrowserModule.decorators=[{type:n.NgModule,args:[{providers:[ot,{provide:n.ErrorHandler,useFactory:errorHandler,deps:[]},{provide:z,useFactory:_document,deps:[]},{provide:W,useClass:de,multi:!0},{provide:W,useClass:Ce,multi:!0},{provide:W,useClass:_e,multi:!0},{provide:ve,useClass:be},{provide:J,useClass:ee},{provide:n.RootRenderer,useExisting:J},{provide:K,useExisting:$},{provide:l,useFactory:_resolveDefaultAnimationDriver},$,n.Testability,H,pe,U],exports:[r.CommonModule,n.ApplicationModule]}]}],BrowserModule.ctorParameters=[{type:BrowserModule,decorators:[{type:n.Optional},{type:n.SkipSelf}]}],BrowserModule}(),lt="undefined"!=typeof window&&window||{},ct=function(){function ChangeDetectionPerfRecord(e,t){this.msPerTick=e,this.numTicks=t}return ChangeDetectionPerfRecord}(),ut=function(){function AngularTools(e){this.profiler=new pt(e)}return AngularTools}(),pt=function(){function AngularProfiler(e){this.appRef=e.injector.get(n.ApplicationRef)}return AngularProfiler.prototype.timeChangeDetection=function(e){var t=isPresent(e)&&e.record,r="Change Detection",n=isPresent(lt.console.profile);t&&n&&lt.console.profile(r);for(var i=getDOM().performanceNow(),o=0;o<5||getDOM().performanceNow()-i<500;)this.appRef.tick(),o++;var a=getDOM().performanceNow();t&&n&&lt.console.profileEnd(r);var s=(a-i)/o;return lt.console.log("ran "+o+" change detection cycles"),lt.console.log(h.toFixed(s,2)+" ms per check"),new ct(s,o)},AngularProfiler}(),ht=c,dt=function(){function By(){}return By.all=function(){return function(e){return!0}},By.css=function(e){return function(t){return!!isPresent(t.nativeElement)&&getDOM().elementMatches(t.nativeElement,e)}},By.directive=function(e){return function(t){return t.providerTokens.indexOf(e)!==-1}},By}(),ft={BrowserPlatformLocation:F,DomAdapter:x,BrowserDomAdapter:N,BrowserGetTestability:j,getDOM:getDOM,setRootDomAdapter:setRootDomAdapter,DomRootRenderer_:ee,DomRootRenderer:J,DomSharedStylesHost:$,SharedStylesHost:K,ELEMENT_PROBE_PROVIDERS:pe,DomEventsPlugin:de,KeyEventsPlugin:Ce,HammerGesturesPlugin:_e,initDomAdapter:initDomAdapter,INTERNAL_BROWSER_PLATFORM_PROVIDERS:it,BROWSER_SANITIZATION_PROVIDERS:ot};t.BrowserModule=st,t.platformBrowser=at,t.Title=U,t.disableDebugTools=disableDebugTools,t.enableDebugTools=enableDebugTools,t.AnimationDriver=l,t.By=dt,t.NgProbeToken=ue,t.DOCUMENT=z,t.EVENT_MANAGER_PLUGINS=W,t.EventManager=H,t.HAMMER_GESTURE_CONFIG=ve,t.HammerGestureConfig=be,t.DomSanitizer=Ye,t.__platform_browser_private__=ft})}).call(t,function(){return this}())},function(e,t,r){(function(e){!function(e,n){n(t,r(3))}(this,function(t,r){"use strict";function getTypeNameForDebugging(e){return e.name?e.name:typeof e}function isPresent(e){return void 0!==e&&null!==e}function isBlank(e){return void 0===e||null===e}function isNumber(e){return"number"==typeof e}function isString(e){
return"string"==typeof e}function isFunction(e){return"function"==typeof e}function isStringMap(e){return"object"==typeof e&&null!==e}function isPromise(e){return isPresent(e)&&isFunction(e.then)}function isArray(e){return Array.isArray(e)}function isDate(e){return e instanceof l&&!isNaN(e.valueOf())}function stringify(e){if("string"==typeof e)return e;if(void 0===e||null===e)return""+e;if(e.overriddenName)return e.overriddenName;if(e.name)return e.name;var t=e.toString(),r=t.indexOf("\n");return r===-1?t:t.substring(0,r)}function isJsObject(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function getSymbolIterator(){if(isBlank(f))if(isPresent(n.Symbol)&&isPresent(Symbol.iterator))f=Symbol.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),t=0;t<e.length;++t){var r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(f=r)}return f}function _stripBaseHref(e,t){return e.length>0&&t.startsWith(e)?t.substring(e.length):t}function _stripIndexHtml(e){return/\/index.html$/g.test(e)?e.substring(0,e.length-11):e}function getPluralCategory(e,t,r){var n="="+e;return t.indexOf(n)>-1?n:r.getPluralCategory(e)}function getPluralCase(e,t){"string"==typeof t&&(t=parseInt(t,10));var r=t,n=r.toString().replace(/^[^.]*\.?/,""),i=Math.floor(Math.abs(r)),o=n.length,a=parseInt(n,10),s=parseInt(r.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0,l=e.split("-")[0].toLowerCase();switch(l){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===r?c.One:c.Other;case"agq":case"bas":case"cu":case"dav":case"dje":case"dua":case"dyo":case"ebu":case"ewo":case"guz":case"kam":case"khq":case"ki":case"kln":case"kok":case"ksf":case"lrc":case"lu":case"luo":case"luy":case"mer":case"mfe":case"mgh":case"mua":case"mzn":case"nmg":case"nus":case"qu":case"rn":case"rw":case"sbp":case"twq":case"vai":case"yav":case"yue":case"zgh":case"ak":case"ln":case"mg":case"pa":case"ti":return r===Math.floor(r)&&r>=0&&r<=1?c.One:c.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===i||1===r?c.One:c.Other;case"ar":return 0===r?c.Zero:1===r?c.One:2===r?c.Two:r%100===Math.floor(r%100)&&r%100>=3&&r%100<=10?c.Few:r%100===Math.floor(r%100)&&r%100>=11&&r%100<=99?c.Many:c.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===i&&0===o?c.One:c.Other;case"be":return r%10===1&&r%100!==11?c.One:r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)?c.Few:r%10===0||r%10===Math.floor(r%10)&&r%10>=5&&r%10<=9||r%100===Math.floor(r%100)&&r%100>=11&&r%100<=14?c.Many:c.Other;case"br":return r%10===1&&r%100!==11&&r%100!==71&&r%100!==91?c.One:r%10===2&&r%100!==12&&r%100!==72&&r%100!==92?c.Two:r%10===Math.floor(r%10)&&(r%10>=3&&r%10<=4||r%10===9)&&!(r%100>=10&&r%100<=19||r%100>=70&&r%100<=79||r%100>=90&&r%100<=99)?c.Few:0!==r&&r%1e6===0?c.Many:c.Other;case"bs":case"hr":case"sr":return 0===o&&i%10===1&&i%100!==11||a%10===1&&a%100!==11?c.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)||a%10===Math.floor(a%10)&&a%10>=2&&a%10<=4&&!(a%100>=12&&a%100<=14)?c.Few:c.Other;case"cs":case"sk":return 1===i&&0===o?c.One:i===Math.floor(i)&&i>=2&&i<=4&&0===o?c.Few:0!==o?c.Many:c.Other;case"cy":return 0===r?c.Zero:1===r?c.One:2===r?c.Two:3===r?c.Few:6===r?c.Many:c.Other;case"da":return 1===r||0!==s&&(0===i||1===i)?c.One:c.Other;case"dsb":case"hsb":return 0===o&&i%100===1||a%100===1?c.One:0===o&&i%100===2||a%100===2?c.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||a%100===Math.floor(a%100)&&a%100>=3&&a%100<=4?c.Few:c.Other;case"ff":case"fr":case"hy":case"kab":return 0===i||1===i?c.One:c.Other;case"fil":return 0===o&&(1===i||2===i||3===i)||0===o&&i%10!==4&&i%10!==6&&i%10!==9||0!==o&&a%10!==4&&a%10!==6&&a%10!==9?c.One:c.Other;case"ga":return 1===r?c.One:2===r?c.Two:r===Math.floor(r)&&r>=3&&r<=6?c.Few:r===Math.floor(r)&&r>=7&&r<=10?c.Many:c.Other;case"gd":return 1===r||11===r?c.One:2===r||12===r?c.Two:r===Math.floor(r)&&(r>=3&&r<=10||r>=13&&r<=19)?c.Few:c.Other;case"gv":return 0===o&&i%10===1?c.One:0===o&&i%10===2?c.Two:0!==o||i%100!==0&&i%100!==20&&i%100!==40&&i%100!==60&&i%100!==80?0!==o?c.Many:c.Other:c.Few;case"he":return 1===i&&0===o?c.One:2===i&&0===o?c.Two:0!==o||r>=0&&r<=10||r%10!==0?c.Other:c.Many;case"is":return 0===s&&i%10===1&&i%100!==11||0!==s?c.One:c.Other;case"ksh":return 0===r?c.Zero:1===r?c.One:c.Other;case"kw":case"naq":case"se":case"smn":return 1===r?c.One:2===r?c.Two:c.Other;case"lag":return 0===r?c.Zero:0!==i&&1!==i||0===r?c.Other:c.One;case"lt":return r%10!==1||r%100>=11&&r%100<=19?r%10===Math.floor(r%10)&&r%10>=2&&r%10<=9&&!(r%100>=11&&r%100<=19)?c.Few:0!==a?c.Many:c.Other:c.One;case"lv":case"prg":return r%10===0||r%100===Math.floor(r%100)&&r%100>=11&&r%100<=19||2===o&&a%100===Math.floor(a%100)&&a%100>=11&&a%100<=19?c.Zero:r%10===1&&r%100!==11||2===o&&a%10===1&&a%100!==11||2!==o&&a%10===1?c.One:c.Other;case"mk":return 0===o&&i%10===1||a%10===1?c.One:c.Other;case"mt":return 1===r?c.One:0===r||r%100===Math.floor(r%100)&&r%100>=2&&r%100<=10?c.Few:r%100===Math.floor(r%100)&&r%100>=11&&r%100<=19?c.Many:c.Other;case"pl":return 1===i&&0===o?c.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?c.Few:0===o&&1!==i&&i%10===Math.floor(i%10)&&i%10>=0&&i%10<=1||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=12&&i%100<=14?c.Many:c.Other;case"pt":return r===Math.floor(r)&&r>=0&&r<=2&&2!==r?c.One:c.Other;case"ro":return 1===i&&0===o?c.One:0!==o||0===r||1!==r&&r%100===Math.floor(r%100)&&r%100>=1&&r%100<=19?c.Few:c.Other;case"ru":case"uk":return 0===o&&i%10===1&&i%100!==11?c.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?c.Few:0===o&&i%10===0||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=11&&i%100<=14?c.Many:c.Other;case"shi":return 0===i||1===r?c.One:r===Math.floor(r)&&r>=2&&r<=10?c.Few:c.Other;case"si":return 0===r||1===r||0===i&&1===a?c.One:c.Other;case"sl":return 0===o&&i%100===1?c.One:0===o&&i%100===2?c.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||0!==o?c.Few:c.Other;case"tzm":return r===Math.floor(r)&&r>=0&&r<=1||r===Math.floor(r)&&r>=11&&r<=99?c.One:c.Other;default:return c.Other}}function _flattenArray(e,t){if(isPresent(e))for(var r=0;r<e.length;r++){var n=e[r];isArray(n)?_flattenArray(n,t):t.push(n)}return t}function isListLikeIterable(e){return!!isJsObject(e)&&(isArray(e)||!(e instanceof C)&&getSymbolIterator()in e)}function digitModifier(e){return function(t,r){var n=e(t,r);return 1==n.length?"0"+n:n}}function hourClockExtracter(e){return function(t,r){var n=e(t,r);return n.split(" ")[1]}}function hourExtracter(e){return function(t,r){var n=e(t,r);return n.split(" ")[0]}}function intlDateFormat(e,t,r){return new Intl.DateTimeFormat(t,r).format(e).replace(/[\u200e\u200f]/g,"")}function timeZoneGetter(e){var t={hour:"2-digit",hour12:!1,timeZoneName:e};return function(e,r){var n=intlDateFormat(e,r,t);return n?n.substring(3):""}}function hour12Modify(e,t){return e.hour12=t,e}function digitCondition(e,t){var r={};return r[e]=2==t?"2-digit":"numeric",r}function nameCondition(e,t){var r={};return r[e]=t<4?"short":"long",r}function combine(e){var t={};return e.forEach(function(e){Object.assign(t,e)}),t}function datePartGetterFactory(e){return function(t,r){return intlDateFormat(t,r,e)}}function dateFormatter(e,t,r){var n,i,o="",a=[];if(ee[e])return ee[e](t,r);if(re.has(e))a=re.get(e);else{for(J.exec(e);e;)n=J.exec(e),n?(a=concat(a,n,1),e=a.pop()):(a.push(e),e=null);re.set(e,a)}return a.forEach(function(e){i=te[e],o+=i?i(t,r):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),o}function concat(e,t,r){return e.concat(ne.call(t,r))}function formatNumber(e,t,r,n,i,o,a){if(void 0===o&&(o=null),void 0===a&&(a=!1),isBlank(r))return null;if(r=isString(r)&&p.isNumeric(r)?+r:r,!isNumber(r))throw new G(e,r);var s,l,c;if(n!==S.Currency&&(s=1,l=0,c=3),isPresent(i)){var u=i.match(pe);if(null===u)throw new Error(i+" is not a valid digit info for number pipes");isPresent(u[1])&&(s=p.parseIntAutoRadix(u[1])),isPresent(u[3])&&(l=p.parseIntAutoRadix(u[3])),isPresent(u[5])&&(c=p.parseIntAutoRadix(u[5]))}return Z.format(r,t,n,{minimumIntegerDigits:s,minimumFractionDigits:l,maximumFractionDigits:c,currency:o,currencyAsSymbol:a})}var n,i=function(){function PlatformLocation(){}return Object.defineProperty(PlatformLocation.prototype,"pathname",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformLocation.prototype,"search",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformLocation.prototype,"hash",{get:function(){return null},enumerable:!0,configurable:!0}),PlatformLocation}(),o=function(){function LocationStrategy(){}return LocationStrategy}(),a=new r.OpaqueToken("appBaseHref");n="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:e:window;var s=n,l=s.Date;s.assert=function(e){};var c,u=function(){function StringWrapper(){}return StringWrapper.fromCharCode=function(e){return String.fromCharCode(e)},StringWrapper.charCodeAt=function(e,t){return e.charCodeAt(t)},StringWrapper.split=function(e,t){return e.split(t)},StringWrapper.equals=function(e,t){return e===t},StringWrapper.stripLeft=function(e,t){if(e&&e.length){for(var r=0,n=0;n<e.length&&e[n]==t;n++)r++;e=e.substring(r)}return e},StringWrapper.stripRight=function(e,t){if(e&&e.length){for(var r=e.length,n=e.length-1;n>=0&&e[n]==t;n--)r--;e=e.substring(0,r)}return e},StringWrapper.replace=function(e,t,r){return e.replace(t,r)},StringWrapper.replaceAll=function(e,t,r){return e.replace(t,r)},StringWrapper.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},StringWrapper.replaceAllMapped=function(e,t,r){return e.replace(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.splice(-2,2),r(e)})},StringWrapper.contains=function(e,t){return e.indexOf(t)!=-1},StringWrapper.compare=function(e,t){return e<t?-1:e>t?1:0},StringWrapper}(),p=function(){function NumberWrapper(){}return NumberWrapper.toFixed=function(e,t){return e.toFixed(t)},NumberWrapper.equal=function(e,t){return e===t},NumberWrapper.parseIntAutoRadix=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t},NumberWrapper.parseInt=function(e,t){if(10==t){if(/^(\-|\+)?[0-9]+$/.test(e))return parseInt(e,t)}else if(16==t){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(e))return parseInt(e,t)}else{var r=parseInt(e,t);if(!isNaN(r))return r}throw new Error("Invalid integer literal when parsing "+e+" in base "+t)},Object.defineProperty(NumberWrapper,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),NumberWrapper.isNumeric=function(e){return!isNaN(e-parseFloat(e))},NumberWrapper.isNaN=function(e){return isNaN(e)},NumberWrapper.isInteger=function(e){return Number.isInteger(e)},NumberWrapper}(),h=function(){function Json(){}return Json.parse=function(e){return s.JSON.parse(e)},Json.stringify=function(e){return s.JSON.stringify(e,null,2)},Json}(),d=function(){function DateWrapper(){}return DateWrapper.create=function(e,t,r,n,i,o,a){return void 0===t&&(t=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),new l(e,t-1,r,n,i,o,a)},DateWrapper.fromISOString=function(e){return new l(e)},DateWrapper.fromMillis=function(e){return new l(e)},DateWrapper.toMillis=function(e){return e.getTime()},DateWrapper.now=function(){return new l},DateWrapper.toJson=function(e){return e.toJSON()},DateWrapper}(),f=null,m=function(){function Location(e){var t=this;this._subject=new r.EventEmitter,this._platformStrategy=e;var n=this._platformStrategy.getBaseHref();this._baseHref=Location.stripTrailingSlash(_stripIndexHtml(n)),this._platformStrategy.onPopState(function(e){t._subject.emit({url:t.path(!0),pop:!0,type:e.type})})}return Location.prototype.path=function(e){return void 0===e&&(e=!1),this.normalize(this._platformStrategy.path(e))},Location.prototype.isCurrentPathEqualTo=function(e,t){return void 0===t&&(t=""),this.path()==this.normalize(e+Location.normalizeQueryParams(t))},Location.prototype.normalize=function(e){return Location.stripTrailingSlash(_stripBaseHref(this._baseHref,_stripIndexHtml(e)))},Location.prototype.prepareExternalUrl=function(e){return e.length>0&&!e.startsWith("/")&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)},Location.prototype.go=function(e,t){void 0===t&&(t=""),this._platformStrategy.pushState(null,"",e,t)},Location.prototype.replaceState=function(e,t){void 0===t&&(t=""),this._platformStrategy.replaceState(null,"",e,t)},Location.prototype.forward=function(){this._platformStrategy.forward()},Location.prototype.back=function(){this._platformStrategy.back()},Location.prototype.subscribe=function(e,t,r){return void 0===t&&(t=null),void 0===r&&(r=null),this._subject.subscribe({next:e,error:t,complete:r})},Location.normalizeQueryParams=function(e){return e.length>0&&"?"!=e.substring(0,1)?"?"+e:e},Location.joinWithSlash=function(e,t){if(0==e.length)return t;if(0==t.length)return e;var r=0;return e.endsWith("/")&&r++,t.startsWith("/")&&r++,2==r?e+t.substring(1):1==r?e+t:e+"/"+t},Location.stripTrailingSlash=function(e){return/\/$/g.test(e)&&(e=e.substring(0,e.length-1)),e},Location.decorators=[{type:r.Injectable}],Location.ctorParameters=[{type:o}],Location}(),g=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},y=function(e){function HashLocationStrategy(t,r){e.call(this),this._platformLocation=t,this._baseHref="",isPresent(r)&&(this._baseHref=r)}return g(HashLocationStrategy,e),HashLocationStrategy.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},HashLocationStrategy.prototype.getBaseHref=function(){return this._baseHref},HashLocationStrategy.prototype.path=function(e){void 0===e&&(e=!1);var t=this._platformLocation.hash;return isPresent(t)||(t="#"),t.length>0?t.substring(1):t},HashLocationStrategy.prototype.prepareExternalUrl=function(e){var t=m.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t},HashLocationStrategy.prototype.pushState=function(e,t,r,n){var i=this.prepareExternalUrl(r+m.normalizeQueryParams(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)},HashLocationStrategy.prototype.replaceState=function(e,t,r,n){var i=this.prepareExternalUrl(r+m.normalizeQueryParams(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)},HashLocationStrategy.prototype.forward=function(){this._platformLocation.forward()},HashLocationStrategy.prototype.back=function(){this._platformLocation.back()},HashLocationStrategy.decorators=[{type:r.Injectable}],HashLocationStrategy.ctorParameters=[{type:i},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[a]}]}],HashLocationStrategy}(o),v=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},b=function(e){function PathLocationStrategy(t,r){if(e.call(this),this._platformLocation=t,isBlank(r)&&(r=this._platformLocation.getBaseHrefFromDOM()),isBlank(r))throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}return v(PathLocationStrategy,e),PathLocationStrategy.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},PathLocationStrategy.prototype.getBaseHref=function(){return this._baseHref},PathLocationStrategy.prototype.prepareExternalUrl=function(e){return m.joinWithSlash(this._baseHref,e)},PathLocationStrategy.prototype.path=function(e){void 0===e&&(e=!1);var t=this._platformLocation.pathname+m.normalizeQueryParams(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?""+t+r:t},PathLocationStrategy.prototype.pushState=function(e,t,r,n){var i=this.prepareExternalUrl(r+m.normalizeQueryParams(n));this._platformLocation.pushState(e,t,i)},PathLocationStrategy.prototype.replaceState=function(e,t,r,n){var i=this.prepareExternalUrl(r+m.normalizeQueryParams(n));this._platformLocation.replaceState(e,t,i)},PathLocationStrategy.prototype.forward=function(){this._platformLocation.forward()},PathLocationStrategy.prototype.back=function(){this._platformLocation.back()},PathLocationStrategy.decorators=[{type:r.Injectable}],PathLocationStrategy.ctorParameters=[{type:i},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[a]}]}],PathLocationStrategy}(o),_=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},w=function(){function NgLocalization(){}return NgLocalization}(),x=function(e){function NgLocaleLocalization(t){e.call(this),this._locale=t}return _(NgLocaleLocalization,e),NgLocaleLocalization.prototype.getPluralCategory=function(e){var t=getPluralCase(this._locale,e);switch(t){case c.Zero:return"zero";case c.One:return"one";case c.Two:return"two";case c.Few:return"few";case c.Many:return"many";default:return"other"}},NgLocaleLocalization.decorators=[{type:r.Injectable}],NgLocaleLocalization.ctorParameters=[{type:void 0,decorators:[{type:r.Inject,args:[r.LOCALE_ID]}]}],NgLocaleLocalization}(w);!function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other"}(c||(c={}));var S,C=s.Map,k=s.Set,E=(function(){try{if(1===new C([[1,2]]).size)return function(e){return new C(e)}}catch(e){}return function(e){for(var t=new C,r=0;r<e.length;r++){var n=e[r];t.set(n[0],n[1])}return t}}(),function(){try{if(new C(new C))return function(e){return new C(e)}}catch(e){}return function(e){var t=new C;return e.forEach(function(e,r){t.set(r,e)}),t}}(),function(){return(new C).keys().next?function(e){for(var t,r=e.keys();!(t=r.next()).done;)e.set(t.value,null)}:function(e){e.forEach(function(t,r){e.set(r,null)})}}(),function(){try{if((new C).values().next)return function(e,t){return t?Array.from(e.values()):Array.from(e.keys())}}catch(e){}return function(e,t){var r=A.createFixedSize(e.size),n=0;return e.forEach(function(e,i){r[n]=t?e:i,n++}),r}}(),function(){function StringMapWrapper(){}return StringMapWrapper.create=function(){return{}},StringMapWrapper.contains=function(e,t){return e.hasOwnProperty(t)},StringMapWrapper.get=function(e,t){return e.hasOwnProperty(t)?e[t]:void 0},StringMapWrapper.set=function(e,t,r){e[t]=r},StringMapWrapper.keys=function(e){return Object.keys(e)},StringMapWrapper.values=function(e){return Object.keys(e).map(function(t){return e[t]})},StringMapWrapper.isEmpty=function(e){for(var t in e)return!1;return!0},StringMapWrapper.delete=function(e,t){delete e[t]},StringMapWrapper.forEach=function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];t(e[i],i)}},StringMapWrapper.merge=function(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];r[o]=e[o]}for(var a=0,s=Object.keys(t);a<s.length;a++){var o=s[a];r[o]=t[o]}return r},StringMapWrapper.equals=function(e,t){var r=Object.keys(e),n=Object.keys(t);if(r.length!=n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i];if(e[o]!==t[o])return!1}return!0},StringMapWrapper}()),A=function(){function ListWrapper(){}return ListWrapper.createFixedSize=function(e){return new Array(e)},ListWrapper.createGrowableSize=function(e){return new Array(e)},ListWrapper.clone=function(e){return e.slice(0)},ListWrapper.forEachWithIndex=function(e,t){for(var r=0;r<e.length;r++)t(e[r],r)},ListWrapper.first=function(e){return e?e[0]:null},ListWrapper.last=function(e){return e&&0!=e.length?e[e.length-1]:null},ListWrapper.indexOf=function(e,t,r){return void 0===r&&(r=0),e.indexOf(t,r)},ListWrapper.contains=function(e,t){return e.indexOf(t)!==-1},ListWrapper.reversed=function(e){var t=ListWrapper.clone(e);return t.reverse()},ListWrapper.concat=function(e,t){return e.concat(t)},ListWrapper.insert=function(e,t,r){e.splice(t,0,r)},ListWrapper.removeAt=function(e,t){var r=e[t];return e.splice(t,1),r},ListWrapper.removeAll=function(e,t){for(var r=0;r<t.length;++r){var n=e.indexOf(t[r]);e.splice(n,1)}},ListWrapper.remove=function(e,t){var r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)},ListWrapper.clear=function(e){e.length=0},ListWrapper.isEmpty=function(e){return 0==e.length},ListWrapper.fill=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=null),e.fill(t,r,null===n?e.length:n)},ListWrapper.equals=function(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},ListWrapper.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},ListWrapper.splice=function(e,t,r){return e.splice(t,r)},ListWrapper.sort=function(e,t){isPresent(t)?e.sort(t):e.sort()},ListWrapper.toString=function(e){return e.toString()},ListWrapper.toJSON=function(e){return JSON.stringify(e)},ListWrapper.maximum=function(e,t){if(0==e.length)return null;for(var r=null,n=-(1/0),i=0;i<e.length;i++){var o=e[i];if(!isBlank(o)){var a=t(o);a>n&&(r=o,n=a)}}return r},ListWrapper.flatten=function(e){var t=[];return _flattenArray(e,t),t},ListWrapper.addAll=function(e,t){for(var r=0;r<t.length;r++)e.push(t[r])},ListWrapper}(),P=(function(){var e=new k([1,2,3]);return 3===e.size?function(e){return new k(e)}:function(e){var t=new k(e);if(t.size!==e.length)for(var r=0;r<e.length;r++)t.add(e[r]);return t}}(),function(){function NgClass(e,t,r,n){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=r,this._renderer=n,this._initialClasses=[]}return Object.defineProperty(NgClass.prototype,"klass",{set:function(e){this._applyInitialClasses(!0),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyInitialClasses(!1),this._applyClasses(this._rawClass,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(NgClass.prototype,"ngClass",{set:function(e){this._cleanupClasses(this._rawClass),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(isListLikeIterable(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create(null):this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create(null))},enumerable:!0,configurable:!0}),NgClass.prototype.ngDoCheck=function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}},NgClass.prototype._cleanupClasses=function(e){this._applyClasses(e,!0),this._applyInitialClasses(!1)},NgClass.prototype._applyKeyValueChanges=function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&t._toggleClass(e.key,!1)})},NgClass.prototype._applyIterableChanges=function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return t._toggleClass(e.item,!1)})},NgClass.prototype._applyInitialClasses=function(e){var t=this;this._initialClasses.forEach(function(r){return t._toggleClass(r,!e)})},NgClass.prototype._applyClasses=function(e,t){var r=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return r._toggleClass(e,!t)}):Object.keys(e).forEach(function(n){isPresent(e[n])&&r._toggleClass(n,!t)}))},NgClass.prototype._toggleClass=function(e,t){var r=this;e=e.trim(),e&&e.split(/\s+/g).forEach(function(e){r._renderer.setElementClass(r._ngEl.nativeElement,e,t)})},NgClass.decorators=[{type:r.Directive,args:[{selector:"[ngClass]"}]}],NgClass.ctorParameters=[{type:r.IterableDiffers},{type:r.KeyValueDiffers},{type:r.ElementRef},{type:r.Renderer}],NgClass.propDecorators={klass:[{type:r.Input,args:["class"]}],ngClass:[{type:r.Input}]},NgClass}()),T=function(){function NgForRow(e,t,r){this.$implicit=e,this.index=t,this.count=r}return Object.defineProperty(NgForRow.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(NgForRow.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(NgForRow.prototype,"even",{get:function(){return this.index%2===0},enumerable:!0,configurable:!0}),Object.defineProperty(NgForRow.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),NgForRow}(),M=function(){function NgFor(e,t,r,n){this._viewContainer=e,this._template=t,this._differs=r,this._cdr=n,this._differ=null}return Object.defineProperty(NgFor.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),NgFor.prototype.ngOnChanges=function(e){if("ngForOf"in e){var t=e.ngForOf.currentValue;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this._cdr,this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+getTypeNameForDebugging(t)+"'. NgFor only supports binding to Iterables such as Arrays.")}}},NgFor.prototype.ngDoCheck=function(){if(this._differ){var e=this._differ.diff(this.ngForOf);e&&this._applyChanges(e)}},NgFor.prototype._applyChanges=function(e){var t=this,r=[];e.forEachOperation(function(e,n,i){if(null==e.previousIndex){var o=t._viewContainer.createEmbeddedView(t._template,new T(null,null,null),i),a=new I(e,o);r.push(a)}else if(null==i)t._viewContainer.remove(n);else{var o=t._viewContainer.get(n);t._viewContainer.move(o,i);var a=new I(e,o);r.push(a)}});for(var n=0;n<r.length;n++)this._perViewChange(r[n].view,r[n].record);for(var n=0,i=this._viewContainer.length;n<i;n++){var o=this._viewContainer.get(n);o.context.index=n,o.context.count=i}e.forEachIdentityChange(function(e){var r=t._viewContainer.get(e.currentIndex);r.context.$implicit=e.item})},NgFor.prototype._perViewChange=function(e,t){e.context.$implicit=t.item},NgFor.decorators=[{type:r.Directive,args:[{selector:"[ngFor][ngForOf]"}]}],NgFor.ctorParameters=[{type:r.ViewContainerRef},{type:r.TemplateRef},{type:r.IterableDiffers},{type:r.ChangeDetectorRef}],NgFor.propDecorators={ngForOf:[{type:r.Input}],ngForTrackBy:[{type:r.Input}],ngForTemplate:[{type:r.Input}]},NgFor}(),I=function(){function RecordViewTuple(e,t){this.record=e,this.view=t}return RecordViewTuple}(),O=function(){function NgIf(e,t){this._viewContainer=e,this._template=t,this._hasView=!1}return Object.defineProperty(NgIf.prototype,"ngIf",{set:function(e){e&&!this._hasView?(this._hasView=!0,this._viewContainer.createEmbeddedView(this._template)):!e&&this._hasView&&(this._hasView=!1,this._viewContainer.clear())},enumerable:!0,configurable:!0}),NgIf.decorators=[{type:r.Directive,args:[{selector:"[ngIf]"}]}],NgIf.ctorParameters=[{type:r.ViewContainerRef},{type:r.TemplateRef}],NgIf.propDecorators={ngIf:[{type:r.Input}]},NgIf}(),R=new Object,L=function(){function SwitchView(e,t){this._viewContainerRef=e,this._templateRef=t}return SwitchView.prototype.create=function(){this._viewContainerRef.createEmbeddedView(this._templateRef)},SwitchView.prototype.destroy=function(){this._viewContainerRef.clear()},SwitchView}(),N=function(){function NgSwitch(){this._useDefault=!1,this._valueViews=new Map,this._activeViews=[]}return Object.defineProperty(NgSwitch.prototype,"ngSwitch",{set:function(e){this._emptyAllActiveViews(),this._useDefault=!1;var t=this._valueViews.get(e);t||(this._useDefault=!0,t=this._valueViews.get(R)||null),this._activateViews(t),this._switchValue=e},enumerable:!0,configurable:!0}),NgSwitch.prototype._onCaseValueChanged=function(e,t,r){this._deregisterView(e,r),this._registerView(t,r),e===this._switchValue?(r.destroy(),A.remove(this._activeViews,r)):t===this._switchValue&&(this._useDefault&&(this._useDefault=!1,this._emptyAllActiveViews()),r.create(),this._activeViews.push(r)),0!==this._activeViews.length||this._useDefault||(this._useDefault=!0,this._activateViews(this._valueViews.get(R)))},NgSwitch.prototype._emptyAllActiveViews=function(){for(var e=this._activeViews,t=0;t<e.length;t++)e[t].destroy();this._activeViews=[]},NgSwitch.prototype._activateViews=function(e){if(e){for(var t=0;t<e.length;t++)e[t].create();this._activeViews=e}},NgSwitch.prototype._registerView=function(e,t){var r=this._valueViews.get(e);r||(r=[],this._valueViews.set(e,r)),r.push(t)},NgSwitch.prototype._deregisterView=function(e,t){if(e!==R){var r=this._valueViews.get(e);1==r.length?this._valueViews.delete(e):A.remove(r,t)}},NgSwitch.decorators=[{type:r.Directive,args:[{selector:"[ngSwitch]"}]}],NgSwitch.ctorParameters=[],NgSwitch.propDecorators={ngSwitch:[{type:r.Input}]},NgSwitch}(),D=function(){function NgSwitchCase(e,t,r){this._value=R,this._switch=r,this._view=new L(e,t)}return Object.defineProperty(NgSwitchCase.prototype,"ngSwitchCase",{set:function(e){this._switch._onCaseValueChanged(this._value,e,this._view),this._value=e},enumerable:!0,configurable:!0}),NgSwitchCase.decorators=[{type:r.Directive,args:[{selector:"[ngSwitchCase]"}]}],NgSwitchCase.ctorParameters=[{type:r.ViewContainerRef},{type:r.TemplateRef},{type:N,decorators:[{type:r.Host}]}],NgSwitchCase.propDecorators={ngSwitchCase:[{type:r.Input}]},NgSwitchCase}(),B=function(){function NgSwitchDefault(e,t,r){r._registerView(R,new L(e,t))}return NgSwitchDefault.decorators=[{type:r.Directive,args:[{selector:"[ngSwitchDefault]"}]}],NgSwitchDefault.ctorParameters=[{type:r.ViewContainerRef},{type:r.TemplateRef},{type:N,decorators:[{type:r.Host}]}],NgSwitchDefault}(),V=function(){function NgPlural(e){this._localization=e,this._caseViews={}}return Object.defineProperty(NgPlural.prototype,"ngPlural",{set:function(e){this._switchValue=e,this._updateView()},enumerable:!0,configurable:!0}),NgPlural.prototype.addCase=function(e,t){this._caseViews[e]=t},NgPlural.prototype._updateView=function(){this._clearViews();var e=Object.keys(this._caseViews),t=getPluralCategory(this._switchValue,e,this._localization);this._activateView(this._caseViews[t])},NgPlural.prototype._clearViews=function(){this._activeView&&this._activeView.destroy()},NgPlural.prototype._activateView=function(e){e&&(this._activeView=e,this._activeView.create())},NgPlural.decorators=[{type:r.Directive,args:[{selector:"[ngPlural]"}]}],NgPlural.ctorParameters=[{type:w}],NgPlural.propDecorators={ngPlural:[{type:r.Input}]},NgPlural}(),F=function(){function NgPluralCase(e,t,r,n){this.value=e,n.addCase(e,new L(r,t))}return NgPluralCase.decorators=[{type:r.Directive,args:[{selector:"[ngPluralCase]"}]}],NgPluralCase.ctorParameters=[{type:void 0,decorators:[{type:r.Attribute,args:["ngPluralCase"]}]},{type:r.TemplateRef},{type:r.ViewContainerRef},{type:V,decorators:[{type:r.Host}]}],NgPluralCase}(),j=function(){function NgStyle(e,t,r){this._differs=e,this._ngEl=t,this._renderer=r}return Object.defineProperty(NgStyle.prototype,"ngStyle",{set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create(null))},enumerable:!0,configurable:!0}),NgStyle.prototype.ngDoCheck=function(){
if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}},NgStyle.prototype._applyChanges=function(e){var t=this;e.forEachRemovedItem(function(e){return t._setStyle(e.key,null)}),e.forEachAddedItem(function(e){return t._setStyle(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._setStyle(e.key,e.currentValue)})},NgStyle.prototype._setStyle=function(e,t){var r=e.split("."),n=r[0],i=r[1];t=null!==t&&void 0!==t&&i?""+t+i:t,this._renderer.setElementStyle(this._ngEl.nativeElement,n,t)},NgStyle.decorators=[{type:r.Directive,args:[{selector:"[ngStyle]"}]}],NgStyle.ctorParameters=[{type:r.KeyValueDiffers},{type:r.ElementRef},{type:r.Renderer}],NgStyle.propDecorators={ngStyle:[{type:r.Input}]},NgStyle}(),U=function(){function NgTemplateOutlet(e){this._viewContainerRef=e}return Object.defineProperty(NgTemplateOutlet.prototype,"ngOutletContext",{set:function(e){this._context=e},enumerable:!0,configurable:!0}),Object.defineProperty(NgTemplateOutlet.prototype,"ngTemplateOutlet",{set:function(e){this._templateRef=e},enumerable:!0,configurable:!0}),NgTemplateOutlet.prototype.ngOnChanges=function(){this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this._templateRef&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this._templateRef,this._context))},NgTemplateOutlet.decorators=[{type:r.Directive,args:[{selector:"[ngTemplateOutlet]"}]}],NgTemplateOutlet.ctorParameters=[{type:r.ViewContainerRef}],NgTemplateOutlet.propDecorators={ngOutletContext:[{type:r.Input}],ngTemplateOutlet:[{type:r.Input}]},NgTemplateOutlet}(),z=[P,M,O,U,j,N,D,B,V,F],W=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},H=function(e){function BaseError(t){var r=e.call(this,t);this._nativeError=r}return W(BaseError,e),Object.defineProperty(BaseError.prototype,"message",{get:function(){return this._nativeError.message},set:function(e){this._nativeError.message=e},enumerable:!0,configurable:!0}),Object.defineProperty(BaseError.prototype,"name",{get:function(){return this._nativeError.name},enumerable:!0,configurable:!0}),Object.defineProperty(BaseError.prototype,"stack",{get:function(){return this._nativeError.stack},set:function(e){this._nativeError.stack=e},enumerable:!0,configurable:!0}),BaseError.prototype.toString=function(){return this._nativeError.toString()},BaseError}(Error),q=(function(e){function WrappedError(t,r){e.call(this,t+" caused by: "+(r instanceof Error?r.message:r)),this.originalError=r}return W(WrappedError,e),Object.defineProperty(WrappedError.prototype,"stack",{get:function(){return(this.originalError instanceof Error?this.originalError:this._nativeError).stack},enumerable:!0,configurable:!0}),WrappedError}(H),this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),G=function(e){function InvalidPipeArgumentError(t,r){e.call(this,"Invalid argument '"+r+"' for pipe '"+stringify(t)+"'")}return q(InvalidPipeArgumentError,e),InvalidPipeArgumentError}(H),K=function(){function ObservableStrategy(){}return ObservableStrategy.prototype.createSubscription=function(e,t){return e.subscribe({next:t,error:function(e){throw e}})},ObservableStrategy.prototype.dispose=function(e){e.unsubscribe()},ObservableStrategy.prototype.onDestroy=function(e){e.unsubscribe()},ObservableStrategy}(),$=function(){function PromiseStrategy(){}return PromiseStrategy.prototype.createSubscription=function(e,t){return e.then(t,function(e){throw e})},PromiseStrategy.prototype.dispose=function(e){},PromiseStrategy.prototype.onDestroy=function(e){},PromiseStrategy}(),Q=new $,Y=new K,X=function(){function AsyncPipe(e){this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}return AsyncPipe.prototype.ngOnDestroy=function(){isPresent(this._subscription)&&this._dispose()},AsyncPipe.prototype.transform=function(e){return isBlank(this._obj)?(isPresent(e)&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue):e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.WrappedValue.wrap(this._latestValue))},AsyncPipe.prototype._subscribe=function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,function(r){return t._updateLatestValue(e,r)})},AsyncPipe.prototype._selectStrategy=function(e){if(isPromise(e))return Q;if(e.subscribe)return Y;throw new G(AsyncPipe,e)},AsyncPipe.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},AsyncPipe.prototype._updateLatestValue=function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())},AsyncPipe.decorators=[{type:r.Pipe,args:[{name:"async",pure:!1}]}],AsyncPipe.ctorParameters=[{type:r.ChangeDetectorRef}],AsyncPipe}();!function(e){e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency"}(S||(S={}));var Z=function(){function NumberFormatter(){}return NumberFormatter.format=function(e,t,r,n){var i=void 0===n?{}:n,o=i.minimumIntegerDigits,a=i.minimumFractionDigits,s=i.maximumFractionDigits,l=i.currency,c=i.currencyAsSymbol,u=void 0!==c&&c,p={minimumIntegerDigits:o,minimumFractionDigits:a,maximumFractionDigits:s,style:S[r].toLowerCase()};return r==S.Currency&&(p.currency=l,p.currencyDisplay=u?"symbol":"code"),new Intl.NumberFormat(t,p).format(e)},NumberFormatter}(),J=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,ee={yMMMdjms:datePartGetterFactory(combine([digitCondition("year",1),nameCondition("month",3),digitCondition("day",1),digitCondition("hour",1),digitCondition("minute",1),digitCondition("second",1)])),yMdjm:datePartGetterFactory(combine([digitCondition("year",1),digitCondition("month",1),digitCondition("day",1),digitCondition("hour",1),digitCondition("minute",1)])),yMMMMEEEEd:datePartGetterFactory(combine([digitCondition("year",1),nameCondition("month",4),nameCondition("weekday",4),digitCondition("day",1)])),yMMMMd:datePartGetterFactory(combine([digitCondition("year",1),nameCondition("month",4),digitCondition("day",1)])),yMMMd:datePartGetterFactory(combine([digitCondition("year",1),nameCondition("month",3),digitCondition("day",1)])),yMd:datePartGetterFactory(combine([digitCondition("year",1),digitCondition("month",1),digitCondition("day",1)])),jms:datePartGetterFactory(combine([digitCondition("hour",1),digitCondition("second",1),digitCondition("minute",1)])),jm:datePartGetterFactory(combine([digitCondition("hour",1),digitCondition("minute",1)]))},te={yyyy:datePartGetterFactory(digitCondition("year",4)),yy:datePartGetterFactory(digitCondition("year",2)),y:datePartGetterFactory(digitCondition("year",1)),MMMM:datePartGetterFactory(nameCondition("month",4)),MMM:datePartGetterFactory(nameCondition("month",3)),MM:datePartGetterFactory(digitCondition("month",2)),M:datePartGetterFactory(digitCondition("month",1)),LLLL:datePartGetterFactory(nameCondition("month",4)),dd:datePartGetterFactory(digitCondition("day",2)),d:datePartGetterFactory(digitCondition("day",1)),HH:digitModifier(hourExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",2),!1)))),H:hourExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",1),!1))),hh:digitModifier(hourExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",2),!0)))),h:hourExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",1),!0))),jj:datePartGetterFactory(digitCondition("hour",2)),j:datePartGetterFactory(digitCondition("hour",1)),mm:digitModifier(datePartGetterFactory(digitCondition("minute",2))),m:datePartGetterFactory(digitCondition("minute",1)),ss:digitModifier(datePartGetterFactory(digitCondition("second",2))),s:datePartGetterFactory(digitCondition("second",1)),sss:datePartGetterFactory(digitCondition("second",3)),EEEE:datePartGetterFactory(nameCondition("weekday",4)),EEE:datePartGetterFactory(nameCondition("weekday",3)),EE:datePartGetterFactory(nameCondition("weekday",2)),E:datePartGetterFactory(nameCondition("weekday",1)),a:hourClockExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",1),!0))),Z:timeZoneGetter("short"),z:timeZoneGetter("long"),ww:datePartGetterFactory({}),w:datePartGetterFactory({}),G:datePartGetterFactory(nameCondition("era",1)),GG:datePartGetterFactory(nameCondition("era",2)),GGG:datePartGetterFactory(nameCondition("era",3)),GGGG:datePartGetterFactory(nameCondition("era",4))},re=new Map,ne=[].slice,ie=function(){function DateFormatter(){}return DateFormatter.format=function(e,t,r){return dateFormatter(r,e,t)},DateFormatter}(),oe=function(){function DatePipe(e){this._locale=e}return DatePipe.prototype.transform=function(e,t){if(void 0===t&&(t="mediumDate"),isBlank(e))return null;if(!this.supports(e))throw new G(DatePipe,e);return p.isNumeric(e)?e=d.fromMillis(parseFloat(e)):isString(e)&&(e=d.fromISOString(e)),E.contains(DatePipe._ALIASES,t)&&(t=E.get(DatePipe._ALIASES,t)),ie.format(e,this._locale,t)},DatePipe.prototype.supports=function(e){return!(!isDate(e)&&!p.isNumeric(e))||!(!isString(e)||!isDate(d.fromISOString(e)))},DatePipe._ALIASES={medium:"yMMMdjms","short":"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},DatePipe.decorators=[{type:r.Pipe,args:[{name:"date",pure:!0}]}],DatePipe.ctorParameters=[{type:void 0,decorators:[{type:r.Inject,args:[r.LOCALE_ID]}]}],DatePipe}(),ae=/#/g,se=function(){function I18nPluralPipe(e){this._localization=e}return I18nPluralPipe.prototype.transform=function(e,t){if(isBlank(e))return"";if(!isStringMap(t))throw new G(I18nPluralPipe,t);var r=getPluralCategory(e,Object.keys(t),this._localization);return u.replaceAll(t[r],ae,e.toString())},I18nPluralPipe.decorators=[{type:r.Pipe,args:[{name:"i18nPlural",pure:!0}]}],I18nPluralPipe.ctorParameters=[{type:w}],I18nPluralPipe}(),le=function(){function I18nSelectPipe(){}return I18nSelectPipe.prototype.transform=function(e,t){if(isBlank(e))return"";if(!isStringMap(t))throw new G(I18nSelectPipe,t);return t.hasOwnProperty(e)?t[e]:""},I18nSelectPipe.decorators=[{type:r.Pipe,args:[{name:"i18nSelect",pure:!0}]}],I18nSelectPipe.ctorParameters=[],I18nSelectPipe}(),ce=function(){function JsonPipe(){}return JsonPipe.prototype.transform=function(e){return h.stringify(e)},JsonPipe.decorators=[{type:r.Pipe,args:[{name:"json",pure:!1}]}],JsonPipe.ctorParameters=[],JsonPipe}(),ue=function(){function LowerCasePipe(){}return LowerCasePipe.prototype.transform=function(e){if(isBlank(e))return e;if(!isString(e))throw new G(LowerCasePipe,e);return e.toLowerCase()},LowerCasePipe.decorators=[{type:r.Pipe,args:[{name:"lowercase"}]}],LowerCasePipe.ctorParameters=[],LowerCasePipe}(),pe=/^(\d+)?\.((\d+)(\-(\d+))?)?$/,he=function(){function DecimalPipe(e){this._locale=e}return DecimalPipe.prototype.transform=function(e,t){return void 0===t&&(t=null),formatNumber(DecimalPipe,this._locale,e,S.Decimal,t)},DecimalPipe.decorators=[{type:r.Pipe,args:[{name:"number"}]}],DecimalPipe.ctorParameters=[{type:void 0,decorators:[{type:r.Inject,args:[r.LOCALE_ID]}]}],DecimalPipe}(),de=function(){function PercentPipe(e){this._locale=e}return PercentPipe.prototype.transform=function(e,t){return void 0===t&&(t=null),formatNumber(PercentPipe,this._locale,e,S.Percent,t)},PercentPipe.decorators=[{type:r.Pipe,args:[{name:"percent"}]}],PercentPipe.ctorParameters=[{type:void 0,decorators:[{type:r.Inject,args:[r.LOCALE_ID]}]}],PercentPipe}(),fe=function(){function CurrencyPipe(e){this._locale=e}return CurrencyPipe.prototype.transform=function(e,t,r,n){return void 0===t&&(t="USD"),void 0===r&&(r=!1),void 0===n&&(n=null),formatNumber(CurrencyPipe,this._locale,e,S.Currency,n,t,r)},CurrencyPipe.decorators=[{type:r.Pipe,args:[{name:"currency"}]}],CurrencyPipe.ctorParameters=[{type:void 0,decorators:[{type:r.Inject,args:[r.LOCALE_ID]}]}],CurrencyPipe}(),me=function(){function SlicePipe(){}return SlicePipe.prototype.transform=function(e,t,r){if(void 0===r&&(r=null),isBlank(e))return e;if(!this.supports(e))throw new G(SlicePipe,e);return isString(e)?u.slice(e,t,r):A.slice(e,t,r)},SlicePipe.prototype.supports=function(e){return isString(e)||isArray(e)},SlicePipe.decorators=[{type:r.Pipe,args:[{name:"slice",pure:!1}]}],SlicePipe.ctorParameters=[],SlicePipe}(),ge=function(){function UpperCasePipe(){}return UpperCasePipe.prototype.transform=function(e){if(isBlank(e))return e;if(!isString(e))throw new G(UpperCasePipe,e);return e.toUpperCase()},UpperCasePipe.decorators=[{type:r.Pipe,args:[{name:"uppercase"}]}],UpperCasePipe.ctorParameters=[],UpperCasePipe}(),ye=[X,ge,ue,ce,me,he,de,fe,oe,se,le],ve=function(){function CommonModule(){}return CommonModule.decorators=[{type:r.NgModule,args:[{declarations:[z,ye],exports:[z,ye],providers:[{provide:w,useClass:x}]}]}],CommonModule.ctorParameters=[],CommonModule}();t.NgLocalization=w,t.CommonModule=ve,t.NgClass=P,t.NgFor=M,t.NgIf=O,t.NgPlural=V,t.NgPluralCase=F,t.NgStyle=j,t.NgSwitch=N,t.NgSwitchCase=D,t.NgSwitchDefault=B,t.NgTemplateOutlet=U,t.AsyncPipe=X,t.DatePipe=oe,t.I18nPluralPipe=se,t.I18nSelectPipe=le,t.JsonPipe=ce,t.LowerCasePipe=ue,t.CurrencyPipe=fe,t.DecimalPipe=he,t.PercentPipe=de,t.SlicePipe=me,t.UpperCasePipe=ge,t.PlatformLocation=i,t.LocationStrategy=o,t.APP_BASE_HREF=a,t.HashLocationStrategy=y,t.PathLocationStrategy=b,t.Location=m})}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};r(24),r(25),r(26),r(27),r(28),r(29),r(30),r(31),r(32),r(33),r(34);var o=r(3),a=r(21),s=r(35),l=r(21),c=r(65),u=r(66),p=r(229),h=r(230),d=r(273),f=r(282),m=r(286),g=[{path:"pad/:id",component:h.PadComponent},{path:"about",component:h.PadComponent},{path:"support",component:h.PadComponent},{path:"",pathMatch:"prefix",component:h.PadComponent}],y=function(){function AppModule(){}return AppModule=n([o.NgModule({imports:[a.BrowserModule,s.RouterModule.forRoot(g)],declarations:[p.AppComponent,h.PadComponent,d.AudioMonitorComponent,f.EditorComponent,m.UserComponent],providers:[l.Title,c.BlindpadService,u.MediaService],schemas:[o.CUSTOM_ELEMENTS_SCHEMA],bootstrap:[p.AppComponent]}),i("design:paramtypes",[])],AppModule)}();t.AppModule=y},function(e,t,r){e.exports=r.p+"index.html"},function(e,t,r){e.exports=r.p+"web-animations.min.js"},function(e,t,r){e.exports=r.p+"Reflect.js"},function(e,t,r){e.exports=r.p+"zone.js"},function(e,t,r){e.exports=r.p+"shim.min.js"},function(e,t,r){e.exports=r.p+"assets/favicon-32x32.png"},function(e,t,r){e.exports=r.p+"assets/favicon-96x96.png"},function(e,t,r){e.exports=r.p+"assets/favicon-16x16.png"},function(e,t,r){e.exports=r.p+"assets/favicon.ico"},function(e,t,r){e.exports=r.p+"assets/bp_logo.png"},function(e,t,r){e.exports=r.p+"global.css"},function(e,t,r){!function(e,n){n(t,r(22),r(3),r(4),r(36),r(49),r(50),r(51),r(52),r(56),r(57),r(5),r(58),r(59),r(60),r(61),r(62),r(63),r(64))}(this,function(e,t,r,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y,v){"use strict";function shallowEqualArrays(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!shallowEqual(e[r],t[r]))return!1;return!0}function shallowEqual(e,t){var r=Object.keys(e),n=Object.keys(t);if(r.length!=n.length)return!1;for(var i,o=0;o<r.length;o++)if(i=r[o],e[i]!==t[i])return!1;return!0}function flatten(e){for(var t=[],r=0;r<e.length;++r)for(var n=0;n<e[r].length;++n)t.push(e[r][n]);return t}function last(e){return e.length>0?e[e.length-1]:null}function merge(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function forEach(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function waitForMap(e,t){var r=[],n={};if(forEach(e,function(e,i){i===_&&r.push(s.map.call(t(i,e),function(e){return n[i]=e,e}))}),forEach(e,function(e,i){i!==_&&r.push(s.map.call(t(i,e),function(e){return n[i]=e,e}))}),r.length>0){var i=d.concatAll.call(o.of.apply(void 0,r)),a=y.last.call(i);return s.map.call(a,function(){return n})}return o.of(n)}function andObservables(e){var t=l.mergeAll.call(e);return a.every.call(t,function(e){return e===!0})}function wrapIntoObservable(e){return e instanceof p.Observable?e:e instanceof Promise?g.fromPromise(e):o.of(e)}function createEmptyUrlTree(){return new k(new E([],{}),{},null)}function containsTree(e,t,r){return r?equalSegmentGroups(e.root,t.root):containsSegmentGroup(e.root,t.root)}function equalSegmentGroups(e,t){if(!equalPath(e.segments,t.segments))return!1;if(e.numberOfChildren!==t.numberOfChildren)return!1;for(var r in t.children){if(!e.children[r])return!1;if(!equalSegmentGroups(e.children[r],t.children[r]))return!1}return!0}function containsSegmentGroup(e,t){return containsSegmentGroupHelper(e,t,t.segments)}function containsSegmentGroupHelper(e,t,r){if(e.segments.length>r.length){var n=e.segments.slice(0,r.length);return!!equalPath(n,r)&&!t.hasChildren()}if(e.segments.length===r.length){if(!equalPath(e.segments,r))return!1;for(var i in t.children){if(!e.children[i])return!1;if(!containsSegmentGroup(e.children[i],t.children[i]))return!1}return!0}var n=r.slice(0,e.segments.length),o=r.slice(e.segments.length);return!!equalPath(e.segments,n)&&(!!e.children[_]&&containsSegmentGroupHelper(e.children[_],t,o))}function equalPath(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r].path!==t[r].path)return!1;return!0}function mapChildrenIntoArray(e,t){var r=[];return forEach(e.children,function(e,n){n===_&&(r=r.concat(t(e,n)))}),forEach(e.children,function(e,n){n!==_&&(r=r.concat(t(e,n)))}),r}function serializePaths(e){return e.segments.map(function(e){return serializePath(e)}).join("/")}function serializeSegment(e,t){if(e.hasChildren()&&t){var r=e.children[_]?serializeSegment(e.children[_],!1):"",n=[];return forEach(e.children,function(e,t){t!==_&&n.push(t+":"+serializeSegment(e,!1))}),n.length>0?r+"("+n.join("//")+")":""+r}if(e.hasChildren()&&!t){var i=mapChildrenIntoArray(e,function(t,r){return r===_?[serializeSegment(e.children[_],!1)]:[r+":"+serializeSegment(t,!1)]});return serializePaths(e)+"/("+i.join("//")+")"}return serializePaths(e)}function encode(e){return encodeURIComponent(e)}function decode(e){return decodeURIComponent(e)}function serializePath(e){return""+encode(e.path)+serializeParams(e.parameters)}function serializeParams(e){return pairs(e).map(function(e){return";"+encode(e.first)+"="+encode(e.second)}).join("")}function serializeQueryParams(e){var t=pairs(e).map(function(e){return encode(e.first)+"="+encode(e.second)});return t.length>0?"?"+t.join("&"):""}function pairs(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(new M(r,e[r]));return t}function matchSegments(e){I.lastIndex=0;var t=e.match(I);return t?t[0]:""}function matchQueryParams(e){O.lastIndex=0;var t=e.match(I);return t?t[0]:""}function matchUrlQueryParamValue(e){R.lastIndex=0;var t=e.match(R);return t?t[0]:""}function noMatch(e){return new p.Observable(function(t){return t.error(new N(e))})}function absoluteRedirect(e){return new p.Observable(function(t){return t.error(new D(e))})}function canLoadFails(e){return new p.Observable(function(t){return t.error(new w("Cannot load children because the guard of the route \"path: '"+e.path+"'\" returned false"))})}function applyRedirects(e,t,r,n){return new B(e,t,r,n).apply()}function runGuards(e,t){var r=t.canLoad;if(!r||0===r.length)return o.of(!0);var n=s.map.call(i.from(r),function(r){var n=e.get(r);return wrapIntoObservable(n.canLoad?n.canLoad(t):n(t))});return andObservables(n)}function match(e,t,r){var n={matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}};if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||r.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};for(var i=t.path,o=i.split("/"),a={},s=[],l=0,c=0;c<o.length;++c){if(l>=r.length)return n;var u=r[l],p=o[c],h=p.startsWith(":");if(!h&&p!==u.path)return n;h&&(a[p.substring(1)]=u),s.push(u),l++}return"full"===t.pathMatch&&(e.hasChildren()||l<r.length)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:s,lastChild:l,positionalParamSegments:a}}function applyRedirectCommands(e,t,r){var n=t.startsWith("/")?t.substring(1):t;return""===n?[]:createSegments(t,n.split("/"),e,r)}function createSegments(e,t,r,n){return t.map(function(t){return t.startsWith(":")?findPosParam(t,n,e):findOrCreateSegment(t,r)})}function findPosParam(e,t,r){var n=e.substring(1),i=t[n];if(!i)throw new Error("Cannot redirect to '"+r+"'. Cannot find '"+e+"'.");return i}function findOrCreateSegment(e,t){for(var r=0,n=0,i=t;n<i.length;n++){var o=i[n];if(o.path===e)return t.splice(r),o;r++}return new A(e,{})}function split(e,t,r,n){if(r.length>0&&containsEmptyPathRedirectsWithNamedOutlets(e,r,n)){var i=new E(t,createChildrenForEmptySegments(n,new E(r,e.children)));return{segmentGroup:mergeTrivialChildren(i),slicedSegments:[]}}if(0===r.length&&containsEmptyPathRedirects(e,r,n)){var i=new E(e.segments,addEmptySegmentsToChildrenIfNeeded(e,r,n,e.children));return{segmentGroup:mergeTrivialChildren(i),slicedSegments:r}}return{segmentGroup:e,slicedSegments:r}}function mergeTrivialChildren(e){if(1===e.numberOfChildren&&e.children[_]){var t=e.children[_];return new E(e.segments.concat(t.segments),t.children)}return e}function addEmptySegmentsToChildrenIfNeeded(e,t,r,n){for(var i={},o=0,a=r;o<a.length;o++){var s=a[o];emptyPathRedirect(e,t,s)&&!n[getOutlet$1(s)]&&(i[getOutlet$1(s)]=new E([],{}))}return merge(n,i)}function createChildrenForEmptySegments(e,t){var r={};r[_]=t;for(var n=0,i=e;n<i.length;n++){var o=i[n];""===o.path&&getOutlet$1(o)!==_&&(r[getOutlet$1(o)]=new E([],{}))}return r}function containsEmptyPathRedirectsWithNamedOutlets(e,t,r){return r.filter(function(r){return emptyPathRedirect(e,t,r)&&getOutlet$1(r)!==_}).length>0}function containsEmptyPathRedirects(e,t,r){return r.filter(function(r){return emptyPathRedirect(e,t,r)}).length>0}function emptyPathRedirect(e,t,r){return(!(e.hasChildren()||t.length>0)||"full"!==r.pathMatch)&&(""===r.path&&void 0!==r.redirectTo)}function getOutlet$1(e){return e.outlet?e.outlet:_}function validateConfig(e){e.forEach(validateNode)}function validateNode(e){if(Array.isArray(e))throw new Error("Invalid route configuration: Array cannot be specified");if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '"+e.path+"': redirectTo and children cannot be used together");if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '"+e.path+"': redirectTo and loadChildren cannot be used together");if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '"+e.path+"': children and loadChildren cannot be used together");if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '"+e.path+"': redirectTo and component cannot be used together");if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '"+e.path+"': one of the following must be provided (component or redirectTo or children or loadChildren)");if(void 0===e.path)throw new Error("Invalid route configuration: routes must have path specified");if(e.path.startsWith("/"))throw new Error("Invalid route configuration of route '"+e.path+"': path cannot start with a slash");if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch){var t="The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.";throw new Error("Invalid route configuration of route '{path: \""+e.path+'", redirectTo: "'+e.redirectTo+"\"}': please provide 'pathMatch'. "+t)}if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '"+e.path+"': pathMatch can only be set to 'prefix' or 'full'")}function findNode(e,t){if(e===t.value)return t;for(var r=0,n=t.children;r<n.length;r++){var i=n[r],o=findNode(e,i);if(o)return o}return null}function findPath(e,t,r){if(r.push(t),e===t.value)return r;for(var n=0,i=t.children;n<i.length;n++){var o=i[n],a=r.slice(0),s=findPath(e,o,a);if(s.length>0)return s}return[]}function createEmptyState(e,t){var r=createEmptyStateSnapshot(e,t),n=new v.BehaviorSubject([new A("",{})]),i=new v.BehaviorSubject({}),o=new v.BehaviorSubject({}),a=new v.BehaviorSubject({}),s=new v.BehaviorSubject(""),l=new z(n,i,a,s,o,_,t,r.root);return l.snapshot=r.root,new U(new F(l,[]),r)}function createEmptyStateSnapshot(e,t){var r={},n={},i={},o="",a=new H([],r,i,o,n,_,t,null,e.root,(-1),W.empty);return new q("",new F(a,[]))}function setRouterStateSnapshot(e,t){t.value._routerState=e,t.children.forEach(function(t){return setRouterStateSnapshot(e,t)})}function serializeNode(e){var t=e.children.length>0?" { "+e.children.map(serializeNode).join(", ")+" } ":"";return""+e.value+t}function advanceActivatedRoute(e){e.snapshot?(shallowEqual(e.snapshot.queryParams,e._futureSnapshot.queryParams)||e.queryParams.next(e._futureSnapshot.queryParams),e.snapshot.fragment!==e._futureSnapshot.fragment&&e.fragment.next(e._futureSnapshot.fragment),shallowEqual(e.snapshot.params,e._futureSnapshot.params)||(e.params.next(e._futureSnapshot.params),e.data.next(e._futureSnapshot.data)),shallowEqualArrays(e.snapshot.url,e._futureSnapshot.url)||e.url.next(e._futureSnapshot.url),e.snapshot=e._futureSnapshot):(e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data))}function createRouterState(e,t){var r=createNode(e._root,t?t._root:void 0);return new U(r,e)}function createNode(e,t){if(t&&equalRouteSnapshots(t.value.snapshot,e.value)){var r=t.value;r._futureSnapshot=e.value;var n=createOrReuseChildren(e,t);return new F(r,n)}var r=createActivatedRoute(e.value),n=e.children.map(function(e){return createNode(e)});return new F(r,n)}function createOrReuseChildren(e,t){return e.children.map(function(e){for(var r=0,n=t.children;r<n.length;r++){var i=n[r];if(equalRouteSnapshots(i.value.snapshot,e.value))return createNode(e,i)}return createNode(e)})}function createActivatedRoute(e){return new z(new v.BehaviorSubject(e.url),new v.BehaviorSubject(e.params),new v.BehaviorSubject(e.queryParams),new v.BehaviorSubject(e.fragment),new v.BehaviorSubject(e.data),e.outlet,e.component,e)}function equalRouteSnapshots(e,t){return e._routeConfig===t._routeConfig}function createUrlTree(e,t,r,n,i){if(0===r.length)return tree(t.root,t.root,t,n,i);var o=normalizeCommands(r);if(validateCommands(o),navigateToRoot(o))return tree(t.root,new E([],{}),t,n,i);var a=findStartingPosition(o,t,e),s=a.processChildren?updateSegmentGroupChildren(a.segmentGroup,a.index,o.commands):updateSegmentGroup(a.segmentGroup,a.index,o.commands);return tree(a.segmentGroup,s,t,n,i)}function validateCommands(e){if(e.isAbsolute&&e.commands.length>0&&isMatrixParams(e.commands[0]))throw new Error("Root segment cannot have matrix parameters");var t=e.commands.filter(function(e){return"object"==typeof e&&void 0!==e.outlets});if(t.length>0&&t[0]!==e.commands[e.commands.length-1])throw new Error("{outlets:{}} has to be the last command")}function isMatrixParams(e){return"object"==typeof e&&void 0===e.outlets&&void 0===e.segmentPath}function tree(e,t,r,n,i){return r.root===e?new k(t,stringify(n),i):new k(replaceSegment(r.root,e,t),stringify(n),i)}function replaceSegment(e,t,r){var n={};return forEach(e.children,function(e,i){e===t?n[i]=r:n[i]=replaceSegment(e,t,r)}),new E(e.segments,n)}function navigateToRoot(e){return e.isAbsolute&&1===e.commands.length&&"/"==e.commands[0]}function normalizeCommands(e){if("string"==typeof e[0]&&1===e.length&&"/"==e[0])return new G((!0),0,e);for(var t=0,r=!1,n=[],i=function(i){var o=e[i];if("object"==typeof o&&void 0!==o.outlets){var a={};return forEach(o.outlets,function(e,t){"string"==typeof e?a[t]=e.split("/"):a[t]=e}),n.push({outlets:a}),"continue"}if("object"==typeof o&&void 0!==o.segmentPath)return n.push(o.segmentPath),"continue";if("string"!=typeof o)return n.push(o),"continue";if(0===i)for(var s=o.split("/"),l=0;l<s.length;++l){var c=s[l];0==l&&"."==c||(0==l&&""==c?r=!0:".."==c?t++:""!=c&&n.push(c))}else n.push(o)},o=0;o<e.length;++o)i(o);return new G(r,t,n)}function findStartingPosition(e,t,r){if(e.isAbsolute)return new K(t.root,(!0),0);if(r.snapshot._lastPathIndex===-1)return new K(r.snapshot._urlSegment,(!0),0);var n=isMatrixParams(e.commands[0])?0:1,i=r.snapshot._lastPathIndex+n;return createPositionApplyingDoubleDots(r.snapshot._urlSegment,i,e.numberOfDoubleDots)}function createPositionApplyingDoubleDots(e,t,r){for(var n=e,i=t,o=r;o>i;){if(o-=i,n=n.parent,!n)throw new Error("Invalid number of '../'");i=n.segments.length}return new K(n,(!1),i-o)}function getPath(e){return""+e}function getOutlets(e){return"object"!=typeof e[0]?(t={},t[_]=e,t):void 0===e[0].outlets?(r={},r[_]=e,r):e[0].outlets;var t,r}function updateSegmentGroup(e,t,r){if(e||(e=new E([],{})),0===e.segments.length&&e.hasChildren())return updateSegmentGroupChildren(e,t,r);var n=prefixedWith(e,t,r),i=r.slice(n.lastIndex);return n.match&&0===i.length?new E(e.segments,{}):n.match&&!e.hasChildren()?createNewSegmentGroup(e,t,r):n.match?updateSegmentGroupChildren(e,0,i):createNewSegmentGroup(e,t,r)}function updateSegmentGroupChildren(e,t,r){if(0===r.length)return new E(e.segments,{});var n=getOutlets(r),i={};return forEach(n,function(r,n){null!==r&&(i[n]=updateSegmentGroup(e.children[n],t,r))}),forEach(e.children,function(e,t){void 0===n[t]&&(i[t]=e)}),new E(e.segments,i)}function prefixedWith(e,t,r){for(var n=0,i=t,o={match:!1,lastIndex:0};i<e.segments.length;){if(n>=r.length)return o;var a=e.segments[i],s=getPath(r[n]),l=n<r.length-1?r[n+1]:null;if(s&&l&&"object"==typeof l&&void 0===l.outlets){if(!compare(s,l,a))return o;n+=2}else{if(!compare(s,{},a))return o;n++}i++}return{match:!0,lastIndex:n}}function createNewSegmentGroup(e,t,r){for(var n=e.segments.slice(0,t),i=0;i<r.length;){if("object"==typeof r[i]&&void 0!==r[i].outlets){var o=createNewSegmentChldren(r[i].outlets);return new E(n,o)}if(0===i&&isMatrixParams(r[0])){var a=e.segments[t];n.push(new A(a.path,r[0])),i++}else{var s=getPath(r[i]),l=i<r.length-1?r[i+1]:null;s&&l&&isMatrixParams(l)?(n.push(new A(s,stringify(l))),i+=2):(n.push(new A(s,{})),i++)}}return new E(n,{})}function createNewSegmentChldren(e){var t={};return forEach(e,function(e,r){null!==e&&(t[r]=createNewSegmentGroup(new E([],{}),0,e))}),t}function stringify(e){var t={};return forEach(e,function(e,r){return t[r]=""+e}),t}function compare(e,t,r){return e==r.path&&shallowEqual(t,r.parameters)}function recognize(e,t,r,n){return new Y(e,t,r,n).recognize()}function sortActivatedRouteSnapshots(e){e.sort(function(e,t){return e.value.outlet===_?-1:t.value.outlet===_?1:e.value.outlet.localeCompare(t.value.outlet)})}function getChildConfig(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}function match$1(e,t,r,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||r.length>0))throw new $;var i=n?n.params:{};return{consumedSegments:[],lastChild:0,parameters:i}}for(var o=t.path,a=o.split("/"),s={},l=[],c=0,u=0;u<a.length;++u){if(c>=r.length)throw new $;var p=r[c],h=a[u],d=h.startsWith(":");if(!d&&h!==p.path)throw new $;d&&(s[h.substring(1)]=p.path),
l.push(p),c++}if("full"===t.pathMatch&&(e.hasChildren()||c<r.length))throw new $;var f=merge(s,l[l.length-1].parameters);return{consumedSegments:l,lastChild:c,parameters:f}}function checkOutletNameUniqueness(e){var t={};e.forEach(function(e){var r=t[e.value.outlet];if(r){var n=r.url.map(function(e){return e.toString()}).join("/"),i=e.value.url.map(function(e){return e.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+n+"' and '"+i+"'.")}t[e.value.outlet]=e.value})}function getSourceSegmentGroup(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function getPathIndexShift(e){for(var t=e,r=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)t=t._sourceSegment,r+=t._segmentIndexShift?t._segmentIndexShift:0;return r-1}function split$1(e,t,r,n){if(r.length>0&&containsEmptyPathMatchesWithNamedOutlets(e,r,n)){var i=new E(t,createChildrenForEmptyPaths(e,t,n,new E(r,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===r.length&&containsEmptyPathMatches(e,r,n)){var i=new E(e.segments,addEmptyPathsToChildrenIfNeeded(e,r,n,e.children));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:r}}var i=new E(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:r}}function addEmptyPathsToChildrenIfNeeded(e,t,r,n){for(var i={},o=0,a=r;o<a.length;o++){var s=a[o];if(emptyPathMatch(e,t,s)&&!n[getOutlet$2(s)]){var l=new E([],{});l._sourceSegment=e,l._segmentIndexShift=e.segments.length,i[getOutlet$2(s)]=l}}return merge(n,i)}function createChildrenForEmptyPaths(e,t,r,n){var i={};i[_]=n,n._sourceSegment=e,n._segmentIndexShift=t.length;for(var o=0,a=r;o<a.length;o++){var s=a[o];if(""===s.path&&getOutlet$2(s)!==_){var l=new E([],{});l._sourceSegment=e,l._segmentIndexShift=t.length,i[getOutlet$2(s)]=l}}return i}function containsEmptyPathMatchesWithNamedOutlets(e,t,r){return r.filter(function(r){return emptyPathMatch(e,t,r)&&getOutlet$2(r)!==_}).length>0}function containsEmptyPathMatches(e,t,r){return r.filter(function(r){return emptyPathMatch(e,t,r)}).length>0}function emptyPathMatch(e,t,r){return(!(e.hasChildren()||t.length>0)||"full"!==r.pathMatch)&&(""===r.path&&void 0===r.redirectTo)}function getOutlet$2(e){return e.outlet?e.outlet:_}function getData(e){return e.data?e.data:{}}function getResolve(e){return e.resolve?e.resolve:{}}function defaultErrorHandler(e){throw e}function parentLoadedConfig(e){for(var t=e.parent;t;){var r=t._routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null;t=t.parent}return null}function closestLoadedConfig(e){if(!e)return null;for(var t=e.parent;t;){var r=t._routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;t=t.parent}return null}function nodeChildrenAsMap(e){return e?e.children.reduce(function(e,t){return e[t.value.outlet]=t,e},{}):{}}function getOutlet(e,t){var r=e._outlets[t.outlet];if(!r){var n=t.component.name;throw t.outlet===_?new Error("Cannot find primary outlet to load '"+n+"'"):new Error("Cannot find the outlet "+t.outlet+" to load '"+n+"'")}return r}function toBool(e){return""===e||!!e}function provideLocationStrategy(e,r,n){return void 0===n&&(n={}),n.useHash?new t.HashLocationStrategy(e,r):new t.PathLocationStrategy(e,r)}function provideForRootGuard(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function provideRoutes(e){return[{provide:r.ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:e},{provide:x,multi:!0,useValue:e}]}function setupRouter(e,t,r,n,i,o,a,s,l){if(void 0===l&&(l={}),0==e.componentTypes.length)throw new Error("Bootstrap at least one component before injecting Router.");var c=e.componentTypes[0],u=new ne(c,t,r,n,i,o,a,flatten(s));return l.errorHandler&&(u.errorHandler=l.errorHandler),l.enableTracing&&u.events.subscribe(function(e){console.group("Router Event: "+e.constructor.name),console.log(e.toString()),console.log(e),console.groupEnd()}),u}function rootRoute(e){return e.routerState.root}function initialRouterNavigation(e,t){return function(){t.initialNavigation===!1?e.setUpLocationChangeListener():e.initialNavigation()}}function provideRouterInitializer(){return{provide:r.APP_BOOTSTRAP_LISTENER,multi:!0,useFactory:initialRouterNavigation,deps:[ne,de]}}var b=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},_="primary",w=function(e){function NavigationCancelingError(t){e.call(this,t),this.message=t,this.stack=new Error(t).stack}return b(NavigationCancelingError,e),NavigationCancelingError.prototype.toString=function(){return this.message},NavigationCancelingError}(Error),x=new r.OpaqueToken("ROUTES"),S=function(){function LoadedRouterConfig(e,t,r){this.routes=e,this.injector=t,this.factoryResolver=r}return LoadedRouterConfig}(),C=function(){function RouterConfigLoader(e,t){this.loader=e,this.compiler=t}return RouterConfigLoader.prototype.load=function(e,t){return s.map.call(this.loadModuleFactory(t),function(t){var r=t.create(e);return new S(flatten(r.injector.get(x)),r.injector,r.componentFactoryResolver)})},RouterConfigLoader.prototype.loadModuleFactory=function(e){var t=this;if("string"==typeof e)return g.fromPromise(this.loader.load(e));var n=this.compiler instanceof r.Compiler;return c.mergeMap.call(wrapIntoObservable(e()),function(e){return n?o.of(e):g.fromPromise(t.compiler.compileModuleAsync(e))})},RouterConfigLoader}(),k=function(){function UrlTree(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}return UrlTree.prototype.toString=function(){return(new T).serialize(this)},UrlTree}(),E=function(){function UrlSegmentGroup(e,t){var r=this;this.segments=e,this.children=t,this.parent=null,forEach(t,function(e,t){return e.parent=r})}return UrlSegmentGroup.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(UrlSegmentGroup.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),UrlSegmentGroup.prototype.toString=function(){return serializePaths(this)},UrlSegmentGroup}(),A=function(){function UrlSegment(e,t){this.path=e,this.parameters=t}return UrlSegment.prototype.toString=function(){return serializePath(this)},UrlSegment}(),P=function(){function UrlSerializer(){}return UrlSerializer}(),T=function(){function DefaultUrlSerializer(){}return DefaultUrlSerializer.prototype.parse=function(e){var t=new L(e);return new k(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())},DefaultUrlSerializer.prototype.serialize=function(e){var t="/"+serializeSegment(e.root,!0),r=serializeQueryParams(e.queryParams),n=null!==e.fragment&&void 0!==e.fragment?"#"+encodeURI(e.fragment):"";return""+t+r+n},DefaultUrlSerializer}(),M=function(){function Pair(e,t){this.first=e,this.second=t}return Pair}(),I=/^[^\/\(\)\?;=&#]+/,O=/^[^=\?&#]+/,R=/^[^\?&#]+/,L=function(){function UrlParser(e){this.url=e,this.remaining=e}return UrlParser.prototype.peekStartsWith=function(e){return this.remaining.startsWith(e)},UrlParser.prototype.capture=function(e){if(!this.remaining.startsWith(e))throw new Error('Expected "'+e+'".');this.remaining=this.remaining.substring(e.length)},UrlParser.prototype.parseRootSegment=function(){return this.remaining.startsWith("/")&&this.capture("/"),""===this.remaining||this.remaining.startsWith("?")||this.remaining.startsWith("#")?new E([],{}):new E([],this.parseChildren())},UrlParser.prototype.parseChildren=function(){if(0==this.remaining.length)return{};this.peekStartsWith("/")&&this.capture("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegments());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegments());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[_]=new E(e,t)),r},UrlParser.prototype.parseSegments=function(){var e=matchSegments(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");this.capture(e);var t={};return this.peekStartsWith(";")&&(t=this.parseMatrixParams()),new A(decode(e),t)},UrlParser.prototype.parseQueryParams=function(){var e={};if(this.peekStartsWith("?"))for(this.capture("?"),this.parseQueryParam(e);this.remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(e);return e},UrlParser.prototype.parseFragment=function(){return this.peekStartsWith("#")?decodeURI(this.remaining.substring(1)):null},UrlParser.prototype.parseMatrixParams=function(){for(var e={};this.remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(e);return e},UrlParser.prototype.parseParam=function(e){var t=matchSegments(this.remaining);if(t){this.capture(t);var r="";if(this.peekStartsWith("=")){this.capture("=");var n=matchSegments(this.remaining);n&&(r=n,this.capture(r))}e[decode(t)]=decode(r)}},UrlParser.prototype.parseQueryParam=function(e){var t=matchQueryParams(this.remaining);if(t){this.capture(t);var r="";if(this.peekStartsWith("=")){this.capture("=");var n=matchUrlQueryParamValue(this.remaining);n&&(r=n,this.capture(r))}e[decode(t)]=decode(r)}},UrlParser.prototype.parseParens=function(e){var t={};for(this.capture("(");!this.peekStartsWith(")")&&this.remaining.length>0;){var r=matchSegments(this.remaining),n=this.remaining[r.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;r.indexOf(":")>-1?(i=r.substr(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=_);var o=this.parseChildren();t[i]=1===Object.keys(o).length?o[_]:new E([],o),this.peekStartsWith("//")&&this.capture("//")}return this.capture(")"),t},UrlParser}(),N=function(){function NoMatch(e){void 0===e&&(e=null),this.segmentGroup=e}return NoMatch}(),D=function(){function AbsoluteRedirect(e){this.segments=e}return AbsoluteRedirect}(),B=function(){function ApplyRedirects(e,t,r,n){this.injector=e,this.configLoader=t,this.urlTree=r,this.config=n,this.allowRedirects=!0}return ApplyRedirects.prototype.apply=function(){var e=this,t=this.expandSegmentGroup(this.injector,this.config,this.urlTree.root,_),r=s.map.call(t,function(t){return e.createUrlTree(t)});return h._catch.call(r,function(t){if(t instanceof D){e.allowRedirects=!1;var r=new E([],(n={},n[_]=new E(t.segments,{}),n));return e.match(r)}throw t instanceof N?e.noMatchError(t):t;var n})},ApplyRedirects.prototype.match=function(e){var t=this,r=this.expandSegmentGroup(this.injector,this.config,e,_),n=s.map.call(r,function(e){return t.createUrlTree(e)});return h._catch.call(n,function(e){throw e instanceof N?t.noMatchError(e):e})},ApplyRedirects.prototype.noMatchError=function(e){return new Error("Cannot match any routes: '"+e.segmentGroup+"'")},ApplyRedirects.prototype.createUrlTree=function(e){var t=e.segments.length>0?new E([],(r={},r[_]=e,r)):e;return new k(t,this.urlTree.queryParams,this.urlTree.fragment);var r},ApplyRedirects.prototype.expandSegmentGroup=function(e,t,r,n){return 0===r.segments.length&&r.hasChildren()?s.map.call(this.expandChildren(e,t,r),function(e){return new E([],e)}):this.expandSegment(e,r,t,r.segments,n,!0)},ApplyRedirects.prototype.expandChildren=function(e,t,r){var n=this;return waitForMap(r.children,function(r,i){return n.expandSegmentGroup(e,t,i,r)})},ApplyRedirects.prototype.expandSegment=function(e,t,r,n,i,a){var l=this,c=o.of.apply(void 0,r),u=s.map.call(c,function(s){var c=l.expandSegmentAgainstRoute(e,t,r,s,n,i,a);return h._catch.call(c,function(e){if(e instanceof N)return o.of(null);throw e})}),p=d.concatAll.call(u),g=f.first.call(p,function(e){return!!e});return h._catch.call(g,function(e,r){throw e instanceof m.EmptyError?new N(t):e})},ApplyRedirects.prototype.expandSegmentAgainstRoute=function(e,t,r,n,i,o,a){return getOutlet$1(n)!==o?noMatch(t):void 0===n.redirectTo||a&&this.allowRedirects?void 0===n.redirectTo?this.matchSegmentAgainstRoute(e,t,n,i):this.expandSegmentAgainstRouteUsingRedirect(e,t,r,n,i,o):noMatch(t)},ApplyRedirects.prototype.expandSegmentAgainstRouteUsingRedirect=function(e,t,r,n,i,o){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,n,i,o)},ApplyRedirects.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(e){var t=applyRedirectCommands([],e.redirectTo,{});return e.redirectTo.startsWith("/")?absoluteRedirect(t):o.of(new E(t,{}))},ApplyRedirects.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(e,t,r,n,i,o){var a=match(t,n,i),s=a.matched,l=a.consumedSegments,c=a.lastChild,u=a.positionalParamSegments;if(!s)return noMatch(t);var p=applyRedirectCommands(l,n.redirectTo,u);return n.redirectTo.startsWith("/")?absoluteRedirect(p):this.expandSegment(e,t,r,p.concat(i.slice(c)),o,!1)},ApplyRedirects.prototype.matchSegmentAgainstRoute=function(e,t,r,n){var i=this;if("**"===r.path)return o.of(new E(n,{}));var a=match(t,r,n),l=a.matched,u=a.consumedSegments,p=a.lastChild;if(!l)return noMatch(t);var h=n.slice(p),d=this.getChildConfig(e,r);return c.mergeMap.call(d,function(e){var r=e.injector,n=e.routes,a=split(t,u,h,n),l=a.segmentGroup,c=a.slicedSegments;if(0===c.length&&l.hasChildren()){var p=i.expandChildren(r,n,l);return s.map.call(p,function(e){return new E(u,e)})}if(0===n.length&&0===c.length)return o.of(new E(u,{}));var p=i.expandSegment(r,l,n,c,_,!0);return s.map.call(p,function(e){return new E(u.concat(e.segments),e.children)})})},ApplyRedirects.prototype.getChildConfig=function(e,t){var r=this;return t.children?o.of(new S(t.children,e,null)):t.loadChildren?c.mergeMap.call(runGuards(e,t),function(n){return n?t._loadedConfig?o.of(t._loadedConfig):s.map.call(r.configLoader.load(e,t.loadChildren),function(e){return t._loadedConfig=e,e}):canLoadFails(t)}):o.of(new S([],e,null))},ApplyRedirects}(),V=function(){function Tree(e){this._root=e}return Object.defineProperty(Tree.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),Tree.prototype.parent=function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null},Tree.prototype.children=function(e){var t=findNode(e,this._root);return t?t.children.map(function(e){return e.value}):[]},Tree.prototype.firstChild=function(e){var t=findNode(e,this._root);return t&&t.children.length>0?t.children[0].value:null},Tree.prototype.siblings=function(e){var t=findPath(e,this._root,[]);if(t.length<2)return[];var r=t[t.length-2].children.map(function(e){return e.value});return r.filter(function(t){return t!==e})},Tree.prototype.pathFromRoot=function(e){return findPath(e,this._root,[]).map(function(e){return e.value})},Tree}(),F=function(){function TreeNode(e,t){this.value=e,this.children=t}return TreeNode.prototype.toString=function(){return"TreeNode("+this.value+")"},TreeNode}(),j=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},U=function(e){function RouterState(t,r){e.call(this,t),this.snapshot=r,setRouterStateSnapshot(this,t)}return j(RouterState,e),RouterState.prototype.toString=function(){return this.snapshot.toString()},RouterState}(V),z=function(){function ActivatedRoute(e,t,r,n,i,o,a,s){this.url=e,this.params=t,this.queryParams=r,this.fragment=n,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(ActivatedRoute.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),ActivatedRoute.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},ActivatedRoute}(),W=function(){function InheritedResolve(e,t){this.parent=e,this.current=t,this.resolvedData={}}return Object.defineProperty(InheritedResolve.prototype,"flattenedResolvedData",{get:function(){return this.parent?merge(this.parent.flattenedResolvedData,this.resolvedData):this.resolvedData},enumerable:!0,configurable:!0}),Object.defineProperty(InheritedResolve,"empty",{get:function(){return new InheritedResolve(null,{})},enumerable:!0,configurable:!0}),InheritedResolve}(),H=function(){function ActivatedRouteSnapshot(e,t,r,n,i,o,a,s,l,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=n,this.data=i,this.outlet=o,this.component=a,this._routeConfig=s,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}return Object.defineProperty(ActivatedRouteSnapshot.prototype,"routeConfig",{get:function(){return this._routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),ActivatedRouteSnapshot.prototype.toString=function(){var e=this.url.map(function(e){return e.toString()}).join("/"),t=this._routeConfig?this._routeConfig.path:"";return"Route(url:'"+e+"', path:'"+t+"')"},ActivatedRouteSnapshot}(),q=function(e){function RouterStateSnapshot(t,r){e.call(this,r),this.url=t,setRouterStateSnapshot(this,r)}return j(RouterStateSnapshot,e),RouterStateSnapshot.prototype.toString=function(){return serializeNode(this._root)},RouterStateSnapshot}(V),G=function(){function NormalizedNavigationCommands(e,t,r){this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r}return NormalizedNavigationCommands}(),K=function(){function Position(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}return Position}(),$=function(){function NoMatch(){}return NoMatch}(),Q=function(){function InheritedFromParent(e,t,r,n,i){this.parent=e,this.snapshot=t,this.params=r,this.data=n,this.resolve=i}return Object.defineProperty(InheritedFromParent.prototype,"allParams",{get:function(){return this.parent?merge(this.parent.allParams,this.params):this.params},enumerable:!0,configurable:!0}),Object.defineProperty(InheritedFromParent.prototype,"allData",{get:function(){return this.parent?merge(this.parent.allData,this.data):this.data},enumerable:!0,configurable:!0}),InheritedFromParent.empty=function(e){return new InheritedFromParent(null,e,{},{},new W(null,{}))},InheritedFromParent}(),Y=function(){function Recognizer(e,t,r,n){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=n}return Recognizer.prototype.recognize=function(){try{var e=split$1(this.urlTree.root,[],[],this.config).segmentGroup,t=this.processSegmentGroup(this.config,e,Q.empty(null),_),r=new H([],Object.freeze({}),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,{},_,this.rootComponentType,null,this.urlTree.root,(-1),W.empty),n=new F(r,t);return o.of(new q(this.url,n))}catch(i){return new p.Observable(function(e){return e.error(i)})}},Recognizer.prototype.processSegmentGroup=function(e,t,r,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,0,t.segments,r,n)},Recognizer.prototype.processChildren=function(e,t,r){var n=this,i=mapChildrenIntoArray(t,function(t,i){return n.processSegmentGroup(e,t,r,i)});return checkOutletNameUniqueness(i),sortActivatedRouteSnapshots(i),i},Recognizer.prototype.processSegment=function(e,t,r,n,i,o){for(var a=0,s=e;a<s.length;a++){var l=s[a];try{return this.processSegmentAgainstRoute(l,t,r,n,i,o)}catch(c){if(!(c instanceof $))throw c}}throw new $},Recognizer.prototype.processSegmentAgainstRoute=function(e,t,r,n,i,o){if(e.redirectTo)throw new $;if((e.outlet?e.outlet:_)!==o)throw new $;var a=new W(i.resolve,getResolve(e));if("**"===e.path){var s=n.length>0?last(n).parameters:{},l=new H(n,Object.freeze(merge(i.allParams,s)),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,merge(i.allData,getData(e)),o,e.component,e,getSourceSegmentGroup(t),getPathIndexShift(t)+n.length,a);return[new F(l,[])]}var c=match$1(t,e,n,i.snapshot),u=c.consumedSegments,p=c.parameters,h=c.lastChild,d=n.slice(h),f=getChildConfig(e),m=split$1(t,u,d,f),g=m.segmentGroup,y=m.slicedSegments,v=new H(u,Object.freeze(merge(i.allParams,p)),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,merge(i.allData,getData(e)),o,e.component,e,getSourceSegmentGroup(t),getPathIndexShift(t)+u.length,a),b=e.component?Q.empty(v):new Q(i,v,p,getData(e),a);if(0===y.length&&g.hasChildren()){var w=this.processChildren(f,g,b);return[new F(v,w)]}if(0===f.length&&0===y.length)return[new F(v,[])];var w=this.processSegment(f,g,r+h,y,b,_);return[new F(v,w)]},Recognizer}(),X=function(){function RouterOutletMap(){this._outlets={}}return RouterOutletMap.prototype.registerOutlet=function(e,t){this._outlets[e]=t},RouterOutletMap.prototype.removeOutlet=function(e){this._outlets[e]=void 0},RouterOutletMap}(),Z=function(){function NavigationStart(e,t){this.id=e,this.url=t}return NavigationStart.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},NavigationStart}(),J=function(){function NavigationEnd(e,t,r){this.id=e,this.url=t,this.urlAfterRedirects=r}return NavigationEnd.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},NavigationEnd}(),ee=function(){function NavigationCancel(e,t,r){this.id=e,this.url=t,this.reason=r}return NavigationCancel.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},NavigationCancel}(),te=function(){function NavigationError(e,t,r){this.id=e,this.url=t,this.error=r}return NavigationError.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},NavigationError}(),re=function(){function RoutesRecognized(e,t,r,n){this.id=e,this.url=t,this.urlAfterRedirects=r,this.state=n}return RoutesRecognized.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},RoutesRecognized}(),ne=function(){function Router(e,t,r,i,o,a,s,l){this.rootComponentType=e,this.urlSerializer=t,this.outletMap=r,this.location=i,this.injector=o,this.config=l,this.navigationId=0,this.errorHandler=defaultErrorHandler,this.navigated=!1,this.resetConfig(l),this.routerEvents=new n.Subject,this.currentUrlTree=createEmptyUrlTree(),this.configLoader=new C(a,s),this.currentRouterState=createEmptyState(this.currentUrlTree,this.rootComponentType)}return Router.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},Router.prototype.setUpLocationChangeListener=function(){var e=this;this.locationSubscription=this.location.subscribe(Zone.current.wrap(function(t){var r=e.urlSerializer.parse(t.url);return e.currentUrlTree.toString()!==r.toString()?e.scheduleNavigation(r,{skipLocationChange:t.pop,replaceUrl:!0}):null}))},Object.defineProperty(Router.prototype,"routerState",{get:function(){return this.currentRouterState},enumerable:!0,configurable:!0}),Object.defineProperty(Router.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),Object.defineProperty(Router.prototype,"events",{get:function(){return this.routerEvents},enumerable:!0,configurable:!0}),Router.prototype.resetConfig=function(e){validateConfig(e),this.config=e},Router.prototype.ngOnDestroy=function(){this.dispose()},Router.prototype.dispose=function(){this.locationSubscription.unsubscribe()},Router.prototype.createUrlTree=function(e,t){var r=void 0===t?{}:t,n=r.relativeTo,i=r.queryParams,o=r.fragment,a=r.preserveQueryParams,s=r.preserveFragment,l=n?n:this.routerState.root,c=a?this.currentUrlTree.queryParams:i,u=s?this.currentUrlTree.fragment:o;return createUrlTree(l,this.currentUrlTree,e,c,u)},Router.prototype.navigateByUrl=function(e,t){if(void 0===t&&(t={skipLocationChange:!1}),e instanceof k)return this.scheduleNavigation(e,t);var r=this.urlSerializer.parse(e);return this.scheduleNavigation(r,t)},Router.prototype.navigate=function(e,t){return void 0===t&&(t={skipLocationChange:!1}),this.scheduleNavigation(this.createUrlTree(e,t),t)},Router.prototype.serializeUrl=function(e){return this.urlSerializer.serialize(e)},Router.prototype.parseUrl=function(e){return this.urlSerializer.parse(e)},Router.prototype.isActive=function(e,t){if(e instanceof k)return containsTree(this.currentUrlTree,e,t);var r=this.urlSerializer.parse(e);return containsTree(this.currentUrlTree,r,t)},Router.prototype.scheduleNavigation=function(e,t){var r=this,n=++this.navigationId;return this.routerEvents.next(new Z(n,this.serializeUrl(e))),Promise.resolve().then(function(i){return r.runNavigate(e,t.skipLocationChange,t.replaceUrl,n)})},Router.prototype.runNavigate=function(e,t,r,n){var i=this;return n!==this.navigationId?(this.location.go(this.urlSerializer.serialize(this.currentUrlTree)),this.routerEvents.next(new ee(n,this.serializeUrl(e),"Navigation ID "+n+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(a,l){var u,p,h,d,f=i.currentRouterState,m=i.currentUrlTree,g=applyRedirects(i.injector,i.configLoader,e,i.config),y=c.mergeMap.call(g,function(e){return d=e,recognize(i.rootComponentType,i.config,d,i.serializeUrl(d))}),v=s.map.call(y,function(t){return i.routerEvents.next(new re(n,i.serializeUrl(e),i.serializeUrl(d),t)),t}),b=s.map.call(v,function(e){return createRouterState(e,i.currentRouterState)}),_=s.map.call(b,function(e){u=e,h=new ae(u.snapshot,i.currentRouterState.snapshot,i.injector),h.traverse(i.outletMap)}),x=c.mergeMap.call(_,function(){return h.checkGuards()}),S=c.mergeMap.call(x,function(e){return e?s.map.call(h.resolveData(),function(){return e}):o.of(e)});S.forEach(function(e){if(!e||n!==i.navigationId)return void(p=!1);if(i.currentUrlTree=d,i.currentRouterState=u,!t){var o=i.urlSerializer.serialize(d);i.location.isCurrentPathEqualTo(o)||r?i.location.replaceState(o):i.location.go(o)}new se(u,f).activate(i.outletMap),p=!0}).then(function(){i.navigated=!0,p?(i.routerEvents.next(new J(n,i.serializeUrl(e),i.serializeUrl(d))),a(!0)):(i.routerEvents.next(new ee(n,i.serializeUrl(e),"")),a(!1))},function(t){if(t instanceof w)i.navigated=!0,i.routerEvents.next(new ee(n,i.serializeUrl(e),t.message)),a(!1);else{i.routerEvents.next(new te(n,i.serializeUrl(e),t));try{a(i.errorHandler(t))}catch(r){l(r)}}n===i.navigationId&&(i.currentRouterState=f,i.currentUrlTree=m,i.location.replaceState(i.serializeUrl(m)))})})},Router}(),ie=function(){function CanActivate(e){this.path=e}return Object.defineProperty(CanActivate.prototype,"route",{get:function(){return this.path[this.path.length-1]},enumerable:!0,configurable:!0}),CanActivate}(),oe=function(){function CanDeactivate(e,t){this.component=e,this.route=t}return CanDeactivate}(),ae=function(){function PreActivation(e,t,r){this.future=e,this.curr=t,this.injector=r,this.checks=[]}return PreActivation.prototype.traverse=function(e){var t=this.future._root,r=this.curr?this.curr._root:null;this.traverseChildRoutes(t,r,e,[t.value])},PreActivation.prototype.checkGuards=function(){var e=this;if(0===this.checks.length)return o.of(!0);var t=i.from(this.checks),r=s.map.call(t,function(t){if(t instanceof ie)return andObservables(i.from([e.runCanActivateChild(t.path),e.runCanActivate(t.route)]));if(t instanceof oe){var r=t;return e.runCanDeactivate(r.component,r.route)}throw new Error("Cannot be reached")}),n=l.mergeAll.call(r);return a.every.call(n,function(e){return e===!0})},PreActivation.prototype.resolveData=function(){var e=this;if(0===this.checks.length)return o.of(null);var t=i.from(this.checks),r=c.mergeMap.call(t,function(t){return t instanceof ie?e.runResolve(t.route):o.of(null)});return u.reduce.call(r,function(e,t){return e})},PreActivation.prototype.traverseChildRoutes=function(e,t,r,n){var i=this,o=nodeChildrenAsMap(t);e.children.forEach(function(e){i.traverseRoutes(e,o[e.value.outlet],r,n.concat([e.value])),delete o[e.value.outlet]}),forEach(o,function(e,t){return i.deactivateOutletAndItChildren(e,r._outlets[t])})},PreActivation.prototype.traverseRoutes=function(e,t,r,n){var i=e.value,o=t?t.value:null,a=r?r._outlets[e.value.outlet]:null;o&&i._routeConfig===o._routeConfig?(shallowEqual(i.params,o.params)?i.data=o.data:this.checks.push(new oe(a.component,o),new ie(n)),i.component?this.traverseChildRoutes(e,t,a?a.outletMap:null,n):this.traverseChildRoutes(e,t,r,n)):(o&&(o.component?this.deactivateOutletAndItChildren(o,a):this.deactivateOutletMap(r)),this.checks.push(new ie(n)),i.component?this.traverseChildRoutes(e,null,a?a.outletMap:null,n):this.traverseChildRoutes(e,null,r,n))},PreActivation.prototype.deactivateOutletAndItChildren=function(e,t){t&&t.isActivated&&(this.deactivateOutletMap(t.outletMap),this.checks.push(new oe(t.component,e)))},PreActivation.prototype.deactivateOutletMap=function(e){var t=this;forEach(e._outlets,function(e){e.isActivated&&t.deactivateOutletAndItChildren(e.activatedRoute.snapshot,e)})},PreActivation.prototype.runCanActivate=function(e){var t=this,r=e._routeConfig?e._routeConfig.canActivate:null;if(!r||0===r.length)return o.of(!0);var n=s.map.call(i.from(r),function(r){var n=t.getToken(r,e);return wrapIntoObservable(n.canActivate?n.canActivate(e,t.future):n(e,t.future))});return andObservables(n)},PreActivation.prototype.runCanActivateChild=function(e){var t=this,r=e[e.length-1],n=e.slice(0,e.length-1).reverse().map(function(e){return t.extractCanActivateChild(e)}).filter(function(e){return null!==e});return andObservables(s.map.call(i.from(n),function(e){var n=s.map.call(i.from(e.guards),function(e){var n=t.getToken(e,e.node);return wrapIntoObservable(n.canActivateChild?n.canActivateChild(r,t.future):n(r,t.future))});return andObservables(n)}))},PreActivation.prototype.extractCanActivateChild=function(e){var t=e._routeConfig?e._routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null},PreActivation.prototype.runCanDeactivate=function(e,t){var r=this,n=t&&t._routeConfig?t._routeConfig.canDeactivate:null;if(!n||0===n.length)return o.of(!0);var c=s.map.call(i.from(n),function(n){var i=r.getToken(n,t);return wrapIntoObservable(i.canDeactivate?i.canDeactivate(e,t,r.curr):i(e,t,r.curr))}),u=l.mergeAll.call(c);return a.every.call(u,function(e){return e===!0})},PreActivation.prototype.runResolve=function(e){var t=e._resolve;return s.map.call(this.resolveNode(t.current,e),function(r){return t.resolvedData=r,e.data=merge(e.data,t.flattenedResolvedData),
null})},PreActivation.prototype.resolveNode=function(e,t){var r=this;return waitForMap(e,function(e,n){var i=r.getToken(n,t);return wrapIntoObservable(i.resolve?i.resolve(t,r.future):i(t,r.future))})},PreActivation.prototype.getToken=function(e,t){var r=closestLoadedConfig(t),n=r?r.injector:this.injector;return n.get(e)},PreActivation}(),se=function(){function ActivateRoutes(e,t){this.futureState=e,this.currState=t}return ActivateRoutes.prototype.activate=function(e){var t=this.futureState._root,r=this.currState?this.currState._root:null;advanceActivatedRoute(this.futureState.root),this.activateChildRoutes(t,r,e)},ActivateRoutes.prototype.activateChildRoutes=function(e,t,r){var n=this,i=nodeChildrenAsMap(t);e.children.forEach(function(e){n.activateRoutes(e,i[e.value.outlet],r),delete i[e.value.outlet]}),forEach(i,function(e,t){return n.deactivateOutletAndItChildren(r._outlets[t])})},ActivateRoutes.prototype.activateRoutes=function(e,t,r){var n=e.value,i=t?t.value:null;if(n===i)if(advanceActivatedRoute(n),n.component){var o=getOutlet(r,e.value);this.activateChildRoutes(e,t,o.outletMap)}else this.activateChildRoutes(e,t,r);else{if(i)if(i.component){var o=getOutlet(r,e.value);this.deactivateOutletAndItChildren(o)}else this.deactivateOutletMap(r);if(n.component){advanceActivatedRoute(n);var o=getOutlet(r,e.value),a=new X;this.placeComponentIntoOutlet(a,n,o),this.activateChildRoutes(e,null,a)}else advanceActivatedRoute(n),this.activateChildRoutes(e,null,r)}},ActivateRoutes.prototype.placeComponentIntoOutlet=function(e,t,n){var i=[{provide:z,useValue:t},{provide:X,useValue:e}],o=parentLoadedConfig(t.snapshot),a=null,s=null;o&&(a=o.factoryResolver,s=o.injector,i.push({provide:r.ComponentFactoryResolver,useValue:a})),n.activate(t,a,s,r.ReflectiveInjector.resolve(i),e)},ActivateRoutes.prototype.deactivateOutletAndItChildren=function(e){e&&e.isActivated&&(this.deactivateOutletMap(e.outletMap),e.deactivate())},ActivateRoutes.prototype.deactivateOutletMap=function(e){var t=this;forEach(e._outlets,function(e){return t.deactivateOutletAndItChildren(e)})},ActivateRoutes}(),le=function(){function RouterLink(e,t,r){this.router=e,this.route=t,this.locationStrategy=r,this.commands=[]}return Object.defineProperty(RouterLink.prototype,"routerLink",{set:function(e){Array.isArray(e)?this.commands=e:this.commands=[e]},enumerable:!0,configurable:!0}),RouterLink.prototype.onClick=function(e,t,r){return!(0===e&&!t&&!r)||(this.router.navigateByUrl(this.urlTree),!1)},Object.defineProperty(RouterLink.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:toBool(this.preserveQueryParams),preserveFragment:toBool(this.preserveFragment)})},enumerable:!0,configurable:!0}),RouterLink.decorators=[{type:r.Directive,args:[{selector:":not(a)[routerLink]"}]}],RouterLink.ctorParameters=[{type:ne},{type:z},{type:t.LocationStrategy}],RouterLink.propDecorators={queryParams:[{type:r.Input}],fragment:[{type:r.Input}],preserveQueryParams:[{type:r.Input}],preserveFragment:[{type:r.Input}],routerLink:[{type:r.Input}],onClick:[{type:r.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]},RouterLink}(),ce=function(){function RouterLinkWithHref(e,t,r){var n=this;this.router=e,this.route=t,this.locationStrategy=r,this.commands=[],this.subscription=e.events.subscribe(function(e){e instanceof J&&n.updateTargetUrlAndHref()})}return Object.defineProperty(RouterLinkWithHref.prototype,"routerLink",{set:function(e){Array.isArray(e)?this.commands=e:this.commands=[e]},enumerable:!0,configurable:!0}),RouterLinkWithHref.prototype.ngOnChanges=function(e){this.updateTargetUrlAndHref()},RouterLinkWithHref.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},RouterLinkWithHref.prototype.onClick=function(e,t,r){return!(0===e&&!t&&!r)||("string"==typeof this.target&&"_self"!=this.target||(this.router.navigateByUrl(this.urlTree),!1))},RouterLinkWithHref.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(RouterLinkWithHref.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:toBool(this.preserveQueryParams),preserveFragment:toBool(this.preserveFragment)})},enumerable:!0,configurable:!0}),RouterLinkWithHref.decorators=[{type:r.Directive,args:[{selector:"a[routerLink]"}]}],RouterLinkWithHref.ctorParameters=[{type:ne},{type:z},{type:t.LocationStrategy}],RouterLinkWithHref.propDecorators={target:[{type:r.Input}],queryParams:[{type:r.Input}],fragment:[{type:r.Input}],routerLinkOptions:[{type:r.Input}],preserveQueryParams:[{type:r.Input}],preserveFragment:[{type:r.Input}],href:[{type:r.HostBinding}],routerLink:[{type:r.Input}],onClick:[{type:r.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]},RouterLinkWithHref}(),ue=function(){function RouterLinkActive(e,t,r){var n=this;this.router=e,this.element=t,this.renderer=r,this.classes=[],this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(function(e){e instanceof J&&n.update()})}return RouterLinkActive.prototype.ngAfterContentInit=function(){var e=this;this.links.changes.subscribe(function(t){return e.update()}),this.linksWithHrefs.changes.subscribe(function(t){return e.update()}),this.update()},Object.defineProperty(RouterLinkActive.prototype,"routerLinkActive",{set:function(e){Array.isArray(e)?this.classes=e:this.classes=e.split(" ")},enumerable:!0,configurable:!0}),RouterLinkActive.prototype.ngOnChanges=function(e){this.update()},RouterLinkActive.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},RouterLinkActive.prototype.update=function(){var e=this;if(this.links&&this.linksWithHrefs&&this.router.navigated){var t=this.reduceList(this.links),r=this.reduceList(this.linksWithHrefs);this.classes.forEach(function(n){return e.renderer.setElementClass(e.element.nativeElement,n,t||r)})}},RouterLinkActive.prototype.reduceList=function(e){var t=this;return e.reduce(function(e,r){return e||t.router.isActive(r.urlTree,t.routerLinkActiveOptions.exact)},!1)},RouterLinkActive.decorators=[{type:r.Directive,args:[{selector:"[routerLinkActive]"}]}],RouterLinkActive.ctorParameters=[{type:ne},{type:r.ElementRef},{type:r.Renderer}],RouterLinkActive.propDecorators={links:[{type:r.ContentChildren,args:[le,{descendants:!0}]}],linksWithHrefs:[{type:r.ContentChildren,args:[ce,{descendants:!0}]}],routerLinkActiveOptions:[{type:r.Input}],routerLinkActive:[{type:r.Input}]},RouterLinkActive}(),pe=function(){function RouterOutlet(e,t,n,i){this.parentOutletMap=e,this.location=t,this.resolver=n,this.name=i,this.activateEvents=new r.EventEmitter,this.deactivateEvents=new r.EventEmitter,e.registerOutlet(i?i:_,this)}return RouterOutlet.prototype.ngOnDestroy=function(){this.parentOutletMap.removeOutlet(this.name?this.name:_)},Object.defineProperty(RouterOutlet.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(RouterOutlet.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(RouterOutlet.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),RouterOutlet.prototype.deactivate=function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this.deactivateEvents.emit(e)}},RouterOutlet.prototype.activate=function(e,t,n,i,o){this.outletMap=o,this._activatedRoute=e;var a,s=e._futureSnapshot,l=s._routeConfig.component;a=t?t.resolveComponentFactory(l):this.resolver.resolveComponentFactory(l);var c=n?n:this.location.parentInjector,u=r.ReflectiveInjector.fromResolvedProviders(i,c);this.activated=this.location.createComponent(a,this.location.length,u,[]),this.activated.changeDetectorRef.detectChanges(),this.activateEvents.emit(this.activated.instance)},RouterOutlet.decorators=[{type:r.Directive,args:[{selector:"router-outlet"}]}],RouterOutlet.ctorParameters=[{type:X},{type:r.ViewContainerRef},{type:r.ComponentFactoryResolver},{type:void 0,decorators:[{type:r.Attribute,args:["name"]}]}],RouterOutlet.propDecorators={activateEvents:[{type:r.Output,args:["activate"]}],deactivateEvents:[{type:r.Output,args:["deactivate"]}]},RouterOutlet}(),he=[pe,le,ce,ue],de=new r.OpaqueToken("ROUTER_CONFIGURATION"),fe=new r.OpaqueToken("ROUTER_FORROOT_GUARD"),me=[t.Location,{provide:P,useClass:T},{provide:ne,useFactory:setupRouter,deps:[r.ApplicationRef,P,X,t.Location,r.Injector,r.NgModuleFactoryLoader,r.Compiler,x,de]},X,{provide:z,useFactory:rootRoute,deps:[ne]},{provide:r.NgModuleFactoryLoader,useClass:r.SystemJsNgModuleLoader},{provide:de,useValue:{enableTracing:!1}}],ge=function(){function RouterModule(e){}return RouterModule.forRoot=function(e,n){return{ngModule:RouterModule,providers:[me,provideRoutes(e),{provide:fe,useFactory:provideForRootGuard,deps:[[ne,new r.Optional,new r.SkipSelf]]},{provide:de,useValue:n?n:{}},{provide:t.LocationStrategy,useFactory:provideLocationStrategy,deps:[t.PlatformLocation,[new r.Inject(t.APP_BASE_HREF),new r.Optional],de]},provideRouterInitializer()]}},RouterModule.forChild=function(e){return{ngModule:RouterModule,providers:[provideRoutes(e)]}},RouterModule.decorators=[{type:r.NgModule,args:[{declarations:he,exports:he}]}],RouterModule.ctorParameters=[{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[fe]}]}],RouterModule}(),ye={ROUTER_PROVIDERS:me,ROUTES:x,flatten:flatten};e.RouterLink=le,e.RouterLinkWithHref=ce,e.RouterLinkActive=ue,e.RouterOutlet=pe,e.NavigationCancel=ee,e.NavigationEnd=J,e.NavigationError=te,e.NavigationStart=Z,e.Router=ne,e.RoutesRecognized=re,e.RouterModule=ge,e.provideRoutes=provideRoutes,e.RouterOutletMap=X,e.ActivatedRoute=z,e.ActivatedRouteSnapshot=H,e.RouterState=U,e.RouterStateSnapshot=q,e.PRIMARY_OUTLET=_,e.DefaultUrlSerializer=T,e.UrlSegment=A,e.UrlSerializer=P,e.UrlTree=k,e.__router_private__=ye})},function(e,t,r){"use strict";var n=r(37);t.from=n.FromObservable.create},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(11),o=r(38),a=r(39),s=r(40),l=r(42),c=r(46),u=r(41),p=r(5),h=r(47),d=r(18),f=function(e){return e&&"number"==typeof e.length},m=function(e){function FromObservable(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return n(FromObservable,e),FromObservable.create=function(e,t){if(null!=e){if("function"==typeof e[d.$$observable])return e instanceof p.Observable&&!t?e:new FromObservable(e,t);if(i.isArray(e))return new l.ArrayObservable(e,t);if(o.isPromise(e))return new a.PromiseObservable(e,t);if("function"==typeof e[u.$$iterator]||"string"==typeof e)return new s.IteratorObservable(e,t);if(f(e))return new c.ArrayLikeObservable(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},FromObservable.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[d.$$observable]().subscribe(e):t[d.$$observable]().subscribe(new h.ObserveOnSubscriber(e,r,0))},FromObservable}(p.Observable);t.FromObservable=m},function(e,t){"use strict";function isPromise(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=isPromise},function(e,t,r){"use strict";function dispatchNext(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function dispatchError(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(6),o=r(5),a=function(e){function PromiseObservable(t,r){e.call(this),this.promise=t,this.scheduler=r}return n(PromiseObservable,e),PromiseObservable.create=function(e,t){return new PromiseObservable(e,t)},PromiseObservable.prototype._subscribe=function(e){var t=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then(function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){i.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return n.schedule(dispatchNext,0,{value:this.value,subscriber:e})}else r.then(function(r){t.value=r,t._isScalar=!0,e.closed||e.add(n.schedule(dispatchNext,0,{value:r,subscriber:e}))},function(t){e.closed||e.add(n.schedule(dispatchError,0,{err:t,subscriber:e}))}).then(null,function(e){i.root.setTimeout(function(){throw e})})},PromiseObservable}(o.Observable);t.PromiseObservable=a},function(e,t,r){"use strict";function getIterator(e){var t=e[a.$$iterator];if(!t&&"string"==typeof e)return new l(e);if(!t&&void 0!==e.length)return new c(e);if(!t)throw new TypeError("object is not iterable");return e[a.$$iterator]()}function toLength(e){var t=+e.length;return isNaN(t)?0:0!==t&&numberIsFinite(t)?(t=sign(t)*Math.floor(Math.abs(t)),t<=0?0:t>u?u:t):t}function numberIsFinite(e){return"number"==typeof e&&i.root.isFinite(e)}function sign(e){var t=+e;return 0===t?t:isNaN(t)?t:t<0?-1:1}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(6),o=r(5),a=r(41),s=function(e){function IteratorObservable(t,r){if(e.call(this),this.scheduler=r,null==t)throw new Error("iterator cannot be null.");this.iterator=getIterator(t)}return n(IteratorObservable,e),IteratorObservable.create=function(e,t){return new IteratorObservable(e,t)},IteratorObservable.dispatch=function(e){var t=e.index,r=e.hasError,n=e.iterator,i=e.subscriber;if(r)return void i.error(e.error);var o=n.next();return o.done?void i.complete():(i.next(o.value),e.index=t+1,void(i.closed||this.schedule(e)))},IteratorObservable.prototype._subscribe=function(e){var t=0,r=this,n=r.iterator,i=r.scheduler;if(i)return i.schedule(IteratorObservable.dispatch,0,{index:t,iterator:n,subscriber:e});for(;;){var o=n.next();if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}},IteratorObservable}(o.Observable);t.IteratorObservable=s;var l=function(){function StringIterator(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return StringIterator.prototype[a.$$iterator]=function(){return this},StringIterator.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},StringIterator}(),c=function(){function ArrayIterator(e,t,r){void 0===t&&(t=0),void 0===r&&(r=toLength(e)),this.arr=e,this.idx=t,this.len=r}return ArrayIterator.prototype[a.$$iterator]=function(){return this},ArrayIterator.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},ArrayIterator}(),u=Math.pow(2,53)-1},function(e,t,r){"use strict";var n=r(6),i=n.root.Symbol;if("function"==typeof i)i.iterator?t.$$iterator=i.iterator:"function"==typeof i.for&&(t.$$iterator=i.for("iterator"));else if(n.root.Set&&"function"==typeof(new n.root.Set)["@@iterator"])t.$$iterator="@@iterator";else if(n.root.Map)for(var o=Object.getOwnPropertyNames(n.root.Map.prototype),a=0;a<o.length;++a){var s=o[a];if("entries"!==s&&"size"!==s&&n.root.Map.prototype[s]===n.root.Map.prototype.entries){t.$$iterator=s;break}}else t.$$iterator="@@iterator"},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(5),o=r(43),a=r(44),s=r(45),l=function(e){function ArrayObservable(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(ArrayObservable,e),ArrayObservable.create=function(e,t){return new ArrayObservable(e,t)},ArrayObservable.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var n=e.length;return n>1?new ArrayObservable(e,r):1===n?new o.ScalarObservable(e[0],r):new a.EmptyObservable(r)},ArrayObservable.dispatch=function(e){var t=e.array,r=e.index,n=e.count,i=e.subscriber;return r>=n?void i.complete():(i.next(t[r]),void(i.closed||(e.index=r+1,this.schedule(e))))},ArrayObservable.prototype._subscribe=function(e){var t=0,r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(ArrayObservable.dispatch,0,{array:r,index:t,count:n,subscriber:e});for(var o=0;o<n&&!e.closed;o++)e.next(r[o]);e.complete()},ArrayObservable}(i.Observable);t.ArrayObservable=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(5),o=function(e){function ScalarObservable(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return n(ScalarObservable,e),ScalarObservable.create=function(e,t){return new ScalarObservable(e,t)},ScalarObservable.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;return t?void n.complete():(n.next(r),void(n.closed||(e.done=!0,this.schedule(e))))},ScalarObservable.prototype._subscribe=function(e){var t=this.value,r=this.scheduler;return r?r.schedule(ScalarObservable.dispatch,0,{done:!1,value:t,subscriber:e}):(e.next(t),void(e.closed||e.complete()))},ScalarObservable}(i.Observable);t.ScalarObservable=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(5),o=function(e){function EmptyObservable(t){e.call(this),this.scheduler=t}return n(EmptyObservable,e),EmptyObservable.create=function(e){return new EmptyObservable(e)},EmptyObservable.dispatch=function(e){var t=e.subscriber;t.complete()},EmptyObservable.prototype._subscribe=function(e){var t=this.scheduler;return t?t.schedule(EmptyObservable.dispatch,0,{subscriber:e}):void e.complete()},EmptyObservable}(i.Observable);t.EmptyObservable=o},function(e,t){"use strict";function isScheduler(e){return e&&"function"==typeof e.schedule}t.isScheduler=isScheduler},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(5),o=r(43),a=r(44),s=function(e){function ArrayLikeObservable(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(ArrayLikeObservable,e),ArrayLikeObservable.create=function(e,t){var r=e.length;return 0===r?new a.EmptyObservable:1===r?new o.ScalarObservable(e[0],t):new ArrayLikeObservable(e,t)},ArrayLikeObservable.dispatch=function(e){var t=e.arrayLike,r=e.index,n=e.length,i=e.subscriber;if(!i.closed){if(r>=n)return void i.complete();i.next(t[r]),e.index=r+1,this.schedule(e)}},ArrayLikeObservable.prototype._subscribe=function(e){var t=0,r=this,n=r.arrayLike,i=r.scheduler,o=n.length;if(i)return i.schedule(ArrayLikeObservable.dispatch,0,{arrayLike:n,index:t,length:o,subscriber:e});for(var a=0;a<o&&!e.closed;a++)e.next(n[a]);e.complete()},ArrayLikeObservable}(i.Observable);t.ArrayLikeObservable=s},function(e,t,r){"use strict";function observeOn(e,t){return void 0===t&&(t=0),this.lift(new a(e,t))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8),o=r(48);t.observeOn=observeOn;var a=function(){function ObserveOnOperator(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return ObserveOnOperator.prototype.call=function(e,t){return t._subscribe(new s(e,this.scheduler,this.delay))},ObserveOnOperator}();t.ObserveOnOperator=a;var s=function(e){function ObserveOnSubscriber(t,r,n){void 0===n&&(n=0),e.call(this,t),this.scheduler=r,this.delay=n}return n(ObserveOnSubscriber,e),ObserveOnSubscriber.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r)},ObserveOnSubscriber.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new l(e,this.destination)))},ObserveOnSubscriber.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},ObserveOnSubscriber.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e))},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},ObserveOnSubscriber}(i.Subscriber);t.ObserveOnSubscriber=s;var l=function(){function ObserveOnMessage(e,t){this.notification=e,this.destination=t}return ObserveOnMessage}();t.ObserveOnMessage=l},function(e,t,r){"use strict";var n=r(5),i=function(){function Notification(e,t,r){this.kind=e,this.value=t,this.exception=r,this.hasValue="N"===e}return Notification.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.exception);case"C":return e.complete&&e.complete()}},Notification.prototype.do=function(e,t,r){var n=this.kind;switch(n){case"N":return e&&e(this.value);case"E":return t&&t(this.exception);case"C":return r&&r()}},Notification.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},Notification.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.exception);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},Notification.createNext=function(e){return"undefined"!=typeof e?new Notification("N",e):this.undefinedValueNotification},Notification.createError=function(e){return new Notification("E",(void 0),e)},Notification.createComplete=function(){return this.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",(void 0)),Notification}();t.Notification=i},function(e,t,r){"use strict";var n=r(42);t.of=n.ArrayObservable.of},function(e,t,r){"use strict";function every(e,t){return this.lift(new o(e,t,this))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8);t.every=every;var o=function(){function EveryOperator(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return EveryOperator.prototype.call=function(e,t){return t._subscribe(new a(e,this.predicate,this.thisArg,this.source))},EveryOperator}(),a=function(e){function EverySubscriber(t,r,n,i){e.call(this,t),this.predicate=r,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}return n(EverySubscriber,e),EverySubscriber.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},EverySubscriber.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(r){return void this.destination.error(r)}t||this.notifyComplete(!1)},EverySubscriber.prototype._complete=function(){this.notifyComplete(!0)},EverySubscriber}(i.Subscriber)},function(e,t,r){"use strict";function map(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new o(e,t))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8);t.map=map;var o=function(){function MapOperator(e,t){this.project=e,this.thisArg=t}return MapOperator.prototype.call=function(e,t){return t._subscribe(new a(e,this.project,this.thisArg))},MapOperator}();t.MapOperator=o;var a=function(e){function MapSubscriber(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return n(MapSubscriber,e),MapSubscriber.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)},MapSubscriber}(i.Subscriber)},function(e,t,r){"use strict";function mergeAll(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new a(e))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(53),o=r(54);t.mergeAll=mergeAll;var a=function(){function MergeAllOperator(e){this.concurrent=e}return MergeAllOperator.prototype.call=function(e,t){return t._subscribe(new s(e,this.concurrent))},MergeAllOperator}();t.MergeAllOperator=a;var s=function(e){function MergeAllSubscriber(t,r){e.call(this,t),this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0}return n(MergeAllSubscriber,e),MergeAllSubscriber.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(o.subscribeToResult(this,e))):this.buffer.push(e)},MergeAllSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeAllSubscriber.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeAllSubscriber}(i.OuterSubscriber);t.MergeAllSubscriber=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8),o=function(e){function OuterSubscriber(){e.apply(this,arguments)}return n(OuterSubscriber,e),OuterSubscriber.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},OuterSubscriber.prototype.notifyError=function(e,t){this.destination.error(e)},OuterSubscriber.prototype.notifyComplete=function(e){this.destination.complete()},OuterSubscriber}(i.Subscriber);t.OuterSubscriber=o},function(e,t,r){"use strict";function subscribeToResult(e,t,r,u){var p=new l.InnerSubscriber(e,r,u);if(p.closed)return null;if(t instanceof a.Observable)return t._isScalar?(p.next(t.value),p.complete(),null):t.subscribe(p);if(i.isArray(t)){for(var h=0,d=t.length;h<d&&!p.closed;h++)p.next(t[h]);p.closed||p.complete()}else{if(o.isPromise(t))return t.then(function(e){p.closed||(p.next(e),p.complete())},function(e){return p.error(e)}).then(null,function(e){n.root.setTimeout(function(){throw e})}),p;if("function"==typeof t[s.$$iterator])for(var f=t[s.$$iterator]();;){var m=f.next();if(m.done){p.complete();break}if(p.next(m.value),p.closed)break}else if("function"==typeof t[c.$$observable]){var g=t[c.$$observable]();if("function"==typeof g.subscribe)return g.subscribe(new l.InnerSubscriber(e,r,u));p.error(new Error("invalid observable"))}else p.error(new TypeError("unknown type returned"))}return null}var n=r(6),i=r(11),o=r(38),a=r(5),s=r(41),l=r(55),c=r(18);t.subscribeToResult=subscribeToResult},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8),o=function(e){function InnerSubscriber(t,r,n){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=n,this.index=0}return n(InnerSubscriber,e),InnerSubscriber.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(i.Subscriber);t.InnerSubscriber=o},function(e,t,r){"use strict";function mergeMap(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new a(e,t,r))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(54),o=r(53);t.mergeMap=mergeMap;var a=function(){function MergeMapOperator(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return MergeMapOperator.prototype.call=function(e,t){return t._subscribe(new s(e,this.project,this.resultSelector,this.concurrent))},MergeMapOperator}();t.MergeMapOperator=a;var s=function(e){function MergeMapSubscriber(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(MergeMapSubscriber,e),MergeMapSubscriber.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},MergeMapSubscriber.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(t,e,r)},MergeMapSubscriber.prototype._innerSub=function(e,t,r){this.add(i.subscribeToResult(this,e,t,r))},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapSubscriber.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._notifyResultSelector(e,t,r,n):this.destination.next(t)},MergeMapSubscriber.prototype._notifyResultSelector=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(o){return void this.destination.error(o)}this.destination.next(i)},MergeMapSubscriber.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(o.OuterSubscriber);t.MergeMapSubscriber=s},function(e,t,r){"use strict";function reduce(e,t){return this.lift(new o(e,t))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8);t.reduce=reduce;var o=function(){function ReduceOperator(e,t){this.accumulator=e,this.seed=t}return ReduceOperator.prototype.call=function(e,t){return t._subscribe(new a(e,this.accumulator,this.seed))},ReduceOperator}();t.ReduceOperator=o;var a=function(e){function ReduceSubscriber(t,r,n){e.call(this,t),this.accumulator=r,this.hasValue=!1,this.acc=n,this.accumulator=r,this.hasSeed="undefined"!=typeof n}return n(ReduceSubscriber,e),ReduceSubscriber.prototype._next=function(e){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(e):(this.acc=e,this.hasValue=!0)},ReduceSubscriber.prototype._tryReduce=function(e){var t;try{t=this.accumulator(this.acc,e)}catch(r){return void this.destination.error(r)}this.acc=t},ReduceSubscriber.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},ReduceSubscriber}(i.Subscriber);t.ReduceSubscriber=a},function(e,t,r){"use strict";function _catch(e){var t=new a(e),r=this.lift(t);return t.caught=r}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(53),o=r(54);t._catch=_catch;var a=function(){
function CatchOperator(e){this.selector=e}return CatchOperator.prototype.call=function(e,t){return t._subscribe(new s(e,this.selector,this.caught))},CatchOperator}(),s=function(e){function CatchSubscriber(t,r,n){e.call(this,t),this.selector=r,this.caught=n}return n(CatchSubscriber,e),CatchSubscriber.prototype.error=function(e){if(!this.isStopped){var t=void 0;try{t=this.selector(e,this.caught)}catch(e){return void this.destination.error(e)}this.unsubscribe(),this.destination.remove(this),o.subscribeToResult(this,t)}},CatchSubscriber}(i.OuterSubscriber)},function(e,t,r){"use strict";function concatAll(){return this.lift(new n.MergeAllOperator(1))}var n=r(52);t.concatAll=concatAll},function(e,t,r){"use strict";function first(e,t,r){return this.lift(new a(e,t,r,this))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8),o=r(61);t.first=first;var a=function(){function FirstOperator(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return FirstOperator.prototype.call=function(e,t){return t._subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},FirstOperator}(),s=function(e){function FirstSubscriber(t,r,n,i,o){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1}return n(FirstSubscriber,e),FirstSubscriber.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},FirstSubscriber.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(n){return void this.destination.error(n)}r&&this._emit(e,t)},FirstSubscriber.prototype._emit=function(e,t){return this.resultSelector?void this._tryResultSelector(e,t):void this._emitFinal(e)},FirstSubscriber.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(n){return void this.destination.error(n)}this._emitFinal(r)},FirstSubscriber.prototype._emitFinal=function(e){var t=this.destination;t.next(e),t.complete(),this.hasCompleted=!0},FirstSubscriber.prototype._complete=function(){var e=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||e.error(new o.EmptyError):(e.next(this.defaultValue),e.complete())},FirstSubscriber}(i.Subscriber)},function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},n=function(e){function EmptyError(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return r(EmptyError,e),EmptyError}(Error);t.EmptyError=n},function(e,t,r){"use strict";var n=r(39);t.fromPromise=n.PromiseObservable.create},function(e,t,r){"use strict";function last(e,t,r){return this.lift(new a(e,t,r,this))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8),o=r(61);t.last=last;var a=function(){function LastOperator(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return LastOperator.prototype.call=function(e,t){return t._subscribe(new s(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},LastOperator}(),s=function(e){function LastSubscriber(t,r,n,i,o){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,"undefined"!=typeof i&&(this.lastValue=i,this.hasValue=!0)}return n(LastSubscriber,e),LastSubscriber.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},LastSubscriber.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(n){return void this.destination.error(n)}if(r){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},LastSubscriber.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(n){return void this.destination.error(n)}this.lastValue=r,this.hasValue=!0},LastSubscriber.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new o.EmptyError)},LastSubscriber}(i.Subscriber)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(4),o=r(19),a=function(e){function BehaviorSubject(t){e.call(this),this._value=t}return n(BehaviorSubject,e),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},BehaviorSubject.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},BehaviorSubject}(i.Subject);t.BehaviorSubject=a},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=r(3),a=r(21),s=r(64),l=r(66),c=r(131),u=function(){function BlindpadService(e,t,r){var n=this;this.mediaService=e,this.titleService=t,this.zone=r,this.onBeforeUnload=function(){n.pad.value&&n.pad.value.close()},this.pad=new s.BehaviorSubject(null),window.addEventListener("beforeunload",this.onBeforeUnload),this.pad.subscribe(function(e){return n.titleService.setTitle(e?"blindpad - "+e.getPadId():"blindpad")})}return BlindpadService.prototype.getPad=function(){return this.pad},BlindpadService.prototype.setPadId=function(e){this.pad.value&&this.pad.value.getPadId()===e||(this.pad.value&&this.pad.value.close(),this.pad.next(e?new c.PadModel(e,this):null))},BlindpadService.prototype.getPadId=function(){return this.pad.value?this.pad.value.getPadId():null},BlindpadService.prototype.startPad=function(){this.pad.value&&this.pad.value.start()},BlindpadService.prototype.isPadStarted=function(){return this.pad.value&&this.pad.value.isStarted()},BlindpadService=n([o.Injectable(),i("design:paramtypes",[l.MediaService,a.Title,o.NgZone])],BlindpadService)}();t.BlindpadService=u},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};r(67);var o=r(3),a=r(64);r(77);var s=r(79),l=r(101),c=r(130),u=157.5,p=null,h="measuredPitch",d=function(){function MediaService(e){var t=this;this.zone=e,this.calibrationAttempts=0,this.storage=window.sessionStorage,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.initialized=!1,this.optOut=!1,this.userMedia=null,this.localStream=new a.BehaviorSubject(null),this.voiceAnalyser=new c.VoiceAnalyser(this.audioContext,e),this.shifter=new l.PitchShifter(this.audioContext),this.microphoneNode=null,this.destNode=null,this.isMuted=new a.BehaviorSubject((!1)),this.detector=new s.PitchDetector(this.audioContext),this.measuredPitch=new a.BehaviorSubject(p||this.getSavedCalibration()),this.measuredPitch.subscribe(function(e){console.log("Calibrated: ",e),e?t.storage.setItem(h,JSON.stringify(e)):t.storage.removeItem(h),t.shifter.setPitchScale(e>0?u/e:null)})}return MediaService.prototype.initializeLocal=function(){var e=this;this.initialized||this.isOptOut()||(this.initialized=!0,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(t){var r=e.audioContext;if(e.userMedia=t,e.isOptOut())return void e.ensureUserMediaClosed();e.microphoneNode=r.createMediaStreamSource(t),e.destNode=r.createMediaStreamDestination(),e.localStream.next(e.destNode.stream),e.voiceAnalyser.start(e.microphoneNode);var n=!1;e.isMuted.combineLatest(e.voiceAnalyser.getVoiceDetected(),function(e,t){return!e}).subscribe(function(t){if(t!==n){var r=e.shifter.getNode();t?(e.microphoneNode.connect(r),r.connect(e.destNode)):(e.microphoneNode.disconnect(r),r.disconnect(e.destNode)),n=t}})},function(t){e.localStream.next(null),e.localStream.error(t),e.optOut=!0}))},MediaService.prototype.getLocalStream=function(){return this.localStream},MediaService.prototype.getAudioContext=function(){return this.audioContext},MediaService.prototype.getLocalAnalyser=function(){return this.voiceAnalyser},MediaService.prototype.setCalibrating=function(e){var t=this;this.localStream.filter(function(e){return!!e}).take(1).subscribe(function(){e!==t.detector.isRunning()&&(e?(t.measuredPitch.next(null),t.calibrationAttempts++,t.calibrationQuality=null,t.detector.start(t.microphoneNode)):(t.detector.stop(),t.calibrationQuality=t.detector.getEstimateQuality(),t.measuredPitch.next(t.detector.hasGoodEstimate()?t.detector.getEstimate():null)))})},MediaService.prototype.isCalibrating=function(){return this.detector.isRunning()},MediaService.prototype.isCalibrated=function(){return null!==this.getCalibration().value},MediaService.prototype.needsCalibration=function(){return!this.isCalibrated()&&!this.isOptOut()},MediaService.prototype.getCalibrationAttempts=function(){return this.calibrationAttempts},MediaService.prototype.getCalibration=function(){return this.measuredPitch},MediaService.prototype.getCalibrationQuality=function(){return this.calibrationQuality},MediaService.prototype.clearCalibration=function(){this.isCalibrated()&&(this.calibrationAttempts=0,this.measuredPitch.next(null))},MediaService.prototype.setOptOut=function(){this.optOut=!0,this.ensureUserMediaClosed()},MediaService.prototype.isOptOut=function(){return this.optOut},MediaService.prototype.getIsMuted=function(){return this.isMuted},MediaService.prototype.setIsMuted=function(e){this.isMuted.next(!!e)},MediaService.prototype.getPhrases=function(){return["They ate eight reindeer steaks.","The gauge shows a great change. ","Where is their snake? ","It’s over there in the cage. ","Harry is crazy about the taste of gravy. ","In April the mayor will raise the tax rate. ","I hear that those people are very crazy. ","The scenery here is beyond belief. "]},MediaService.prototype.ensureUserMediaClosed=function(){this.userMedia&&(this.userMedia.stop&&this.userMedia.stop(),this.userMedia.getVideoTracks().forEach(function(e){e.stop&&e.stop()}),this.userMedia.getAudioTracks().forEach(function(e){e.stop&&e.stop()}),this.userMedia=null)},MediaService.prototype.getSavedCalibration=function(){var e=this.storage.getItem(h);return e?JSON.parse(e):null},MediaService=n([o.Injectable(),i("design:paramtypes",[o.NgZone])],MediaService)}();t.MediaService=d},function(e,t,r){"use strict";!function(){var t=r(68).log,n=r(68).browserDetails;e.exports.browserDetails=n,e.exports.extractVersion=r(68).extractVersion,e.exports.disableLog=r(68).disableLog;var i=r(69)||null,o=r(71)||null,a=r(74)||null,s=r(76)||null;switch(n.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void t("Chrome shim is not included in this adapter release.");t("adapter.js shimming chrome."),e.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void t("Firefox shim is not included in this adapter release.");t("adapter.js shimming firefox."),e.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void t("MS edge shim is not included in this adapter release.");t("adapter.js shimming edge."),e.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void t("Safari shim is not included in this adapter release.");t("adapter.js shimming safari."),e.exports.browserShim=s,s.shimGetUserMedia();break;default:t("Unsupported browser!")}}()},function(e,t){"use strict";var r=!0,n={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};e.exports={log:n.log,disableLog:n.disableLog,browserDetails:n.detectBrowser(),extractVersion:n.extractVersion}},function(e,t,r){"use strict";var n=r(68).log,i=r(68).browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(r){var n=new Event("track");n.track=r.track,n.receiver={track:r.track},n.streams=[e.stream],t.dispatchEvent(n)}),e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){n("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var r=new webkitRTCPeerConnection(e,t),i=r.getStats.bind(r);return r.getStats=function(e,t,r){var n=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return i(e,t);var a=function(e){var t={},r=e.result();return r.forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e,t){var r=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){r[e]=t[e]}),r};if(arguments.length>=2){var l=function(e){o[1](s(a(e)))};return i.apply(this,[l,arguments[0]])}return new Promise(function(t,r){1===o.length&&"object"==typeof e?i.apply(n,[function(e){t(s(a(e)))},r]):i.apply(n,[function(e){t(s(a(e),e.result()))},r])}).then(t,r)},r},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var r=1===arguments.length?arguments[0]:void 0;return new Promise(function(n,i){t.apply(e,[n,i,r])})}return t.apply(this,arguments)}}),i.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,r=this,n=new Promise(function(n,i){t.apply(r,[e[0],n,i])});return e.length<2?n:n.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)}}};e.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:r(70)}},function(e,t,r){"use strict";var n=r(68).log;e.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var o={};"number"==typeof n.ideal?(o[i("min",r)]=n.ideal,t.optional.push(o),o={},o[i("max",r)]=n.ideal,t.optional.push(o)):(o[i("",r)]=n.ideal,t.optional.push(o))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,r){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var i=t.video.facingMode;if(i=i&&("object"==typeof i?i:{ideal:i}),i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===i.exact||"environment"===i.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){o=o.filter(function(e){return"videoinput"===e.kind});var a=o.find(function(e){return e.label.toLowerCase().indexOf("back")!==-1})||o.length&&o[o.length-1];return a&&(t.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),n("chrome: "+JSON.stringify(t)),r(t)});t.video=e(t.video)}return n("chrome: "+JSON.stringify(t)),r(t)},r=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},i=function(e,n,i){t(e,function(e){navigator.webkitGetUserMedia(e,n,function(e){i(r(e))})})};navigator.getUserMedia=i;var o=function(e){return new Promise(function(t,r){navigator.getUserMedia(e,t,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(r){e(r.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).catch(function(e){return Promise.reject(r(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){n("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){n("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,r){"use strict";var n=r(72),i=r(68).browserDetails,o={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=r[e].bind(r)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var n=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=n.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),t=t.filter(function(e){return 0===e.indexOf("turn:")&&e.indexOf("transport=udp")!==-1&&e.indexOf("turn:[")===-1||0===e.indexOf("stun:")&&i.version>=14393})[0],!!t}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=n.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(r){var n=!r.candidate||0===Object.keys(r.candidate).length;if(n)for(var i=1;i<t.length;i++)t[i].indexOf("\r\na=end-of-candidates\r\n")===-1&&(t[i]+="a=end-of-candidates\r\n");else r.candidate.candidate.indexOf("typ endOfCandidates")===-1&&(t[r.candidate.sdpMLineIndex+1]+="a="+r.candidate.candidate+"\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(r),null!==e.onicecandidate&&e.onicecandidate(r),!r.candidate&&"complete"!==e.iceGatheringState){var o=e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});o&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var n=0;n<t.codecs.length;n++){var i=t.codecs[n];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate&&e.numChannels===i.numChannels){r.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(t){for(var r=0;r<e.rtcpFeedback.length;r++)if(e.rtcpFeedback[r].type===t.type&&e.rtcpFeedback[r].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}}),r},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var r=this,i=new RTCIceGatherer(r.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var l=a.candidate,c=!l||0===Object.keys(l).length;c?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(l.component="RTCP"===o.component?2:1,s.candidate.candidate=n.writeCandidate(l));var u=n.splitSections(r.localDescription.sdp);s.candidate.candidate.indexOf("typ endOfCandidates")===-1?u[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":u[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",r.localDescription.sdp=u.join("");var p=r.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(r.iceGatheringState){case"new":r._localIceCandidatesBuffer.push(s),c&&p&&r._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":r._emitBufferedCandidates(),r.dispatchEvent(s),null!==r.onicecandidate&&r.onicecandidate(s),p&&(r.dispatchEvent(new Event("icecandidate")),null!==r.onicecandidate&&r.onicecandidate(new Event("icecandidate")),r.iceGatheringState="complete");break;case"complete":}},o.onicestatechange=function(){r._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){r._updateConnectionState()},a.onerror=function(){a.state="failed",r._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,r){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:n.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&(i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,r,i=this;if("offer"===e.type)this._pendingOffer&&(t=n.splitSections(e.sdp),r=t.shift(),t.forEach(function(e,t){var r=n.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=r}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=n.splitSections(i.remoteDescription.sdp),r=t.shift();var o=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],s=a.iceGatherer,l=a.iceTransport,c=a.dtlsTransport,u=a.localCapabilities,p=a.remoteCapabilities,h="0"===e.split("\n",1)[0].split(" ",2)[1];if(!h&&!a.isDatachannel){var d=n.getIceParameters(e,r);if(o){var f=n.matchPrefix(e,"a=candidate:").map(function(e){return n.parseCandidate(e)}).filter(function(e){return"1"===e.component});f.length&&l.setRemoteCandidates(f)}var m=n.getDtlsParameters(e,r);o&&(m.role="server"),i.usingBundle&&0!==t||(l.start(s,d,o?"controlling":"controlled"),c.start(m));var g=i._getCommonCapabilities(u,p);i._transceive(a,g.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var l=Promise.resolve();return l.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),l},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,r=new MediaStream,i=[],o=n.splitSections(e.sdp),a=o.shift(),s=n.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=n.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,l){var c=n.splitLines(o),u=c[0].substr(2).split(" "),p=u[0],h="0"===u[1],d=n.getDirection(o,a),f=n.matchPrefix(o,"a=mid:");if(f=f.length?f[0].substr(6):n.generateIdentifier(),"application"===p&&"DTLS/SCTP"===u[2])return void(t.transceivers[l]={mid:f,isDatachannel:!0});var m,g,y,v,b,_,w,x,S,C,k,E,A=n.parseRtpParameters(o);h||(k=n.getIceParameters(o,a),E=n.getDtlsParameters(o,a),E.role="client"),x=n.parseRtpEncodingParameters(o);var P,T=n.matchPrefix(o,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];T&&(P=T.value);var M=n.matchPrefix(o,"a=end-of-candidates",a).length>0,I=n.matchPrefix(o,"a=candidate:").map(function(e){return n.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||h)"answer"!==e.type||h||(m=t.transceivers[l],g=m.iceGatherer,y=m.iceTransport,v=m.dtlsTransport,b=m.rtpSender,_=m.rtpReceiver,w=m.sendEncodingParameters,S=m.localCapabilities,t.transceivers[l].recvEncodingParameters=x,t.transceivers[l].remoteCapabilities=A,t.transceivers[l].cname=P,(s||M)&&I.length&&y.setRemoteCandidates(I),t.usingBundle&&0!==l||(y.start(g,k,"controlling"),v.start(E)),t._transceive(m,"sendrecv"===d||"recvonly"===d,"sendrecv"===d||"sendonly"===d),!_||"sendrecv"!==d&&"sendonly"!==d?delete m.rtpReceiver:(C=_.track,i.push([C,_]),r.addTrack(C)));else{var O=t.usingBundle&&l>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(f,l);if(M&&O.iceTransport.setRemoteCandidates(I),S=RTCRtpReceiver.getCapabilities(p),w=[{ssrc:1001*(2*l+2)}],_=new RTCRtpReceiver(O.dtlsTransport,p),C=_.track,i.push([C,_]),r.addTrack(C),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=l){var R;"audio"===p?R=t.localStreams[0].getAudioTracks()[0]:"video"===p&&(R=t.localStreams[0].getVideoTracks()[0]),R&&(b=new RTCRtpSender(R,O.dtlsTransport))}t.transceivers[l]={iceGatherer:O.iceGatherer,iceTransport:O.iceTransport,dtlsTransport:O.dtlsTransport,localCapabilities:S,remoteCapabilities:A,rtpSender:b,rtpReceiver:_,kind:p,mid:f,cname:P,sendEncodingParameters:w,recvEncodingParameters:x},t._transceive(t.transceivers[l],!1,"sendrecv"===d||"sendonly"===d);
}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return r.getTracks().length&&(t.remoteStreams.push(r),window.setTimeout(function(){var e=new Event("addstream");e.stream=r,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(n){var i=n[0],o=n[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[r],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,r={"new":0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){r[e.iceTransport.state]++,r[e.dtlsTransport.state]++}),r.connected+=r.completed,e="new",r.failed>0?e="failed":r.connecting>0||r.checking>0?e="connecting":r.disconnected>0?e="disconnected":r.new>0?e="new":(r.connected>0||r.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this.dispatchEvent(n),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(n)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var r=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){r.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(r.push({kind:"audio",wantReceive:!0}),i--),o>0&&(r.push({kind:"video",wantReceive:!0}),o--);var a=n.writeSessionBoilerplate(),s=[];r.forEach(function(t,r){var i,o,a=t.track,l=t.kind,c=n.generateIdentifier(),u=e.usingBundle&&r>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:e._createIceAndDtlsTransports(c,r),p=RTCRtpSender.getCapabilities(l),h=[{ssrc:1001*(2*r+1)}];a&&(i=new RTCRtpSender(a,u.dtlsTransport)),t.wantReceive&&(o=new RTCRtpReceiver(u.dtlsTransport,l)),s[r]={iceGatherer:u.iceGatherer,iceTransport:u.iceTransport,dtlsTransport:u.dtlsTransport,localCapabilities:p,remoteCapabilities:null,rtpSender:i,rtpReceiver:o,kind:l,mid:c,sendEncodingParameters:h,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(e){return e.mid}).join(" ")+"\r\n"),r.forEach(function(t,r){var i=s[r];a+=n.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var l=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,l),Promise.resolve(l)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=n.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(r){if(r.isDatachannel)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+r.mid+"\r\n");var i=e._getCommonCapabilities(r.localCapabilities,r.remoteCapabilities);t+=n.writeMediaSection(r,i,"answer",e.localStreams[0])});var r=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,r),Promise.resolve(r)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(null===e)this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});else{var t=e.sdpMLineIndex;if(e.sdpMid)for(var r=0;r<this.transceivers.length;r++)if(this.transceivers[r].mid===e.sdpMid){t=r;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=n.splitSections(this.remoteDescription.sdp);a[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(r){t[r]&&e.push(t[r].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(r){var n=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){n.set(t,e[t]),n[t]=e[t]})}),t&&window.setTimeout(t,0,n),r(n)})})}}};e.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:r(73)}},function(e,t){"use strict";var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var r={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1]}return r},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.numChannels=3===t.length?parseInt(t[2],10):1,r},r.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)t=n[i].trim().split("="),r[t[0].trim()]=t[1];return r},r.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){n.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},r.getDtlsParameters=function(e,t){var n=r.splitLines(e);n=n.concat(r.splitLines(t));var i=n.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14),o={role:"auto",fingerprints:[{algorithm:i.split(" ")[0],value:i.split(" ")[1]}]};return o},r.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},r.getIceParameters=function(e,t){var n=r.splitLines(e);n=n.concat(r.splitLines(t));var i={usernameFragment:n.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return i},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=r.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var l=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+a+" ");switch(l.parameters=c.length?r.parseFmtp(c[0]):{},l.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),t.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(l.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";return n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}),n+="a=rtcp-mux\r\n"},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),l=s.length>0&&s[0].ssrc,c=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});c.length>0&&c[0].length>1&&c[0][0]===l&&(t=c[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:l,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{payloadType:e.payloadType,ssrc:t}};n.push(r),o&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&l&&n.push({ssrc:l});var u=r.matchPrefix(e,"b=");return u.length&&(0===u[0].indexOf("b=TIAS:")?u=parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")&&(u=parseInt(u[0].substr(5),10)),n.forEach(function(e){e.maxBitrate=u})),n},r.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n"},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},e.exports=r},function(e,t){"use strict";e.exports=function(){var e=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(r){return t(r).catch(function(t){return Promise.reject(e(t))})}}},function(e,t,r){"use strict";var n=r(68).browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(n.version<38&&e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),r.push(s)}else r.push(e.iceServers[i])}e.iceServers=r}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)};var t=function(e){var t=new Map;return Object.keys(e).forEach(function(r){t.set(r,e[r]),t[r]=e[r]}),t},r=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,n,i){return r.apply(this,[e||null]).then(function(e){return t(e)}).then(n,i)}}}};e.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:r(75)}},function(e,t,r){"use strict";var n=r(68).log,i=r(68).browserDetails;e.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,r,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n=e[r]="object"==typeof e[r]?e[r]:{ideal:e[r]};if(void 0===n.min&&void 0===n.max&&void 0===n.exact||t.push(r),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[r]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof n.ideal?i[r]={min:n.ideal,max:n.ideal}:i[r]=n.ideal,e.advanced.push(i),delete n.ideal,Object.keys(n).length||delete e[r]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),i.version<38&&(n("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),n("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,r,function(t){o(e(t))})},r=function(e){return new Promise(function(r,n){t(e,r,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:r,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},i.version<41){var o=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return o().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(i.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return a(t).catch(function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,r,n){return i.version<44?t(e,r,n):(console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),void navigator.mediaDevices.getUserMedia(e).then(r,n))}}},function(e,t){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};e.exports={shimGetUserMedia:r.shimGetUserMedia}},function(e,t,r){"use strict";var n=r(5),i=r(78);n.Observable.prototype.combineLatest=i.combineLatest},function(e,t,r){"use strict";function combineLatest(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&o.isArray(e[0])&&(e=e[0]),e.unshift(this),new i.ArrayObservable(e).lift(new c(r))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(42),o=r(11),a=r(53),s=r(54),l={};t.combineLatest=combineLatest;var c=function(){function CombineLatestOperator(e){this.project=e}return CombineLatestOperator.prototype.call=function(e,t){return t._subscribe(new u(e,this.project))},CombineLatestOperator}();t.CombineLatestOperator=c;var u=function(e){function CombineLatestSubscriber(t,r){e.call(this,t),this.project=r,this.active=0,this.values=[],this.observables=[]}return n(CombineLatestSubscriber,e),CombineLatestSubscriber.prototype._next=function(e){this.values.push(l),this.observables.push(e)},CombineLatestSubscriber.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(s.subscribeToResult(this,n,n,r))}}},CombineLatestSubscriber.prototype.notifyComplete=function(e){0===(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(e,t,r,n,i){var o=this.values,a=o[r],s=this.toRespond?a===l?--this.toRespond:this.toRespond:0;o[r]=t,0===s&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},CombineLatestSubscriber.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)},CombineLatestSubscriber}(a.OuterSubscriber);t.CombineLatestSubscriber=u},function(e,t,r){"use strict";function median(e){if(0===e.length)return NaN;e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}var n=r(80),i=r(100),o=150,a=60,s=4096,l=20,c=.4,u=70,p=360,h=function(){function PitchDetector(e){this.context=e}return PitchDetector.prototype.start=function(e){var t=this;this.isRunning()||(this.source=e,this.analyser=this.context.createAnalyser(),this.signalBuffer=new Float32Array(s),this.freqBuffer=new Uint8Array(this.analyser.frequencyBinCount),this.source.connect(this.analyser),this.estimate=void 0,this.numMeasurements=0,this.numGoodMeasurements=0,this.weightedMeasurementsSum=0,this.weightsSum=0,this.measurements=[],this.pitches=[],this.runningSub=i.animationFrames().subscribe(function(e){t.numMeasurements++,t.analyser.getFloatTimeDomainData(t.signalBuffer),t.analyser.getByteFrequencyData(t.freqBuffer);for(var r=n(t.signalBuffer,c),i=t.analyser.fftSize,a=t.context.sampleRate,s=t.freqBuffer,h=s.length,d=a/i,f=0,m=0,g=0,y=0;y<h;y++){var v=y*d,b=s[y]/255*d;v>=u&&v<=p&&(g++,m+=b),f+=b}var _=r?a/r:null,w=f,x=m;if(null!==_&&!(t.numMeasurements<l||w<o||_<u||_>p)){t.numGoodMeasurements++;var S=x;t.weightedMeasurementsSum+=S*_,t.weightsSum+=S,t.pitches.push(_),t.estimate=void 0,t.measurements.push({pitch:_,vol:w,hVol:x})}}))},PitchDetector.prototype.stop=function(){this.isRunning()&&(this.runningSub.unsubscribe(),this.runningSub=null,this.source.disconnect(this.analyser),this.source=null,this.analyser=null,this.signalBuffer=null,this.freqBuffer=null)},PitchDetector.prototype.isRunning=function(){return!!this.runningSub},PitchDetector.prototype.getEstimate=function(){return void 0!==this.estimate?this.estimate:(this.estimate=median(this.pitches),this.estimate)},PitchDetector.prototype.hasGoodEstimate=function(){return this.getEstimateQuality()>=1},PitchDetector.prototype.getEstimateQuality=function(){return Math.min(this.numGoodMeasurements/a,1)},PitchDetector}();t.PitchDetector=h},function(e,t,r){"use strict";function square(e,t){for(var r=e.length,n=0;n<r;++n){var i=e[n],o=t[n];e[n]=i*i+o*o,t[n]=0}}function prefilter(e,t,r){e[0]=1;for(var n=0,i=1;i<r;++i){var o=Math.max(t-e[i],0);n+=o,e[i]=o*i/n}}function aperiodic(e,t){if(t<=3)return!0;var r=(e+.5*t)%t-.5*t;return Math.abs(r)>1}function findPeriod(e,t,r,n){for(var i=1,o=0,a=t;a+2<r;++a){var s=e[a],l=e[a+1],c=e[a+2],u=c-2*l+s;if(Math.abs(u)<1e-6)l<i&&aperiodic(a+1,o)&&(i=l,o=a+1);else{var p=.5*(s-c)/u;if(Math.abs(p)>1)continue;var h=l+.25*Math.pow(s-c,2)/u;if(h<i){var d=a+p+1;aperiodic(d,o)&&(i=h,o=d)}}}return i<1-n?o:0}function detectPitch(e,t){t=t||0;var r;r=e.shape?e.shape[0]:e.length;var c,u=n.nextPow2(2*r),p=i.mallocFloat(u),h=i.mallocFloat(u),d=o(p,[u],[1],0),f=o(h,[u],[1],0);e.shape?a.assign(d.hi(r),e):p.set(e);for(var m=0,c=0;c<r;++c){var g=p[c]*=l(c,r);m+=Math.pow(g,2)}for(var c=r;c<u;++c)p[c]=0;for(var c=0;c<u;++c)h[c]=0;s(1,d,f),square(p,h),s(-1,d,f),prefilter(p,m,r);var y=findPeriod(p,0,r>>>1,t);return i.freeFloat(p),i.freeFloat(h),y}var n=r(81),i=r(82),o=r(89),a=r(92),s=r(97),l=r(99);e.exports=detectPitch},function(e,t){"use strict";"use restrict";function countTrailingZeros(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var r=32;t.INT_BITS=r,t.INT_MAX=2147483647,t.INT_MIN=-1<<r-1,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>r-1;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},t.countTrailingZeros=countTrailingZeros,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var n=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(n),t.reverse=function(e){return n[255&e]<<24|n[e>>>8&255]<<16|n[e>>>16&255]<<8|n[e>>>24&255]},t.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},t.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},t.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},t.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>countTrailingZeros(e)+1}},function(e,t,r){(function(e,n){"use strict";function freeArrayBuffer(e){if(e){var t=e.length||e.byteLength,r=i.log2(t);l[r].push(e)}}function freeTypedArray(e){freeArrayBuffer(e.buffer)}function mallocArrayBuffer(e){var e=i.nextPow2(e),t=i.log2(e),r=l[t];return r.length>0?r.pop():new ArrayBuffer(e)}function mallocUint8(e){return new Uint8Array(mallocArrayBuffer(e),0,e)}function mallocUint16(e){return new Uint16Array(mallocArrayBuffer(2*e),0,e)}function mallocUint32(e){return new Uint32Array(mallocArrayBuffer(4*e),0,e)}function mallocInt8(e){return new Int8Array(mallocArrayBuffer(e),0,e)}function mallocInt16(e){return new Int16Array(mallocArrayBuffer(2*e),0,e)}function mallocInt32(e){return new Int32Array(mallocArrayBuffer(4*e),0,e)}function mallocFloat(e){return new Float32Array(mallocArrayBuffer(4*e),0,e)}function mallocDouble(e){return new Float64Array(mallocArrayBuffer(8*e),0,e)}function mallocUint8Clamped(e){return a?new Uint8ClampedArray(mallocArrayBuffer(e),0,e):mallocUint8(e)}function mallocDataView(e){return new DataView(mallocArrayBuffer(e),0,e)}function mallocBuffer(e){e=i.nextPow2(e);var t=i.log2(e),r=c[t];return r.length>0?r.pop():new n(e)}var i=r(87),o=r(88);e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var a="undefined"!=typeof Uint8ClampedArray,s=e.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=o([32,0])),s.BUFFER||(s.BUFFER=o([32,0]));var l=s.DATA,c=s.BUFFER;t.free=function(e){if(n.isBuffer(e))c[i.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|i.log2(t);l[r].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeInt8=t.freeInt16=t.freeInt32=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=freeTypedArray,t.freeArrayBuffer=freeArrayBuffer,t.freeBuffer=function(e){c[i.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return mallocArrayBuffer(e);switch(t){case"uint8":return mallocUint8(e);case"uint16":return mallocUint16(e);case"uint32":return mallocUint32(e);case"int8":return mallocInt8(e);case"int16":return mallocInt16(e);case"int32":return mallocInt32(e);case"float":case"float32":return mallocFloat(e);case"double":case"float64":return mallocDouble(e);case"uint8_clamped":return mallocUint8Clamped(e);case"buffer":return mallocBuffer(e);case"data":case"dataview":return mallocDataView(e);default:return null}return null},t.mallocArrayBuffer=mallocArrayBuffer,t.mallocUint8=mallocUint8,t.mallocUint16=mallocUint16,t.mallocUint32=mallocUint32,t.mallocInt8=mallocInt8,t.mallocInt16=mallocInt16,t.mallocInt32=mallocInt32,t.mallocFloat32=t.mallocFloat=mallocFloat,t.mallocFloat64=t.mallocDouble=mallocDouble,t.mallocUint8Clamped=mallocUint8Clamped,t.mallocDataView=mallocDataView,t.mallocBuffer=mallocBuffer,t.clearCache=function(){for(var e=0;e<32;++e)s.UINT8[e].length=0,s.UINT16[e].length=0,s.UINT32[e].length=0,s.INT8[e].length=0,s.INT16[e].length=0,s.INT32[e].length=0,s.FLOAT[e].length=0,s.DOUBLE[e].length=0,s.UINT8C[e].length=0,l[e].length=0,c[e].length=0}}).call(t,function(){return this}(),r(83).Buffer)},function(e,t,r){(function(e,n){"use strict";function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,r){if(kMaxLength()<r)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r),t.__proto__=e.prototype):(null===t&&(t=new e(r)),t.length=r),t}function e(t,r,n){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,r,n);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,r,n)}function from(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,n):"string"==typeof t?fromString(e,t,r):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r,n){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof n?createBuffer(e,t).fill(r,n):createBuffer(e,t).fill(r):createBuffer(e,t)}function allocUnsafe(t,r){if(assertSize(r),t=createBuffer(t,r<0?0:0|checked(r)),!e.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)t[n]=0;return t}function fromString(t,r,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|byteLength(r,n);t=createBuffer(t,i);var o=t.write(r,n);return o!==i&&(t=t.slice(0,o)),t}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function fromArrayBuffer(t,r,n,i){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return r=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),e.TYPED_ARRAY_SUPPORT?(t=r,t.__proto__=e.prototype):t=fromArrayLike(t,r),t}function fromObject(t,r){if(e.isBuffer(r)){var n=0|checked(r.length);return t=createBuffer(t,n),0===t.length?t:(r.copy(t,0,0,n),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||isnan(r.length)?createBuffer(t,0):fromArrayLike(t,r);if("Buffer"===r.type&&a(r.data))return fromArrayLike(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){
if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(t){return+t!=t&&(t=0),e.alloc(+t)}function byteLength(t,r){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(t).length;default:if(i)return utf8ToBytes(t).length;r=(""+r).toLowerCase(),i=!0}}function slowToString(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(t,r,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=e.from(r,i)),e.isBuffer(r))return 0===r.length?-1:arrayIndexOf(t,r,n,i,o);if("number"==typeof r)return r=255&r,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):arrayIndexOf(t,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,i){function read(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,a=e.length,s=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,s/=2,r/=2}var l;if(i){var c=-1;for(l=r;l<a;l++)if(read(e,l)===read(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===s)return c*o}else c!==-1&&(l-=l-c),c=-1}else for(r+s>a&&(r=a-s),l=r;l>=0;l--){for(var u=!0,p=0;p<s;p++)if(read(e,l+p)!==read(t,p)){u=!1;break}if(u)return l}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(asciiToBytes(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var l,c,u,p;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(p=(31&o)<<6|63&l,p>127&&(a=p));break;case 3:l=e[i+1],c=e[i+2],128===(192&l)&&128===(192&c)&&(p=(15&o)<<12|(63&l)<<6|63&c,p>2047&&(p<55296||p>57343)&&(a=p));break;case 4:l=e[i+1],c=e[i+2],u=e[i+3],128===(192&l)&&128===(192&c)&&128===(192&u)&&(p=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,p>65535&&p<1114112&&(a=p))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return decodeCodePointsArray(n)}function decodeCodePointsArray(e){var t=e.length;if(t<=s)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=s));return r}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=toHex(e[o]);return i}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function checkOffset(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,r,n,i,o,a){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<a)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function checkIEEE754(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,i){return i||checkIEEE754(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),o.write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,i){return i||checkIEEE754(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),o.write(e,t,r,n,52,8),r+8}function base64clean(e){if(e=stringtrim(e).replace(l,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function base64ToBytes(e){return i.toByteArray(base64clean(e))}function blitBuffer(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function isnan(e){return e!==e}var i=r(84),o=r(85),a=r(86);t.Buffer=e,t.SlowBuffer=SlowBuffer,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:typedArraySupport(),t.kMaxLength=kMaxLength(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,r){return from(null,e,t,r)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,r){return alloc(null,e,t,r)},e.allocUnsafe=function(e){return allocUnsafe(null,e)},e.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,r){if(!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=e.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},e.byteLength=byteLength,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,r,n,i,o){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=n-r,l=Math.min(a,s),c=this.slice(i,o),u=t.slice(r,n),p=0;p<l;++p)if(c[p]!==u[p]){a=c[p],s=u[p];break}return a<s?-1:s<a?1:0},e.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},e.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},e.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},e.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var s=4096;e.prototype.slice=function(t,r){var n=this.length;t=~~t,r=void 0===r?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var i;if(e.TYPED_ARRAY_SUPPORT)i=this.subarray(t,r),i.__proto__=e.prototype;else{var o=r-t;i=new e(o,(void 0));for(var a=0;a<o;++a)i[a]=this[a+t]}return i},e.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},e.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||checkOffset(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},e.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},e.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||checkOffset(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),o.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),o.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),o.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),o.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var i=Math.pow(2,8*r)-1;checkInt(this,e,t,r,i,0)}var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},e.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var i=Math.pow(2,8*r)-1;checkInt(this,e,t,r,i,0)}var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},e.prototype.writeUInt8=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},e.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):objectWriteUInt16(this,t,r,!0),r+2},e.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):objectWriteUInt16(this,t,r,!1),r+2},e.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):objectWriteUInt32(this,t,r,!0),r+4},e.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):objectWriteUInt32(this,t,r,!1),r+4},e.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);checkInt(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},e.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);checkInt(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},e.prototype.writeInt8=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},e.prototype.writeInt16LE=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):objectWriteUInt16(this,t,r,!0),r+2},e.prototype.writeInt16BE=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):objectWriteUInt16(this,t,r,!1),r+2},e.prototype.writeInt32LE=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):objectWriteUInt32(this,t,r,!0),r+4},e.prototype.writeInt32BE=function(t,r,n){return t=+t,r=0|r,n||checkInt(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):objectWriteUInt32(this,t,r,!1),r+4},e.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},e.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},e.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},e.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},e.prototype.copy=function(t,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var o,a=i-n;if(this===t&&n<r&&r<i)for(o=a-1;o>=0;--o)t[o+r]=this[o+n];else if(a<1e3||!e.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)t[o+r]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),r);return a},e.prototype.fill=function(t,r,n,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t=255&t);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=r;a<n;++a)this[a]=t;else{var s=e.isBuffer(t)?t:utf8ToBytes(new e(t,i).toString()),l=s.length;for(a=0;a<n-r;++a)this[a+r]=s[a%l]}return this};var l=/[^+\/0-9A-Za-z-_]/g}).call(t,r(83).Buffer,function(){return this}())},function(e,t){"use strict";function placeHoldersCount(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function byteLength(e){return 3*e.length/4-placeHoldersCount(e)}function toByteArray(e){var t,r,o,a,s,l,c=e.length;s=placeHoldersCount(e),l=new i(3*c/4-s),o=s>0?c-4:c;var u=0;for(t=0,r=0;t<o;t+=4,r+=3)a=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],l[u++]=a>>16&255,l[u++]=a>>8&255,l[u++]=255&a;return 2===s?(a=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,l[u++]=255&a):1===s&&(a=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,l[u++]=a>>8&255,l[u++]=255&a),l}function tripletToBase64(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function encodeChunk(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(tripletToBase64(n));return i.join("")}function fromByteArray(e){for(var t,n=e.length,i=n%3,o="",a=[],s=16383,l=0,c=n-i;l<c;l+=s)a.push(encodeChunk(e,l,l+s>c?c:l+s));return 1===i?(t=e[n-1],o+=r[t>>2],o+=r[t<<4&63],o+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],o+=r[t>>10],o+=r[t>>4&63],o+=r[t<<2&63],o+="="),a.push(o),a.join("")}t.byteLength=byteLength,t.toByteArray=toByteArray,t.fromByteArray=fromByteArray;for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,p=r?i-1:0,h=r?-1:1,d=e[t+p];for(p+=h,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+e[t+p],p+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+e[t+p],p+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,n),o-=c}return(d?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,p=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+p>=1?h/l:h*Math.pow(2,1-p),t*l>=2&&(a++,l/=2),a+p>=u?(s=0,a=u):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+d]=255&a,d+=f,a/=256,c-=8);e[r+d-f]|=128*m}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},81,function(e,t){"use strict";function dupe_array(e,t,r){var n=0|e[r];if(n<=0)return[];var i,o=new Array(n);if(r===e.length-1)for(i=0;i<n;++i)o[i]=t;else for(i=0;i<n;++i)o[i]=dupe_array(e,t,r+1);return o}function dupe_number(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function dupe(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return dupe_number(0|e,t);break;case"object":if("number"==typeof e.length)return dupe_array(e,t,0)}return[]}e.exports=dupe},function(e,t,r){function compare1st(e,t){return e[0]-t[0]}function order(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(compare1st);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n}function compileConstructor(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var i="generic"===e;if(t===-1){var o="function "+r+"(a){this.data=a;};\tvar proto="+r+".prototype;\tproto.dtype='"+e+"';\tproto.index=function(){return -1};\tproto.size=0;\tproto.dimension=-1;\tproto.shape=proto.stride=proto.order=[];\tproto.lo=proto.hi=proto.transpose=proto.step=\tfunction(){return new "+r+"(this.data);};\tproto.get=proto.set=function(){};\tproto.pick=function(){return null};\treturn function construct_"+r+"(a){return new "+r+"(a);}",s=new Function(o);return s()}if(0===t){var o="function "+r+"(a,d) {\tthis.data = a;\tthis.offset = d\t};\tvar proto="+r+".prototype;\tproto.dtype='"+e+"';\tproto.index=function(){return this.offset};\tproto.dimension=0;\tproto.size=1;\tproto.shape=\tproto.stride=\tproto.order=[];\tproto.lo=\tproto.hi=\tproto.transpose=\tproto.step=function "+r+"_copy() {\treturn new "+r+"(this.data,this.offset)\t};\tproto.pick=function "+r+"_pick(){\treturn TrivialArray(this.data);\t};\tproto.valueOf=proto.get=function "+r+"_get(){\treturn "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};\tproto.set=function "+r+"_set(v){\treturn "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"\t};\treturn function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",s=new Function("TrivialArray",o);return s(a[e][0])}var o=["'use strict'"],l=n(t),c=l.map(function(e){return"i"+e}),u="this.offset+"+l.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),p=l.map(function(e){return"b"+e}).join(","),h=l.map(function(e){return"c"+e}).join(",");o.push("function "+r+"(a,"+p+","+h+",d){this.data=a","this.shape=["+p+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){\treturn "+l.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+r+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);\tif(s0>s1){\tif(s1>s2){\treturn [2,1,0];\t}else if(s0>s2){\treturn [1,2,0];\t}else{\treturn [1,0,2];\t}\t}else if(s0>s2){\treturn [2,0,1];\t}else if(s2>s1){\treturn [0,1,2];\t}else{\treturn [0,2,1];\t}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+c.join(",")+",v){"),i?o.push("return this.data.set("+u+",v)}"):o.push("return this.data["+u+"]=v}"),o.push("proto.get=function "+r+"_get("+c.join(",")+"){"),i?o.push("return this.data.get("+u+")}"):o.push("return this.data["+u+"]}"),o.push("proto.index=function "+r+"_index(",c.join(),"){return "+u+"}"),o.push("proto.hi=function "+r+"_hi("+c.join(",")+"){return new "+r+"(this.data,"+l.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+l.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=l.map(function(e){return"a"+e+"=this.shape["+e+"]"}),f=l.map(function(e){return"c"+e+"=this.stride["+e+"]"});o.push("proto.lo=function "+r+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+f.join(","));for(var m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){\td=i"+m+"|0;\tb+=c"+m+"*d;\ta"+m+"-=d}");o.push("return new "+r+"(this.data,"+l.map(function(e){return"a"+e}).join(",")+","+l.map(function(e){return"c"+e}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+c.join(",")+"){var "+l.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+l.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'){\td=i"+m+"|0;\tif(d<0){\tc+=b"+m+"*(a"+m+"-1);\ta"+m+"=ceil(-a"+m+"/d)\t}else{\ta"+m+"=ceil(a"+m+"/d)\t}\tb"+m+"*=d\t}");o.push("return new "+r+"(this.data,"+l.map(function(e){return"a"+e}).join(",")+","+l.map(function(e){return"b"+e}).join(",")+",c)}");for(var g=new Array(t),y=new Array(t),m=0;m<t;++m)g[m]="a[i"+m+"]",y[m]="b[i"+m+"]";o.push("proto.transpose=function "+r+"_transpose("+c+"){"+c.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+l.map(function(e){return"shape["+e+"]"}).join(",")+","+l.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var s=new Function("CTOR_LIST","ORDER",o.join("\n"));return s(a[e],order)}function arrayDType(e){if(i(e))return"buffer";if(o)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function wrappedNDArrayCtor(e,t,r,n){if(void 0===e){var i=a.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===r){r=new Array(o);for(var s=o-1,l=1;s>=0;--s)r[s]=l,l*=t[s]}if(void 0===n){n=0;for(var s=0;s<o;++s)r[s]<0&&(n-=(t[s]-1)*r[s])}for(var c=arrayDType(e),u=a[c];u.length<=o+1;)u.push(compileConstructor(c,u.length-1));var i=u[o+1];return i(e,t,r,n)}var n=r(90),i=r(91),o="undefined"!=typeof Float64Array,a={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=wrappedNDArrayCtor},function(e,t){"use strict";function iota(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}e.exports=iota},function(e,t){function isBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer(e.slice(0,0))}e.exports=function(e){return null!=e&&(isBuffer(e)||isSlowBuffer(e)||!!e._isBuffer)}},function(e,t,r){"use strict";function fixup(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var r=e.args[t];0===t?e.args[t]={name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function pcompile(e){return n({args:e.args,pre:fixup(e.pre),body:fixup(e.body),post:fixup(e.proc),funcName:e.funcName})}function makeOp(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(pcompile(e))}var n=r(93),i={body:"",args:[],thisVars:[],localVars:[]},o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in o){var r=o[e];t[e]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:e+"seq"})}}();var a={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in a){var r=a[e];t[e]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:e}),t[e+"eq"]=makeOp({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var s={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in s){var r=s[e];t[e]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<l.length;++e){var r=l[e];t[r]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),t[r+"eq"]=makeOp({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var c=["max","min","atan2","pow"];!function(){for(var e=0;e<c.length;++e){var r=c[e];t[r]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),t[r+"s"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),t[r+"eq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),t[r+"seq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,
thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var u=["atan2","pow"];!function(){for(var e=0;e<u.length;++e){var r=u[e];t[r+"op"]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),t[r+"ops"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),t[r+"opeq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),t[r+"opseq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),t.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=makeOp({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=makeOp({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},function(e,t,r){"use strict";function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(e){var t=new Procedure;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var o=r[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,n(t)}var n=r(94);e.exports=compileCwise},function(e,t,r){"use strict";function createThunk(e){var t=["'use strict'","var CACHED={}"],r=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],c=[],u=0;u<e.arrayArgs.length;++u){var p=e.arrayArgs[u];r.push(["t",p,"=array",p,".dtype,","r",p,"=array",p,".order"].join("")),o.push("t"+p),o.push("r"+p),a.push("t"+p),a.push("r"+p+".join()"),s.push("array"+p+".data"),s.push("array"+p+".stride"),s.push("array"+p+".offset|0"),u>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+p+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[u]))),c.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+p+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[u])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var u=0;u<e.scalarArgs.length;++u)s.push("scalar"+e.scalarArgs[u]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var h=new Function("compile",t.join("\n"));return h(n.bind(void 0,e))}var n=r(95);e.exports=createThunk},function(e,t,r){"use strict";function innerFill(e,t,r){var n,i,o=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],c=[],u=0,p=0;for(n=0;n<o;++n)c.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)p=u,u=e[n],0===n?c.push(["d",i,"s",n,"=t",i,"p",u].join("")):c.push(["d",i,"s",n,"=(t",i,"p",u,"-s",p,"*t",i,"p",p,")"].join(""));for(l.push("var "+c.join(",")),n=o-1;n>=0;--n)u=e[n],l.push(["for(i",n,"=0;i",n,"<s",u,";++i",n,"){"].join(""));for(l.push(r),n=0;n<o;++n){for(p=u,u=e[n],i=0;i<a;++i)l.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&l.push(["index[",p,"]-=s",p].join("")),l.push(["++index[",u,"]"].join(""))),l.push("}")}return l.join("\n")}function outerFill(e,t,r,n){for(var i=t.length,o=r.arrayArgs.length,a=r.blockSize,s=r.indexArgs.length>0,l=[],c=0;c<o;++c)l.push(["var offset",c,"=p",c].join(""));for(var c=e;c<i;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",a,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",a].join("")),l.push(["j",c,"-=",a,"}"].join("")),s&&l.push(["index[",t[c],"]=j",c].join(""));for(var c=0;c<o;++c){for(var u=["offset"+c],p=e;p<i;++p)u.push(["j",p,"*t",c,"p",t[p]].join(""));l.push(["p",c,"=(",u.join("+"),")"].join(""))}l.push(innerFill(t,r,n));for(var c=e;c<i;++c)l.push("}");return l.join("\n")}function countMatches(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function processBlock(e,t,r){for(var n=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),c="",u=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var p=t.offsetArgIndex.indexOf(a),h=t.offsetArgs[p];u=h.array,c="+q"+p;case"array":c="p"+u+c;var d="l"+a,f="a"+u;if(0===t.arrayBlockIndices[u])1===s.count?"generic"===r[u]?s.lvalue?(i.push(["var ",d,"=",f,".get(",c,")"].join("")),n=n.replace(l,d),o.push([f,".set(",c,",",d,")"].join(""))):n=n.replace(l,[f,".get(",c,")"].join("")):n=n.replace(l,[f,"[",c,"]"].join("")):"generic"===r[u]?(i.push(["var ",d,"=",f,".get(",c,")"].join("")),n=n.replace(l,d),s.lvalue&&o.push([f,".set(",c,",",d,")"].join(""))):(i.push(["var ",d,"=",f,"[",c,"]"].join("")),n=n.replace(l,d),s.lvalue&&o.push([f,"[",c,"]=",d].join("")));else{for(var m=[s.name],g=[c],y=0;y<Math.abs(t.arrayBlockIndices[u]);y++)m.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(y+1)+"*t"+u+"b"+y);if(l=new RegExp(m.join(""),"g"),c=g.join("+"),"generic"===r[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[f,"[",c,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function typeSummary(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+o:t[n]=i.charAt(0)+o,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function generateCWiseOp(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,i=new Array(e.arrayArgs.length),o=new Array(e.arrayArgs.length),a=0;a<e.arrayArgs.length;++a)o[a]=t[2*a],i[a]=t[2*a+1];for(var s=[],l=[],c=[],u=[],p=[],a=0;a<e.arrayArgs.length;++a){e.arrayBlockIndices[a]<0?(c.push(0),u.push(r),s.push(r),l.push(r+e.arrayBlockIndices[a])):(c.push(e.arrayBlockIndices[a]),u.push(e.arrayBlockIndices[a]+r),s.push(0),l.push(e.arrayBlockIndices[a]));for(var h=[],d=0;d<i[a].length;d++)c[a]<=i[a][d]&&i[a][d]<u[a]&&h.push(i[a][d]-c[a]);p.push(h)}for(var f=["SS"],m=["'use strict'"],g=[],d=0;d<r;++d)g.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<e.arrayArgs.length;++a){f.push("a"+a),f.push("t"+a),f.push("p"+a);for(var d=0;d<r;++d)g.push(["t",a,"p",d,"=t",a,"[",c[a]+d,"]"].join(""));for(var d=0;d<Math.abs(e.arrayBlockIndices[a]);++d)g.push(["t",a,"b",d,"=t",a,"[",s[a]+d,"]"].join(""))}for(var a=0;a<e.scalarArgs.length;++a)f.push("Y"+a);if(e.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var y=new Array(r),a=0;a<r;++a)y[a]="0";g.push(["index=[",y.join(","),"]"].join(""))}for(var a=0;a<e.offsetArgs.length;++a){for(var v=e.offsetArgs[a],b=[],d=0;d<v.offset.length;++d)0!==v.offset[d]&&(1===v.offset[d]?b.push(["t",v.array,"p",d].join("")):b.push([v.offset[d],"*t",v.array,"p",d].join("")));0===b.length?g.push("q"+a+"=0"):g.push(["q",a,"=",b.join("+")].join(""))}var _=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));g=g.concat(_),m.push("var "+g.join(","));for(var a=0;a<e.arrayArgs.length;++a)m.push("p"+a+"|=0");e.pre.body.length>3&&m.push(processBlock(e.pre,e,o));var w=processBlock(e.body,e,o),x=countMatches(p);x<r?m.push(outerFill(x,p[0],e,w)):m.push(innerFill(p[0],e,w)),e.post.body.length>3&&m.push(processBlock(e.post,e,o)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+m.join("\n")+"\n----------");var S=[e.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",x,typeSummary(o)].join(""),C=new Function(["function ",S,"(",f.join(","),"){",m.join("\n"),"} return ",S].join(""));return C()}var n=r(96);e.exports=generateCWiseOp},function(e,t){"use strict";function unique_pred(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],a=1;a<n;++a)if(o=i,i=e[a],t(i,o)){if(a===r){r++;continue}e[r++]=i}return e.length=r,e}function unique_eq(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;o<r;++o,i=n)if(i=n,n=e[o],n!==i){if(o===t){t++;continue}e[t++]=n}return e.length=t,e}function unique(e,t,r){return 0===e.length?e:t?(r||e.sort(t),unique_pred(e,t)):(r||e.sort(),unique_eq(e))}e.exports=unique},function(e,t,r){"use strict";function ndfft(e,t,r){var s,l,c=t.shape,u=c.length,p=1,h=new Array(u),d=0;for(s=u-1;s>=0;--s)if(h[s]=p,p*=c[s],d=Math.max(d,a.scratchMemory(c[s])),t.shape[s]!==r.shape[s])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var f,m=4*p+d;f="array"===t.dtype||"float64"===t.dtype||"custom"===t.dtype?o.mallocDouble(m):o.mallocFloat(m);var g,y,v,b,_=i(f,c.slice(0),h,0),w=i(f,c.slice(0),h.slice(0),p),x=i(f,c.slice(0),h.slice(0),2*p),S=i(f,c.slice(0),h.slice(0),3*p),C=4*p;for(n.assign(_,t),n.assign(w,r),s=u-1;s>=0&&(a(e,p/c[s],c[s],f,_.offset,w.offset,C),0!==s);--s){for(y=1,v=x.stride,b=S.stride,l=s-1;l<u;++l)b[l]=v[l]=y,y*=c[l];for(l=s-2;l>=0;--l)b[l]=v[l]=y,y*=c[l];n.assign(x,_),n.assign(S,w),g=_,_=x,x=g,g=w,w=S,S=g}n.assign(t,_),n.assign(r,w),o.free(f)}var n=r(92),i=r(89),o=r(82),a=r(98);e.exports=ndfft},function(e,t,r){function fft(e,t,r,i,o,a,s){e|=0,t|=0,r|=0,o|=0,a|=0,n.isPow2(r)?fftRadix2(e,t,r,i,o,a):fftBluestein(e,t,r,i,o,a,s)}function scratchMemory(e){return n.isPow2(e)?0:2*e+4*n.nextPow2(2*e+1)}function fftRadix2(e,t,r,i,o,a){e|=0,t|=0,r|=0,o|=0,a|=0;var s,l,c,u,p,h,d,f,m,g,y,v,b,_,w,x,S,C,k,E,A,P,T,M,I;for(s=r,l=n.log2(s),C=0;C<t;++C){for(d=s>>1,p=0,c=0;c<s-1;c++){for(c<p&&(b=i[o+c],i[o+c]=i[o+p],i[o+p]=b,b=i[a+c],i[a+c]=i[a+p],i[a+p]=b),h=d;h<=p;)p-=h,h>>=1;p+=h}for(y=-1,v=0,g=1,f=0;f<l;f++){for(m=g,g<<=1,x=1,S=0,p=0;p<m;p++){for(c=p;c<s;c+=g)u=c+m,k=i[o+u],E=i[a+u],A=i[o+c],P=i[a+c],T=x*(k+E),M=k*(S-x),I=E*(x+S),_=T-I,w=T+M,i[o+u]=A-_,i[a+u]=P-w,i[o+c]+=_,i[a+c]+=w;T=y*(x+S),M=x*(v-y),I=S*(y+v),x=T-I,S=T+M}v=Math.sqrt((1-y)/2),e<0&&(v=-v),y=Math.sqrt((1+y)/2)}if(e<0){var O=1/s;for(c=0;c<s;c++)i[o+c]*=O,i[a+c]*=O}o+=r,a+=r}}function fftBluestein(e,t,r,i,o,a,s){e|=0,t|=0,r|=0,o|=0,a|=0,s|=0;var l,c,u,p,h,d,f,m,g,y=n.nextPow2(2*r+1),v=s,b=v+r,_=b+r,w=_+y,x=w+y,S=x+y,C=-e*Math.PI/r;for(g=0;g<r;++g)c=C*(g*g%(2*r)),p=Math.cos(c),h=Math.sin(c),i[x+(y-g)]=i[x+g]=i[v+g]=p,i[S+(y-g)]=i[S+g]=i[b+g]=h;for(g=r;g<=y-r;++g)i[x+g]=0;for(g=r;g<=y-r;++g)i[S+g]=0;for(fftRadix2(1,1,y,i,x,S),C=e<0?1/r:1,l=0;l<t;++l){for(g=0;g<r;++g)c=i[o+g],u=i[a+g],p=i[v+g],h=-i[b+g],d=p*(c+u),f=c*(h-p),m=u*(p+h),i[_+g]=d-m,i[w+g]=d+f;for(g=r;g<y;++g)i[_+g]=0;for(g=r;g<y;++g)i[w+g]=0;for(fftRadix2(1,1,y,i,_,w),g=0;g<y;++g)c=i[_+g],u=i[w+g],p=i[x+g],h=i[S+g],d=p*(c+u),f=c*(h-p),m=u*(p+h),i[_+g]=d-m,i[w+g]=d+f;for(fftRadix2(-1,1,y,i,_,w),g=0;g<r;++g)c=i[_+g],u=i[w+g],p=i[v+g],h=-i[b+g],d=p*(c+u),f=c*(h-p),m=u*(p+h),i[o+g]=C*(d-m),i[a+g]=C*(d+f);o+=r,a+=r}}var n=r(81);e.exports=fft,e.exports.scratchMemory=scratchMemory},function(e,t){"use strict";function hann(e,t){return.5*(1-Math.cos(6.283185307179586*e/(t-1)))}e.exports=hann},function(e,t,r){"use strict";function animationFrames(){return getAsyncObservable(window.requestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame||window.msCancelRequestAnimationFrame)}function interval(e){return getAsyncObservable(function(t){return window.setTimeout(t,e)},window.clearTimeout)}function getAsyncObservable(e,t){return n.Observable.create(function(r){var n,i=Date.now(),o=function(t){void 0!==n&&(n=e(o)),r.next(Math.max(0,t-i)),i=t};return n=e(o),function(){if(void 0!==n){var e=n;n=void 0,t(e)}}})}var n=r(5);t.animationFrames=animationFrames,t.interval=interval},function(e,t,r){"use strict";var n=r(82),i=r(102),o=1024,a=256,s=function(){function PitchShifter(e){var t=this;this.context=e,this.targetPitch=null,this.pitchScale=null;var r=[],s=i(function(e){var t=n.mallocFloat32(e.length);t.set(e),r.push(t)},function(e,r){return null!==t.targetPitch?t.targetPitch/r:null!==t.pitchScale?t.pitchScale:1},{frameSize:o,hopSize:a});s(new Float32Array(o)),s(new Float32Array(o)),s(new Float32Array(o)),s(new Float32Array(o)),s(new Float32Array(o));var l=this.context.createScriptProcessor(o,1,1);l.onaudioprocess=function(e){s(e.inputBuffer.getChannelData(0));var t=e.outputBuffer.getChannelData(0),i=r.shift();t.set(i),n.freeFloat32(i)},this.node=l}return PitchShifter.prototype.setPitchScale=function(e){this.pitchScale=e,this.targetPitch=null},PitchShifter.prototype.setTargetPitch=function(e){this.pitchScale=null,this.targetPitch=e},PitchShifter.prototype.getNode=function(){return this.node},PitchShifter}();t.PitchShifter=s},function(e,t,r){"use strict";function createWindow(e){for(var t=new Float32Array(e),r=0;r<e;++r){var n=r/(e-1);t[r]=.5*(1-Math.cos(2*Math.PI*n))}return t}function normalizeWindow(e,t){for(var r=e.length,n=r/t|0,i=a.mallocFloat32(r),o=0;o<r;++o){for(var s=0,l=0;l<n;++l)s+=e[(o+l*t)%r];i[o]=s}for(var o=0;o<r;++o)e[o]/=i[o];a.freeFloat32(i)}function applyWindow(e,t,r){var n,i=r.length;for(n=0;n<i;++n)e[n]=t[n]*r[n]}function scalePitch(e,t,r,n,i,o,a){for(var s=e.length,l=0;l<s;++l){var c=l*i+o,u=0|Math.floor(c),p=c-u,h=t[u%r],d=t[(u+1)%r],f=(1-p)*h+p*d;e[l]=a[l]*f}}function findMatch(e,t,r){for(var n=e[0],i=e[r],o=e[2*r],a=e.length,s=8,l=t,c=t;c<a-2*r;++c){var u=e[c]-n,p=e[c+r]-i,h=e[c+2*r]-o,d=u*u+p*p+h*h;d<s&&(s=d,l=c)}return l}function pitchShift(e,t,r){function doPitchShift(e){applyWindow(g,u,e);var r=o(g,f),n=0;r>0&&(n=l/r);var i=t(m/l,n),c=a>>1;r>0&&(c=Math.max(1,Math.floor(.5*a/r))*r|0),c=findMatch(e,0|c,0|Math.max(1,r/20)),v=(v%c+c)%c,scalePitch(g,e,c,0|r,i,v,p),v+=s*(i-1),m+=s,y(g)}r=r||{};var a=r.frameSize||2048,s=r.hopSize||a>>>2,l=r.sampleRate||44100,c=r.maxDataSize||void 0,u=r.analysisWindow||createWindow(a),p=r.synthesisWindow||createWindow(a),h=r.freqThreshold||.9,d=r.minPeriod||0|Math.min(s,Math.max(16,Math.round(l/400))),f={threshold:h,start_bin:d},m=0,g=new Float32Array(a);if(a%s!==0)throw new Error("Hop size must divide frame size");normalizeWindow(p,s);var y=i(a,s,e),v=0;return n(a,s,doPitchShift,c)}var n=r(103),i=r(104),o=r(105),a=r(107);e.exports=pitchShift},function(e,t){"use strict";function createHopStream(e,t,r,n){if(t>e)throw new Error("Hop size must be smaller than frame size");n=n||e;for(var i=new Float32Array(e+n),o=0,a=[],s=0;s+e<=i.length;s+=t)a.push(i.subarray(s,s+e));return function(n){var s,l,c;for(i.set(n,o),o+=n.length,s=0,l=0;l+e<=o;++s,l+=t)r(a[s]);for(c=0;l<o;){i.set(a[s],c);var u=0|Math.ceil((c+e)/t),p=u*t;p!==c+e&&(u-=1,p-=t),s+=u,l+=p-c,c=p}o+=c-l}}e.exports=createHopStream},function(e,t){"use strict";function overlapAdd(e,t,r){if(t>e)throw new Error("Hop size must be smaller than frame size");var n=new Float32Array(2*e),i=n.subarray(0,e),o=n.subarray(e),a=0,s=0;return function(l){var c,u,p,h=e,d=n;for(p=s,c=0,u=a;u<p&&c<h;++c,++u)d[u]+=l[c];for(;c<h;++c,++u)d[u]=l[c];a+=t,s=u,a>=e&&(r(i),i.set(o),a-=e,s-=e)}}e.exports=overlapAdd},function(e,t,r){"use strict";function zero(e,t,r){for(var n=t;n<r;++n)e[n]=0}function square(e,t){var r=e.length,n=0|Math.ceil(.5*r);e[0]=t[0]=0;for(var i=1;i<n;++i){var o=e[i],a=t[i];e[r-i]=e[i]=o*o+a*a,t[r-i]=t[i]=0}}function findPeriod(e,t,r,n){for(var i=0,o=t;o<r;++o)i=Math.max(i,e[o]);for(var a=i*n,o=t;o<r;++o)if(e[o]>a){for(var s=e[o],l=o,c=o;c<r&&e[c]>a;++c)e[c]>s&&(s=e[c],l=c);var u=e[l-1],p=e[l],h=e[l+1],d=h-p+u;if(Math.abs(d)<1e-6)return l;var f=u-h;return l+.5*f/d}return 0}function detectPitch(e,t){t=t||{};var r;r=e.shape?e.shape[0]:e.length;var l=n.nextPow2(2*r),c=i.mallocFloat(l),u=i.mallocFloat(l),p=o.ctor(c,[l],[1],0),h=o.ctor(u,[l],[1],0);e.shape?(p.shape[0]=r,a.assign(p,e),p.shape[0]=l):c.set(e),zero(c,r,l),zero(u,0,l),s(1,p,h),square(c,u),s(-1,p,h);var d=t.threshold||.9,f=findPeriod(c,t.start_bin||16,r>>>1,d);return i.freeFloat(c),i.freeFloat(u),f}var n=r(106),i=r(107),o=r(110),a=r(113),s=r(120);e.exports=detectPitch},81,function(e,t,r){(function(e){"use strict";var n=r(108),i=r(109);e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0])});var o=e.__TYPEDARRAY_POOL,a=o.UINT8,s=o.UINT16,l=o.UINT32,c=o.INT8,u=o.INT16,p=o.INT32,h=o.FLOAT,d=o.DOUBLE,f=o.DATA;t.free=function(e){if(e instanceof ArrayBuffer){var t=0|e.byteLength,r=n.log2(t);f[r].push(e)}else{var t=0|e.length,r=n.log2(t);e instanceof Uint8Array?a[r].push(e):e instanceof Uint16Array?s[r].push(e):e instanceof Uint32Array?l[r].push(e):e instanceof Int8Array?c[r].push(e):e instanceof Int16Array?u[r].push(e):e instanceof Int32Array?p[r].push(e):e instanceof Float32Array?h[r].push(e):e instanceof Float64Array&&d[r].push(e)}},t.freeUint8=function(e){a[n.log2(e.length)].push(e)},t.freeUint16=function(e){s[n.log2(e.length)].push(e)},t.freeUint32=function(e){l[n.log2(e.length)].push(e)},t.freeInt8=function(e){c[n.log2(e.length)].push(e)},t.freeInt16=function(e){u[n.log2(e.length)].push(e)},t.freeInt32=function(e){p[n.log2(e.length)].push(e)},t.freeFloat32=t.freeFloat=function(e){h[n.log2(e.length)].push(e)},t.freeFloat64=t.freeDouble=function(e){d[n.log2(e.length)].push(e)},t.freeArrayBuffer=function(e){f[n.log2(e.length)].push(e)},t.malloc=function(e,t){e=n.nextPow2(e);var r=n.log2(e);if(void 0===t){var i=f[r];if(i.length>0){var o=i[i.length-1];return i.pop(),o}return new ArrayBuffer(e)}switch(t){case"uint8":var m=a[r];return m.length>0?m.pop():new Uint8Array(e);case"uint16":var g=s[r];return g.length>0?g.pop():new Uint16Array(e);case"uint32":var y=l[r];return y.length>0?y.pop():new Uint32Array(e);case"int8":var v=c[r];return v.length>0?v.pop():new Int8Array(e);case"int16":var b=u[r];return b.length>0?b.pop():new Int16Array(e);case"int32":var _=p[r];return _.length>0?_.pop():new Int32Array(e);case"float":case"float32":var w=h[r];return w.length>0?w.pop():new Float32Array(e);case"double":case"float64":var x=d[r];return x.length>0?x.pop():new Float64Array(e);default:return null}return null},t.mallocUint8=function(e){e=n.nextPow2(e);var t=n.log2(e),r=a[t];return r.length>0?r.pop():new Uint8Array(e)},t.mallocUint16=function(e){e=n.nextPow2(e);var t=n.log2(e),r=s[t];return r.length>0?r.pop():new Uint16Array(e)},t.mallocUint32=function(e){e=n.nextPow2(e);var t=n.log2(e),r=l[t];return r.length>0?r.pop():new Uint32Array(e)},t.mallocInt8=function(e){e=n.nextPow2(e);var t=n.log2(e),r=c[t];return r.length>0?r.pop():new Int8Array(e)},t.mallocInt16=function(e){e=n.nextPow2(e);var t=n.log2(e),r=u[t];return r.length>0?r.pop():new Int16Array(e)},t.mallocInt32=function(e){e=n.nextPow2(e);var t=n.log2(e),r=p[t];return r.length>0?r.pop():new Int32Array(e)},t.mallocFloat32=t.mallocFloat=function(e){e=n.nextPow2(e);var t=n.log2(e),r=h[t];return r.length>0?r.pop():new Float32Array(e)},t.mallocFloat64=t.mallocDouble=function(e){e=n.nextPow2(e);var t=n.log2(e),r=d[t];return r.length>0?r.pop():new Float64Array(e)},t.mallocArrayBuffer=function(e){e=n.nextPow2(e);var t=n.log2(e),r=f[t];return r.length>0?r.pop():new ArrayBuffer(e)},t.clearCache=function(){for(var e=0;e<32;++e)a[e].length=0,s[e].length=0,l[e].length=0,c[e].length=0,u[e].length=0,p[e].length=0,h[e].length=0,d[e].length=0,f[e].length=0}}).call(t,function(){return this}())},81,88,function(e,t,r){"use strict";function arrayDType(e){return e instanceof Float64Array?"float64":e instanceof Float32Array?"float32":e instanceof Int32Array?"int32":e instanceof Uint32Array?"uint32":e instanceof Uint8Array?"uint8":e instanceof Uint16Array?"uint16":e instanceof Int16Array?"int16":e instanceof Int8Array?"int8":null}function eor(e,t,r){for(var n=0;n<e.length;++n){if(0===e[n])return 0;r+=(e[n]-1)*t[n]}return r}function wrap(e,t,r,n){if(!arrayDType(e))throw new Error("Input is not a typed array");if(t){for(var o=1,a=0;a<t.length;++a)o*=t[a];if(o>e.length)throw new Error("Array shape out of bounds")}else t=[e.length];if(r){if(r.length!==t.length)throw new Error("Bad stride length")}else{r=new Array(t.length);for(var s=1,a=t.length-1;a>=0;--a)r[a]=s,s*=t[a]}if(n||(n=0),e.length>0){if(n<0||n>=e.length)throw new Error("Offset out of range");var l=eor(t,r,n);if(l<0||l>=e.length)throw new Error("Array shape out of bounds")}else n=0;return i(e,t,r,n)}function dtype(e){return arrayDType(e.data)}function zeros(e,t,r){if(t||(t="float64"),!r){r=new Array(e.length);for(var n=e.length-1,o=0;n>=0;--n,++o)r[o]=n}for(var a=new Array(e.length),s=1,n=0;n<e.length;++n)a[r[n]]=s,s*=e[r[n]];var l;switch(t){case"int8":l=new Int8Array(s);break;case"int16":l=new Int16Array(s);break;case"int32":l=new Int32Array(s);break;case"uint8":l=new Uint8Array(s);break;case"uint16":l=new Uint16Array(s);break;case"uint32":l=new Uint32Array(s);break;case"float32":l=new Float32Array(s);break;case"float64":l=new Float64Array(s);break;default:throw new Error("Invalid data type")}return i(l,e,a,0)}function order(e){return n.order(e.stride)}function size(e){var t,r=e.shape,n=r.length,i=1;if(0===n)return 0;for(t=0;t<n;++t)i*=r[t];return i}function pstride(e,t){var r=0,n=e.length,i=new Array(n),o=1;if(t)for(r=0;r<n;++r)i[t[r]]=o,o*=e[t[r]];else for(var r=n-1;r>=0;--r)stride[r]=o,o*=e[r];return i}var n=r(111),i=r(112);e.exports=wrap,e.exports.zeros=zeros,e.exports.dtype=dtype,e.exports.order=order,e.exports.size=size,e.exports.stride=pstride,e.exports.ctor=i},function(e,t){function compare1st(e,t){return e[0]-t[0]}function order(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=[Math.abs(e[r]),r];t.sort(compare1st);for(var n=new Array(t.length),r=0;r<n.length;++r)n[r]=t[r][1];return n}t.order=order},function(e,t,r){"use strict";function ViewN(e,t,r,n){this.data=e,this.shape=t,this.stride=r,this.offset=n}function View0(e){this.data=e,this.shape=[],this.stride=[],this.offset=0}function View1(e,t,r,n){this.data=e,this.shape=t,this.stride=r,this.offset=n}function View2(e,t,r,n){this.data=e,this.shape=t,this.stride=r,this.offset=n}function View3(e,t,r,n){this.data=e,this.shape=t,this.stride=r,this.offset=n}function CTOR(e,t,r,n){switch(t.length){case 0:return new View0(e);case 1:return new View1(e,t,r,n);case 2:return new View2(e,t,r,n);case 3:return new View3(e,t,r,n);default:return new ViewN(e,t,r,n)}}r(111);ViewN.prototype.get=function(){for(var e=this.offset,t=0;t<this.shape.length;++t)e+=arguments[t]*this.stride[t];return this.data[e]},ViewN.prototype.set=function(){for(var e=this.offset,t=0;t<this.shape.length;++t)e+=arguments[t]*this.stride[t];var r=arguments[this.shape.length];return this.data[e]=r,r},ViewN.prototype.lo=function(){for(var e=this.shape.slice(0),t=this.stride.slice(0),r=this.offset,n=0;n<e.length;++n){var i=arguments[n];"number"==typeof i&&(i|=0,i<0&&(i=e[n]+i),r+=i*t[n],e[n]-=i)}return new this.constructor(this.data,e,t,r)},ViewN.prototype.hi=function(){for(var e=new Array(this.shape.length),t=0;t<e.length;++t){var r=arguments[t];"number"==typeof r?(r|=0,r<0&&(r=this.shape[t]+r),e[t]=r):e[t]=this.shape[t]}return new this.constructor(this.data,e,this.stride.slice(0),this.offset)},ViewN.prototype.step=function(){for(var e=this.shape.slice(0),t=this.stride.slice(0),r=this.offset,n=0;n<e.length;++n){var i=arguments[n];t[n]*=i,i<0?(r+=this.stride[n]*(this.shape[n]-1),e[n]=Math.ceil(-this.shape[n]/i)):i>0&&(e[n]=Math.ceil(this.shape[n]/i))}return new this.constructor(this.data,e,t,r)},ViewN.prototype.transpose=function(){for(var e=this.shape.slice(0),t=this.stride.slice(0),r=this.offset,n=0;n<e.length;++n){var i=arguments[n];e[n]=this.shape[i],t[n]=this.stride[i]}return new this.constructor(this.data,e,t,r)},ViewN.prototype.pick=function(){for(var e=[],t=[],r=this.offset,n=0;n<this.shape.length;++n)arguments[n]>=0?r+=this.stride[n]*arguments[n]:(e.push(this.shape[n]),t.push(this.stride[n]));return CTOR(this.data,e,t,r)},ViewN.prototype.toString=function(){for(var e=[],t=new Array(this.shape.length),r=0;r<t.length;++r)t[r]=0;for(var n=this.offset;;){for(var r=t.length-1;r>=0&&0===t[r];--r)e.push("[");var r=this.shape.length-1;for(e.push(this.data[n]);r>=0;){if(n+=this.stride[r],++t[r],!(t[r]>=this.shape[r])){e.push(",");break}if(e.push("]"),0===r)return e.join("");n-=this.stride[r]*this.shape[r],t[r--]=0}}},View0.prototype.get=View0.prototype.set=function(){return Number.NaN},View0.prototype.lo=View0.prototype.hi=View0.prototype.step=View0.prototype.transpose=View0.prototype.pick=function(){return new View0(this.data)},View0.prototype.toString=function(){return"[]"},View1.prototype.get=function(e){return this.data[e*this.stride[0]+this.offset]},View1.prototype.set=function(e,t){return this.data[e*this.stride[0]+this.offset]=t,t},View1.prototype.lo=ViewN.prototype.lo,View1.prototype.hi=ViewN.prototype.hi,
View1.prototype.step=ViewN.prototype.step,View1.prototype.transpose=ViewN.prototype.transpose,View1.prototype.pick=ViewN.prototype.pick,View1.prototype.toString=ViewN.prototype.toString,View2.prototype.get=function(e,t){return this.data[this.offset+e*this.stride[0]+t*this.stride[1]]},View2.prototype.set=function(e,t,r){return this.data[this.offset+e*this.stride[0]+t*this.stride[1]]=r},View2.prototype.hi=ViewN.prototype.hi,View2.prototype.lo=ViewN.prototype.lo,View2.prototype.step=ViewN.prototype.step,View2.prototype.transpose=ViewN.prototype.transpose,View2.prototype.pick=ViewN.prototype.pick,View2.prototype.toString=ViewN.prototype.toString,View3.prototype.get=function(e,t,r){return this.data[this.offset+e*this.stride[0]+t*this.stride[1]+r*this.stride[2]]},View3.prototype.set=function(e,t,r,n){return this.data[this.offset+e*this.stride[0]+t*this.stride[1]+r*this.stride[2]]=n},View3.prototype.hi=ViewN.prototype.hi,View3.prototype.lo=ViewN.prototype.lo,View3.prototype.step=ViewN.prototype.step,View3.prototype.transpose=ViewN.prototype.transpose,View3.prototype.pick=ViewN.prototype.pick,View3.prototype.toString=ViewN.prototype.toString,e.exports=CTOR},function(e,t,r){var n=r(114),i=r(110),o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in o){var r=o[e];t[e]=n({args:["array","array","array"],body:Function("a","b","c","a=b"+r+"c")}),t[e+"eq"]=n({args:["array","array"],body:Function("a","b","a"+r+"=b")}),t[e+"s"]=n({args:["array","array","scalar"],body:Function("a","b","s","a=b"+r+"s")}),t[e+"seq"]=n({args:["array","scalar"],body:Function("a","s","a"+r+"=s")})}}();var a={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in a){var r=a[e];t[e]=n({args:["array","array"],body:Function("a","b","a="+r+"b")}),t[e+"eq"]=n({args:["array"],body:Function("a","a="+r+"a")})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var r=l[e];t[e]=n({args:["array","array","array"],body:Function("a","b","c","a=b"+r+"c")}),t[e+"s"]=n({args:["array","array","scalar"],body:Function("a","b","s","a=b"+r+"s")}),t[e+"eq"]=n({args:["array","array"],body:Function("a","b","a=a"+r+"b")}),t[e+"seq"]=n({args:["array","scalar"],body:Function("a","s","a=a"+r+"s")})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var r=c[e];t[r]=n({args:["array","array"],pre:Function("this.func=Math."+r),body:function(e,t){e=this.func(t)}}),t[r+"eq"]=n({args:["array"],pre:Function("this.func=Math."+r),body:function(e){e=this.func(e)}})}}();var u=["max","min"];!function(){for(var e=0;e<u.length;++e){var r=u[e];t[r]=n({args:["array","array","array"],pre:Function("this.func=Math."+r),body:function(e,t,r){e=this.func(t,r)}}),t[r+"s"]=n({args:["array","array","scalar"],pre:Function("this.func=Math."+r),body:function(e,t,r){e=this.func(t,r)}}),t[r+"eq"]=n({args:["array","array"],pre:Function("this.func=Math."+r),body:function(e,t){e=this.func(e,t)}}),t[r+"seq"]=n({args:["array","scalar"],pre:Function("this.func=Math."+r),body:function(e,t){e=this.func(e,t)}})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var r=p[e];t[r]=n({args:["array","array","array"],pre:Function("this.func=Math."+r),body:function(e,t,r){e=this.func(t,r)}}),t[r+"s"]=n({args:["array","array","scalar"],pre:Function("this.func=Math."+r),body:function(e,t,r){e=this.func(t,r)}}),t[r+"eq"]=n({args:["array","array"],pre:Function("this.func=Math."+r),body:function(e,t){e=this.func(e,t)}}),t[r+"seq"]=n({args:["array","scalar"],pre:Function("this.func=Math."+r),body:function(e,t){e=this.func(e,t)}}),t[r+"op"]=n({args:["array","array","array"],pre:Function("this.func=Math."+r),body:function(e,t,r){e=this.func(r,t)}}),t[r+"ops"]=n({args:["array","array","scalar"],pre:Function("this.func=Math."+r),body:function(e,t,r){e=this.func(r,t)}}),t[r+"opeq"]=n({args:["array","array"],pre:Function("this.func=Math."+r),body:function(e,t){e=this.func(t,e)}}),t[r+"opseq"]=n({args:["array","scalar"],pre:Function("this.func=Math."+r),body:function(e,t){e=this.func(t,e)}})}}(),t.any=n({args:["array"],body:function(e){if(e)return!0},post:function(){return!1}}),t.all=n({args:["array"],body:function(e){if(!e)return!1},post:function(){return!0}}),t.sum=n({args:["array"],pre:function(){this.sum=0},body:function(e){this.sum+=e},post:function(){return this.sum}}),t.prod=n({args:["array"],pre:function(){this.prod=1},body:function(e){this.prod*=e},post:function(){return this.prod}}),t.norm2squared=n({args:["array"],pre:function(){this.sum=0},body:function(e){this.sum+=e*e},post:function(){return this.sum}}),t.norm2=n({args:["array"],pre:function(){this.sum=0},body:function(e){this.sum+=e*e},post:function(){return Math.sqrt(this.sum)}}),t.norminf=n({args:["array"],pre:function(){this.n=0},body:function(e){e<0?-e<this.n&&(this.n=-e):e>this.n&&(s=e)},post:function(){return this.n}}),t.norm1=n({args:["array"],pre:function(){this.sum=0},body:function(e){this.sum+=e<0?-e:e},post:function(){return this.sum}}),t.sup=n({args:["array"],pre:function(){this.hi=Number.NEGATIVE_INFINITY},body:function(e){e>this.hi&&(this.hi=e)},post:function(){return this.hi}}),t.inf=n({args:["array"],pre:function(){this.lo=Number.POSITIVE_INFINITY},body:function(e){e<this.lo&&(this.lo=e)},post:function(){return this.lo}}),t.argmin=n({args:["index","array"],pre:function(e){this.min_v=Number.POSITIVE_INFINITY,this.min_i=e.slice(0)},body:function(e,t){if(t<this.min_v){this.min_v=t;for(var r=0;r<e.length;++r)this.min_i[r]=e[r]}},post:function(){return this.min_i}}),t.argmax=n({args:["index","array"],pre:function(e){this.max_v=Number.NEGATIVE_INFINITY,this.max_i=e.slice(0)},body:function(e,t){if(t>this.max_v){this.max_v=t;for(var r=0;r<e.length;++r)this.max_i[r]=e[r]}},post:function(){return this.max_i}}),t.random=n({args:["array"],pre:function(){this.rnd=Math.random},body:function(e){e=this.rnd()}}),t.assign=n({args:["array","array"],body:function(e,t){e=t}}),t.assigns=n({args:["array","scalar"],body:function(e,t){e=t}}),t.clone=function(e){for(var r=new Array(e.shape.length),n=1,o=e.shape.length-1;o>=0;--o)r[o]=n,n*=e.shape[o];var a=new e.data.constructor(e.data.slice(0,n*e.data.BYTES_PER_ELEMENT)),s=i(a,e.shape.slice(0),r,0);return t.assign(s,e)}},[298,115,118],[299,116],[300,117],function(e,t,r){var n,i,o;!function(r,a){"use strict";i=[t],n=a,o="function"==typeof n?n.apply(t,i):n,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";function assert(e,t){if(!e)throw new Error("ASSERT: "+t)}function sliceSource(e,t){return s.slice(e,t)}function isDecimalDigit(e){return"0123456789".indexOf(e)>=0}function isHexDigit(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function isOctalDigit(e){return"01234567".indexOf(e)>=0}function isWhiteSpace(e){return" "===e||"\t"===e||"\x0B"===e||"\f"===e||" "===e||e.charCodeAt(0)>=5760&&" ᠎             　\ufeff".indexOf(e)>=0}function isLineTerminator(e){return"\n"===e||"\r"===e||"\u2028"===e||"\u2029"===e}function isIdentifierStart(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"||e.charCodeAt(0)>=128&&a.NonAsciiIdentifierStart.test(e)}function isIdentifierPart(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e.charCodeAt(0)>=128&&a.NonAsciiIdentifierPart.test(e)}function isFutureReservedWord(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0}return!1}function isStrictModeReservedWord(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0}return!1}function isRestrictedWord(e){return"eval"===e||"arguments"===e}function isKeyword(e){var t=!1;switch(e.length){case 2:t="if"===e||"in"===e||"do"===e;break;case 3:t="var"===e||"for"===e||"new"===e||"try"===e;break;case 4:t="this"===e||"else"===e||"case"===e||"void"===e||"with"===e;break;case 5:t="while"===e||"break"===e||"catch"===e||"throw"===e;break;case 6:t="return"===e||"typeof"===e||"delete"===e||"switch"===e;break;case 7:t="default"===e||"finally"===e;break;case 8:t="function"===e||"continue"===e||"debugger"===e;break;case 10:t="instanceof"===e}if(t)return!0;switch(e){case"const":return!0;case"yield":case"let":return!0}return!(!l||!isStrictModeReservedWord(e))||isFutureReservedWord(e)}function skipComment(){var e,t,r;for(t=!1,r=!1;c<h;)if(e=s[c],r)e=s[c++],isLineTerminator(e)&&(r=!1,"\r"===e&&"\n"===s[c]&&++c,++u,p=c);else if(t)isLineTerminator(e)?("\r"===e&&"\n"===s[c+1]&&++c,++u,++c,p=c,c>=h&&throwError({},o.UnexpectedToken,"ILLEGAL")):(e=s[c++],c>=h&&throwError({},o.UnexpectedToken,"ILLEGAL"),"*"===e&&(e=s[c],"/"===e&&(++c,t=!1)));else if("/"===e)if(e=s[c+1],"/"===e)c+=2,r=!0;else{if("*"!==e)break;c+=2,t=!0,c>=h&&throwError({},o.UnexpectedToken,"ILLEGAL")}else if(isWhiteSpace(e))++c;else{if(!isLineTerminator(e))break;++c,"\r"===e&&"\n"===s[c]&&++c,++u,p=c}}function scanHexEscape(e){var t,r,n,i=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(c<h&&isHexDigit(s[c])))return"";n=s[c++],i=16*i+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(i)}function scanIdentifier(){var e,r,n,i;if(e=s[c],isIdentifierStart(e)){if(r=c,"\\"===e){if(++c,"u"!==s[c])return;if(++c,i=c,e=scanHexEscape("u")){if("\\"===e||!isIdentifierStart(e))return;n=e}else c=i,n="u"}else n=s[c++];for(;c<h&&(e=s[c],isIdentifierPart(e));)if("\\"===e){if(++c,"u"!==s[c])return;if(++c,i=c,e=scanHexEscape("u")){if("\\"===e||!isIdentifierPart(e))return;n+=e}else c=i,n+="u"}else n+=s[c++];return 1===n.length?{type:t.Identifier,value:n,lineNumber:u,lineStart:p,range:[r,c]}:isKeyword(n)?{type:t.Keyword,value:n,lineNumber:u,lineStart:p,range:[r,c]}:"null"===n?{type:t.NullLiteral,value:n,lineNumber:u,lineStart:p,range:[r,c]}:"true"===n||"false"===n?{type:t.BooleanLiteral,value:n,lineNumber:u,lineStart:p,range:[r,c]}:{type:t.Identifier,value:n,lineNumber:u,lineStart:p,range:[r,c]}}}function scanPunctuator(){var e,r,n,i=c,o=s[c];return";"===o||"{"===o||"}"===o?(++c,{type:t.Punctuator,value:o,lineNumber:u,lineStart:p,range:[i,c]}):","===o||"("===o||")"===o?(++c,{type:t.Punctuator,value:o,lineNumber:u,lineStart:p,range:[i,c]}):(e=s[c+1],"."!==o||isDecimalDigit(e)?(r=s[c+2],n=s[c+3],">"===o&&">"===e&&">"===r&&"="===n?(c+=4,{type:t.Punctuator,value:">>>=",lineNumber:u,lineStart:p,range:[i,c]}):"="===o&&"="===e&&"="===r?(c+=3,{type:t.Punctuator,value:"===",lineNumber:u,lineStart:p,range:[i,c]}):"!"===o&&"="===e&&"="===r?(c+=3,{type:t.Punctuator,value:"!==",lineNumber:u,lineStart:p,range:[i,c]}):">"===o&&">"===e&&">"===r?(c+=3,{type:t.Punctuator,value:">>>",lineNumber:u,lineStart:p,range:[i,c]}):"<"===o&&"<"===e&&"="===r?(c+=3,{type:t.Punctuator,value:"<<=",lineNumber:u,lineStart:p,range:[i,c]}):">"===o&&">"===e&&"="===r?(c+=3,{type:t.Punctuator,value:">>=",lineNumber:u,lineStart:p,range:[i,c]}):"="===e&&"<>=!+-*%&|^/".indexOf(o)>=0?(c+=2,{type:t.Punctuator,value:o+e,lineNumber:u,lineStart:p,range:[i,c]}):o===e&&"+-<>&|".indexOf(o)>=0&&"+-<>&|".indexOf(e)>=0?(c+=2,{type:t.Punctuator,value:o+e,lineNumber:u,lineStart:p,range:[i,c]}):"[]<>+-*%&|^!~?:=/".indexOf(o)>=0?{type:t.Punctuator,value:s[c++],lineNumber:u,lineStart:p,range:[i,c]}:void 0):{type:t.Punctuator,value:s[c++],lineNumber:u,lineStart:p,range:[i,c]})}function scanNumericLiteral(){var e,r,n;if(n=s[c],assert(isDecimalDigit(n)||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=c,e="","."!==n){if(e=s[c++],n=s[c],"0"===e){if("x"===n||"X"===n){for(e+=s[c++];c<h&&(n=s[c],isHexDigit(n));)e+=s[c++];return e.length<=2&&throwError({},o.UnexpectedToken,"ILLEGAL"),c<h&&(n=s[c],isIdentifierStart(n)&&throwError({},o.UnexpectedToken,"ILLEGAL")),{type:t.NumericLiteral,value:parseInt(e,16),lineNumber:u,lineStart:p,range:[r,c]}}if(isOctalDigit(n)){for(e+=s[c++];c<h&&(n=s[c],isOctalDigit(n));)e+=s[c++];return c<h&&(n=s[c],(isIdentifierStart(n)||isDecimalDigit(n))&&throwError({},o.UnexpectedToken,"ILLEGAL")),{type:t.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:u,lineStart:p,range:[r,c]}}isDecimalDigit(n)&&throwError({},o.UnexpectedToken,"ILLEGAL")}for(;c<h&&(n=s[c],isDecimalDigit(n));)e+=s[c++]}if("."===n)for(e+=s[c++];c<h&&(n=s[c],isDecimalDigit(n));)e+=s[c++];if("e"===n||"E"===n)if(e+=s[c++],n=s[c],"+"!==n&&"-"!==n||(e+=s[c++]),n=s[c],isDecimalDigit(n))for(e+=s[c++];c<h&&(n=s[c],isDecimalDigit(n));)e+=s[c++];else n="character "+n,c>=h&&(n="<end>"),throwError({},o.UnexpectedToken,"ILLEGAL");return c<h&&(n=s[c],isIdentifierStart(n)&&throwError({},o.UnexpectedToken,"ILLEGAL")),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:u,lineStart:p,range:[r,c]}}function scanStringLiteral(){var e,r,n,i,a,l,d="",f=!1;for(e=s[c],assert("'"===e||'"'===e,"String literal must starts with a quote"),r=c,++c;c<h;){if(n=s[c++],n===e){e="";break}if("\\"===n)if(n=s[c++],isLineTerminator(n))++u,"\r"===n&&"\n"===s[c]&&++c;else switch(n){case"n":d+="\n";break;case"r":d+="\r";break;case"t":d+="\t";break;case"u":case"x":l=c,a=scanHexEscape(n),a?d+=a:(c=l,d+=n);break;case"b":d+="\b";break;case"f":d+="\f";break;case"v":d+="\x0B";break;default:isOctalDigit(n)?(i="01234567".indexOf(n),0!==i&&(f=!0),c<h&&isOctalDigit(s[c])&&(f=!0,i=8*i+"01234567".indexOf(s[c++]),"0123".indexOf(n)>=0&&c<h&&isOctalDigit(s[c])&&(i=8*i+"01234567".indexOf(s[c++]))),d+=String.fromCharCode(i)):d+=n}else{if(isLineTerminator(n))break;d+=n}}return""!==e&&throwError({},o.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:d,octal:f,lineNumber:u,lineStart:p,range:[r,c]}}function scanRegExp(){var e,t,r,n,i,a,l,u=!1,p=!1;for(d=null,skipComment(),r=c,t=s[c],assert("/"===t,"Regular expression literal must start with a slash"),e=s[c++];c<h;)if(t=s[c++],e+=t,"\\"===t)t=s[c++],isLineTerminator(t)&&throwError({},o.UnterminatedRegExp),e+=t;else if(u)"]"===t&&(u=!1);else{if("/"===t){p=!0;break}"["===t?u=!0:isLineTerminator(t)&&throwError({},o.UnterminatedRegExp)}for(p||throwError({},o.UnterminatedRegExp),n=e.substr(1,e.length-2),i="";c<h&&(t=s[c],isIdentifierPart(t));)if(++c,"\\"===t&&c<h)if(t=s[c],"u"===t)if(++c,l=c,t=scanHexEscape("u"))for(i+=t,e+="\\u";l<c;++l)e+=s[l];else c=l,i+="u",e+="\\u";else e+="\\";else i+=t,e+=t;try{a=new RegExp(n,i)}catch(f){throwError({},o.InvalidRegExp)}return{literal:e,value:a,range:[r,c]}}function isIdentifierName(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function advance(){var e,r;return skipComment(),c>=h?{type:t.EOF,lineNumber:u,lineStart:p,range:[c,c]}:(r=scanPunctuator(),"undefined"!=typeof r?r:(e=s[c],"'"===e||'"'===e?scanStringLiteral():"."===e||isDecimalDigit(e)?scanNumericLiteral():(r=scanIdentifier(),"undefined"!=typeof r?r:void throwError({},o.UnexpectedToken,"ILLEGAL"))))}function lex(){var e;return d?(c=d.range[1],u=d.lineNumber,p=d.lineStart,e=d,d=null,e):(d=null,advance())}function lookahead(){var e,t,r;return null!==d?d:(e=c,t=u,r=p,d=advance(),c=e,u=t,p=r,d)}function peekLineTerminator(){var e,t,r,n;return e=c,t=u,r=p,skipComment(),n=u!==t,c=e,u=t,p=r,n}function throwError(e,t){var r,n=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return n[t]||""});throw"number"==typeof e.lineNumber?(r=new Error("Line "+e.lineNumber+": "+i),r.index=e.range[0],r.lineNumber=e.lineNumber,r.column=e.range[0]-p+1):(r=new Error("Line "+u+": "+i),r.index=c,r.lineNumber=u,r.column=c-p+1),r}function throwErrorTolerant(){try{throwError.apply(null,arguments)}catch(e){if(!m.errors)throw e;m.errors.push(e)}}function throwUnexpected(e){if(e.type===t.EOF&&throwError(e,o.UnexpectedEOS),e.type===t.NumericLiteral&&throwError(e,o.UnexpectedNumber),e.type===t.StringLiteral&&throwError(e,o.UnexpectedString),e.type===t.Identifier&&throwError(e,o.UnexpectedIdentifier),e.type===t.Keyword){if(isFutureReservedWord(e.value))throwError(e,o.UnexpectedReserved);else if(l&&isStrictModeReservedWord(e.value))return void throwErrorTolerant(e,o.StrictReservedWord);throwError(e,o.UnexpectedToken,e.value)}throwError(e,o.UnexpectedToken,e.value)}function expect(e){var r=lex();r.type===t.Punctuator&&r.value===e||throwUnexpected(r)}function expectKeyword(e){var r=lex();r.type===t.Keyword&&r.value===e||throwUnexpected(r)}function match(e){var r=lookahead();return r.type===t.Punctuator&&r.value===e}function matchKeyword(e){var r=lookahead();return r.type===t.Keyword&&r.value===e}function matchAssign(){var e=lookahead(),r=e.value;return e.type===t.Punctuator&&("="===r||"*="===r||"/="===r||"%="===r||"+="===r||"-="===r||"<<="===r||">>="===r||">>>="===r||"&="===r||"^="===r||"|="===r)}function consumeSemicolon(){var e,r;if(";"===s[c])return void lex();if(r=u,skipComment(),u===r){if(match(";"))return void lex();e=lookahead(),e.type===t.EOF||match("}")||throwUnexpected(e)}}function isLeftHandSide(e){return e.type===n.Identifier||e.type===n.MemberExpression}function parseArrayInitialiser(){var e=[];for(expect("[");!match("]");)match(",")?(lex(),e.push(null)):(e.push(parseAssignmentExpression()),match("]")||expect(","));return expect("]"),{type:n.ArrayExpression,elements:e}}function parsePropertyFunction(e,t){var r,i;return r=l,i=parseFunctionSourceElements(),t&&l&&isRestrictedWord(e[0].name)&&throwErrorTolerant(t,o.StrictParamName),l=r,{type:n.FunctionExpression,id:null,params:e,defaults:[],body:i,rest:null,generator:!1,expression:!1}}function parseObjectPropertyKey(){var e=lex();return e.type===t.StringLiteral||e.type===t.NumericLiteral?(l&&e.octal&&throwErrorTolerant(e,o.StrictOctalLiteral),createLiteral(e)):{type:n.Identifier,name:e.value}}function parseObjectProperty(){var e,r,i,a;return e=lookahead(),e.type===t.Identifier?(i=parseObjectPropertyKey(),"get"!==e.value||match(":")?"set"!==e.value||match(":")?(expect(":"),{type:n.Property,key:i,value:parseAssignmentExpression(),kind:"init"}):(r=parseObjectPropertyKey(),expect("("),e=lookahead(),e.type!==t.Identifier?(expect(")"),throwErrorTolerant(e,o.UnexpectedToken,e.value),{type:n.Property,key:r,value:parsePropertyFunction([]),kind:"set"}):(a=[parseVariableIdentifier()],expect(")"),{type:n.Property,key:r,value:parsePropertyFunction(a,e),kind:"set"})):(r=parseObjectPropertyKey(),expect("("),expect(")"),{type:n.Property,key:r,value:parsePropertyFunction([]),kind:"get"})):e.type!==t.EOF&&e.type!==t.Punctuator?(r=parseObjectPropertyKey(),expect(":"),{type:n.Property,key:r,value:parseAssignmentExpression(),kind:"init"}):void throwUnexpected(e)}function parseObjectInitialiser(){var e,t,r,a=[],s={},c=String;for(expect("{");!match("}");)e=parseObjectProperty(),t=e.key.type===n.Identifier?e.key.name:c(e.key.value),r="init"===e.kind?i.Data:"get"===e.kind?i.Get:i.Set,Object.prototype.hasOwnProperty.call(s,t)?(s[t]===i.Data?l&&r===i.Data?throwErrorTolerant({},o.StrictDuplicateProperty):r!==i.Data&&throwErrorTolerant({},o.AccessorDataProperty):r===i.Data?throwErrorTolerant({},o.AccessorDataProperty):s[t]&r&&throwErrorTolerant({},o.AccessorGetSet),s[t]|=r):s[t]=r,a.push(e),match("}")||expect(",");return expect("}"),{type:n.ObjectExpression,properties:a}}function parseGroupExpression(){var e;return expect("("),e=parseExpression(),expect(")"),e}function parsePrimaryExpression(){var e=lookahead(),r=e.type;if(r===t.Identifier)return{type:n.Identifier,name:lex().value};if(r===t.StringLiteral||r===t.NumericLiteral)return l&&e.octal&&throwErrorTolerant(e,o.StrictOctalLiteral),createLiteral(lex());if(r===t.Keyword){if(matchKeyword("this"))return lex(),{type:n.ThisExpression};if(matchKeyword("function"))return parseFunctionExpression()}return r===t.BooleanLiteral?(lex(),e.value="true"===e.value,createLiteral(e)):r===t.NullLiteral?(lex(),e.value=null,createLiteral(e)):match("[")?parseArrayInitialiser():match("{")?parseObjectInitialiser():match("(")?parseGroupExpression():match("/")||match("/=")?createLiteral(scanRegExp()):throwUnexpected(lex())}function parseArguments(){var e=[];if(expect("("),!match(")"))for(;c<h&&(e.push(parseAssignmentExpression()),!match(")"));)expect(",");return expect(")"),e}function parseNonComputedProperty(){var e=lex();return isIdentifierName(e)||throwUnexpected(e),{type:n.Identifier,name:e.value}}function parseNonComputedMember(){return expect("."),parseNonComputedProperty()}function parseComputedMember(){var e;return expect("["),e=parseExpression(),expect("]"),e}function parseNewExpression(){var e;return expectKeyword("new"),e={type:n.NewExpression,callee:parseLeftHandSideExpression(),arguments:[]},match("(")&&(e.arguments=parseArguments()),e}function parseLeftHandSideExpressionAllowCall(){var e;for(e=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[")||match("(");)e=match("(")?{type:n.CallExpression,callee:e,arguments:parseArguments()}:match("[")?{type:n.MemberExpression,computed:!0,object:e,property:parseComputedMember()}:{type:n.MemberExpression,computed:!1,object:e,property:parseNonComputedMember()};return e}function parseLeftHandSideExpression(){var e;for(e=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[");)e=match("[")?{type:n.MemberExpression,computed:!0,object:e,property:parseComputedMember()}:{type:n.MemberExpression,computed:!1,object:e,property:parseNonComputedMember()};return e}function parsePostfixExpression(){var e,r=parseLeftHandSideExpressionAllowCall();return e=lookahead(),e.type!==t.Punctuator?r:(!match("++")&&!match("--")||peekLineTerminator()||(l&&r.type===n.Identifier&&isRestrictedWord(r.name)&&throwErrorTolerant({},o.StrictLHSPostfix),isLeftHandSide(r)||throwErrorTolerant({},o.InvalidLHSInAssignment),r={type:n.UpdateExpression,operator:lex().value,argument:r,prefix:!1}),r)}function parseUnaryExpression(){var e,r;return e=lookahead(),e.type!==t.Punctuator&&e.type!==t.Keyword?parsePostfixExpression():match("++")||match("--")?(e=lex(),r=parseUnaryExpression(),l&&r.type===n.Identifier&&isRestrictedWord(r.name)&&throwErrorTolerant({},o.StrictLHSPrefix),isLeftHandSide(r)||throwErrorTolerant({},o.InvalidLHSInAssignment),r={type:n.UpdateExpression,operator:e.value,argument:r,prefix:!0}):match("+")||match("-")||match("~")||match("!")?r={type:n.UnaryExpression,operator:lex().value,argument:parseUnaryExpression(),prefix:!0}:matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")?(r={type:n.UnaryExpression,operator:lex().value,argument:parseUnaryExpression(),prefix:!0},l&&"delete"===r.operator&&r.argument.type===n.Identifier&&throwErrorTolerant({},o.StrictDelete),r):parsePostfixExpression()}function parseMultiplicativeExpression(){for(var e=parseUnaryExpression();match("*")||match("/")||match("%");)e={type:n.BinaryExpression,operator:lex().value,left:e,right:parseUnaryExpression()};return e}function parseAdditiveExpression(){for(var e=parseMultiplicativeExpression();match("+")||match("-");)e={type:n.BinaryExpression,operator:lex().value,left:e,right:parseMultiplicativeExpression()};return e}function parseShiftExpression(){for(var e=parseAdditiveExpression();match("<<")||match(">>")||match(">>>");)e={type:n.BinaryExpression,operator:lex().value,left:e,right:parseAdditiveExpression()};return e}function parseRelationalExpression(){var e,t;for(t=f.allowIn,f.allowIn=!0,e=parseShiftExpression();match("<")||match(">")||match("<=")||match(">=")||t&&matchKeyword("in")||matchKeyword("instanceof");)e={type:n.BinaryExpression,operator:lex().value,left:e,right:parseShiftExpression()};return f.allowIn=t,e}function parseEqualityExpression(){for(var e=parseRelationalExpression();match("==")||match("!=")||match("===")||match("!==");)e={type:n.BinaryExpression,operator:lex().value,left:e,right:parseRelationalExpression()};return e}function parseBitwiseANDExpression(){for(var e=parseEqualityExpression();match("&");)lex(),e={type:n.BinaryExpression,operator:"&",left:e,right:parseEqualityExpression()};return e}function parseBitwiseXORExpression(){for(var e=parseBitwiseANDExpression();match("^");)lex(),e={type:n.BinaryExpression,operator:"^",left:e,right:parseBitwiseANDExpression()};return e}function parseBitwiseORExpression(){for(var e=parseBitwiseXORExpression();match("|");)lex(),e={type:n.BinaryExpression,operator:"|",left:e,right:parseBitwiseXORExpression()};return e}function parseLogicalANDExpression(){for(var e=parseBitwiseORExpression();match("&&");)lex(),e={type:n.LogicalExpression,operator:"&&",left:e,right:parseBitwiseORExpression()};return e}function parseLogicalORExpression(){for(var e=parseLogicalANDExpression();match("||");)lex(),e={type:n.LogicalExpression,operator:"||",left:e,right:parseLogicalANDExpression()};return e}function parseConditionalExpression(){var e,t,r;return e=parseLogicalORExpression(),match("?")&&(lex(),t=f.allowIn,f.allowIn=!0,r=parseAssignmentExpression(),f.allowIn=t,expect(":"),e={type:n.ConditionalExpression,test:e,consequent:r,alternate:parseAssignmentExpression()}),e}function parseAssignmentExpression(){var e,t;return e=lookahead(),t=parseConditionalExpression(),matchAssign()&&(isLeftHandSide(t)||throwErrorTolerant({},o.InvalidLHSInAssignment),l&&t.type===n.Identifier&&isRestrictedWord(t.name)&&throwErrorTolerant(e,o.StrictLHSAssignment),t={type:n.AssignmentExpression,operator:lex().value,left:t,right:parseAssignmentExpression()}),t}function parseExpression(){var e=parseAssignmentExpression();if(match(","))for(e={type:n.SequenceExpression,expressions:[e]};c<h&&match(",");)lex(),e.expressions.push(parseAssignmentExpression());return e}function parseStatementList(){for(var e,t=[];c<h&&!match("}")&&(e=parseSourceElement(),"undefined"!=typeof e);)t.push(e);return t}function parseBlock(){var e;return expect("{"),e=parseStatementList(),expect("}"),{type:n.BlockStatement,body:e}}function parseVariableIdentifier(){var e=lex();return e.type!==t.Identifier&&throwUnexpected(e),{type:n.Identifier,name:e.value}}function parseVariableDeclaration(e){var t=parseVariableIdentifier(),r=null;return l&&isRestrictedWord(t.name)&&throwErrorTolerant({},o.StrictVarName),"const"===e?(expect("="),r=parseAssignmentExpression()):match("=")&&(lex(),r=parseAssignmentExpression()),{type:n.VariableDeclarator,id:t,init:r}}function parseVariableDeclarationList(e){var t=[];do{if(t.push(parseVariableDeclaration(e)),!match(","))break;lex()}while(c<h);return t}function parseVariableStatement(){var e;return expectKeyword("var"),e=parseVariableDeclarationList(),consumeSemicolon(),{type:n.VariableDeclaration,declarations:e,kind:"var"}}function parseConstLetDeclaration(e){var t;return expectKeyword(e),t=parseVariableDeclarationList(e),consumeSemicolon(),{type:n.VariableDeclaration,declarations:t,kind:e}}function parseEmptyStatement(){return expect(";"),{type:n.EmptyStatement}}function parseExpressionStatement(){var e=parseExpression();return consumeSemicolon(),{type:n.ExpressionStatement,expression:e}}function parseIfStatement(){var e,t,r;return expectKeyword("if"),expect("("),e=parseExpression(),expect(")"),t=parseStatement(),matchKeyword("else")?(lex(),r=parseStatement()):r=null,{type:n.IfStatement,test:e,consequent:t,alternate:r}}function parseDoWhileStatement(){var e,t,r;return expectKeyword("do"),r=f.inIteration,f.inIteration=!0,e=parseStatement(),f.inIteration=r,expectKeyword("while"),expect("("),t=parseExpression(),expect(")"),match(";")&&lex(),{type:n.DoWhileStatement,body:e,test:t}}function parseWhileStatement(){var e,t,r;return expectKeyword("while"),expect("("),e=parseExpression(),expect(")"),r=f.inIteration,f.inIteration=!0,t=parseStatement(),f.inIteration=r,{type:n.WhileStatement,test:e,body:t}}function parseForVariableDeclaration(){var e=lex();return{type:n.VariableDeclaration,declarations:parseVariableDeclarationList(),kind:e.value}}function parseForStatement(){var e,t,r,i,a,s,l;return e=t=r=null,expectKeyword("for"),expect("("),match(";")?lex():(matchKeyword("var")||matchKeyword("let")?(f.allowIn=!1,e=parseForVariableDeclaration(),f.allowIn=!0,1===e.declarations.length&&matchKeyword("in")&&(lex(),i=e,a=parseExpression(),e=null)):(f.allowIn=!1,e=parseExpression(),f.allowIn=!0,matchKeyword("in")&&(isLeftHandSide(e)||throwErrorTolerant({},o.InvalidLHSInForIn),lex(),i=e,a=parseExpression(),e=null)),"undefined"==typeof i&&expect(";")),"undefined"==typeof i&&(match(";")||(t=parseExpression()),expect(";"),match(")")||(r=parseExpression())),expect(")"),l=f.inIteration,f.inIteration=!0,s=parseStatement(),f.inIteration=l,"undefined"==typeof i?{type:n.ForStatement,init:e,test:t,update:r,body:s}:{type:n.ForInStatement,left:i,right:a,body:s,each:!1}}function parseContinueStatement(){var e,r=null;return expectKeyword("continue"),";"===s[c]?(lex(),f.inIteration||throwError({},o.IllegalContinue),{type:n.ContinueStatement,label:null}):peekLineTerminator()?(f.inIteration||throwError({},o.IllegalContinue),{type:n.ContinueStatement,label:null}):(e=lookahead(),e.type===t.Identifier&&(r=parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(f.labelSet,r.name)||throwError({},o.UnknownLabel,r.name)),consumeSemicolon(),null!==r||f.inIteration||throwError({},o.IllegalContinue),{type:n.ContinueStatement,label:r})}function parseBreakStatement(){var e,r=null;return expectKeyword("break"),";"===s[c]?(lex(),f.inIteration||f.inSwitch||throwError({},o.IllegalBreak),{type:n.BreakStatement,label:null}):peekLineTerminator()?(f.inIteration||f.inSwitch||throwError({},o.IllegalBreak),{type:n.BreakStatement,label:null}):(e=lookahead(),e.type===t.Identifier&&(r=parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(f.labelSet,r.name)||throwError({},o.UnknownLabel,r.name)),consumeSemicolon(),null!==r||f.inIteration||f.inSwitch||throwError({},o.IllegalBreak),{type:n.BreakStatement,label:r})}function parseReturnStatement(){var e,r=null;return expectKeyword("return"),f.inFunctionBody||throwErrorTolerant({},o.IllegalReturn)," "===s[c]&&isIdentifierStart(s[c+1])?(r=parseExpression(),consumeSemicolon(),{type:n.ReturnStatement,argument:r}):peekLineTerminator()?{type:n.ReturnStatement,argument:null}:(match(";")||(e=lookahead(),match("}")||e.type===t.EOF||(r=parseExpression())),consumeSemicolon(),{type:n.ReturnStatement,argument:r})}function parseWithStatement(){var e,t;return l&&throwErrorTolerant({},o.StrictModeWith),expectKeyword("with"),expect("("),e=parseExpression(),expect(")"),t=parseStatement(),{type:n.WithStatement,object:e,body:t}}function parseSwitchCase(){var e,t,r=[];for(matchKeyword("default")?(lex(),e=null):(expectKeyword("case"),e=parseExpression()),expect(":");c<h&&!(match("}")||matchKeyword("default")||matchKeyword("case"))&&(t=parseStatement(),"undefined"!=typeof t);)r.push(t);return{type:n.SwitchCase,test:e,consequent:r}}function parseSwitchStatement(){var e,t,r,i,a;if(expectKeyword("switch"),expect("("),e=parseExpression(),expect(")"),expect("{"),t=[],match("}"))return lex(),{type:n.SwitchStatement,discriminant:e,cases:t};for(i=f.inSwitch,f.inSwitch=!0,a=!1;c<h&&!match("}");)r=parseSwitchCase(),null===r.test&&(a&&throwError({},o.MultipleDefaultsInSwitch),a=!0),t.push(r);return f.inSwitch=i,expect("}"),{type:n.SwitchStatement,discriminant:e,cases:t}}function parseThrowStatement(){var e;return expectKeyword("throw"),peekLineTerminator()&&throwError({},o.NewlineAfterThrow),e=parseExpression(),consumeSemicolon(),{type:n.ThrowStatement,argument:e}}function parseCatchClause(){var e;return expectKeyword("catch"),expect("("),match(")")&&throwUnexpected(lookahead()),e=parseVariableIdentifier(),l&&isRestrictedWord(e.name)&&throwErrorTolerant({},o.StrictCatchVariable),expect(")"),{type:n.CatchClause,param:e,body:parseBlock()}}function parseTryStatement(){var e,t=[],r=null;return expectKeyword("try"),e=parseBlock(),matchKeyword("catch")&&t.push(parseCatchClause()),matchKeyword("finally")&&(lex(),r=parseBlock()),0!==t.length||r||throwError({},o.NoCatchOrFinally),{type:n.TryStatement,block:e,guardedHandlers:[],handlers:t,finalizer:r}}function parseDebuggerStatement(){return expectKeyword("debugger"),consumeSemicolon(),{type:n.DebuggerStatement}}function parseStatement(){var e,r,i=lookahead();if(i.type===t.EOF&&throwUnexpected(i),i.type===t.Punctuator)switch(i.value){
case";":return parseEmptyStatement();case"{":return parseBlock();case"(":return parseExpressionStatement()}if(i.type===t.Keyword)switch(i.value){case"break":return parseBreakStatement();case"continue":return parseContinueStatement();case"debugger":return parseDebuggerStatement();case"do":return parseDoWhileStatement();case"for":return parseForStatement();case"function":return parseFunctionDeclaration();case"if":return parseIfStatement();case"return":return parseReturnStatement();case"switch":return parseSwitchStatement();case"throw":return parseThrowStatement();case"try":return parseTryStatement();case"var":return parseVariableStatement();case"while":return parseWhileStatement();case"with":return parseWithStatement()}return e=parseExpression(),e.type===n.Identifier&&match(":")?(lex(),Object.prototype.hasOwnProperty.call(f.labelSet,e.name)&&throwError({},o.Redeclaration,"Label",e.name),f.labelSet[e.name]=!0,r=parseStatement(),delete f.labelSet[e.name],{type:n.LabeledStatement,label:e,body:r}):(consumeSemicolon(),{type:n.ExpressionStatement,expression:e})}function parseFunctionSourceElements(){var e,r,i,a,s,u,p,d,m=[];for(expect("{");c<h&&(r=lookahead(),r.type===t.StringLiteral)&&(e=parseSourceElement(),m.push(e),e.expression.type===n.Literal);)i=sliceSource(r.range[0]+1,r.range[1]-1),"use strict"===i?(l=!0,a&&throwErrorTolerant(a,o.StrictOctalLiteral)):!a&&r.octal&&(a=r);for(s=f.labelSet,u=f.inIteration,p=f.inSwitch,d=f.inFunctionBody,f.labelSet={},f.inIteration=!1,f.inSwitch=!1,f.inFunctionBody=!0;c<h&&!match("}")&&(e=parseSourceElement(),"undefined"!=typeof e);)m.push(e);return expect("}"),f.labelSet=s,f.inIteration=u,f.inSwitch=p,f.inFunctionBody=d,{type:n.BlockStatement,body:m}}function parseFunctionDeclaration(){var e,t,r,i,a,s,u,p,d,f=[];if(expectKeyword("function"),i=lookahead(),e=parseVariableIdentifier(),l?isRestrictedWord(i.value)&&throwErrorTolerant(i,o.StrictFunctionName):isRestrictedWord(i.value)?(s=i,u=o.StrictFunctionName):isStrictModeReservedWord(i.value)&&(s=i,u=o.StrictReservedWord),expect("("),!match(")"))for(d={};c<h&&(i=lookahead(),t=parseVariableIdentifier(),l?(isRestrictedWord(i.value)&&(a=i,u=o.StrictParamName),Object.prototype.hasOwnProperty.call(d,i.value)&&(a=i,u=o.StrictParamDupe)):s||(isRestrictedWord(i.value)?(s=i,u=o.StrictParamName):isStrictModeReservedWord(i.value)?(s=i,u=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(d,i.value)&&(s=i,u=o.StrictParamDupe)),f.push(t),d[t.name]=!0,!match(")"));)expect(",");return expect(")"),p=l,r=parseFunctionSourceElements(),l&&s&&throwError(s,u),l&&a&&throwErrorTolerant(a,u),l=p,{type:n.FunctionDeclaration,id:e,params:f,defaults:[],body:r,rest:null,generator:!1,expression:!1}}function parseFunctionExpression(){var e,t,r,i,a,s,u,p,d=null,f=[];if(expectKeyword("function"),match("(")||(e=lookahead(),d=parseVariableIdentifier(),l?isRestrictedWord(e.value)&&throwErrorTolerant(e,o.StrictFunctionName):isRestrictedWord(e.value)?(r=e,i=o.StrictFunctionName):isStrictModeReservedWord(e.value)&&(r=e,i=o.StrictReservedWord)),expect("("),!match(")"))for(p={};c<h&&(e=lookahead(),a=parseVariableIdentifier(),l?(isRestrictedWord(e.value)&&(t=e,i=o.StrictParamName),Object.prototype.hasOwnProperty.call(p,e.value)&&(t=e,i=o.StrictParamDupe)):r||(isRestrictedWord(e.value)?(r=e,i=o.StrictParamName):isStrictModeReservedWord(e.value)?(r=e,i=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(p,e.value)&&(r=e,i=o.StrictParamDupe)),f.push(a),p[a.name]=!0,!match(")"));)expect(",");return expect(")"),u=l,s=parseFunctionSourceElements(),l&&r&&throwError(r,i),l&&t&&throwErrorTolerant(t,i),l=u,{type:n.FunctionExpression,id:d,params:f,defaults:[],body:s,rest:null,generator:!1,expression:!1}}function parseSourceElement(){var e=lookahead();if(e.type===t.Keyword)switch(e.value){case"const":case"let":return parseConstLetDeclaration(e.value);case"function":return parseFunctionDeclaration();default:return parseStatement()}if(e.type!==t.EOF)return parseStatement()}function parseSourceElements(){for(var e,r,i,a,s=[];c<h&&(r=lookahead(),r.type===t.StringLiteral)&&(e=parseSourceElement(),s.push(e),e.expression.type===n.Literal);)i=sliceSource(r.range[0]+1,r.range[1]-1),"use strict"===i?(l=!0,a&&throwErrorTolerant(a,o.StrictOctalLiteral)):!a&&r.octal&&(a=r);for(;c<h&&(e=parseSourceElement(),"undefined"!=typeof e);)s.push(e);return s}function parseProgram(){var e;return l=!1,e={type:n.Program,body:parseSourceElements()}}function addComment(e,t,r,n,i){assert("number"==typeof r,"Comment must have valid position"),m.comments.length>0&&m.comments[m.comments.length-1].range[1]>r||m.comments.push({type:e,value:t,range:[r,n],loc:i})}function scanComment(){var e,t,r,n,i,a;for(e="",i=!1,a=!1;c<h;)if(t=s[c],a)t=s[c++],isLineTerminator(t)?(r.end={line:u,column:c-p-1},a=!1,addComment("Line",e,n,c-1,r),"\r"===t&&"\n"===s[c]&&++c,++u,p=c,e=""):c>=h?(a=!1,e+=t,r.end={line:u,column:h-p},addComment("Line",e,n,h,r)):e+=t;else if(i)isLineTerminator(t)?("\r"===t&&"\n"===s[c+1]?(++c,e+="\r\n"):e+=t,++u,++c,p=c,c>=h&&throwError({},o.UnexpectedToken,"ILLEGAL")):(t=s[c++],c>=h&&throwError({},o.UnexpectedToken,"ILLEGAL"),e+=t,"*"===t&&(t=s[c],"/"===t&&(e=e.substr(0,e.length-1),i=!1,++c,r.end={line:u,column:c-p},addComment("Block",e,n,c,r),e="")));else if("/"===t)if(t=s[c+1],"/"===t)r={start:{line:u,column:c-p}},n=c,c+=2,a=!0,c>=h&&(r.end={line:u,column:c-p},a=!1,addComment("Line",e,n,c,r));else{if("*"!==t)break;n=c,c+=2,i=!0,r={start:{line:u,column:c-p-2}},c>=h&&throwError({},o.UnexpectedToken,"ILLEGAL")}else if(isWhiteSpace(t))++c;else{if(!isLineTerminator(t))break;++c,"\r"===t&&"\n"===s[c]&&++c,++u,p=c}}function filterCommentLocation(){var e,t,r,n=[];for(e=0;e<m.comments.length;++e)t=m.comments[e],r={type:t.type,value:t.value},m.range&&(r.range=t.range),m.loc&&(r.loc=t.loc),n.push(r);m.comments=n}function collectToken(){var e,n,i,o,a;return skipComment(),e=c,n={start:{line:u,column:c-p}},i=m.advance(),n.end={line:u,column:c-p},i.type!==t.EOF&&(o=[i.range[0],i.range[1]],a=sliceSource(i.range[0],i.range[1]),m.tokens.push({type:r[i.type],value:a,range:o,loc:n})),i}function collectRegex(){var e,t,r,n;return skipComment(),e=c,t={start:{line:u,column:c-p}},r=m.scanRegExp(),t.end={line:u,column:c-p},m.tokens.length>0&&(n=m.tokens[m.tokens.length-1],n.range[0]===e&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||m.tokens.pop())),m.tokens.push({type:"RegularExpression",value:r.literal,range:[e,c],loc:t}),r}function filterTokenLocation(){var e,t,r,n=[];for(e=0;e<m.tokens.length;++e)t=m.tokens[e],r={type:t.type,value:t.value},m.range&&(r.range=t.range),m.loc&&(r.loc=t.loc),n.push(r);m.tokens=n}function createLiteral(e){return{type:n.Literal,value:e.value}}function createRawLiteral(e){return{type:n.Literal,value:e.value,raw:sliceSource(e.range[0],e.range[1])}}function createLocationMarker(){var e={};return e.range=[c,c],e.loc={start:{line:u,column:c-p},end:{line:u,column:c-p}},e.end=function(){this.range[1]=c,this.loc.end.line=u,this.loc.end.column=c-p},e.applyGroup=function(e){m.range&&(e.groupRange=[this.range[0],this.range[1]]),m.loc&&(e.groupLoc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},e.apply=function(e){m.range&&(e.range=[this.range[0],this.range[1]]),m.loc&&(e.loc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},e}function trackGroupExpression(){var e,t;return skipComment(),e=createLocationMarker(),expect("("),t=parseExpression(),expect(")"),e.end(),e.applyGroup(t),t}function trackLeftHandSideExpression(){var e,t;for(skipComment(),e=createLocationMarker(),t=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[");)match("[")?(t={type:n.MemberExpression,computed:!0,object:t,property:parseComputedMember()},e.end(),e.apply(t)):(t={type:n.MemberExpression,computed:!1,object:t,property:parseNonComputedMember()},e.end(),e.apply(t));return t}function trackLeftHandSideExpressionAllowCall(){var e,t;for(skipComment(),e=createLocationMarker(),t=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[")||match("(");)match("(")?(t={type:n.CallExpression,callee:t,arguments:parseArguments()},e.end(),e.apply(t)):match("[")?(t={type:n.MemberExpression,computed:!0,object:t,property:parseComputedMember()},e.end(),e.apply(t)):(t={type:n.MemberExpression,computed:!1,object:t,property:parseNonComputedMember()},e.end(),e.apply(t));return t}function filterGroup(e){var t,r,n;t="[object Array]"===Object.prototype.toString.apply(e)?[]:{};for(r in e)e.hasOwnProperty(r)&&"groupRange"!==r&&"groupLoc"!==r&&(n=e[r],null===n||"object"!=typeof n||n instanceof RegExp?t[r]=n:t[r]=filterGroup(n));return t}function wrapTrackingFunction(e,t){return function(r){function isBinary(e){return e.type===n.LogicalExpression||e.type===n.BinaryExpression}function visit(r){var n,i;isBinary(r.left)&&visit(r.left),isBinary(r.right)&&visit(r.right),e&&(r.left.groupRange||r.right.groupRange?(n=r.left.groupRange?r.left.groupRange[0]:r.left.range[0],i=r.right.groupRange?r.right.groupRange[1]:r.right.range[1],r.range=[n,i]):"undefined"==typeof r.range&&(n=r.left.range[0],i=r.right.range[1],r.range=[n,i])),t&&(r.left.groupLoc||r.right.groupLoc?(n=r.left.groupLoc?r.left.groupLoc.start:r.left.loc.start,i=r.right.groupLoc?r.right.groupLoc.end:r.right.loc.end,r.loc={start:n,end:i}):"undefined"==typeof r.loc&&(r.loc={start:r.left.loc.start,end:r.right.loc.end}))}return function(){var n,i;return skipComment(),n=createLocationMarker(),i=r.apply(null,arguments),n.end(),e&&"undefined"==typeof i.range&&n.apply(i),t&&"undefined"==typeof i.loc&&n.apply(i),isBinary(i)&&visit(i),i}}}function patch(){var e;m.comments&&(m.skipComment=skipComment,skipComment=scanComment),m.raw&&(m.createLiteral=createLiteral,createLiteral=createRawLiteral),(m.range||m.loc)&&(m.parseGroupExpression=parseGroupExpression,m.parseLeftHandSideExpression=parseLeftHandSideExpression,m.parseLeftHandSideExpressionAllowCall=parseLeftHandSideExpressionAllowCall,parseGroupExpression=trackGroupExpression,parseLeftHandSideExpression=trackLeftHandSideExpression,parseLeftHandSideExpressionAllowCall=trackLeftHandSideExpressionAllowCall,e=wrapTrackingFunction(m.range,m.loc),m.parseAdditiveExpression=parseAdditiveExpression,m.parseAssignmentExpression=parseAssignmentExpression,m.parseBitwiseANDExpression=parseBitwiseANDExpression,m.parseBitwiseORExpression=parseBitwiseORExpression,m.parseBitwiseXORExpression=parseBitwiseXORExpression,m.parseBlock=parseBlock,m.parseFunctionSourceElements=parseFunctionSourceElements,m.parseCatchClause=parseCatchClause,m.parseComputedMember=parseComputedMember,m.parseConditionalExpression=parseConditionalExpression,m.parseConstLetDeclaration=parseConstLetDeclaration,m.parseEqualityExpression=parseEqualityExpression,m.parseExpression=parseExpression,m.parseForVariableDeclaration=parseForVariableDeclaration,m.parseFunctionDeclaration=parseFunctionDeclaration,m.parseFunctionExpression=parseFunctionExpression,m.parseLogicalANDExpression=parseLogicalANDExpression,m.parseLogicalORExpression=parseLogicalORExpression,m.parseMultiplicativeExpression=parseMultiplicativeExpression,m.parseNewExpression=parseNewExpression,m.parseNonComputedProperty=parseNonComputedProperty,m.parseObjectProperty=parseObjectProperty,m.parseObjectPropertyKey=parseObjectPropertyKey,m.parsePostfixExpression=parsePostfixExpression,m.parsePrimaryExpression=parsePrimaryExpression,m.parseProgram=parseProgram,m.parsePropertyFunction=parsePropertyFunction,m.parseRelationalExpression=parseRelationalExpression,m.parseStatement=parseStatement,m.parseShiftExpression=parseShiftExpression,m.parseSwitchCase=parseSwitchCase,m.parseUnaryExpression=parseUnaryExpression,m.parseVariableDeclaration=parseVariableDeclaration,m.parseVariableIdentifier=parseVariableIdentifier,parseAdditiveExpression=e(m.parseAdditiveExpression),parseAssignmentExpression=e(m.parseAssignmentExpression),parseBitwiseANDExpression=e(m.parseBitwiseANDExpression),parseBitwiseORExpression=e(m.parseBitwiseORExpression),parseBitwiseXORExpression=e(m.parseBitwiseXORExpression),parseBlock=e(m.parseBlock),parseFunctionSourceElements=e(m.parseFunctionSourceElements),parseCatchClause=e(m.parseCatchClause),parseComputedMember=e(m.parseComputedMember),parseConditionalExpression=e(m.parseConditionalExpression),parseConstLetDeclaration=e(m.parseConstLetDeclaration),parseEqualityExpression=e(m.parseEqualityExpression),parseExpression=e(m.parseExpression),parseForVariableDeclaration=e(m.parseForVariableDeclaration),parseFunctionDeclaration=e(m.parseFunctionDeclaration),parseFunctionExpression=e(m.parseFunctionExpression),parseLeftHandSideExpression=e(parseLeftHandSideExpression),parseLogicalANDExpression=e(m.parseLogicalANDExpression),parseLogicalORExpression=e(m.parseLogicalORExpression),parseMultiplicativeExpression=e(m.parseMultiplicativeExpression),parseNewExpression=e(m.parseNewExpression),parseNonComputedProperty=e(m.parseNonComputedProperty),parseObjectProperty=e(m.parseObjectProperty),parseObjectPropertyKey=e(m.parseObjectPropertyKey),parsePostfixExpression=e(m.parsePostfixExpression),parsePrimaryExpression=e(m.parsePrimaryExpression),parseProgram=e(m.parseProgram),parsePropertyFunction=e(m.parsePropertyFunction),parseRelationalExpression=e(m.parseRelationalExpression),parseStatement=e(m.parseStatement),parseShiftExpression=e(m.parseShiftExpression),parseSwitchCase=e(m.parseSwitchCase),parseUnaryExpression=e(m.parseUnaryExpression),parseVariableDeclaration=e(m.parseVariableDeclaration),parseVariableIdentifier=e(m.parseVariableIdentifier)),"undefined"!=typeof m.tokens&&(m.advance=advance,m.scanRegExp=scanRegExp,advance=collectToken,scanRegExp=collectRegex)}function unpatch(){"function"==typeof m.skipComment&&(skipComment=m.skipComment),m.raw&&(createLiteral=m.createLiteral),(m.range||m.loc)&&(parseAdditiveExpression=m.parseAdditiveExpression,parseAssignmentExpression=m.parseAssignmentExpression,parseBitwiseANDExpression=m.parseBitwiseANDExpression,parseBitwiseORExpression=m.parseBitwiseORExpression,parseBitwiseXORExpression=m.parseBitwiseXORExpression,parseBlock=m.parseBlock,parseFunctionSourceElements=m.parseFunctionSourceElements,parseCatchClause=m.parseCatchClause,parseComputedMember=m.parseComputedMember,parseConditionalExpression=m.parseConditionalExpression,parseConstLetDeclaration=m.parseConstLetDeclaration,parseEqualityExpression=m.parseEqualityExpression,parseExpression=m.parseExpression,parseForVariableDeclaration=m.parseForVariableDeclaration,parseFunctionDeclaration=m.parseFunctionDeclaration,parseFunctionExpression=m.parseFunctionExpression,parseGroupExpression=m.parseGroupExpression,parseLeftHandSideExpression=m.parseLeftHandSideExpression,parseLeftHandSideExpressionAllowCall=m.parseLeftHandSideExpressionAllowCall,parseLogicalANDExpression=m.parseLogicalANDExpression,parseLogicalORExpression=m.parseLogicalORExpression,parseMultiplicativeExpression=m.parseMultiplicativeExpression,parseNewExpression=m.parseNewExpression,parseNonComputedProperty=m.parseNonComputedProperty,parseObjectProperty=m.parseObjectProperty,parseObjectPropertyKey=m.parseObjectPropertyKey,parsePrimaryExpression=m.parsePrimaryExpression,parsePostfixExpression=m.parsePostfixExpression,parseProgram=m.parseProgram,parsePropertyFunction=m.parsePropertyFunction,parseRelationalExpression=m.parseRelationalExpression,parseStatement=m.parseStatement,parseShiftExpression=m.parseShiftExpression,parseSwitchCase=m.parseSwitchCase,parseUnaryExpression=m.parseUnaryExpression,parseVariableDeclaration=m.parseVariableDeclaration,parseVariableIdentifier=m.parseVariableIdentifier),"function"==typeof m.scanRegExp&&(advance=m.advance,scanRegExp=m.scanRegExp)}function stringToArray(e){var t,r=e.length,n=[];for(t=0;t<r;++t)n[t]=e.charAt(t);return n}function parse(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),s=e,c=0,u=s.length>0?1:0,p=0,h=s.length,d=null,f={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1},m={},"undefined"!=typeof t&&(m.range="boolean"==typeof t.range&&t.range,m.loc="boolean"==typeof t.loc&&t.loc,m.raw="boolean"==typeof t.raw&&t.raw,"boolean"==typeof t.tokens&&t.tokens&&(m.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(m.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(m.errors=[])),h>0&&"undefined"==typeof s[0]&&(e instanceof String&&(s=e.valueOf()),"undefined"==typeof s[0]&&(s=stringToArray(e))),patch();try{r=parseProgram(),"undefined"!=typeof m.comments&&(filterCommentLocation(),r.comments=m.comments),"undefined"!=typeof m.tokens&&(filterTokenLocation(),r.tokens=m.tokens),"undefined"!=typeof m.errors&&(r.errors=m.errors),(m.range||m.loc)&&(r.body=filterGroup(r.body))}catch(i){throw i}finally{unpatch(),m={}}return r}var t,r,n,i,o,a,s,l,c,u,p,h,d,f,m;t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8},r={},r[t.BooleanLiteral]="Boolean",r[t.EOF]="<end>",r[t.Identifier]="Identifier",r[t.Keyword]="Keyword",r[t.NullLiteral]="Null",r[t.NumericLiteral]="Numeric",r[t.Punctuator]="Punctuator",r[t.StringLiteral]="String",n={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},a={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},"undefined"==typeof"esprima"[0]&&(sliceSource=function(e,t){return s.slice(e,t).join("")}),e.version="1.0.4",e.parse=parse,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})},[301,119],function(e,t){"use strict";function innerFill(e,t){var r,n,i=e.length,o=t.numArrayArgs,a=t.hasIndex,s=[],l=0,c=0;for(r=0;r<i;++r)s.push("var i"+r+"=0;");for(n=0;n<o;++n)for(r=0;r<i;++r)c=l,l=e[r],0===r?s.push("var d"+n+"s"+r+"=stride"+n+"["+l+"]|0;"):s.push("var d"+n+"s"+r+"=(stride"+n+"["+l+"]-shape["+c+"]*stride"+n+"["+c+"])|0;");for(r=i-1;r>=0;--r)l=e[r],s.push("for(i"+r+"=shape["+l+"]|0;--i"+r+">=0;){");for(s.push(t.body),r=0;r<i;++r){for(c=l,l=e[r],n=0;n<o;++n)s.push("ptr"+n+"+=d"+n+"s"+r);a&&(r>0&&s.push("index["+c+"]-=shape["+c+"]"),s.push("++index["+l+"]")),s.push("}")}return s.join("\n")}function outerFill(e,t,n){var i,o=t.length,a=n.numArrayArgs,s=n.hasIndex,l=[],c=o,u=a+c,p=u+(s?o:0);for(l.push("var i=0,l=0,v=0,d=0,sp=0"),l.push("while(true){"),l.push("l="+r),l.push("v="+r),l.push("d="+e),i=e;i<o;++i)l.push("if(shape["+i+"]>l){"),l.push("v=l|0"),l.push("l=shape["+i+"]|0"),l.push("d="+i+"|0"),l.push("}else if(shape["+i+"]>v){"),l.push("v=shape["+i+"]|0"),l.push("}");for(l.push("if(l<="+r+"){"),l.push(innerFill(t,n)),l.push("} else {"),l.push("v=(v>>>1)-1"),l.push("for(i=1;i<=16;i<<=1){v|=v>>>i}"),l.push("++v"),l.push("if(v<"+r+") v="+r),l.push("i=shape[d]"),l.push("shape[d]=v"),l.push("for(;i>=v;i-=v){"),i=0;i<o;++i)l.push("STACK[sp+"+i+"]=shape["+i+"]");for(i=0;i<a;++i)l.push("STACK[sp+"+(i+c)+"]=ptr"+i+"|0");if(s){for(i=0;i<o;++i)l.push("STACK[sp+"+(i+u)+"]=index["+i+"]");l.push("index[d]+=v")}for(i=0;i<a;++i)l.push("ptr"+i+"+=(v*stride"+i+"[d])|0");for(l.push("sp+="+p),l.push("}"),l.push("if(i>0){"),l.push("shape[d]=i"),i=0;i<o;++i)l.push("STACK[sp+"+i+"]=shape["+i+"]");for(i=0;i<a;++i)l.push("STACK[sp+"+(i+c)+"]=ptr"+i+"|0");if(s)for(i=0;i<o;++i)l.push("STACK[sp+"+(i+u)+"]=index["+i+"]");for(l.push("sp+="+p),l.push("}"),l.push("}"),l.push("if(sp<=0){"),l.push("break"),l.push("}"),l.push("sp-="+p),i=0;i<o;++i)l.push("shape["+i+"]=STACK[sp+"+i+"]");for(i=0;i<a;++i)l.push("ptr"+i+"=STACK[sp+"+(i+c)+"]");if(s)for(i=0;i<o;++i)l.push("index["+i+"]=STACK[sp+"+(i+u)+"]");return l.push("}"),l.join("\n")}function majorOrder(e){return e[0]}function generate(e,t){var r,n,i,o=majorOrder(e),a=e[0].length,s=t.numArrayArgs,l=['"use strict"'],c=["STACK","shape"];for(n=0;n<s;++n)for(c.push("arr"+n),c.push("ptr"+n),c.push("stride"+n),l.push("ptr"+n+"|=0"),i=0;i<a;++i)l.push("stride"+n+"["+i+"]|=0");for(n=0;n<a;++n)l.push("shape["+n+"]|=0");for(n=0;n<t.numScalarArgs;++n)c.push("scalar"+n);if(t.hasIndex){for(l.push("var index=["),n=0;n<a;++n)l.push(n>0?",0":"0");l.push("]")}t.hasShape&&l.push("var inline_shape=shape.slice(0)"),r=0;e:for(;r<a;){for(i=1;i<s;++i)if(e[i][r]!==e[0][r])break e;++r}l.push(t.pre),r===a?l.push(innerFill(o,t)):l.push(outerFill(r,o,t)),l.push(t.post),c.push(l.join("\n"));var u=Function.apply(null,c);return t.printCode&&console.log("For order:",e,"Generated code: \n",u+""),u}var r=32;e.exports=generate},function(e,t,r){"use strict";function ndfft(e,t,r){var s,l,c=t.shape,u=c.length,p=1,h=new Array(u),d=0;for(s=u-1;s>=0;--s)if(h[s]=p,p*=c[s],d=Math.max(d,o.scratchMemory(c[s])),t.shape[s]!==r.shape[s])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var f,m,g,y,v=a.malloc(4*p+d,"double"),b=i(v,c.slice(0),h,0),_=i(v,c.slice(0),h.slice(0),p),w=i(v,c.slice(0),h.slice(0),2*p),x=i(v,c.slice(0),h.slice(0),3*p),S=4*p;for(n.assign(b,t),n.assign(_,r),s=u-1;s>=0&&(o(e,p/c[s],c[s],v,b.offset,_.offset,S),0!==s);--s){for(m=1,g=w.stride,y=x.stride,l=s-1;l<u;++l)y[l]=g[l]=m,m*=c[l];for(l=s-2;l>=0;--l)y[l]=g[l]=m,m*=c[l];n.assign(w,b),n.assign(x,_),f=b,b=w,w=f,f=_,_=x,x=f}n.assign(t,b),n.assign(r,_),a.free(v)}var n=r(113),i=(r(121),r(110)),o=r(127),a=r(128);e.exports=ndfft},[298,122,125],[299,123],[300,124],117,[301,126],119,function(e,t,r){function fft(e,t,r,i,o,a,s){e|=0,t|=0,r|=0,o|=0,a|=0,n.isPow2(r)?fftRadix2(e,t,r,i,o,a):fftBluestein(e,t,r,i,o,a,s)}function scratchMemory(e){return n.isPow2(e)?0:2*e+4*n.nextPow2(2*e+1)}function fftRadix2(e,t,r,i,o,a){e|=0,t|=0,r|=0,o|=0,a|=0;var s,l,c,u,p,h,d,f,g,y,v,b,_,w,x,S,C,k,E,A,P,T,M,I;for(s=r,m=n.log2(s),C=0;C<t;++C){for(h=s>>1,u=0,l=0;l<s-1;l++){for(l<u&&(b=i[o+l],i[o+l]=i[o+u],i[o+u]=b,b=i[a+l],i[a+l]=i[a+u],i[a+u]=b),p=h;p<=u;)u-=p,p>>=1;u+=p}for(y=-1,v=0,g=1,d=0;d<m;d++){for(f=g,g<<=1,x=1,S=0,u=0;u<f;u++){for(l=u;l<s;l+=g)c=l+f,k=i[o+c],E=i[a+c],A=i[o+l],P=i[a+l],T=x*(k+E),M=k*(S-x),I=E*(x+S),_=T-I,w=T+M,i[o+c]=A-_,i[a+c]=P-w,i[o+l]+=_,i[a+l]+=w;T=y*(x+S),M=x*(v-y),I=S*(y+v),x=T-I,S=T+M}v=Math.sqrt((1-y)/2),e<0&&(v=-v),y=Math.sqrt((1+y)/2)}if(e<0){var O=1/s;for(l=0;l<s;l++)i[o+l]*=O,i[a+l]*=O}o+=r,a+=r}}function fftBluestein(e,t,r,i,o,a,s){e|=0,t|=0,r|=0,o|=0,a|=0,s|=0;var l,c,u,p,h,d,f,m,g,y=n.nextPow2(2*r+1),v=s,b=v+r,_=b+r,w=_+y,x=w+y,S=x+y,C=-e*Math.PI/r;for(g=0;g<r;++g)c=C*(g*g%(2*r)),p=Math.cos(c),h=Math.sin(c),i[x+(y-g)]=i[x+g]=i[v+g]=p,i[S+(y-g)]=i[S+g]=i[b+g]=h;for(g=r;g<=y-r;++g)i[x+g]=0;for(g=r;g<=y-r;++g)i[S+g]=0;for(fftRadix2(1,1,y,i,x,S),C=e<0?1/r:1,l=0;l<t;++l){for(g=0;g<r;++g)c=i[o+g],u=i[a+g],p=i[v+g],h=-i[b+g],d=p*(c+u),f=c*(h-p),m=u*(p+h),i[_+g]=d-m,i[w+g]=d+f;for(g=r;g<y;++g)i[_+g]=0;for(g=r;g<y;++g)i[w+g]=0;for(fftRadix2(1,1,y,i,_,w),g=0;g<y;++g)c=i[_+g],u=i[w+g],p=i[x+g],h=i[S+g],d=p*(c+u),f=c*(h-p),m=u*(p+h),i[_+g]=d-m,i[w+g]=d+f;for(fftRadix2(-1,1,y,i,_,w),g=0;g<r;++g)c=i[_+g],u=i[w+g],p=i[v+g],h=-i[b+g],d=p*(c+u),f=c*(h-p),m=u*(p+h),i[o+g]=C*(d-m),i[a+g]=C*(d+f);o+=r,a+=r}}var n=r(106);e.exports=fft,e.exports.scratchMemory=scratchMemory},function(e,t,r){(function(e){"use strict";function free(e){if(e instanceof ArrayBuffer){var t=0|e.byteLength,r=n.log2(t);if(t<32)return;f[r].push(e)}else{var t=0|e.length,r=n.log2(t);if(t<32)return;e instanceof Uint8Array?a[r].push(e):e instanceof Uint16Array?s[r].push(e):e instanceof Uint32Array?l[r].push(e):e instanceof Int8Array?c[r].push(e):e instanceof Int16Array?u[r].push(e):e instanceof Int32Array?p[r].push(e):e instanceof Float32Array?h[r].push(e):e instanceof Float64Array&&d[r].push(e)}}function malloc(e,t){e=Math.max(n.nextPow2(e),32);var r=n.log2(e);if(void 0===t){var i=f[r];if(i.length>0){var o=i[i.length-1];return i.pop(),o}return new ArrayBuffer(e)}switch(t){case"uint8":var m=a[r];if(m.length>0){var g=m[m.length-1];return m.pop(),g}return new Uint8Array(e);case"uint16":var y=s[r];if(y.length>0){var v=y[y.length-1];return y.pop(),v}return new Uint16Array(e);case"uint32":var b=l[r];if(b.length>0){var _=b[b.length-1];return b.pop(),_}return new Uint32Array(e);case"int8":var w=c[r];if(w.length>0){var x=w[w.length-1];return w.pop(),x}return new Int8Array(e);case"int16":var S=u[r];if(S.length>0){var C=S[S.length-1];return S.pop(),C}return new Int16Array(e);case"int32":var k=p[r];if(k.length>0){var E=k[k.length-1];return k.pop(),E}return new Int32Array(e);case"float":case"float32":var A=h[r];if(A.length>0){var P=A[A.length-1];return A.pop(),P}return new Float32Array(e);case"double":case"float64":var T=d[r];if(T.length>0){var M=T[T.length-1];return T.pop(),M}return new Float64Array(e);default:return null}return null}function clearCache(){for(var e=0;e<32;++e)a[e].length=0,s[e].length=0,l[e].length=0,c[e].length=0,u[e].length=0,p[e].length=0,h[e].length=0,d[e].length=0,f[e].length=0}var n=r(106),i=r(129);e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0])});var o=e.__TYPEDARRAY_POOL,a=o.UINT8,s=o.UINT16,l=o.UINT32,c=o.INT8,u=o.INT16,p=o.INT32,h=o.FLOAT,d=o.DOUBLE,f=o.DATA;t.free=free,t.malloc=malloc,t.clearCache=clearCache}).call(t,function(){return this}())},88,function(e,t,r){"use strict";var n=r(64),i=function(){function AnalyserOptions(){this.fftSize=512,this.bufferLen=512,this.vadSmoothing=.99,this.levelSmoothing=.2,this.energyOffset=1e-8,this.energyThresholdRatioPos=2,this.energyThresholdRatioNeg=.5,this.energyIntegration=1,this.filter=[{f:200,v:0},{f:2e3,v:1}]}return AnalyserOptions}();t.AnalyserOptions=i;var o=function(){function VoiceAnalyser(e,t,r){var o=this;void 0===r&&(r=new i),this.context=e,this.runner=t,this.options=r,this.update=function(){o.vadAnalyser.getFloatFrequencyData(o.floatFrequencyData),o.levelAnalyser.getByteFrequencyData(o.byteFrequencyData),o.updateEnergyAndLevel(),o.checkForVoice()},this.hertzPerBin=this.context.sampleRate/this.options.fftSize,this.iterationFrequency=this.context.sampleRate/this.options.bufferLen,this.iterationPeriod=1/this.iterationFrequency,this.setFilter(this.options.filter),this.energy=0,this.level=new n.BehaviorSubject(0),this.vadState=new n.BehaviorSubject((!1)),this.deadNode=this.context.createGain(),this.deadNode.gain.value=0,this.runner||(this.runner={run:function(e){return e()}})}return VoiceAnalyser.prototype.start=function(e){this.isRunning()||(this.source=e,this.energy=0,this.energyOffset=this.options.energyOffset,this.energyThresholdPos=this.energyOffset*this.options.energyThresholdRatioPos,this.energyThresholdNeg=this.energyOffset*this.options.energyThresholdRatioNeg,
this.voiceTrend=0,this.voiceTrendMax=10,this.voiceTrendMin=-10,this.voiceTrendStart=5,this.voiceTrendEnd=-5,this.levelAnalyser=this.context.createAnalyser(),this.levelAnalyser.smoothingTimeConstant=this.options.levelSmoothing,this.levelAnalyser.fftSize=this.options.fftSize,this.computedLevel=0,this.level.next(0),this.vadAnalyser=this.context.createAnalyser(),this.vadAnalyser.smoothingTimeConstant=this.options.vadSmoothing,this.vadAnalyser.fftSize=this.options.fftSize,this.pollerNode=this.context.createScriptProcessor(this.options.bufferLen,1,1),this.floatFrequencyData=new Float32Array(this.vadAnalyser.frequencyBinCount),this.floatFrequencyDataLinear=new Float32Array(this.vadAnalyser.frequencyBinCount),this.byteFrequencyData=new Uint8Array(this.levelAnalyser.frequencyBinCount),this.vadState.next(!1),this.pollerNode.onaudioprocess=this.update,this.source.connect(this.levelAnalyser),this.source.connect(this.vadAnalyser),this.source.connect(this.pollerNode),this.pollerNode.connect(this.deadNode),this.deadNode.connect(this.context.destination))},VoiceAnalyser.prototype.stop=function(){this.isRunning()&&(this.source.disconnect(this.levelAnalyser),this.source.disconnect(this.vadAnalyser),this.source.disconnect(this.pollerNode),this.pollerNode.disconnect(this.deadNode),this.deadNode.disconnect(this.context.destination),this.pollerNode=null,this.source=null,this.levelAnalyser=null,this.vadAnalyser=null)},VoiceAnalyser.prototype.isRunning=function(){return!!this.source},VoiceAnalyser.prototype.getLevel=function(){return this.level},VoiceAnalyser.prototype.getVoiceDetected=function(){return this.vadState},VoiceAnalyser.prototype.setFilter=function(e){this.filter=new Float32Array(this.options.fftSize);for(var t=0,r=this.options.fftSize/2;t<r;t++){this.filter[t]=0;for(var n=0,i=e.length;n<i;n++)if(t*this.hertzPerBin<e[n].f){this.filter[t]=e[n].v;break}}},VoiceAnalyser.prototype.updateEnergyAndLevel=function(){for(var e=this,t=this.floatFrequencyData,r=this.floatFrequencyDataLinear,n=this.byteFrequencyData,i=this.filter,o=0,a=0,s=0,l=0,c=t.length;l<c;l++)r[l]=Math.pow(10,t[l]/10),o+=i[l]*r[l]*r[l],a=Math.max(a,r[l]),s+=n[l];this.energy=o,this.computedLevel=s/n.length/255,this.computedLevel!==this.level.value&&this.runner.run(function(){return e.level.next(e.computedLevel)})},VoiceAnalyser.prototype.checkForVoice=function(){var e=this,t=this.energy-this.energyOffset;t>this.energyThresholdPos?this.voiceTrend=this.voiceTrend+1>this.voiceTrendMax?this.voiceTrendMax:this.voiceTrend+1:t<-this.energyThresholdNeg?this.voiceTrend=this.voiceTrend-1<this.voiceTrendMin?this.voiceTrendMin:this.voiceTrend-1:this.voiceTrend>0?this.voiceTrend--:this.voiceTrend<0&&this.voiceTrend++;var r=this.voiceTrend>this.voiceTrendStart,n=this.voiceTrend<this.voiceTrendEnd,i=t*this.iterationPeriod*this.options.energyIntegration;return i>0||!n?this.energyOffset+=i:this.energyOffset+=10*i,this.energyOffset=this.energyOffset<0?0:this.energyOffset,this.energyThresholdPos=this.energyOffset*this.options.energyThresholdRatioPos,this.energyThresholdNeg=this.energyOffset*this.options.energyThresholdRatioNeg,r&&!this.vadState.value&&this.runner.run(function(){return e.vadState.next(!0)}),n&&this.vadState.value&&this.runner.run(function(){return e.vadState.next(!1)}),t},VoiceAnalyser}();t.VoiceAnalyser=o},function(e,t,r){"use strict";var n=r(132),i=r(152),o=r(4),a=r(64),s=r(202),l=r(213),c=r(214),u=r(225),p=r(227),h=r(100),d=r(223),f=r(228),m=4e3,g=5e3,y=1e3,v=function(){function PadModel(e,t){var r=this;this.padId=e,this.blindpadService=t,this.useLog=!0,this.debouncedIsLightweight=!0,this.onLocalEdits=function(e){if(e&&0!==e.length){var t=[];e.forEach(function(e){var n=e.text,i=e.index;if(e.isInsert)for(var o=n.length-1;o>=0;o--){var a=r.doc.insert(n.charAt(o),i);t.push(a)}else for(var o=0,s=n.length;o<s;o++){var a=r.doc.remove(i);t.push(a)}}),t.length>0&&(t.forEach(function(e){return r.opSet.add(e.toString())}),r.memoizedOpSetStr=null,r.firePadUpdate(!1))}},this.onPadUpdate=function(e){if(void 0!==e.mimeType&&e.mimeType!==r.mimeType.value&&r.mimeType.next(e.mimeType),void 0!==e.base&&void 0!==e.baseVersion&&void 0!==e.opSetStr)if(r.base===e.base&&r.baseVersion===e.baseVersion){var t=[],n=!!e.opSetStr,i=r.memoizedOpSetStr&&r.memoizedOpSetStr===e.opSetStr;n&&!i&&u.decompressOpSet(e.opSetStr).forEach(function(e){r.opSet.has(e)||t.push(e)}),r.applyOpsAndRender(t)}else e.baseVersion>r.baseVersion?(r.setBaseDoc(e.base,e.baseVersion),r.applyOpsAndRender(u.decompressOpSet(e.opSetStr))):r.baseVersion===e.baseVersion&&r.base!==e.base&&e.srcId>r.clientId&&(r.setBaseDoc(e.base,e.baseVersion),r.applyOpsAndRender(u.decompressOpSet(e.opSetStr)));if(void 0!==e.cursors){var o={};Object.keys(e.cursors||{}).forEach(function(t){var n=e.cursors[t];r.activeUsers.has(t)&&t!==r.clientId&&t===e.srcId&&(o[t]=n)}),r.remoteCursors.next(o)}},this.onLocalCursors=function(e){r.mostRecentCursors=e,r.firePadUpdate(!0)},this.onCompactionTick=function(){r.activePeers.has(r.clientId)&&0!==r.opSet.size&&r.isLargestPeer()&&(r.activePeers.size>1&&0===r.getResponsivePeers().length||Date.now()-r.lastEditTime<m||(r.setBaseDoc(r.doc.toArray().join(""),r.baseVersion+1),r.sendUpdateNow(!1)))},this.onPeerTimeoutTick=function(){if(r.activePeers.has(r.clientId)&&!(r.activePeers.size<2)&&0!==r.getTimedOutPeers().length){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&200===e.status){var t=r.getTimedOutPeers().map(function(e){return e.getId()});t.length>0&&r.killUsersAndSignal(t)}},e.timeout=g/2,e.open("GET","/index.html?t="+Date.now(),!0),e.send()}},this.signalRequest=function(e){r.signaler.emit(l.ConnectionRequest.messageType,e)},this.signalResponse=function(e){r.signaler.emit(l.ConnectionResponse.messageType,e)},this.clientId=n.v1(),this.activePeers=new Set,this.deadPeers=new Set,this.users=new Map,this.mimeType=new a.BehaviorSubject(null),this.mostRecentCursors=null,this.outgoingUserBroadcasts=new o.Subject,this.localEdits=new o.Subject,this.remoteEdits=new o.Subject,this.localCursors=new o.Subject,this.remoteCursors=new o.Subject,this.localEdits.subscribe(this.onLocalEdits),this.localCursors.subscribe(this.onLocalCursors),this.localEdits.subscribe(function(e){return r.lastEditTime=Date.now()}),this.remoteEdits.subscribe(function(e){return r.lastEditTime=Date.now()}),this.activePeers.add(this.clientId),this.updateUsers([],[]),this.setBaseDoc("",0)}return PadModel.prototype.getPadId=function(){return this.padId},PadModel.prototype.getClientId=function(){return this.clientId},PadModel.prototype.getLocalUser=function(){return this.users.get(this.clientId)},PadModel.prototype.getUsers=function(){return this.activeUsers},PadModel.prototype.getAllUsers=function(){return this.users},PadModel.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.useLog&&console.log.apply(console,[""].concat(e))},PadModel.prototype.isSignalerConnected=function(){return this.signaler&&this.signaler.connected},PadModel.prototype.getOutoingUserBroadcasts=function(){return this.outgoingUserBroadcasts},PadModel.prototype.getLocalEdits=function(){return this.localEdits},PadModel.prototype.getRemoteEdits=function(){return this.remoteEdits},PadModel.prototype.getLocalCursors=function(){return this.localCursors},PadModel.prototype.getRemoteCursors=function(){return this.remoteCursors},PadModel.prototype.getMimeType=function(){return this.mimeType},PadModel.prototype.setMimeType=function(e){e!==this.mimeType.value&&this.mimeType.next(e)},PadModel.prototype.buildPadUpdate=function(e){void 0===e&&(e=!0);var t=new l.PadUpdate;return t.srcId=this.clientId,t.padId=this.padId,this.mimeType.value&&(t.mimeType=this.mimeType.value),this.mostRecentCursors&&(t.cursors=this.mostRecentCursors),e||(t.base=this.base,t.baseVersion=this.baseVersion,null===this.memoizedOpSetStr&&(this.memoizedOpSetStr=u.compressOpSet(this.opSet)),t.opSetStr=this.memoizedOpSetStr),t},PadModel.prototype.start=function(){var e=this;if(!this.isStarted()){var t=l.getSignalerURI();this.log("Looking for signaler: ",t),this.signaler=i.connect(t),this.remoteEdits.next([]),this.setMimeType(null),this.signaler.on("connect",function(){e.log("Connected to signaler, asking for peers!");var t=new l.PeersRequest;t.padId=e.padId,t.srcId=e.clientId,t.knownActivePeers=Array.from(e.activePeers.values()),t.knownDeadPeers=Array.from(e.deadPeers.values()),e.signaler.emit(l.PeersRequest.messageType,t)}),this.signaler.on(l.PeersRequest.messageType,function(t){if(e.log(l.PeersRequest.messageType,t),e.isValidMessage(t)){e.updateUsers(t.knownActivePeers,t.knownDeadPeers);var r=new l.PeersUpdate;r.padId=e.padId,r.srcId=e.clientId,r.activePeers=Array.from(e.activePeers.values()),r.deadPeers=Array.from(e.deadPeers.values()),e.signaler.emit(l.PeersUpdate.messageType,r)}}),this.signaler.on(l.PeersUpdate.messageType,function(t){e.log(l.PeersUpdate.messageType,t),e.isValidMessage(t)&&e.updateUsers(t.activePeers,t.deadPeers)}),this.signaler.on(l.ConnectionRequest.messageType,function(t){e.log(l.ConnectionRequest.messageType,t),e.isValidConnectionMessage(t)&&e.users.get(t.srcId).feedMessage(l.ConnectionRequest.messageType,t)}),this.signaler.on(l.ConnectionResponse.messageType,function(t){e.log(l.ConnectionResponse.messageType,t),e.isValidConnectionMessage(t)&&e.users.get(t.srcId).feedMessage(l.ConnectionResponse.messageType,t)}),this.signaler.on("DEBUG",function(t){e.log("DEBUG (signaler): ",t)}),this.signaler.on("disconnect",function(){e.log("disconnected from signaler")}),this.mimeType.subscribe(function(t){t&&e.firePadUpdate(!0)}),this.peerTimeoutSub=h.interval(g).subscribe(this.onPeerTimeoutTick),this.compactionSub=h.interval(y).subscribe(this.onCompactionTick)}},PadModel.prototype.close=function(){this.isStarted()&&(this.killUsersAndSignal([this.clientId]),this.users.forEach(function(e){e.close()}),this.users.clear(),this.signaler&&this.signaler.close(),this.mimeType.complete(),this.localEdits.complete(),this.remoteEdits.complete(),this.localCursors.complete(),this.remoteCursors.complete(),this.peerTimeoutSub.unsubscribe(),this.compactionSub.unsubscribe())},PadModel.prototype.isStarted=function(){return!!this.signaler},PadModel.prototype.updateUsers=function(e,t){var r=this;e.forEach(function(e){r.deadPeers.has(e)||r.activePeers.add(e)}),t.forEach(function(e){r.activePeers.has(e)&&r.activePeers.delete(e),r.deadPeers.add(e)});var n=this.users;this.users=new Map,this.activeUsers=new Map,[this.activePeers,this.deadPeers].forEach(function(e){e.forEach(function(e){var t=n.get(e);if(t||(t=new c.UserModel(e,r,r.blindpadService),r.activePeers.has(e)&&(t.getMessagesOut(l.ConnectionRequest.messageType).subscribe(r.signalRequest),t.getMessagesOut(l.ConnectionResponse.messageType).subscribe(r.signalResponse),t.getMessagesIn(l.PadUpdate.messageType).subscribe(r.onPadUpdate))),r.users.set(e,t),r.activePeers.has(e)&&(r.activeUsers.set(e,t),t.isStarted()||t.start()),r.deadPeers.has(e)&&!t.isClosed()){t.close();var i={};i[e]=null,r.remoteCursors.next(i)}})})},PadModel.prototype.applyOpsAndRender=function(e){var t=this;if(e=e||[],0!==e.length){var r=this.doc.toArray().join(""),n=0;if(e.forEach(function(e){t.opSet.has(e)||(t.doc.apply(s.Op.parse(e)),t.opSet.add(e),n++)}),0!==n){var i=this.doc.toArray().join(""),o=p.diffStrings(r,i),a=0,c=[];o.forEach(function(e){var t=e[0],r=e[1];if(t===p.DIFF_INSERT){var n=new l.PadEdit;n.index=a,n.isInsert=!0,n.text=r,c.push(n)}else if(t===p.DIFF_DELETE){var i=new l.PadEdit;i.index=a,i.isInsert=!1,i.text=r,c.push(i)}t!==p.DIFF_DELETE&&(a+=r.length)}),c.length>0&&this.remoteEdits.next(c)}}},PadModel.prototype.firePadUpdate=function(e){var t=this;if(this.debouncedIsLightweight=!!this.debouncedIsLightweight&&e,!this.debouncedPadUpdate){var r=25*Math.pow(Math.log10(this.opSet.size+1),2);this.debouncedPadUpdate=f.debounce(function(){t.sendUpdateNow(t.debouncedIsLightweight),t.debouncedPadUpdate=null,t.debouncedIsLightweight=!0},r)}this.debouncedPadUpdate()},PadModel.prototype.sendUpdateNow=function(e){this.outgoingUserBroadcasts.next({type:l.PadUpdate.messageType,data:this.buildPadUpdate(e)})},PadModel.prototype.getResponsivePeers=function(){return Array.from(this.activeUsers.values()).filter(function(e){return e.isRemoteUser()&&!e.isUnavailable()})},PadModel.prototype.getTimedOutPeers=function(){return Array.from(this.activeUsers.values()).filter(function(e){return e.isRemoteUser()&&e.isTimedOut()})},PadModel.prototype.isLargestPeer=function(){return this.clientId!==Array.from(this.activePeers).reduce(function(e,t){return t>e?t:e})},PadModel.prototype.killUsersAndSignal=function(e){this.updateUsers([],e);var t=new l.PeersUpdate;t.padId=this.padId,t.srcId=this.clientId,t.activePeers=Array.from(this.activePeers.values()),t.deadPeers=Array.from(this.deadPeers.values()),this.signaler.emit(l.PeersUpdate.messageType,t)},PadModel.prototype.setBaseDoc=function(e,t){var r=this.doc?this.doc.toArray().join(""):"";this.base=e,this.baseVersion=t,this.doc=new s.KSeq(this.clientId.substring(0,6)),this.opSet=new Set;for(var n=new d.SeededRandom(t),i=new s.KSeq(""+t,function(){return t},function(){return n.random()}),o=0,a=e.length;o<a;o++)this.doc.apply(i.insert(e.charAt(o),o));if(this.memoizedOpSetStr=null,this.lastEditTime=Date.now(),r!==this.base){var c=new l.PadEdit;c.index=0,c.isInsert=!1,c.text=r;var u=new l.PadEdit;u.index=0,u.isInsert=!0,u.text=this.base,this.remoteEdits.next([c,u])}},PadModel.prototype.isValidMessage=function(e){return e.padId===this.padId||(console.log("Message padId ("+e.padId+") doesn't match local padId: "+this.padId+", ignoring..."),!1)},PadModel.prototype.isValidConnectionMessage=function(e){return!!this.isValidMessage(e)&&(e.destId&&e.destId===this.clientId?e.srcId?!!this.activePeers.has(e.srcId)||(this.log("srcId "+e.srcId+" not an active peer, ignoring..."),!1):(this.log("srcId missing, ignoring..."),!1):(this.log("destId missing or not for us, ignoring..."),!1))},PadModel}();t.PadModel=v},function(e,t,r){var n;(function(i){!function(o){"use strict";function setupBrowser(){var e=o.crypto||o.msCrypto;if(!a&&e&&e.getRandomValues)try{var t=new Uint8Array(16);c=a=function(){return e.getRandomValues(t),t},a()}catch(r){}if(!a){var n=new Array(16);s=a=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function setupNode(){try{var e=r(133).randomBytes;l=a=e&&function(){return e(16)},a()}catch(t){}}function parse(e,t,r){var n=t&&r||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[n+i++]=h[e])});i<16;)t[n+i++]=0;return t}function unparse(e,t){var r=t||0,n=p;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}function v1(e,t,r){var n=t&&r||0,i=t||[];e=e||{};var o=null!=e.clockseq?e.clockseq:g,a=null!=e.msecs?e.msecs:(new Date).getTime(),s=null!=e.nsecs?e.nsecs:v+1,l=a-y+(s-v)/1e4;if(l<0&&null==e.clockseq&&(o=o+1&16383),(l<0||a>y)&&null==e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=a,v=s,g=o,a+=122192928e5;var c=(1e4*(268435455&a)+s)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=255&c;var u=a/4294967296*1e4&268435455;i[n++]=u>>>8&255,i[n++]=255&u,i[n++]=u>>>24&15|16,i[n++]=u>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var p=e.node||m,h=0;h<6;h++)i[n+h]=p[h];return t?t:unparse(i)}function v4(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new u(16):null,e=null),e=e||{};var i=e.random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;o++)t[n+o]=i[o];return t||unparse(i)}var a,s,l,c;o?setupBrowser():setupNode();for(var u="function"==typeof i?i:Array,p=[],h={},d=0;d<256;d++)p[d]=(d+256).toString(16).substr(1),h[p[d]]=d;var f=a(),m=[1|f[0],f[1],f[2],f[3],f[4],f[5]],g=16383&(f[6]<<8|f[7]),y=0,v=0,b=v4;b.v1=v1,b.v4=v4,b.parse=parse,b.unparse=unparse,b.BufferClass=u,b._rng=a,b._mathRNG=s,b._nodeRNG=l,b._whatwgRNG=c,"undefined"!=typeof e&&e.exports?e.exports=b:(n=function(){return b}.call(t,r,t,e),!(void 0!==n&&(e.exports=n)))}("undefined"!=typeof window?window:null)}).call(t,r(83).Buffer)},function(e,t,r){(function(e){function error(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function each(e,t){for(var r in e)t(e[r],r)}var n=r(134);t.createHash=r(136),t.createHmac=r(149),t.randomBytes=function(t,r){if(!r||!r.call)return new e(n(t));try{r.call(this,void 0,new e(n(t)))}catch(i){r(i)}},t.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var i=r(150)(t);t.pbkdf2=i.pbkdf2,t.pbkdf2Sync=i.pbkdf2Sync,each(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(e){t[e]=function(){error("sorry,",e,"is not implemented yet")}})}).call(t,r(83).Buffer)},function(e,t,r){(function(t,n){!function(){var i=("undefined"==typeof window?t:window)||{};_crypto=i.crypto||i.msCrypto||r(135),e.exports=function(e){if(_crypto.getRandomValues){var t=new n(e);return _crypto.getRandomValues(t),t}if(_crypto.randomBytes)return _crypto.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(t,function(){return this}(),r(83).Buffer)},function(e,t){},function(e,t,r){(function(t){function toConstructor(e){return function(){var r=[],n={update:function(e,n){return t.isBuffer(e)||(e=new t(e,n)),r.push(e),this},digest:function(n){var i=t.concat(r),o=e(i);return r=null,n?o.toString(n):o}};return n}}var n=r(137),i=toConstructor(r(146)),o=toConstructor(r(148));e.exports=function(e){return"md5"===e?new i:"rmd160"===e?new o:n(e)}}).call(t,r(83).Buffer)},function(e,t,r){var t=e.exports=function(e){var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r},n=r(83).Buffer,i=r(138)(n);t.sha1=r(139)(n,i),t.sha256=r(144)(n,i),t.sha512=r(145)(n,i)},function(e,t){e.exports=function(e){function Hash(t,r){this._block=new e(t),this._finalSize=r,this._blockSize=t,this._len=0,this._s=0}return Hash.prototype.init=function(){this._s=0,this._len=0},Hash.prototype.update=function(t,r){"string"==typeof t&&(r=r||"utf8",t=new e(t,r));for(var n=this._len+=t.length,i=this._s=this._s||0,o=0,a=this._block;i<n;){for(var s=Math.min(t.length,o+this._blockSize-i%this._blockSize),l=s-o,c=0;c<l;c++)a[i%this._blockSize+c]=t[c+o];i+=l,o+=l,i%this._blockSize===0&&this._update(a)}return this._s=i,this},Hash.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var r=this._update(this._block)||this._hash();return e?r.toString(e):r},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Hash}},function(e,t,r){var n=r(140).inherits;e.exports=function(e,t){function Sha1(){return c.length?c.pop().init():this instanceof Sha1?(this._w=l,t.call(this,64,56),this._h=null,void this.init()):new Sha1}function sha1_ft(e,t,r,n){return e<20?t&r|~t&n:e<40?t^r^n:e<60?t&r|t&n|r&n:t^r^n}function sha1_kt(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function add(e,t){return e+t|0}function rol(e,t){return e<<t|e>>>32-t}var r=0,i=4,o=8,a=12,s=16,l=new("undefined"==typeof Int32Array?Array:Int32Array)(80),c=[];return n(Sha1,t),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,t.prototype.init.call(this),this},Sha1.prototype._POOL=c,Sha1.prototype._update=function(e){var t,r,n,i,o,a,s,l,c,u;t=a=this._a,r=s=this._b,n=l=this._c,i=c=this._d,o=u=this._e;for(var p=this._w,h=0;h<80;h++){var d=p[h]=h<16?e.readInt32BE(4*h):rol(p[h-3]^p[h-8]^p[h-14]^p[h-16],1),f=add(add(rol(t,5),sha1_ft(h,r,n,i)),add(add(o,d),sha1_kt(h)));o=i,i=n,n=rol(r,30),r=t,t=f}this._a=add(t,a),this._b=add(r,s),this._c=add(n,l),this._d=add(i,c),this._e=add(o,u)},Sha1.prototype._hash=function(){c.length<100&&c.push(this);var t=new e(20);return t.writeInt32BE(0|this._a,r),t.writeInt32BE(0|this._b,i),t.writeInt32BE(0|this._c,o),t.writeInt32BE(0|this._d,a),t.writeInt32BE(0|this._e,s),t},Sha1}},function(e,t,r){(function(e,n){function inspect(e,r){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(r)?n.showHidden=r:r&&t._extend(n,r),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}function stylizeWithColor(e,t){var r=inspect.styles[t];return r?"["+inspect.colors[r][0]+"m"+e+"["+inspect.colors[r][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function formatValue(e,r,n){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return isString(i)||(i=formatValue(e,i,n)),i}var o=formatPrimitive(e,r);if(o)return o;var a=Object.keys(r),s=arrayToHash(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),isError(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return formatError(r);if(0===a.length){if(isFunction(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c="",u=!1,p=["{","}"];if(isArray(r)&&(u=!0,p=["[","]"]),isFunction(r)){var h=r.name?": "+r.name:"";c=" [Function"+h+"]"}if(isRegExp(r)&&(c=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(c=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(c=" "+formatError(r)),0===a.length&&(!u||0==r.length))return p[0]+c+p[1];if(n<0)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var d;return d=u?formatArray(e,r,n,s,a):a.map(function(t){return formatProperty(e,r,n,s,t,u)}),e.seen.pop(),reduceToSingleString(d,c,p)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)hasOwnProperty(t,String(a))?o.push(formatProperty(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,t,r,n,i,!0))}),o}function formatProperty(e,t,r,n,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=isNull(r)?formatValue(e,l.value,null):formatValue(e,l.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),isUndefined(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function reduceToSingleString(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),s[e.getMonth()],t].join(" ")}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=/%[sdj%]/g;t.format=function(e){if(!isString(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(inspect(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])a+=isNull(s)||!isObject(s)?" "+s:" "+inspect(s);return a},t.deprecate=function(r,i){function deprecated(){if(!o){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}if(isUndefined(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var o=!1;return deprecated};var o,a={};t.debuglog=function(e){if(isUndefined(o)&&(o=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var r=n.pid;a[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else a[e]=function(){};return a[e]},t.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=isArray,t.isBoolean=isBoolean,t.isNull=isNull,t.isNullOrUndefined=isNullOrUndefined,t.isNumber=isNumber,t.isString=isString,t.isSymbol=isSymbol,t.isUndefined=isUndefined,t.isRegExp=isRegExp,t.isObject=isObject,t.isDate=isDate,t.isError=isError,t.isFunction=isFunction,t.isPrimitive=isPrimitive,t.isBuffer=r(142);var s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",timestamp(),t.format.apply(t,arguments))},t.inherits=r(143),t._extend=function(e,t){if(!t||!isObject(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(t,function(){return this}(),r(141))},function(e,t){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}function cleanUpNextTick(){s&&o&&(s=!1,o.length?a=o.concat(a):l=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(o=a,a=[];++l<t;)o&&o[l].run();l=-1,t=a.length}o=null,s=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var r,n,i=e.exports={};!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var o,a=[],s=!1,l=-1;i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){var n=r(140).inherits;e.exports=function(e,t){function Sha256(){this.init(),this._w=i,t.call(this,64,56)}function S(e,t){return e>>>t|e<<32-t}function R(e,t){return e>>>t}function Ch(e,t,r){return e&t^~e&r}function Maj(e,t,r){return e&t^e&r^t&r}function Sigma0256(e){return S(e,2)^S(e,13)^S(e,22)}function Sigma1256(e){return S(e,6)^S(e,11)^S(e,25)}function Gamma0256(e){return S(e,7)^S(e,18)^R(e,3)}function Gamma1256(e){return S(e,17)^S(e,19)^R(e,10)}var r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=new Array(64);return n(Sha256,t),Sha256.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},Sha256.prototype._update=function(e){var t,n,i,o,a,s,l,c,u,p,h=this._w;t=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,s=0|this._f,l=0|this._g,c=0|this._h;for(var d=0;d<64;d++){var f=h[d]=d<16?e.readInt32BE(4*d):Gamma1256(h[d-2])+h[d-7]+Gamma0256(h[d-15])+h[d-16];u=c+Sigma1256(a)+Ch(a,s,l)+r[d]+f,p=Sigma0256(t)+Maj(t,n,i),c=l,l=s,s=a,a=o+u,o=i,i=n,n=t,t=u+p}this._a=t+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0,this._f=s+this._f|0,this._g=l+this._g|0,this._h=c+this._h|0},Sha256.prototype._hash=function(){
var t=new e(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},Sha256}},function(e,t,r){var n=r(140).inherits;e.exports=function(e,t){function Sha512(){this.init(),this._w=i,t.call(this,128,112)}function S(e,t,r){return e>>>r|t<<32-r}function Ch(e,t,r){return e&t^~e&r}function Maj(e,t,r){return e&t^e&r^t&r}var r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],i=new Array(160);return n(Sha512,t),Sha512.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},Sha512.prototype._update=function(e){var t,n,i,o,a,s,l,c,u,p,h,d,f,m,g,y,v=this._w;t=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,s=0|this._f,l=0|this._g,c=0|this._h,u=0|this._al,p=0|this._bl,h=0|this._cl,d=0|this._dl,f=0|this._el,m=0|this._fl,g=0|this._gl,y=0|this._hl;for(var b=0;b<80;b++){var _,w,x=2*b;if(b<16)_=v[x]=e.readInt32BE(4*x),w=v[x+1]=e.readInt32BE(4*x+4);else{var C=v[x-30],k=v[x-30+1],E=S(C,k,1)^S(C,k,8)^C>>>7,A=S(k,C,1)^S(k,C,8)^S(k,C,7);C=v[x-4],k=v[x-4+1];var P=S(C,k,19)^S(k,C,29)^C>>>6,T=S(k,C,19)^S(C,k,29)^S(k,C,6),M=v[x-14],I=v[x-14+1],O=v[x-32],R=v[x-32+1];w=A+I,_=E+M+(w>>>0<A>>>0?1:0),w+=T,_=_+P+(w>>>0<T>>>0?1:0),w+=R,_=_+O+(w>>>0<R>>>0?1:0),v[x]=_,v[x+1]=w}var L=Maj(t,n,i),N=Maj(u,p,h),D=S(t,u,28)^S(u,t,2)^S(u,t,7),B=S(u,t,28)^S(t,u,2)^S(t,u,7),V=S(a,f,14)^S(a,f,18)^S(f,a,9),F=S(f,a,14)^S(f,a,18)^S(a,f,9),j=r[x],U=r[x+1],z=Ch(a,s,l),W=Ch(f,m,g),H=y+F,q=c+V+(H>>>0<y>>>0?1:0);H+=W,q=q+z+(H>>>0<W>>>0?1:0),H+=U,q=q+j+(H>>>0<U>>>0?1:0),H+=w,q=q+_+(H>>>0<w>>>0?1:0);var G=B+N,K=D+L+(G>>>0<B>>>0?1:0);c=l,y=g,l=s,g=m,s=a,m=f,f=d+H|0,a=o+q+(f>>>0<d>>>0?1:0)|0,o=i,d=h,i=n,h=p,n=t,p=u,u=H+G|0,t=q+K+(u>>>0<H>>>0?1:0)|0}this._al=this._al+u|0,this._bl=this._bl+p|0,this._cl=this._cl+h|0,this._dl=this._dl+d|0,this._el=this._el+f|0,this._fl=this._fl+m|0,this._gl=this._gl+g|0,this._hl=this._hl+y|0,this._a=this._a+t+(this._al>>>0<u>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+i+(this._cl>>>0<h>>>0?1:0)|0,this._d=this._d+o+(this._dl>>>0<d>>>0?1:0)|0,this._e=this._e+a+(this._el>>>0<f>>>0?1:0)|0,this._f=this._f+s+(this._fl>>>0<m>>>0?1:0)|0,this._g=this._g+l+(this._gl>>>0<g>>>0?1:0)|0,this._h=this._h+c+(this._hl>>>0<y>>>0?1:0)|0},Sha512.prototype._hash=function(){function writeInt64BE(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}var t=new e(64);return writeInt64BE(this._a,this._al,0),writeInt64BE(this._b,this._bl,8),writeInt64BE(this._c,this._cl,16),writeInt64BE(this._d,this._dl,24),writeInt64BE(this._e,this._el,32),writeInt64BE(this._f,this._fl,40),writeInt64BE(this._g,this._gl,48),writeInt64BE(this._h,this._hl,56),t},Sha512}},function(e,t,r){function core_md5(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=r,l=n,c=i,u=o;r=md5_ff(r,n,i,o,e[a+0],7,-680876936),o=md5_ff(o,r,n,i,e[a+1],12,-389564586),i=md5_ff(i,o,r,n,e[a+2],17,606105819),n=md5_ff(n,i,o,r,e[a+3],22,-1044525330),r=md5_ff(r,n,i,o,e[a+4],7,-176418897),o=md5_ff(o,r,n,i,e[a+5],12,1200080426),i=md5_ff(i,o,r,n,e[a+6],17,-1473231341),n=md5_ff(n,i,o,r,e[a+7],22,-45705983),r=md5_ff(r,n,i,o,e[a+8],7,1770035416),o=md5_ff(o,r,n,i,e[a+9],12,-1958414417),i=md5_ff(i,o,r,n,e[a+10],17,-42063),n=md5_ff(n,i,o,r,e[a+11],22,-1990404162),r=md5_ff(r,n,i,o,e[a+12],7,1804603682),o=md5_ff(o,r,n,i,e[a+13],12,-40341101),i=md5_ff(i,o,r,n,e[a+14],17,-1502002290),n=md5_ff(n,i,o,r,e[a+15],22,1236535329),r=md5_gg(r,n,i,o,e[a+1],5,-165796510),o=md5_gg(o,r,n,i,e[a+6],9,-1069501632),i=md5_gg(i,o,r,n,e[a+11],14,643717713),n=md5_gg(n,i,o,r,e[a+0],20,-373897302),r=md5_gg(r,n,i,o,e[a+5],5,-701558691),o=md5_gg(o,r,n,i,e[a+10],9,38016083),i=md5_gg(i,o,r,n,e[a+15],14,-660478335),n=md5_gg(n,i,o,r,e[a+4],20,-405537848),r=md5_gg(r,n,i,o,e[a+9],5,568446438),o=md5_gg(o,r,n,i,e[a+14],9,-1019803690),i=md5_gg(i,o,r,n,e[a+3],14,-187363961),n=md5_gg(n,i,o,r,e[a+8],20,1163531501),r=md5_gg(r,n,i,o,e[a+13],5,-1444681467),o=md5_gg(o,r,n,i,e[a+2],9,-51403784),i=md5_gg(i,o,r,n,e[a+7],14,1735328473),n=md5_gg(n,i,o,r,e[a+12],20,-1926607734),r=md5_hh(r,n,i,o,e[a+5],4,-378558),o=md5_hh(o,r,n,i,e[a+8],11,-2022574463),i=md5_hh(i,o,r,n,e[a+11],16,1839030562),n=md5_hh(n,i,o,r,e[a+14],23,-35309556),r=md5_hh(r,n,i,o,e[a+1],4,-1530992060),o=md5_hh(o,r,n,i,e[a+4],11,1272893353),i=md5_hh(i,o,r,n,e[a+7],16,-155497632),n=md5_hh(n,i,o,r,e[a+10],23,-1094730640),r=md5_hh(r,n,i,o,e[a+13],4,681279174),o=md5_hh(o,r,n,i,e[a+0],11,-358537222),i=md5_hh(i,o,r,n,e[a+3],16,-722521979),n=md5_hh(n,i,o,r,e[a+6],23,76029189),r=md5_hh(r,n,i,o,e[a+9],4,-640364487),o=md5_hh(o,r,n,i,e[a+12],11,-421815835),i=md5_hh(i,o,r,n,e[a+15],16,530742520),n=md5_hh(n,i,o,r,e[a+2],23,-995338651),r=md5_ii(r,n,i,o,e[a+0],6,-198630844),o=md5_ii(o,r,n,i,e[a+7],10,1126891415),i=md5_ii(i,o,r,n,e[a+14],15,-1416354905),n=md5_ii(n,i,o,r,e[a+5],21,-57434055),r=md5_ii(r,n,i,o,e[a+12],6,1700485571),o=md5_ii(o,r,n,i,e[a+3],10,-1894986606),i=md5_ii(i,o,r,n,e[a+10],15,-1051523),n=md5_ii(n,i,o,r,e[a+1],21,-2054922799),r=md5_ii(r,n,i,o,e[a+8],6,1873313359),o=md5_ii(o,r,n,i,e[a+15],10,-30611744),i=md5_ii(i,o,r,n,e[a+6],15,-1560198380),n=md5_ii(n,i,o,r,e[a+13],21,1309151649),r=md5_ii(r,n,i,o,e[a+4],6,-145523070),o=md5_ii(o,r,n,i,e[a+11],10,-1120210379),i=md5_ii(i,o,r,n,e[a+2],15,718787259),n=md5_ii(n,i,o,r,e[a+9],21,-343485551),r=safe_add(r,s),n=safe_add(n,l),i=safe_add(i,c),o=safe_add(o,u)}return Array(r,n,i,o)}function md5_cmn(e,t,r,n,i,o){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(n,o)),i),r)}function md5_ff(e,t,r,n,i,o,a){return md5_cmn(t&r|~t&n,e,t,i,o,a)}function md5_gg(e,t,r,n,i,o,a){return md5_cmn(t&n|r&~n,e,t,i,o,a)}function md5_hh(e,t,r,n,i,o,a){return md5_cmn(t^r^n,e,t,i,o,a)}function md5_ii(e,t,r,n,i,o,a){return md5_cmn(r^(t|~n),e,t,i,o,a)}function safe_add(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}function bit_rol(e,t){return e<<t|e>>>32-t}var n=r(147);e.exports=function(e){return n.hash(e,core_md5,16)}},function(e,t,r){(function(t){function toArray(e,i){if(e.length%r!==0){var o=e.length+(r-e.length%r);e=t.concat([e,n],o)}for(var a=[],s=i?e.readInt32BE:e.readInt32LE,l=0;l<e.length;l+=r)a.push(s.call(e,l));return a}function toBuffer(e,r,n){for(var i=new t(r),o=n?i.writeInt32BE:i.writeInt32LE,a=0;a<e.length;a++)o.call(i,e[a],4*a,!0);return i}function hash(e,r,n,o){t.isBuffer(e)||(e=new t(e));var a=r(toArray(e,o),e.length*i);return toBuffer(a,n,o)}var r=4,n=new t(r);n.fill(0);var i=8;e.exports={hash:hash}}).call(t,r(83).Buffer)},function(e,t,r){(function(t){function f1(e,t,r){return e^t^r}function f2(e,t,r){return e&t|~e&r}function f3(e,t,r){return(e|~t)^r}function f4(e,t,r){return e&r|t&~r}function f5(e,t,r){return e^(t|~r)}function rotl(e,t){return e<<t|e>>>32-t}function ripemd160(e){var r=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var n=l(e),i=8*e.length,o=8*e.length;n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var a=0;a<n.length;a+=16)u(r,n,a);for(var a=0;a<5;a++){var s=r[a];r[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var p=c(r);return new t(p)}e.exports=ripemd160;var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],i=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],o=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],a=[0,1518500249,1859775393,2400959708,2840853838],s=[1352829926,1548603684,1836072691,2053994217,0],l=function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},c=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},u=function(e,t,l){for(var c=0;c<16;c++){var u=l+c,p=t[u];t[u]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}var h,d,f,m,g,y,v,b,_,w;y=h=e[0],v=d=e[1],b=f=e[2],_=m=e[3],w=g=e[4];for(var x,c=0;c<80;c+=1)x=h+t[l+r[c]]|0,x+=c<16?f1(d,f,m)+a[0]:c<32?f2(d,f,m)+a[1]:c<48?f3(d,f,m)+a[2]:c<64?f4(d,f,m)+a[3]:f5(d,f,m)+a[4],x=0|x,x=rotl(x,i[c]),x=x+g|0,h=g,g=m,m=rotl(f,10),f=d,d=x,x=y+t[l+n[c]]|0,x+=c<16?f5(v,b,_)+s[0]:c<32?f4(v,b,_)+s[1]:c<48?f3(v,b,_)+s[2]:c<64?f2(v,b,_)+s[3]:f1(v,b,_)+s[4],x=0|x,x=rotl(x,o[c]),x=x+w|0,y=w,w=_,_=rotl(b,10),b=v,v=x;x=e[1]+f+_|0,e[1]=e[2]+m+w|0,e[2]=e[3]+g+y|0,e[3]=e[4]+h+v|0,e[4]=e[0]+d+b|0,e[0]=x}}).call(t,r(83).Buffer)},function(e,t,r){(function(t){function Hmac(e,r){if(!(this instanceof Hmac))return new Hmac(e,r);this._opad=s,this._alg=e;var o="sha512"===e?128:64;r=this._key=t.isBuffer(r)?r:new t(r),r.length>o?r=n(e).update(r).digest():r.length<o&&(r=t.concat([r,i],o));for(var a=this._ipad=new t(o),s=this._opad=new t(o),l=0;l<o;l++)a[l]=54^r[l],s[l]=92^r[l];this._hash=n(e).update(a)}var n=r(136),i=new t(128);i.fill(0),e.exports=Hmac,Hmac.prototype.update=function(e,t){return this._hash.update(e,t),this},Hmac.prototype.digest=function(e){var t=this._hash.digest();return n(this._alg).update(this._opad).update(t).digest(e)}}).call(t,r(83).Buffer)},function(e,t,r){var n=r(151);e.exports=function(e,t){t=t||{};var r=n(e);return t.pbkdf2=r.pbkdf2,t.pbkdf2Sync=r.pbkdf2Sync,t}},function(e,t,r){(function(t){e.exports=function(e){function pbkdf2(e,t,r,n,i,o){if("function"==typeof i&&(o=i,i=void 0),"function"!=typeof o)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=pbkdf2Sync(e,t,r,n,i)}catch(s){return o(s)}o(void 0,a)})}function pbkdf2Sync(r,n,i,o,a){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0)throw new TypeError("Bad key length");a=a||"sha1",t.isBuffer(r)||(r=new t(r)),t.isBuffer(n)||(n=new t(n));var s,l,c,u=1,p=new t(o),h=new t(n.length+4);n.copy(h,0,0,n.length);for(var d=1;d<=u;d++){h.writeUInt32BE(d,n.length);var f=e.createHmac(a,r).update(h).digest();if(!s&&(s=f.length,c=new t(s),u=Math.ceil(o/s),l=o-(u-1)*s,o>(Math.pow(2,32)-1)*s))throw new TypeError("keylen exceeds maximum length");f.copy(c,0,0,s);for(var m=1;m<i;m++){f=e.createHmac(a,r).update(f).digest();for(var g=0;g<s;g++)c[g]^=f[g]}var y=(d-1)*s,v=d==u?l:s;c.copy(p,y,0,v)}return p}return{pbkdf2:pbkdf2,pbkdf2Sync:pbkdf2Sync}}}).call(t,r(83).Buffer)},function(e,t,r){function lookup(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i=n(e),l=i.source,c=i.id,u=i.path,p=s[c]&&u in s[c].nsps,h=t.forceNew||t["force new connection"]||!1===t.multiplex||p;return h?(a("ignoring socket cache for %s",l),r=o(l,t)):(s[c]||(a("new io instance for %s",l),s[c]=o(l,t)),r=s[c]),r.socket(i.path)}var n=r(153),i=r(158),o=r(166),a=r(155)("socket.io-client");e.exports=t=lookup;var s=t.managers={};t.protocol=i.protocol,t.connect=lookup,t.Manager=r(166),t.Socket=r(194)},function(e,t,r){(function(t){function url(e,r){var o=e,r=r||t.location;null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!=typeof r?r.protocol+"//"+e:"https://"+e),i("parse %s",e),o=n(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var a=o.host.indexOf(":")!==-1,s=a?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port,o.href=o.protocol+"://"+s+(r&&r.port==o.port?"":":"+o.port),o}var n=r(154),i=r(155)("socket.io-client:url");e.exports=url}).call(t,function(){return this}())},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");i!=-1&&o!=-1&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=r.exec(e||""),s={},l=14;l--;)s[n[l]]=a[l]||"";return i!=-1&&o!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t,r){function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var e=arguments,r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n),e}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(r){}}function load(){var e;try{e=t.storage.debug}catch(r){}return e}function localstorage(){try{return window.localStorage}catch(e){}}t=e.exports=r(156),t.log=log,t.formatArgs=formatArgs,t.save=save,t.load=load,t.useColors=useColors,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(load())},function(e,t,r){function selectColor(){return t.colors[i++%t.colors.length]}function debug(e){function disabled(){}function enabled(){var e=enabled,r=+new Date,i=r-(n||r);e.diff=i,e.prev=n,e.curr=r,n=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var o=Array.prototype.slice.call(arguments);o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var a=0;o[0]=o[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;a++;var i=t.formatters[n];if("function"==typeof i){var s=o[a];r=i.call(e,s),o.splice(a,1),a--}return r}),"function"==typeof t.formatArgs&&(o=t.formatArgs.apply(e,o));var s=enabled.log||t.log||console.log.bind(console);s.apply(e,o)}disabled.enabled=!1,enabled.enabled=!0;var r=t.enabled(e)?enabled:disabled;return r.namespace=e,r}function enable(e){t.save(e);for(var r=(e||"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&(e=r[i].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function disable(){t.enable("")}function enabled(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=debug,t.coerce=coerce,t.disable=disable,t.enable=enable,t.enabled=enabled,t.humanize=r(157),t.names=[],t.skips=[],t.formatters={};var n,i=0},function(e,t){function parse(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]),l=(t[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s}}}}function short(e){return e>=o?Math.round(e/o)+"d":e>=i?Math.round(e/i)+"h":e>=n?Math.round(e/n)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}function long(e){return plural(e,o,"day")||plural(e,i,"hour")||plural(e,n,"minute")||plural(e,r,"second")||e+" ms"}function plural(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var r=1e3,n=60*r,i=60*n,o=24*i,a=365.25*o;e.exports=function(e,t){return t=t||{},"string"==typeof e?parse(e):t.long?long(e):short(e)}},function(e,t,r){function Encoder(){}function encodeAsString(e){var r="",o=!1;return r+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(r+=e.attachments,r+="-"),e.nsp&&"/"!=e.nsp&&(o=!0,r+=e.nsp),null!=e.id&&(o&&(r+=",",o=!1),r+=e.id),null!=e.data&&(o&&(r+=","),r+=i.stringify(e.data)),n("encoded %j as %s",e,r),r}function encodeAsBinary(e,t){function writeEncoding(e){var r=a.deconstructPacket(e),n=encodeAsString(r.packet),i=r.buffers;i.unshift(n),t(i)}a.removeBlobs(e,writeEncoding)}function Decoder(){this.reconstructor=null}function decodeString(e){var r={},o=0;if(r.type=Number(e.charAt(0)),null==t.types[r.type])return error();if(t.BINARY_EVENT==r.type||t.BINARY_ACK==r.type){for(var a="";"-"!=e.charAt(++o)&&(a+=e.charAt(o),o!=e.length););if(a!=Number(a)||"-"!=e.charAt(o))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"==e.charAt(o+1))for(r.nsp="";++o;){var s=e.charAt(o);if(","==s)break;if(r.nsp+=s,o==e.length)break}else r.nsp="/";var l=e.charAt(o+1);if(""!==l&&Number(l)==l){for(r.id="";++o;){var s=e.charAt(o);if(null==s||Number(s)!=s){--o;break}if(r.id+=e.charAt(o),o==e.length)break}r.id=Number(r.id)}if(e.charAt(++o))try{r.data=i.parse(e.substr(o))}catch(c){return error()}return n("decoded %s as %j",e,r),r}function BinaryReconstructor(e){this.reconPack=e,this.buffers=[]}function error(e){return{type:t.ERROR,data:"parser error"}}var n=r(155)("socket.io-parser"),i=r(159),o=(r(162),r(163)),a=r(164),s=r(165);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=Encoder,t.Decoder=Decoder,Encoder.prototype.encode=function(e,r){if(n("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)encodeAsBinary(e,r);else{var i=encodeAsString(e);r([i])}},o(Decoder.prototype),Decoder.prototype.add=function(e){var r;if("string"==typeof e)r=decodeString(e),t.BINARY_EVENT==r.type||t.BINARY_ACK==r.type?(this.reconstructor=new BinaryReconstructor(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,this.emit("decoded",r))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,r){var n;(function(e,i){(function(){function runInContext(e,t){function has(e){if(has[e]!==f)return has[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=has("json-stringify")&&has("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,c="function"==typeof l&&y;if(c){(a=function(){return 1}).toJSON=a;try{c="0"===l(0)&&"0"===l(new r)&&'""'==l(new n)&&l(g)===f&&l(f)===f&&l()===f&&"1"===l(a)&&"[1]"==l([a])&&"[null]"==l([f])&&"null"==l(null)&&"[null,null,null]"==l([f,g,null])&&l({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===l(null,a)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new o((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==l(new o(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new o((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==l(new o((-1)))}catch(u){c=!1}}i=c}if("json-parse"==e){var p=t.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){a=p(s);var h=5==a.a.length&&1===a.a[0];if(h){try{h=!p('"\t"')}catch(u){}if(h)try{h=1!==p("01")}catch(u){}if(h)try{h=1!==p("1.")}catch(u){}}}}catch(u){h=!1}i=h}}return has[e]=!!i}e||(e=l.Object()),t||(t=l.Object());var r=e.Number||l.Number,n=e.String||l.String,i=e.Object||l.Object,o=e.Date||l.Date,s=e.SyntaxError||l.SyntaxError,c=e.TypeError||l.TypeError,u=e.Math||l.Math,p=e.JSON||l.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var h,d,f,m=i.prototype,g=m.toString,y=new o((-0xc782b5b800cec));try{y=y.getUTCFullYear()==-109252&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(v){}if(!has("json")){var b="[object Function]",_="[object Date]",w="[object Number]",x="[object String]",S="[object Array]",C="[object Boolean]",k=has("bug-string-char-index");if(!y)var E=u.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],P=function(e,t){return A[t]+365*(e-1970)+E((e-1969+(t=+(t>1)))/4)-E((e-1901+t)/100)+E((e-1601+t)/400)};if((h=m.hasOwnProperty)||(h=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=g?h=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,h=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,h.call(this,e)}),d=function(e,t){var r,n,i,o=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(i in n)h.call(n,i)&&o++;return r=n=null,o?d=2==o?function(e,t){var r,n={},i=g.call(e)==b;for(r in e)i&&"prototype"==r||h.call(n,r)||!(n[r]=1)||!h.call(e,r)||t(r)}:function(e,t){var r,n,i=g.call(e)==b;for(r in e)i&&"prototype"==r||!h.call(e,r)||(n="constructor"===r)||t(r);(n||h.call(e,r="constructor"))&&t(r)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],d=function(e,t){var r,i,o=g.call(e)==b,s=!o&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(r in e)o&&"prototype"==r||!s.call(e,r)||t(r);for(i=n.length;r=n[--i];s.call(e,r)&&t(r));}),d(e,t)},!has("json-stringify")){var T={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},M="000000",I=function(e,t){return(M+(t||0)).slice(-e)},O="\\u00",R=function(e){for(var t='"',r=0,n=e.length,i=!k||n>10,o=i&&(k?e.split(""):e);r<n;r++){var a=e.charCodeAt(r);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=T[a];break;default:if(a<32){t+=O+I(2,a.toString(16));break}t+=i?o[r]:e.charAt(r)}}return t+'"'},L=function(e,t,r,n,i,o,a){var s,l,u,p,m,y,v,b,k,A,T,M,O,N,D,B;try{s=t[e]}catch(V){}if("object"==typeof s&&s)if(l=g.call(s),l!=_||h.call(s,"toJSON"))"function"==typeof s.toJSON&&(l!=w&&l!=x&&l!=S||h.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(P){for(m=E(s/864e5),u=E(m/365.2425)+1970-1;P(u+1,0)<=m;u++);for(p=E((m-P(u,0))/30.42);P(u,p+1)<=m;p++);m=1+m-P(u,p),y=(s%864e5+864e5)%864e5,v=E(y/36e5)%24,b=E(y/6e4)%60,k=E(y/1e3)%60,A=y%1e3}else u=s.getUTCFullYear(),p=s.getUTCMonth(),m=s.getUTCDate(),v=s.getUTCHours(),b=s.getUTCMinutes(),k=s.getUTCSeconds(),A=s.getUTCMilliseconds();s=(u<=0||u>=1e4?(u<0?"-":"+")+I(6,u<0?-u:u):I(4,u))+"-"+I(2,p+1)+"-"+I(2,m)+"T"+I(2,v)+":"+I(2,b)+":"+I(2,k)+"."+I(3,A)+"Z"}else s=null;if(r&&(s=r.call(t,e,s)),null===s)return"null";if(l=g.call(s),l==C)return""+s;if(l==w)return s>-1/0&&s<1/0?""+s:"null";if(l==x)return R(""+s);if("object"==typeof s){for(N=a.length;N--;)if(a[N]===s)throw c();if(a.push(s),T=[],D=o,o+=i,l==S){for(O=0,N=s.length;O<N;O++)M=L(O,s,r,n,i,o,a),T.push(M===f?"null":M);B=T.length?i?"[\n"+o+T.join(",\n"+o)+"\n"+D+"]":"["+T.join(",")+"]":"[]"}else d(n||s,function(e){var t=L(e,s,r,n,i,o,a);t!==f&&T.push(R(e)+":"+(i?" ":"")+t)}),B=T.length?i?"{\n"+o+T.join(",\n"+o)+"\n"+D+"}":"{"+T.join(",")+"}":"{}";return a.pop(),B}};t.stringify=function(e,t,r){var n,i,o,s;if(a[typeof t]&&t)if((s=g.call(t))==b)i=t;else if(s==S){o={};for(var l,c=0,u=t.length;c<u;l=t[c++],s=g.call(l),(s==x||s==w)&&(o[l]=1));}if(r)if((s=g.call(r))==w){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else s==x&&(n=r.length<=10?r:r.slice(0,10));return L("",(l={},l[""]=e,l),i,o,n,"",[])}}if(!has("json-parse")){var N,D,B=n.fromCharCode,V={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw N=D=null,s()},j=function(){for(var e,t,r,n,i,o=D,a=o.length;N<a;)switch(i=o.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=k?o.charAt(N):o[N],N++,e;case 34:for(e="@",N++;N<a;)if(i=o.charCodeAt(N),i<32)F();else if(92==i)switch(i=o.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=V[i],N++;break;case 117:for(t=++N,r=N+4;N<r;N++)i=o.charCodeAt(N),i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||F();e+=B("0x"+o.slice(t,N));break;default:F()}else{if(34==i)break;for(i=o.charCodeAt(N),t=N;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++N);e+=o.slice(t,N)}if(34==o.charCodeAt(N))return N++,e;F();default:if(t=N,45==i&&(n=!0,i=o.charCodeAt(++N)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(N+1),i>=48&&i<=57)&&F(),n=!1;N<a&&(i=o.charCodeAt(N),i>=48&&i<=57);N++);if(46==o.charCodeAt(N)){for(r=++N;r<a&&(i=o.charCodeAt(r),i>=48&&i<=57);r++);r==N&&F(),N=r}if(i=o.charCodeAt(N),101==i||69==i){for(i=o.charCodeAt(++N),43!=i&&45!=i||N++,r=N;r<a&&(i=o.charCodeAt(r),i>=48&&i<=57);r++);r==N&&F(),N=r}return+o.slice(t,N)}if(n&&F(),"true"==o.slice(N,N+4))return N+=4,!0;if("false"==o.slice(N,N+5))return N+=5,!1;if("null"==o.slice(N,N+4))return N+=4,null;F()}return"$"},U=function(e){var t,r;if("$"==e&&F(),"string"==typeof e){if("@"==(k?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=j(),"]"!=e;r||(r=!0))r&&(","==e?(e=j(),"]"==e&&F()):F()),","==e&&F(),t.push(U(e));return t}if("{"==e){for(t={};e=j(),"}"!=e;r||(r=!0))r&&(","==e?(e=j(),"}"==e&&F()):F()),","!=e&&"string"==typeof e&&"@"==(k?e.charAt(0):e[0])&&":"==j()||F(),t[e.slice(1)]=U(j());return t}F()}return e},z=function(e,t,r){var n=W(e,t,r);n===f?delete e[t]:e[t]=n},W=function(e,t,r){var n,i=e[t];if("object"==typeof i&&i)if(g.call(i)==S)for(n=i.length;n--;)z(i,n,r);else d(i,function(e){z(i,e,r)});return r.call(e,t,i)};t.parse=function(e,t){var r,n;return N=0,D=""+e,r=U(j()),"$"!=j()&&F(),N=D=null,t&&g.call(t)==b?W((n={},n[""]=r,n),"",t):r}}}return t.runInContext=runInContext,t}var o=r(161),a={"function":!0,object:!0},s=a[typeof t]&&t&&!t.nodeType&&t,l=a[typeof window]&&window||this,c=s&&a[typeof e]&&e&&!e.nodeType&&"object"==typeof i&&i;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(l=c),s&&!o)runInContext(l,s);else{var u=l.JSON,p=l.JSON3,h=!1,d=runInContext(l,l.JSON3={noConflict:function(){return h||(h=!0,l.JSON=u,l.JSON3=p,u=p=null),d}});l.JSON={parse:d.parse,stringify:d.stringify}}o&&(n=function(){return d}.call(t,r,t,e),!(void 0!==n&&(e.exports=n)))}).call(this)}).call(t,r(160)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){function Emitter(e){if(e)return mixin(e)}function mixin(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}e.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function on(){r.off(e,on),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},on.fn=t,this.on(e,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this},Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){(function(e){var n=r(162),i=r(165);t.deconstructPacket=function(e){function _deconstructPacket(e){if(!e)return e;if(i(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(n(e)){for(var o=new Array(e.length),a=0;a<e.length;a++)o[a]=_deconstructPacket(e[a]);return o}if("object"==typeof e&&!(e instanceof Date)){var o={};for(var s in e)o[s]=_deconstructPacket(e[s]);return o}return e}var t=[],r=e.data,o=e;return o.data=_deconstructPacket(r),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){function _reconstructPacket(e){if(e&&e._placeholder){var r=t[e.num];return r}if(n(e)){for(var i=0;i<e.length;i++)e[i]=_reconstructPacket(e[i]);return e}if(e&&"object"==typeof e){for(var o in e)e[o]=_reconstructPacket(e[o]);return e}return e}return e.data=_reconstructPacket(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,r){function _removeBlobs(t,s,l){
if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){o++;var c=new FileReader;c.onload=function(){l?l[s]=this.result:a=this.result,--o||r(a)},c.readAsArrayBuffer(t)}else if(n(t))for(var u=0;u<t.length;u++)_removeBlobs(t[u],u,t);else if(t&&"object"==typeof t&&!i(t))for(var p in t)_removeBlobs(t[p],p,t)}var o=0,a=t;_removeBlobs(a),o||r(a)}}).call(t,function(){return this}())},function(e,t){(function(t){function isBuf(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=isBuf}).call(t,function(){return this}())},function(e,t,r){function Manager(e,t){return this instanceof Manager?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new Manager(e,t)}var n=r(167),i=r(194),o=r(195),a=r(158),s=r(197),l=r(198),c=r(155)("socket.io-client:manager"),u=r(192),p=r(201),h=Object.prototype.hasOwnProperty;e.exports=Manager,Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},o(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=n(this.uri,this.opts);var t=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i=s(t,"open",function(){r.onopen(),e&&e()}),o=s(t,"error",function(t){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;c("connect attempt will timeout after %d",a);var l=setTimeout(function(){c("connect attempt timed out after %d",a),i.destroy(),t.close(),t.emit("error","timeout"),r.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(i),this.subs.push(o),this},Manager.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",l(this,"ondata"))),this.subs.push(s(e,"ping",l(this,"onping"))),this.subs.push(s(e,"pong",l(this,"onpong"))),this.subs.push(s(e,"error",l(this,"onerror"))),this.subs.push(s(e,"close",l(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",l(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e){function onConnecting(){~u(r.connecting,t)||r.connecting.push(t)}var t=this.nsps[e];if(!t){t=new i(this,e),this.nsps[e]=t;var r=this;t.on("connecting",onConnecting),t.on("connect",function(){t.id=r.engine.id}),this.autoConnect&&onConnecting()}return t},Manager.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},Manager.prototype.packet=function(e){c("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Manager.prototype.cleanup=function(){c("cleanup");for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){e.exports=r(168)},function(e,t,r){e.exports=r(169),e.exports.parser=r(176)},function(e,t,r){(function(t){function Socket(e,r){if(!(this instanceof Socket))return new Socket(e,r);r=r||{},e&&"object"==typeof e&&(r=e,e=null),e?(e=l(e),r.hostname=e.host,r.secure="https"==e.protocol||"wss"==e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=l(r.host).host),this.secure=null!=r.secure?r.secure:t.location&&"https:"==location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(t.location?location.hostname:"localhost"),this.port=r.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized||r.rejectUnauthorized;var n="object"==typeof t&&t;n.global===n&&r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),this.open()}function clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var n=r(170),i=r(185),o=r(155)("engine.io-client:socket"),a=r(192),s=r(176),l=r(154),c=r(193),u=r(186);e.exports=Socket,Socket.priorWebsocketSuccess=!1,i(Socket.prototype),Socket.protocol=s.protocol,Socket.Socket=Socket,Socket.Transport=r(175),Socket.transports=r(170),Socket.parser=r(176),Socket.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=clone(this.query);t.EIO=s.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new n[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return r},Socket.prototype.open=function(){var e;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},Socket.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},Socket.prototype.probe=function(e){function onTransportOpen(){if(n.onlyBinaryUpgrades){var i=!this.supportsBinary&&n.transport.supportsBinary;r=r||i}r||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!r)if("pong"==i.type&&"probe"==i.data){if(o('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;Socket.priorWebsocketSuccess="websocket"==t.name,o('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){r||"closed"!=n.readyState&&(o("changing transport and sending upgrade packet"),cleanup(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())})}else{o('probe transport "%s" failed',e);var a=new Error("probe error");a.transport=t.name,n.emit("upgradeError",a)}}))}function freezeTransport(){r||(r=!0,cleanup(),t.close(),t=null)}function onerror(r){var i=new Error("probe error: "+r);i.transport=t.name,freezeTransport(),o('probe transport "%s" failed because of error: %s',e,r),n.emit("upgradeError",i)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(e){t&&e.name!=t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),freezeTransport())}function cleanup(){t.removeListener("open",onTransportOpen),t.removeListener("error",onerror),t.removeListener("close",onTransportClose),n.removeListener("close",onclose),n.removeListener("upgrading",onupgrade)}o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;Socket.priorWebsocketSuccess=!1,t.once("open",onTransportOpen),t.once("error",onerror),t.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),t.open()},Socket.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},Socket.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(c(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},Socket.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},Socket.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!=this.readyState&&"closed"!=this.readyState){r=r||{},r.compress=!1!==r.compress;var i={type:e,data:t,options:r};this.emit("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}},Socket.prototype.close=function(){function close(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function cleanupAndClose(){e.removeListener("upgrade",cleanupAndClose),e.removeListener("upgradeError",cleanupAndClose),close()}function waitForUpgrade(){e.once("upgrade",cleanupAndClose),e.once("upgradeError",cleanupAndClose)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?waitForUpgrade():close()}):this.upgrading?waitForUpgrade():close()}return this},Socket.prototype.onError=function(e){o("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},Socket.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){o('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),r.writeBuffer=[],r.prevBufferLen=0}},Socket.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~a(this.transports,e[r])&&t.push(e[r]);return t}}).call(t,function(){return this}())},function(e,t,r){(function(e){function polling(t){var r,a=!1,s=!1,l=!1!==t.jsonp;if(e.location){var c="https:"==location.protocol,u=location.port;u||(u=c?443:80),a=t.hostname!=location.hostname||u!=t.port,s=t.secure!=c}if(t.xdomain=a,t.xscheme=s,r=new n(t),"open"in r&&!t.forceJSONP)return new i(t);if(!l)throw new Error("JSONP disabled");return new o(t)}var n=r(171),i=r(173),o=r(189),a=r(190);t.polling=polling,t.websocket=a}).call(t,function(){return this}())},function(e,t,r){var n=r(172);e.exports=function(e){var t=e.xdomain,r=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(o){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(r){e.exports=!1}},function(e,t,r){(function(t){function empty(){}function XHR(e){if(i.call(this,e),t.location){var r="https:"==location.protocol,n=location.port;n||(n=r?443:80),this.xd=e.hostname!=t.location.hostname||n!=e.port,this.xs=e.secure!=r}else this.extraHeaders=e.extraHeaders}function Request(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function unloadHandler(){for(var e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}var n=r(171),i=r(174),o=r(185),a=r(187),s=r(155)("engine.io-client:polling-xhr");e.exports=XHR,e.exports.Request=Request,a(XHR,i),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new Request(e)},XHR.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},XHR.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},o(Request.prototype),Request.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new n(e),i=this;try{s("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}}catch(a){}if(this.supportsBinary&&(r.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}"withCredentials"in r&&(r.withCredentials=!0),this.hasXDR()?(r.onload=function(){i.onLoad()},r.onerror=function(){i.onError(r.responseText)}):r.onreadystatechange=function(){4==r.readyState&&(200==r.status||1223==r.status?i.onLoad():setTimeout(function(){i.onError(r.status)},0))},s("xhr data %s",this.data),r.send(this.data)}catch(a){return void setTimeout(function(){i.onError(a)},0)}t.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},Request.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},Request.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,e)try{this.xhr.abort()}catch(r){}t.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(r){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(r){for(var n=new Uint8Array(this.xhr.response),i=[],o=0,a=n.length;o<a;o++)i.push(n[o]);e=String.fromCharCode.apply(null,i)}else e=this.xhr.responseText}catch(r){this.onError(r)}null!=e&&this.onData(e)},Request.prototype.hasXDR=function(){return"undefined"!=typeof t.XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},t.document&&(Request.requestsCount=0,Request.requests={},t.attachEvent?t.attachEvent("onunload",unloadHandler):t.addEventListener&&t.addEventListener("beforeunload",unloadHandler,!1))}).call(t,function(){return this}())},function(e,t,r){function Polling(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),n.call(this,e)}var n=r(175),i=r(186),o=r(176),a=r(187),s=r(188),l=r(155)("engine.io-client:polling");e.exports=Polling;var c=function(){var e=r(171),t=new e({xdomain:!1});return null!=t.responseType}();a(Polling,n),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(e){function pause(){l("paused"),t.readyState="paused",e()}var t=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(l("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){l("pre-pause polling complete"),--r||pause()})),this.writable||(l("we are currently writing - waiting to pause"),r++,this.once("drain",function(){l("pre-pause writing complete"),--r||pause()}))}else pause()},Polling.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(e){var t=this;l("polling got data %s",e);var r=function(e,r,n){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};o.decodePayload(e,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){function close(){l("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(l("transport open - closing"),close()):(l("transport not open - deferring close"),this.once("open",close))},Polling.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")},t=this;o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},Polling.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(r=":"+this.port),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(e,t,r){function Transport(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var n=r(176),i=r(185);e.exports=Transport,i(Transport.prototype),Transport.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},Transport.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},Transport.prototype.onPacket=function(e){this.emit("packet",e)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,r){(function(e){function encodeBase64Object(e,r){var n="b"+t.packets[e.type]+e.data.data;return r(n)}function encodeArrayBuffer(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=h[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return n(a.buffer)}function encodeBlobAsArrayBuffer(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var i=new FileReader;return i.onload=function(){e.data=i.result,t.encodePacket(e,r,!0,n)},i.readAsArrayBuffer(e.data)}function encodeBlob(e,r,n){if(!r)return t.encodeBase64Packet(e,n);if(p)return encodeBlobAsArrayBuffer(e,r,n);var i=new Uint8Array(1);i[0]=h[e.type];var o=new m([i.buffer,e.data]);return n(o)}function map(e,t,r){for(var n=new Array(e.length),i=s(e.length,r),o=function(e,r,i){t(r,function(t,r){n[e]=r,i(t,n)})},a=0;a<e.length;a++)o(a,e[a],i)}var n=r(177),i=r(178),o=r(180),a=r(181),s=r(182),l=r(183),c=navigator.userAgent.match(/Android/i),u=/PhantomJS/i.test(navigator.userAgent),p=c||u;t.protocol=3;var h=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=n(h),f={type:"error",data:"parser error"},m=r(184);t.encodePacket=function(t,r,n,i){"function"==typeof r&&(i=r,r=!1),"function"==typeof n&&(i=n,n=null);var o=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&o instanceof ArrayBuffer)return encodeArrayBuffer(t,r,i);if(m&&o instanceof e.Blob)return encodeBlob(t,r,i);if(o&&o.base64)return encodeBase64Object(t,i);var a=h[t.type];return void 0!==t.data&&(a+=n?l.encode(String(t.data)):String(t.data)),i(""+a)},t.encodeBase64Packet=function(r,n){var i="b"+t.packets[r.type];if(m&&r.data instanceof e.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(r.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(s){for(var l=new Uint8Array(r.data),c=new Array(l.length),u=0;u<l.length;u++)c[u]=l[u];a=String.fromCharCode.apply(null,c)}return i+=e.btoa(a),n(i)},t.decodePacket=function(e,r,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(n)try{e=l.decode(e)}catch(i){return f}var a=e.charAt(0);return Number(a)==a&&d[a]?e.length>1?{type:d[a],data:e.substring(1)}:{type:d[a]}:f}var s=new Uint8Array(e),a=s[0],c=o(e,1);return m&&"blob"===r&&(c=new m([c])),{type:d[a],data:c}},t.decodeBase64Packet=function(t,r){var n=d[t.charAt(0)];if(!e.ArrayBuffer)return{type:n,data:{base64:!0,data:t.substr(1)}};var i=a.decode(t.substr(1));return"blob"===r&&m&&(i=new m([i])),{type:n,data:i}},t.encodePayload=function(e,r,n){function setLengthHeader(e){return e.length+":"+e}function encodeOne(e,n){t.encodePacket(e,!!o&&r,!0,function(e){n(null,setLengthHeader(e))})}"function"==typeof r&&(n=r,r=null);var o=i(e);return r&&o?m&&!p?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n):e.length?void map(e,encodeOne,function(e,t){return n(t.join(""))}):n("0:")},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);"function"==typeof r&&(n=r,r=null);var i;if(""==e)return n(f,0,1);for(var o,a,s="",l=0,c=e.length;l<c;l++){var u=e.charAt(l);if(":"!=u)s+=u;else{if(""==s||s!=(o=Number(s)))return n(f,0,1);if(a=e.substr(l+1,o),s!=a.length)return n(f,0,1);if(a.length){if(i=t.decodePacket(a,r,!0),f.type==i.type&&f.data==i.data)return n(f,0,1);var p=n(i,l+o,c);if(!1===p)return}l+=o,s=""}}return""!=s?n(f,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){function encodeOne(e,r){t.encodePacket(e,!0,!0,function(e){return r(null,e)})}return e.length?void map(e,encodeOne,function(e,t){var n=t.reduce(function(e,t){var r;return r="string"==typeof t?t.length:t.byteLength,e+r.toString().length+r+2},0),i=new Uint8Array(n),o=0;return t.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);r=n.buffer}t?i[o++]=0:i[o++]=1;for(var s=r.byteLength.toString(),a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(var n=new Uint8Array(r),a=0;a<n.length;a++)i[o++]=n[a]}),r(i.buffer)}):r(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,r){function encodeOne(e,r){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);e=n.buffer,t[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,a=o.toString(),s=new Uint8Array(a.length+1),i=0;i<a.length;i++)s[i]=parseInt(a[i]);if(s[a.length]=255,m){var l=new m([t.buffer,s.buffer,e]);r(null,l)}})}map(e,encodeOne,function(e,t){return r(new m(t))})},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var i=e,a=[],s=!1;i.byteLength>0;){for(var l=new Uint8Array(i),c=0===l[0],u="",p=1;255!=l[p];p++){if(u.length>310){s=!0;break}u+=l[p]}if(s)return n(f,0,1);i=o(i,2+u.length),u=parseInt(u);var h=o(i,0,u);if(c)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(d){var m=new Uint8Array(h);h="";for(var p=0;p<m.length;p++)h+=String.fromCharCode(m[p])}a.push(h),i=o(i,u)}var g=a.length;a.forEach(function(e,i){n(t.decodePacket(e,r,!0),i,g)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},function(e,t,r){(function(t){function hasBinary(e){function _hasBinary(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(n(e)){for(var r=0;r<e.length;r++)if(_hasBinary(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&_hasBinary(e[i]))return!0}return!1}return _hasBinary(e)}var n=r(179);e.exports=hasBinary}).call(t,function(){return this}())},162,function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(r-t),a=t,s=0;a<r;a++,s++)o[s]=i[a];return o.buffer}},function(e,t){!function(e){"use strict";t.encode=function(t){var r,n=new Uint8Array(t),i=n.length,o="";for(r=0;r<i;r+=3)o+=e[n[r]>>2],o+=e[(3&n[r])<<4|n[r+1]>>4],o+=e[(15&n[r+1])<<2|n[r+2]>>6],o+=e[63&n[r+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){
var r,n,i,o,a,s=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),p=new Uint8Array(u);for(r=0;r<l;r+=4)n=e.indexOf(t[r]),i=e.indexOf(t[r+1]),o=e.indexOf(t[r+2]),a=e.indexOf(t[r+3]),p[c++]=n<<2|i>>4,p[c++]=(15&i)<<4|o>>2,p[c++]=(3&o)<<6|63&a;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){function after(e,t,r){function proxy(e,i){if(proxy.count<=0)throw new Error("after called too many times");--proxy.count,e?(n=!0,t(e),t=r):0!==proxy.count||n||t(null,i)}var n=!1;return r=r||noop,proxy.count=e,0===e?t():proxy}function noop(){}e.exports=after},function(e,t,r){var n;(function(e,i){!function(o){function ucs2decode(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function ucs2encode(e){for(var t,r=e.length,n=-1,i="";++n<r;)t=e[n],t>65535&&(t-=65536,i+=p(t>>>10&1023|55296),t=56320|1023&t),i+=p(t);return i}function checkScalarValue(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function createByte(e,t){return p(e>>t&63|128)}function encodeCodePoint(e){if(0==(4294967168&e))return p(e);var t="";return 0==(4294965248&e)?t=p(e>>6&31|192):0==(4294901760&e)?(checkScalarValue(e),t=p(e>>12&15|224),t+=createByte(e,6)):0==(4292870144&e)&&(t=p(e>>18&7|240),t+=createByte(e,12),t+=createByte(e,6)),t+=p(63&e|128)}function utf8encode(e){for(var t,r=ucs2decode(e),n=r.length,i=-1,o="";++i<n;)t=r[i],o+=encodeCodePoint(t);return o}function readContinuationByte(){if(u>=c)throw Error("Invalid byte index");var e=255&l[u];if(u++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function decodeSymbol(){var e,t,r,n,i;if(u>c)throw Error("Invalid byte index");if(u==c)return!1;if(e=255&l[u],u++,0==(128&e))return e;if(192==(224&e)){var t=readContinuationByte();if(i=(31&e)<<6|t,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=readContinuationByte(),r=readContinuationByte(),i=(15&e)<<12|t<<6|r,i>=2048)return checkScalarValue(i),i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=readContinuationByte(),r=readContinuationByte(),n=readContinuationByte(),i=(15&e)<<18|t<<12|r<<6|n,i>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}function utf8decode(e){l=ucs2decode(e),c=l.length,u=0;for(var t,r=[];(t=decodeSymbol())!==!1;)r.push(t);return ucs2encode(r)}var a="object"==typeof t&&t,s=("object"==typeof e&&e&&e.exports==a&&e,"object"==typeof i&&i);s.global!==s&&s.window!==s||(o=s);var l,c,u,p=String.fromCharCode,h={version:"2.0.0",encode:utf8encode,decode:utf8decode};n=function(){return h}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}(this)}).call(t,r(160)(e),function(){return this}())},function(e,t){(function(t){function mapArrayBufferViews(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var i=new Uint8Array(r.byteLength);i.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=i.buffer}e[t]=n}}}function BlobBuilderConstructor(e,t){t=t||{};var n=new r;mapArrayBufferViews(e);for(var i=0;i<e.length;i++)n.append(e[i]);return t.type?n.getBlob(t.type):n.getBlob()}function BlobConstructor(e,t){return mapArrayBufferViews(e),new Blob(e,t||{})}var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,n=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),i=n&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),o=r&&r.prototype.append&&r.prototype.getBlob;e.exports=function(){return n?i?t.Blob:BlobConstructor:o?BlobBuilderConstructor:void 0}()}).call(t,function(){return this}())},163,function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,i=r.length;n<i;n++){var o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){"use strict";function encode(e){var t="";do t=n[e%i]+t,e=Math.floor(e/i);while(e>0);return t}function decode(e){var t=0;for(s=0;s<e.length;s++)t=t*i+o[e.charAt(s)];return t}function yeast(){var e=encode(+new Date);return e!==r?(a=0,r=e):e+"."+encode(a++)}for(var r,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,o={},a=0,s=0;s<i;s++)o[n[s]]=s;yeast.encode=encode,yeast.decode=decode,e.exports=yeast},function(e,t,r){(function(t){function empty(){}function JSONPPolling(e){n.call(this,e),this.query=this.query||{},o||(t.___eio||(t.___eio=[]),o=t.___eio),this.index=o.length;var r=this;o.push(function(e){r.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){r.script&&(r.script.onerror=empty)},!1)}var n=r(174),i=r(187);e.exports=JSONPPolling;var o,a=/\n/g,s=/\\n/g;i(JSONPPolling,n),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},JSONPPolling.prototype.doWrite=function(e,t){function complete(){initIframe(),t()}function initIframe(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(t)}catch(e){n=document.createElement("iframe"),n.name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}var r=this;if(!this.form){var n,i=document.createElement("form"),o=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=l,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}this.form.action=this.uri(),initIframe(),e=e.replace(s,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(c){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&complete()}:this.iframe.onload=complete}}).call(t,function(){return this}())},function(e,t,r){(function(t){function WS(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,n.call(this,e)}var n=r(175),i=r(176),o=r(186),a=r(187),s=r(188),l=r(155)("engine.io-client:websocket"),c=t.WebSocket||t.MozWebSocket,u=c;if(!u&&"undefined"==typeof window)try{u=r(191)}catch(p){}e.exports=WS,a(WS,n),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.ws=c?new u(e):new u(e,t,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(WS.prototype.onData=function(e){var t=this;setTimeout(function(){n.prototype.onData.call(t,e)},0)}),WS.prototype.write=function(e){function done(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var n=e.length,o=0,a=n;o<a;o++)!function(e){i.encodePacket(e,r.supportsBinary,function(i){if(!c){var o={};if(e.options&&(o.compress=e.options.compress),r.perMessageDeflate){var a="string"==typeof i?t.Buffer.byteLength(i):i.length;a<r.perMessageDeflate.threshold&&(o.compress=!1)}}try{c?r.ws.send(i):r.ws.send(i,o)}catch(s){l("websocket closed before onclose event")}--n||done()})}(e[o])},WS.prototype.onClose=function(){n.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},WS.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||(e.b64=1),e=o.encode(e),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e},WS.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===WS.prototype.name)}}).call(t,function(){return this}())},135,function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t){(function(t){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(s,""),t.JSON&&JSON.parse?JSON.parse(e):r.test(e.replace(n,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,r){function Socket(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var n=r(158),i=r(195),o=r(196),a=r(197),s=r(198),l=r(155)("socket.io-client:socket"),c=r(199);e.exports=t=Socket;var u={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;i(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",s(this,"onopen")),a(e,"packet",s(this,"onpacket")),a(e,"close",s(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},Socket.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},Socket.prototype.emit=function(e){if(u.hasOwnProperty(e))return p.apply(this,arguments),this;var t=o(arguments),r=n.EVENT;c(t)&&(r=n.BINARY_EVENT);var i={type:r,data:t};return i.options={},i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},Socket.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},Socket.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:n.CONNECT})},Socket.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},Socket.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(e);break;case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:this.onack(e);break;case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},Socket.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},Socket.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var i=o(arguments);l("sending ack %j",i);var a=c(i)?n.BINARY_ACK:n.ACK;t.packet({type:a,id:e,data:i})}}},Socket.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},Socket.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function Emitter(e){if(e)return mixin(e)}function mixin(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}e.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function on(){this.off(e,on),t.apply(this,arguments)}return on.fn=t,this.on(e,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this},Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){function toArray(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++)r[n-t]=e[n];return r}e.exports=toArray},function(e,t){function on(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}e.exports=on},function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},function(e,t,r){(function(t){function hasBinary(e){function _hasBinary(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(n(e)){for(var r=0;r<e.length;r++)if(_hasBinary(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&_hasBinary(e[i]))return!0}return!1}return _hasBinary(e)}var n=r(200);e.exports=hasBinary}).call(t,function(){return this}())},162,function(e,t){function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=Backoff,Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e}},function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}__export(r(203)),__export(r(212))},function(e,t,r){"use strict";function unixTime(){return Math.floor((new Date).valueOf()/1e3)}var n=r(204),i=r(209),o=r(212),a=function(){function KSeq(e,t,r,o,a){this.name=e,this.time=0,this.atoms=o||new i.ArrayAtomList,this.removed=new n.IdentSet,this.identGenerator=a||new n.LSEQIdentGenerator(r),this.timestampFn=t||unixTime}return KSeq.prototype.size=function(){return this.atoms.size()},KSeq.prototype.depth=function(){var e=0;return this.atoms.forEach(function(t){var r=t.id.depth();e<r&&(e=r)}),e},KSeq.prototype.insert=function(e,t){if(t<0)throw new RangeError("The position "+t+" must be greater than or equal to zero.");var r=this.atoms.get(t-1),n=this.atoms.get(t),i=this.identGenerator.getIdent(this.name,++this.time,r&&r.id,n&&n.id),a=new o.InsertOp(this.name,this.timestampFn(),i,e);return this.apply(a),a},KSeq.prototype.append=function(e){return this.insert(e,this.size())},KSeq.prototype.remove=function(e){if(e<0)throw new RangeError("The position "+e+" must be greater than or equal to zero.");var t=this.atoms.get(e);if(t){var r=new o.RemoveOp(this.name,this.timestampFn(),t.id);return this.apply(r),r}return null},KSeq.prototype.get=function(e){var t=this.atoms.get(e);return t?t.value:void 0},KSeq.prototype.forEach=function(e){this.atoms.forEach(function(t){return e(t.value)})},KSeq.prototype.map=function(e){return this.atoms.map(function(t){return e(t.value)})},KSeq.prototype.toArray=function(){return this.atoms.map(function(e){return e.value})},KSeq.prototype.toJSON=function(){return{n:this.name,t:this.time,s:this.atoms.map(function(e){return[e.id.toString(),e.value]}),r:this.removed.toJSON()}},KSeq.prototype.apply=function(e){switch(e.kind){case o.OpKind.Insert:var t=e;this.removed.has(t.id)||this.atoms.add(t.id,t.value);break;case o.OpKind.Remove:var r=e;this.removed.has(r.id)||(this.atoms.remove(r.id),this.removed.add(r.id));break;default:throw new Error("Unknown op kind "+e.kind)}},KSeq}();t.KSeq=a},function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}__export(r(205)),__export(r(207)),__export(r(208)),__export(r(206))},function(e,t,r){"use strict";var n=r(206),i="#",o=",",a="*",s=function(){function Ident(e,t){this.time=e,this.path=t}return Ident.parse=function(e){try{var t=e.split(i),r=t[0],s=t[1];if(void 0===r||0===r.length)throw new Error("The ident is missing a timestamp");if(void 0===s||0===s.length)throw new Error("The ident is missing a path");var l=void 0,c=s.split(o).map(function(e){var t=e.split(a,2),r=t[0],i=t[1];return i?l=i:i=l,n.Segment(Number(r),i)});return new Ident(Number(r),c)}catch(u){throw new Error("Error parsing Ident: "+u)}},Ident.prototype.get=function(e){return this.path[e]},Ident.prototype.depth=function(){return this.path.length},Ident.prototype.compare=function(e){for(var t=Math.max(this.path.length,e.path.length),r=0;r<t;r++){var n=this.get(r),i=e.get(r);if(void 0===n&&void 0!==i)return-1;if(void 0!==n&&void 0===i)return 1;if(n.digit<i.digit)return-1;if(n.digit>i.digit)return 1;if(n.replica<i.replica)return-1;if(n.replica>i.replica)return 1}return this.time<e.time?-1:this.time>e.time?1:0},Ident.prototype.toString=function(){var e=void 0,t=this.path.map(function(t){return t.replica===e?t.digit:(e=t.replica,""+t.digit+a+t.replica)});return""+this.time+i+t.join(o)},Ident}();t.Ident=s},function(e,t){"use strict";function Segment(e,t){return{digit:e,replica:t}}t.Segment=Segment},function(e,t){"use strict";var r=function(){function IdentSet(e){var t=this;this.entries={},e&&e.forEach(function(e){return t.add(e)})}return IdentSet.prototype.size=function(){return Object.keys(this.entries).length},IdentSet.prototype.add=function(e){this.entries[e.toString()]=!0},IdentSet.prototype.has=function(e){return!!this.entries[e.toString()]},IdentSet.prototype.remove=function(e){delete this.entries[e.toString()]},IdentSet.prototype.toJSON=function(){return Object.keys(this.entries)},IdentSet}();t.IdentSet=r},function(e,t,r){"use strict";var n,i=r(205),o=r(206);!function(e){e[e.AddFromLeft=1]="AddFromLeft",e[e.SubtractFromRight=2]="SubtractFromRight"}(n||(n={}));var a=function(){function LSEQIdentGenerator(e,t,r){void 0===e&&(e=Math.random),void 0===t&&(t=4),void 0===r&&(r=10),this.random=e,this.startingWidth=t,this.maxDistance=r,this.strategies=[]}return LSEQIdentGenerator.prototype.getIdent=function(e,t,r,a){r||(r=this.getFirst(e)),a||(a=this.getLast(e));for(var s=0,l=-1,c=0,u=0;s<1;){l++;var p=r.get(l),h=a.get(l);c=p?p.digit:0,u=h?h.digit:this.getWidthAtDepth(l),s=u-c-1}for(var d=Math.min(s,this.maxDistance),f=Math.floor(this.random()*d)+1,m=this.getStrategyAtDepth(l),g=[],y=0;y<l;y++)g.push(r.get(y)||o.Segment(0,e));return m===n.AddFromLeft?g.push(o.Segment(c+f,e)):g.push(o.Segment(u-f,e)),new i.Ident(t,g)},LSEQIdentGenerator.prototype.getWidthAtDepth=function(e){var t=e+this.startingWidth;return t>53&&(t=53),Math.pow(2,t)-1},LSEQIdentGenerator.prototype.getStrategyAtDepth=function(e){var t=this.strategies[e];if(!t){var r=Math.floor(2*this.random())+1;t=this.strategies[e]=r}return t},LSEQIdentGenerator.prototype.getFirst=function(e){return this.first||(this.first=new i.Ident(0,[o.Segment(0,e)])),this.first},LSEQIdentGenerator.prototype.getLast=function(e){return this.last||(this.last=new i.Ident(0,[o.Segment(this.getWidthAtDepth(0),e)])),this.last},LSEQIdentGenerator}();t.LSEQIdentGenerator=a},function(e,t,r){"use strict";function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}__export(r(210)),__export(r(211))},function(e,t,r){"use strict";var n=r(211),i=function(){function ArrayAtomList(){this.atoms=[]}return ArrayAtomList.prototype.size=function(){return this.atoms.length},ArrayAtomList.prototype.get=function(e){return this.atoms[e]},ArrayAtomList.prototype.add=function(e,t){var r=this.bisectRight(e),i=this.get(r-1);if(i&&0===e.compare(i.id))return-1;var o=n.Atom(e,t);return this.atoms.splice(r,0,o),r},ArrayAtomList.prototype.remove=function(e){var t=this.indexOf(e);return t>=0?(this.atoms.splice(t,1),t):-1},ArrayAtomList.prototype.indexOf=function(e){var t=this.bisectLeft(e);return t!==this.atoms.length&&0===this.atoms[t].id.compare(e)?t:-1},ArrayAtomList.prototype.forEach=function(e){this.atoms.forEach(e)},ArrayAtomList.prototype.map=function(e){return this.atoms.map(e)},ArrayAtomList.prototype.toArray=function(){return this.atoms.slice(0)},ArrayAtomList.prototype.bisectLeft=function(e){for(var t=0,r=this.atoms.length;t<r;){var n=Math.floor((t+r)/2);this.atoms[n].id.compare(e)<0?t=n+1:r=n}return t},ArrayAtomList.prototype.bisectRight=function(e){for(var t=0,r=this.atoms.length;t<r;){var n=Math.floor((t+r)/2);e.compare(this.atoms[n].id)<0?r=n:t=n+1}return t},ArrayAtomList}();t.ArrayAtomList=i},function(e,t){"use strict";function Atom(e,t){return{id:e,value:t}}t.Atom=Atom},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(204),o="+",a="-",s="/";!function(e){e[e.Insert=1]="Insert",e[e.Remove=2]="Remove"}(t.OpKind||(t.OpKind={}));var l=t.OpKind,c=function(){function Op(e,t,r){this.kind=e,this.replica=t,this.timestamp=r}return Op.parse=function(e){var t=e[0];switch(t){case o:return u.parse(e);case a:return p.parse(e);default:throw new Error("First character must be "+o+" or "+a)}},Op}();t.Op=c;var u=function(e){function InsertOp(t,r,n,i){e.call(this,l.Insert,t,r),this.id=n,this.value=i}return n(InsertOp,e),InsertOp.parse=function(e){var t=e.substring(1).split(s),r=t.length>4?t.slice(3,t.length).join(s):t[3];return new InsertOp(t[0],Number(t[1]),i.Ident.parse(t[2]),JSON.parse(r))},InsertOp.prototype.toString=function(){return""+o+this.timestamp+s+this.replica+s+this.id.toString()+s+JSON.stringify(this.value)},InsertOp}(c);t.InsertOp=u;var p=function(e){function RemoveOp(t,r,n){e.call(this,l.Remove,t,r),this.id=n}return n(RemoveOp,e),RemoveOp.parse=function(e){var t=e.substring(1).split(s,3),r=t[0],n=t[1],o=t[2];return new RemoveOp(n,Number(r),i.Ident.parse(o))},RemoveOp.prototype.toString=function(){return""+a+this.timestamp+s+this.replica+s+this.id.toString()},RemoveOp}(c);t.RemoveOp=p},function(e,t,r){(function(e){"use strict";function getSignalerURI(){return getSignalerProtocol()+"://"+getSignalerHost()+":"+getSignalerPort()+"/bp"}function getSignalerHost(){return e.env.NODE_IP?e.env.NODE_IP:t.USE_LOCAL_SIGNALER?"127.0.0.1":t.REMOTE_SIGNALER_HOST}function getSignalerPort(){return e.env.NODE_PORT?e.env.NODE_PORT:t.USE_LOCAL_SIGNALER?3e3:t.REMOTE_SIGNALER_PORT}function getSignalerProtocol(){return t.USE_LOCAL_SIGNALER?"http":"https"}t.USE_LOCAL_SIGNALER=!1,t.REMOTE_SIGNALER_HOST="bpsignaler-rmnoon.rhcloud.com",t.REMOTE_SIGNALER_PORT=8443;var r=function(){function PeersRequest(){}return PeersRequest.messageType="PeersRequest",PeersRequest}();t.PeersRequest=r;var n=function(){function PeersUpdate(){}return PeersUpdate.messageType="PeersUpdate",PeersUpdate}();t.PeersUpdate=n;var i=function(){function ConnectionRequest(){}return ConnectionRequest.messageType="ConnectionRequest",ConnectionRequest}();t.ConnectionRequest=i;var o=function(){function ConnectionResponse(){}return ConnectionResponse.messageType="ConnectionResponse",ConnectionResponse}();t.ConnectionResponse=o;var a=function(){function PadUpdate(){}return PadUpdate.messageType="PadUpdate",PadUpdate}();t.PadUpdate=a;var s=function(){function UserStatusRequest(){}return UserStatusRequest.messageType="UserStatusRequest",UserStatusRequest}();t.UserStatusRequest=s;var l=function(){function UserStatusResponse(){}return UserStatusResponse.messageType="UserStatusResponse",UserStatusResponse}();t.UserStatusResponse=l;var c=function(){function PadEdit(){}return PadEdit}();t.PadEdit=c;var u=function(){function Cursor(){}return Cursor}();t.Cursor=u,t.getSignalerURI=getSignalerURI,t.getSignalerHost=getSignalerHost,t.getSignalerPort=getSignalerPort,t.getSignalerProtocol=getSignalerProtocol}).call(t,r(141))},function(e,t,r){"use strict";var n=r(64),i=r(4);r(215),r(217),r(220);var o=r(130),a=r(221),s=r(222),l=r(224),c=r(100),u=r(213),p={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]}]},h={ordered:!0},d="bp",f=6e4,m=3e3,g=2.2*m,y=25e3,v=function(){function UserModel(e,t,r){var c=this;this.userId=e,this.pad=t,this.blindpadService=r,this.sendHeartbeatRequest=function(){var e=new u.UserStatusRequest;e.srcId=c.pad.getLocalUser().getId(),e.destId=c.getId(),e.padId=c.pad.getPadId(),c.messagesOut.next({type:u.UserStatusRequest.messageType,data:e})},this.sendHeartbeatResponse=function(e){void 0===e&&(e=!1);var t=new u.UserStatusResponse;t.srcId=c.pad.getLocalUser().getId(),t.destId=c.getId(),t.name=c.pad.getLocalUser().getName().value,e&&(t.update=c.pad.buildPadUpdate(!1)),c.messagesOut.next({type:u.UserStatusResponse.messageType,data:t})},this.color=new n.BehaviorSubject(s.getColor(0,!0,!0)),this.closed=!1,this.started=!1,this.name=new n.BehaviorSubject(this.isLocalUser()?a.getAnimalName():null),this.audioStream=new n.BehaviorSubject(null),this.isMuted=this.isLocalUser()?this.blindpadService.mediaService.getIsMuted():new n.BehaviorSubject((!1)),this.voiceAnalyser=this.isLocalUser()?this.blindpadService.mediaService.getLocalAnalyser():new o.VoiceAnalyser(this.blindpadService.mediaService.getAudioContext(),this.blindpadService.zone),this.messagesOut=new i.Subject,this.messagesIn=new i.Subject,this.peerCxn=new n.BehaviorSubject(null),this.channel=new n.BehaviorSubject(null),this.chunker=new l.Chunker(f),this.dechunker=new l.Dechunker,this.broadcastSub=null,this.heartbeatSub=null,this.lastMessageTime=null}return UserModel.prototype.getId=function(){return this.userId},UserModel.prototype.getName=function(){return this.name},UserModel.prototype.getColor=function(){return this.color},UserModel.prototype.isLocalUser=function(){return this.userId===this.pad.getClientId()},UserModel.prototype.isRemoteUser=function(){return!this.isLocalUser()},UserModel.prototype.isClosed=function(){return this.closed},UserModel.prototype.isStarted=function(){return this.started},UserModel.prototype.isUnavailable=function(){return this.isRemoteUser()&&Date.now()-this.lastMessageTime>g},UserModel.prototype.isTimedOut=function(){return this.isRemoteUser()&&Date.now()-this.lastMessageTime>y},UserModel.prototype.getAudioStream=function(){return this.audioStream},UserModel.prototype.getIsMuted=function(){return this.isMuted},UserModel.prototype.setMuted=function(e){void 0===e&&(e=!this.getIsMuted().value),this.isMuted.next(!!e)},UserModel.prototype.getVoiceAnalyser=function(){return this.voiceAnalyser},UserModel.prototype.getMessagesIn=function(e){return this.messagesIn.filter(function(t){return t.type===e}).map(function(e){return e.data})},UserModel.prototype.getMessagesOut=function(e){return this.messagesOut.filter(function(t){return t.type===e}).map(function(e){return e.data})},UserModel.prototype.feedMessage=function(e,t){this.messagesIn.next({type:e,data:t})},UserModel.prototype.start=function(){if(!this.isStarted()){if(this.started=!0,this.isLocalUser())return void this.pad.log("Local user is: ",this.userId);this.color.next(s.getColor(this.pad.getUsers()?this.pad.getUsers().size:0,!0,!0)),this.lastMessageTime=Date.now(),this.setupSubs(),this.setupRtc()}},UserModel.prototype.close=function(){this.isLocalUser()||this.isClosed()||!this.isStarted()||(this.closed=!0,this.broadcastSub.unsubscribe(),this.broadcastSub=null,this.heartbeatSub.unsubscribe(),this.heartbeatSub=null,this.messagesOut.complete(),this.messagesIn.complete(),this.peerCxn.filter(function(e){return!!e}).take(1).subscribe(function(e){return e.close()}),this.peerCxn.complete(),this.channel.filter(function(e){return!!e}).take(1).subscribe(function(e){return e.close()}),this.channel.complete(),this.audioStream.next(null),this.audioStream.complete())},UserModel.prototype.isCaller=function(){return this.pad.getClientId()>this.userId},UserModel.prototype.isReceiver=function(){return!this.isCaller()},UserModel.prototype.setupSubs=function(){var e=this;this.broadcastSub=this.pad.getOutoingUserBroadcasts().subscribe(function(t){return e.messagesOut.next(t)}),this.heartbeatSub=c.interval(m).subscribe(function(t){e.sendHeartbeatRequest()}),this.chunker.chunks.subscribe(function(t){e.channel.filter(function(e){return e&&"open"===e.readyState}).take(1).subscribe(function(e){e.send(t)})}),this.dechunker.messages.subscribe(function(t){e.lastMessageTime=Date.now(),e.messagesIn.next(JSON.parse(t))}),this.messagesOut.filter(function(e){return e.type!==u.ConnectionRequest.messageType&&e.type!==u.ConnectionResponse.messageType}).subscribe(function(t){var r=JSON.stringify(t);e.chunker.messages.next(r)}),this.getMessagesIn(u.ConnectionRequest.messageType).take(1).subscribe(function(t){
e.peerCxn.filter(function(e){return!!e}).take(1).subscribe(function(r){r.setRemoteDescription(JSON.parse(t.requestBlob)),r.createAnswer().then(function(e){r.setLocalDescription(e)},function(t){console.error("Error creating answer to ",e.userId,t)})})}),this.getMessagesIn(u.ConnectionResponse.messageType).take(1).subscribe(function(t){e.peerCxn.filter(function(e){return!!e}).take(1).subscribe(function(e){e.setRemoteDescription(JSON.parse(t.responseBlob))})}),this.getMessagesIn(u.UserStatusRequest.messageType).subscribe(function(t){e.sendHeartbeatResponse()}),this.getMessagesIn(u.UserStatusResponse.messageType).subscribe(function(t){console.error("heartbeat response!"),e.name.value!==t.name&&(e.pad.log("Received name from ",t.srcId," / ",t.name),e.name.next(t.name)),t.update&&e.feedMessage(u.PadUpdate.messageType,t.update)}),this.audioStream.subscribe(function(t){if(!e.isLocalUser()&&(e.voiceAnalyser.stop(),t)){var r=e.blindpadService.mediaService.getAudioContext();e.voiceAnalyser.start(r.createMediaStreamSource(t))}})},UserModel.prototype.setupRtc=function(){var e=this,t=new RTCPeerConnection(p);t.onicecandidate=function(r){if(null===r.candidate){var n=t.localDescription;if(e.isReceiver()){var i=new u.ConnectionResponse;i.srcId=e.pad.getClientId(),i.destId=e.userId,i.padId=e.pad.getPadId(),i.responseBlob=JSON.stringify(n),e.messagesOut.next({type:u.ConnectionResponse.messageType,data:i})}else if(e.isCaller()){var o=new u.ConnectionRequest;o.srcId=e.pad.getClientId(),o.destId=e.userId,o.padId=e.pad.getPadId(),o.requestBlob=JSON.stringify(n),e.messagesOut.next({type:u.ConnectionRequest.messageType,data:o})}}},t.onaddstream=function(t){return e.audioStream.next(t.stream)},this.blindpadService.mediaService.getLocalStream().value&&t.addStream(this.blindpadService.mediaService.getLocalStream().value);var r=function(t){t.onopen=function(t){return e.sendHeartbeatResponse(!0)},t.onclose=function(t){return console.error("channel [onclose]: ",e.userId,t)},t.onmessage=function(t){e.blindpadService.zone.run(function(){var r=t.data;e.dechunker.chunks.next(r)})},e.channel.next(t)};this.isCaller()?(r(t.createDataChannel(d,h)),t.createOffer().then(function(e){t.setLocalDescription(e)},function(t){console.error("Error generating offer to ",e.userId,t)})):this.isReceiver()&&(t.ondatachannel=function(e){return r(e.channel)}),this.peerCxn.next(t)},UserModel}();t.UserModel=v},function(e,t,r){"use strict";var n=r(5),i=r(216);n.Observable.prototype.filter=i.filter},function(e,t,r){"use strict";function filter(e,t){return this.lift(new o(e,t))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8);t.filter=filter;var o=function(){function FilterOperator(e,t){this.predicate=e,this.thisArg=t}return FilterOperator.prototype.call=function(e,t){return t._subscribe(new a(e,this.predicate,this.thisArg))},FilterOperator}(),a=function(e){function FilterSubscriber(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0,this.predicate=r}return n(FilterSubscriber,e),FilterSubscriber.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)},FilterSubscriber}(i.Subscriber)},function(e,t,r){"use strict";var n=r(5),i=r(218);n.Observable.prototype.take=i.take},function(e,t,r){"use strict";function take(e){return 0===e?new a.EmptyObservable:this.lift(new s(e))}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8),o=r(219),a=r(44);t.take=take;var s=function(){function TakeOperator(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return TakeOperator.prototype.call=function(e,t){return t._subscribe(new l(e,this.total))},TakeOperator}(),l=function(e){function TakeSubscriber(t,r){e.call(this,t),this.total=r,this.count=0}return n(TakeSubscriber,e),TakeSubscriber.prototype._next=function(e){var t=this.total;++this.count<=t&&(this.destination.next(e),this.count===t&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(i.Subscriber)},function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},n=function(e){function ArgumentOutOfRangeError(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return r(ArgumentOutOfRangeError,e),ArgumentOutOfRangeError}(Error);t.ArgumentOutOfRangeError=n},function(e,t,r){"use strict";var n=r(5),i=r(51);n.Observable.prototype.map=i.map},function(e,t){"use strict";function getAnimalName(e){void 0===e&&(e=99);var t=Math.floor(Math.random()*n.length);return getDescribedNoun(n[t],e)}function getDescribedNoun(e,t){void 0===t&&(t=99);var n=Math.floor(Math.random()*r.length),i=""+(t>0?Math.floor(Math.random()*t)+1:"");return""+r[n]+e+i}t.getAnimalName=getAnimalName,t.getDescribedNoun=getDescribedNoun;var r=["Adventurous","Alert","Amusing","Ancient","Askew","Awkward","Benevolent","Brave","Brazen","Brilliant","Busy","Calm","Capable","Carefree","Ceaseless","Challenging","Charming","Cheeky","Cheerful","Chilly","Clever","Compassionate","Content","Copious","Courageous","Courteous","Cozy","Crawling","Crazy","Creaky","Creative","Creeping","Crispy","Curious","Curly","Daring","Delighted","Diminutive","Eccentric","Ecstatic","Edgy","Effortless","Endless","Entertaining","Eternal","Excited","Fair","Fantastic","Fluttering","Freezing","Friendly","Frosty","Furious","Fuzzy","Generous","Gilded","Glassy","Glowing","Graceful","Grand","Grave","Great","Happy","Hardworking","Hopeful","Huge","Icy","Idyllic","Impatient","Infamous","Ingenious","Intense","Joyful","Lavish","Lively","Long","Loud","Loyal","Lumpy","Marvelous","Meandering","Mighty","Muffled","Muggy","Mysterious","Nervous","Nimble","Odd","Optimistic","Opulent","Parched","Peculiar","Perpetual","Pleasant","Plush","Polite","Precise","Proud","Prudent","Puny","Quick","Rambunctious","Rapid","Relaxed","Rich","Ridiculous","Righteous","Scorching","Serious","Shining","Shocking","Silly","Sizzling","Slick","Small","Smooth","Snug","Soaring","Solemn","Sparkling","Speedy","Spiky","Splendid","Steaming","Stern","Strict","Striking","Sturdy","Subtle","Superb","Surprised","Swift","Thrifty","Tiny","Tough","Tranquil","Trendy","Tricky","Truthful","Vast","Verdant","Vigilant","Whimsical","Wild","Wise","Wonderful","Wrinkly"],n=["Aardvark","Albatross","Alligator","Alpaca","Anaconda","Angelfish","Anglerfish","Ant","Anteater","Antelope","Antlion","Aphid","Armadillo","Asp","Baboon","Badger","Bandicoot","Barnacle","Barracuda","Basilisk","Bass","Bat","Bear","Beaver","Bee","Beetle","Bison","Blackbird","Bluebird","Bluejay","Boa","Bobcat","Buffalo","Butterfly","Camel","Capybara","Cardinal","Caribou","Carp","Cat","Caterpillar","Catfish","Centipede","Cephalopod","Chameleon","Chickadee","Chimpanzee","Chinchilla","Chipmunk","Clam","Clownfish","Cobra","Cod","Condor","Coyote","Crab","Crane","Crawdad","Crayfish","Cricket","Crocodile","Cuckoo","Deer","Dingo","Dinosaur","Dog","Dolphin","Dragonfly","Dragon","Duck","Eagle","Earthworm","Echidna","Eel","Egret","Elephant","Elk","Emu","Ermine","Falcon","Ferret","Finch","Firefly","Fish","Flamingo","Flyingfish","Fowl","Fox","Frog","Fruitbat","Galliform","Gazelle","Gecko","Gerbil","Gibbon","Gila","Giraffe","Goat","Goldfish","Goose","Gopher","Gorilla","Grasshopper","Grizzly","Grouse","Guineafowl","Gull","Guppy","Haddock","Halibut","Hammerhead","Hamster","Hare","Harrier","Hawk","Hedgehog","Heron","Herring","Hippopotamus","Hornet","Horse","Hummingbird","Hyena","Iguana","Impala","Jackal","Jaguar","Jellyfish","Kangaroo","Kingfisher","Kiwi","Koala","Koi","Komodo","Krill","Lamprey","Lark","Lemming","Lemur","Leopard","Leopon","Limpet","Lion","Lizard","Llama","Lobster","Lungfish","Lynx","Macaw","Mackerel","Magpie","Manatee","Mandrill","Marlin","Marmoset","Marmot","Marsupial","Mastodon","Meadowlark","Meerkat","Mink","Minnow","Mockingbird","Mole","Mollusk","Mongoose","Monkey","Moose","Mouse","Muskox","Narwhal","Newt","Ocelot","Octopus","Opossum","Orangutan","Orca","Ostrich","Otter","Owl","Ox","Panda","Panther","Parakeet","Parrot","Parrotfish","Partridge","Pelican","Penguin","Perch","Pheasant","Pigeon","Pike","Piranha","Planarian","Platypus","Porcupine","Porpoise","Possum","Prairiedog","Prawn","Primate","Ptarmigan","Puffin","Puma","Python","Quail","Quelea","Quokka","Rabbit","Raccoon","Rattlesnake","Raven","Reindeer","Reptile","Rhinoceros","Roadrunner","Sabertooth","Sailfish","Salamander","Salmon","Sawfish","Scallop","Scorpion","Seahorse","Sealion","Shark","Shrimp","Silkworm","Skink","Skunk","Snail","Snake","Snipe","Sparrow","Spider","Spoonbill","Squid","Squirrel","Starfish","Stingray","Stoat","Sturgeon","Swan","Swordfish","Swordtail","Tahr","Takin","Tapir","Tarantula","Tarsier","Tern","Thrush","Tiger","Toad","Tortoise","Toucan","Trout","Tuna","Turkey","Turtle","Urial","Vicuna","Viper","Vole","Wallaby","Walrus","Whale","Whippet","Whitefish","Wildcat","Wildfowl","Wolf","Wolverine","Wombat","Woodpecker","Wren","Xerinae","Yak","Zebra"]},function(e,t,r){"use strict";function getColor(e,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1);var i=e%t.NUM_COLORS,o=r?n?t.SHUFFLED_PRIMARY_FIRST:t.SHUFFLED_COLOR_NAMES:t.COLOR_NAMES;return t.PRIMARY[o[i]]}function getBackgroundClass(e){var t="color-"+e.id+"-background";if(i.has(t))return t;var r="."+t+" {\n        background: "+e.val+";\n        color: "+(e.darkText?"black":"white")+" !important;\n    }",n=getSheet();return n&&n.insertRule(r,i.size),i.set(t,r),t}function getSheet(){if(null!==o)return o;var e=self.document;if(!e)return null;var t=e.createElement("style");return t.type="text/css",t.className="palette",e.getElementsByTagName("head")[0].appendChild(t),o=t.sheet}var n=r(223);t.PRIMARY={RED:{id:"RED",val:"#F44336",darkText:!1},PINK:{id:"PINK",val:"#E91E63",darkText:!1},PURPLE:{id:"PURPLE",val:"#9C27B0",darkText:!1},DEEP_PURPLE:{id:"DEEP_PURPLE",val:"#673AB7",darkText:!1},INDIGO:{id:"INDIGO",val:"#3F51B5",darkText:!1},BLUE:{id:"BLUE",val:"#2196F3",darkText:!1},LIGHT_BLUE:{id:"LIGHT_BLUE",val:"#03A9F4",darkText:!0},CYAN:{id:"CYAN",val:"#00BCD4",darkText:!0},TEAL:{id:"TEAL",val:"#009688",darkText:!1},GREEN:{id:"GREEN",val:"#4CAF50",darkText:!0},LIGHT_GREEN:{id:"LIGHT_GREEN",val:"#8BC34A",darkText:!0},LIME:{id:"LIME",val:"#CDDC39",darkText:!0},YELLOW:{id:"YELLOW",val:"#FFEB3B",darkText:!0},AMBER:{id:"AMBER",val:"#FFC107",darkText:!0},ORANGE:{id:"ORANGE",val:"#FF9800",darkText:!0},DEEP_ORANGE:{id:"DEEP_ORANGE",val:"#FF5722",darkText:!1},BROWN:{id:"BROWN",val:"#795548",darkText:!1},GREY:{id:"GREY",val:"#9E9E9E",darkText:!0},BLUE_GREY:{id:"BLUE_GREY",val:"#607D8B",darkText:!1}},t.PRIMARY_COLOR="BLUE",t.COLOR_NAMES=Object.keys(t.PRIMARY),t.SHUFFLED_COLOR_NAMES=n.shuffle(t.COLOR_NAMES),t.SHUFFLED_PRIMARY_FIRST=[t.PRIMARY_COLOR].concat(t.SHUFFLED_COLOR_NAMES.filter(function(e){return e!==t.PRIMARY_COLOR})),t.NUM_COLORS=t.COLOR_NAMES.length,t.getColor=getColor;var i=new Map;t.getBackgroundClass=getBackgroundClass;var o=null},function(e,t){"use strict";function shuffle(e){for(var t=Array.from(e),r=0,n=t.length;r<n;r++){var i=randomInt(r,n),o=t[i];t[i]=t[r],t[r]=o}return t}function randomInt(e,t){return Math.floor(e+Math.random()*(t-e))}t.shuffle=shuffle,t.randomInt=randomInt;var r=function(){function SeededRandom(e){void 0===e&&(e=Math.random()),0!==e&&2422800383!==e||e++,this.mz=123456789,this.mw=e}return SeededRandom.prototype.random=function(){var e=this.mz,t=this.mw;e=36969*(65535&e)+(e>>16)&4294967295,t=18e3*(65535&t)+(t>>16)&4294967295,this.mz=e,this.mw=t;var r=((e<<16)+t&4294967295)/4294967296;return.5+r},SeededRandom}();t.SeededRandom=r},function(e,t,r){"use strict";var n=r(4),i="|",o=",",a=function(){function Chunker(e){var t=this;this.chunkSize=e,this.onMessage=function(e){for(var r=t.chunkSize,n=e.length,a=Math.ceil(n/r),s=Date.now().toString(),l=0;l<a;l++){var c=l*r,u=e.substring(c,c+Math.min(r,n-c));t.chunks.next(""+s+o+l+o+a+i+u)}},this.messages=new n.Subject,this.chunks=new n.Subject,this.messages.subscribe(this.onMessage)}return Chunker}();t.Chunker=a;var s=function(){function Dechunker(){var e=this;this.onChunk=function(t){var r=t.indexOf(i),n=t.substring(0,r),a=n.split(o,3),s=a[0],c=a[1],u=a[2],p=t.substring(r+1);e.buffer.has(s)||e.buffer.set(s,new l(Number(u)));var h=e.buffer.get(s);h.addChunk(Number(c),p),h.isComplete()&&(e.buffer.delete(s),e.messages.next(h.getMessage()))},this.messages=new n.Subject,this.chunks=new n.Subject,this.buffer=new Map,this.chunks.subscribe(this.onChunk)}return Dechunker}();t.Dechunker=s;var l=function(){function MessageRecord(e){this.numChunks=e,this.received=new Map}return MessageRecord.prototype.addChunk=function(e,t){this.received.set(e,t)},MessageRecord.prototype.isComplete=function(){return this.received.size===this.numChunks},MessageRecord.prototype.getMessage=function(){if(1===this.numChunks)return this.received.get(0);for(var e=[],t=0;t<this.numChunks;t++)e.push(this.received.get(t));return e.join("")},MessageRecord}()},function(e,t,r){"use strict";function compress(e){return n.compressToBase64(e)}function decompress(e){return n.decompressFromBase64(e)}function compressOpSet(e){if(void 0!==e)return null===e?null:compress(JSON.stringify(e))}function decompressOpSet(e){if(void 0!==e)return null===e?null:JSON.parse(decompress(e))}var n=r(226);t.compress=compress,t.decompress=decompress,t.compressOpSet=compressOpSet,t.decompressOpSet=decompressOpSet},function(e,t,r){var n,i=function(){function getBaseValue(e,t){if(!n[e]){n[e]={};for(var r=0;r<e.length;r++)n[e][e.charAt(r)]=r}return n[e][t]}var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={},i={compressToBase64:function(e){if(null==e)return"";var r=i._compress(e,6,function(e){return t.charAt(e)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,function(r){return getBaseValue(t,e.charAt(r))})},compressToUTF16:function(t){return null==t?"":i._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=i.compress(e),r=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var a=t.charCodeAt(n);r[2*n]=a>>>8,r[2*n+1]=a%256}return r},decompressFromUint8Array:function(t){if(null===t||void 0===t)return i.decompress(t);for(var r=new Array(t.length/2),n=0,o=r.length;n<o;n++)r[n]=256*t[2*n]+t[2*n+1];var a=[];return r.forEach(function(t){a.push(e(t))}),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,function(t){return getBaseValue(r,e.charAt(t))}))},compress:function(t){return i._compress(t,16,function(t){return e(t)})},_compress:function(e,t,r){if(null==e)return"";var n,i,o,a={},s={},l="",c="",u="",p=2,h=3,d=2,f=[],m=0,g=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(a,l)||(a[l]=h++,s[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(a,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(n=0;n<d;n++)m<<=1,g==t-1?(g=0,f.push(r(m)),m=0):g++;for(i=u.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i>>=1}else{for(i=1,n=0;n<d;n++)m=m<<1|i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i>>=1}p--,0==p&&(p=Math.pow(2,d),d++),delete s[u]}else for(i=a[u],n=0;n<d;n++)m=m<<1|1&i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i>>=1;p--,0==p&&(p=Math.pow(2,d),d++),a[c]=h++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(n=0;n<d;n++)m<<=1,g==t-1?(g=0,f.push(r(m)),m=0):g++;for(i=u.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i>>=1}else{for(i=1,n=0;n<d;n++)m=m<<1|i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i>>=1}p--,0==p&&(p=Math.pow(2,d),d++),delete s[u]}else for(i=a[u],n=0;n<d;n++)m=m<<1|1&i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i>>=1;p--,0==p&&(p=Math.pow(2,d),d++)}for(i=2,n=0;n<d;n++)m=m<<1|1&i,g==t-1?(g=0,f.push(r(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){f.push(r(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,r,n){var i,o,a,s,l,c,u,p,h=[],d=4,f=4,m=3,g="",y=[],v={val:n(0),position:r,index:1};for(o=0;o<3;o+=1)h[o]=o;for(s=0,c=Math.pow(2,2),u=1;u!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),s|=(l>0?1:0)*u,u<<=1;switch(i=s){case 0:for(s=0,c=Math.pow(2,8),u=1;u!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),s|=(l>0?1:0)*u,u<<=1;p=e(s);break;case 1:for(s=0,c=Math.pow(2,16),u=1;u!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),s|=(l>0?1:0)*u,u<<=1;p=e(s);break;case 2:return""}for(h[3]=p,a=p,y.push(p);;){if(v.index>t)return"";for(s=0,c=Math.pow(2,m),u=1;u!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),s|=(l>0?1:0)*u,u<<=1;switch(p=s){case 0:for(s=0,c=Math.pow(2,8),u=1;u!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),s|=(l>0?1:0)*u,u<<=1;h[f++]=e(s),p=f-1,d--;break;case 1:for(s=0,c=Math.pow(2,16),u=1;u!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),s|=(l>0?1:0)*u,u<<=1;h[f++]=e(s),p=f-1,d--;break;case 2:return y.join("")}if(0==d&&(d=Math.pow(2,m),m++),h[p])g=h[p];else{if(p!==f)return null;g=a+a.charAt(0)}y.push(g),h[f++]=a+g.charAt(0),d--,a=g,0==d&&(d=Math.pow(2,m),m++)}}};return i}();n=function(){return i}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))},function(e,t){"use strict";function diffStrings(e,r){if(e===r)return e?[[t.DIFF_EQUAL,e]]:[];var n=diff_commonPrefix(e,r),i=e.substring(0,n);e=e.substring(n),r=r.substring(n),n=diff_commonSuffix(e,r);var o=e.substring(e.length-n);e=e.substring(0,e.length-n),r=r.substring(0,r.length-n);var a=diff_compute_(e,r);return i&&a.unshift([t.DIFF_EQUAL,i]),o&&a.push([t.DIFF_EQUAL,o]),diff_cleanupMerge(a),a}function diff_compute_(e,r){var n;if(!e)return[[t.DIFF_INSERT,r]];if(!r)return[[t.DIFF_DELETE,e]];var i=e.length>r.length?e:r,o=e.length>r.length?r:e,a=i.indexOf(o);if(a!==-1)return n=[[t.DIFF_INSERT,i.substring(0,a)],[t.DIFF_EQUAL,o],[t.DIFF_INSERT,i.substring(a+o.length)]],e.length>r.length&&(n[0][0]=n[2][0]=t.DIFF_DELETE),n;if(1===o.length)return[[t.DIFF_DELETE,e],[t.DIFF_INSERT,r]];var s=diff_halfMatch_(e,r);if(s){var l=s[0],c=s[1],u=s[2],p=s[3],h=s[4],d=diffStrings(l,u),f=diffStrings(c,p);return d.concat([[t.DIFF_EQUAL,h]],f)}return diff_bisect_(e,r)}function diff_bisect_(e,r){for(var n=e.length,i=r.length,o=Math.ceil((n+i)/2),a=o,s=2*o,l=new Array(s),c=new Array(s),u=0;u<s;u++)l[u]=-1,c[u]=-1;l[a+1]=0,c[a+1]=0;for(var p=n-i,h=p%2!==0,d=0,f=0,m=0,g=0,y=0;y<o;y++){for(var v=-y+d;v<=y-f;v+=2){var b=a+v,_=void 0;_=v===-y||v!==y&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1;for(var w=_-v;_<n&&w<i&&e.charAt(_)===r.charAt(w);)_++,w++;if(l[b]=_,_>n)f+=2;else if(w>i)d+=2;else if(h){var x=a+p-v;if(x>=0&&x<s&&c[x]!==-1){var S=n-c[x];if(_>=S)return diff_bisectSplit_(e,r,_,w)}}}for(var C=-y+m;C<=y-g;C+=2){var x=a+C,S=void 0;S=C===-y||C!==y&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1;for(var k=S-C;S<n&&k<i&&e.charAt(n-S-1)===r.charAt(i-k-1);)S++,k++;if(c[x]=S,S>n)g+=2;else if(k>i)m+=2;else if(!h){var b=a+p-C;if(b>=0&&b<s&&l[b]!==-1){var _=l[b],w=a+_-b;if(S=n-S,_>=S)return diff_bisectSplit_(e,r,_,w)}}}}return[[t.DIFF_DELETE,e],[t.DIFF_INSERT,r]]}function diff_bisectSplit_(e,t,r,n){var i=e.substring(0,r),o=t.substring(0,n),a=e.substring(r),s=t.substring(n),l=diffStrings(i,o),c=diffStrings(a,s);return l.concat(c)}function diff_commonPrefix(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,o=0;r<i;)e.substring(o,i)===t.substring(o,i)?(r=i,o=r):n=i,i=Math.floor((n-r)/2+r);return i}function diff_commonSuffix(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,o=0;r<i;)e.substring(e.length-i,e.length-o)===t.substring(t.length-i,t.length-o)?(r=i,o=r):n=i,i=Math.floor((n-r)/2+r);return i}function diff_halfMatch_(e,t){function diff_halfMatchI_(e,t,r){for(var n,i,o,a,s=e.substring(r,r+Math.floor(e.length/4)),l=-1,c="";(l=t.indexOf(s,l+1))!==-1;){var u=diff_commonPrefix(e.substring(r),t.substring(l)),p=diff_commonSuffix(e.substring(0,r),t.substring(0,l));c.length<p+u&&(c=t.substring(l-p,l)+t.substring(l,l+u),n=e.substring(0,r-p),i=e.substring(r+u),o=t.substring(0,l-p),a=t.substring(l+u))}return 2*c.length>=e.length?[n,i,o,a,c]:null}var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;var i,o=diff_halfMatchI_(r,n,Math.ceil(r.length/4)),a=diff_halfMatchI_(r,n,Math.ceil(r.length/2));if(!o&&!a)return null;i=a?o&&o[4].length>a[4].length?o:a:o;var s,l,c,u;e.length>t.length?(s=i[0],l=i[1],c=i[2],u=i[3]):(c=i[0],u=i[1],s=i[2],l=i[3]);var p=i[4];return[s,l,c,u,p]}function diff_cleanupMerge(e){e.push([t.DIFF_EQUAL,""]);for(var r,n=0,i=0,o=0,a="",s="";n<e.length;)switch(e[n][0]){case t.DIFF_INSERT:o++,s+=e[n][1],n++;break;case t.DIFF_DELETE:i++,a+=e[n][1],n++;break;case t.DIFF_EQUAL:i+o>1?(0!==i&&0!==o&&(r=diff_commonPrefix(s,a),0!==r&&(n-i-o>0&&e[n-i-o-1][0]===t.DIFF_EQUAL?e[n-i-o-1][1]+=s.substring(0,r):(e.splice(0,0,[t.DIFF_EQUAL,s.substring(0,r)]),n++),s=s.substring(r),a=a.substring(r)),r=diff_commonSuffix(s,a),0!==r&&(e[n][1]=s.substring(s.length-r)+e[n][1],s=s.substring(0,s.length-r),a=a.substring(0,a.length-r))),0===i?e.splice(n-o,i+o,[t.DIFF_INSERT,s]):0===o?e.splice(n-i,i+o,[t.DIFF_DELETE,a]):e.splice(n-i-o,i+o,[t.DIFF_DELETE,a],[t.DIFF_INSERT,s]),n=n-i-o+(i?1:0)+(o?1:0)+1):0!==n&&e[n-1][0]===t.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,o=0,i=0,a="",s=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(n=1;n<e.length-1;)e[n-1][0]===t.DIFF_EQUAL&&e[n+1][0]===t.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&diff_cleanupMerge(e)}t.DIFF_DELETE=-1,t.DIFF_INSERT=1,t.DIFF_EQUAL=0,t.diffStrings=diffStrings},function(e,t){"use strict";function debounce(e,t){var r=null,n=function(){r=null,e()};return function(){null!==r&&clearTimeout(r),r=self.setTimeout(n,t)}}t.debounce=debounce},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=r(3),a=function(){function AppComponent(){}return AppComponent=n([o.Component({selector:"app",template:"<router-outlet></router-outlet>"}),i("design:paramtypes",[])],AppComponent)}();t.AppComponent=a},function(e,t,r){"use strict";var n,i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=r(3),s=r(35),l=r(231),c=r(65),u=r(66),p=r(221),h=r(233),d=r(270);!function(e){e[e.Welcome=0]="Welcome",e[e.AudioSetup=1]="AudioSetup",e[e.Editor=2]="Editor",e[e.About=3]="About"}(n||(n={}));var f=function(){function PadComponent(e,t,r,i){this.router=e,this.route=t,this.blindpadService=r,this.media=i,this.PadView=n,this.visibleModeChoices=null}return PadComponent.prototype.ngOnInit=function(){var e=this;this.routeSub=this.route.params.subscribe(function(t){var r=e.route.snapshot.url[0],i=r?r.path:"",o=t.id;e.randomPadId=p.getDescribedNoun("Pad",1e4),e.blindpadService.getPadId()&&e.blindpadService.getPadId()!==o&&e.blindpadService.setPadId(null),"pad"===i&&o?(e.blindpadService.setPadId(o),e.media.needsCalibration()||e.media.initializeLocal(),e.view=e.blindpadService.isPadStarted()?n.Editor:n.Welcome):"about"===i?e.view=n.About:e.view=n.Welcome})},PadComponent.prototype.ngOnDestroy=function(){this.routeSub.unsubscribe()},PadComponent.prototype.hasWebRTC=function(){return!!window.RTCPeerConnection&&!!window.navigator&&!!window.navigator.getUserMedia},PadComponent.prototype.hasWebAudio=function(){return!!window.AudioContext||!!window.webkitAudioContext},PadComponent.prototype.browserIsSupported=function(){return this.hasWebAudio()&&this.hasWebRTC()},PadComponent.prototype.getView=function(){return this.view},PadComponent.prototype.getPad=function(){return this.blindpadService.getPad().value},PadComponent.prototype.hasPad=function(){return!!this.getPad()},PadComponent.prototype.getPadMode=function(){var e=this.getPad();return e?h.getModeForMime(e.getMimeType().value):null},PadComponent.prototype.onModeButtonClick=function(){this.visibleModeChoices?this.visibleModeChoices=null:this.visibleModeChoices=h.MODES},PadComponent.prototype.onModeChoice=function(e){e&&this.hasPad()?e.children&&e.children.length>0?this.visibleModeChoices=e.children:(this.getPad().setMimeType(e.mime),this.visibleModeChoices=null):this.visibleModeChoices=null},PadComponent.prototype.onDocumentClick=function(e){if(null!==this.visibleModeChoices){var t=e.target,r="mode-choice"===t.tagName.toLowerCase(),n=t.classList.contains("mode-button");n||r||(this.visibleModeChoices=null)}},PadComponent.prototype.isChromeOnMac=function(){return!!l.chrome&&!!l.mac},PadComponent.prototype.optOutOfVoice=function(){this.media.setOptOut(),this.view=n.Welcome},PadComponent.prototype.startAudioSetup=function(){var e=this,t=this.media.getLocalStream().subscribe(null,function(i){e.view=n.Welcome,t.unsubscribe(),t=null,r&&r.unsubscribe()}),r=this.media.getCalibration().filter(function(e){return null!==e}).take(1).subscribe(function(r){e.view===n.AudioSetup&&(e.view=n.Welcome,t&&t.unsubscribe())});this.media.initializeLocal(),this.view=n.AudioSetup},PadComponent.prototype.isConnected=function(){return this.hasPad()&&this.getPad().isSignalerConnected()},PadComponent.prototype.getUsers=function(){return this.hasPad()?Array.from(this.getPad().getUsers().values()):[]},PadComponent.prototype.getJoinId=function(){return this.hasPad()?this.getPad().getPadId():this.randomPadId},PadComponent.prototype.joinPad=function(){this.hasPad()?(this.blindpadService.startPad(),this.view=n.Editor):(this.blindpadService.setPadId(this.randomPadId),this.blindpadService.startPad(),this.router.navigate(["/pad",this.randomPadId]))},PadComponent=i([a.Component({selector:"pad",template:r(271),styles:[r(272)],animations:[d.fadeInOut],host:{"(document:click)":"onDocumentClick($event)"}}),o("design:paramtypes",[s.Router,s.ActivatedRoute,c.BlindpadService,u.MediaService])],PadComponent)}();t.PadComponent=f},function(e,t,r){!function(t,n){"undefined"!=typeof e&&e.exports?e.exports=n():r(232)(t,n)}("bowser",function(){function detect(t){function getFirstMatch(e){var r=t.match(e);return r&&r.length>1&&r[1]||""}function getSecondMatch(e){var r=t.match(e);return r&&r.length>1&&r[2]||""}var r,n=getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(t),o=!i&&/android/i.test(t),a=/nexus\s*[0-6]\s*/i.test(t),s=!a&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),c=/silk/i.test(t),u=/sailfish/i.test(t),p=/tizen/i.test(t),h=/(web|hpw)os/i.test(t),d=/windows phone/i.test(t),f=(/SamsungBrowser/i.test(t),!d&&/windows/i.test(t)),m=!n&&!c&&/macintosh/i.test(t),g=!o&&!u&&!p&&!h&&/linux/i.test(t),y=getFirstMatch(/edge\/(\d+(\.\d+)?)/i),v=getFirstMatch(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(t),_=!b&&/[^-]mobi/i.test(t),w=/xbox/i.test(t);/opera/i.test(t)?r={name:"Opera",opera:e,version:v||getFirstMatch(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(t)?r={name:"Opera",opera:e,version:getFirstMatch(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||v}:/SamsungBrowser/i.test(t)?r={name:"Samsung Internet for Android",samsungBrowser:e,version:v||getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(t)?r={name:"Opera Coast",coast:e,version:v||getFirstMatch(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?r={name:"Yandex Browser",yandexbrowser:e,version:v||getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?r={name:"UC Browser",ucbrowser:e,version:getFirstMatch(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?r={name:"Maxthon",maxthon:e,version:getFirstMatch(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?r={name:"Epiphany",epiphany:e,version:getFirstMatch(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?r={name:"Puffin",puffin:e,version:getFirstMatch(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?r={name:"Sleipnir",sleipnir:e,version:getFirstMatch(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?r={name:"K-Meleon",kMeleon:e,version:getFirstMatch(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:d?(r={name:"Windows Phone",windowsphone:e},y?(r.msedge=e,r.version=y):(r.msie=e,r.version=getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?r={name:"Internet Explorer",msie:e,version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?r={name:"Chrome",chromeos:e,chromeBook:e,chrome:e,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?r={name:"Microsoft Edge",msedge:e,version:y}:/vivaldi/i.test(t)?r={name:"Vivaldi",vivaldi:e,version:getFirstMatch(/vivaldi\/(\d+(\.\d+)?)/i)||v}:u?r={name:"Sailfish",sailfish:e,version:getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?r={name:"SeaMonkey",seamonkey:e,version:getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(r={name:"Firefox",firefox:e,version:getFirstMatch(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(r.firefoxos=e)):c?r={name:"Amazon Silk",silk:e,version:getFirstMatch(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?r={name:"PhantomJS",phantom:e,version:getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?r={name:"SlimerJS",slimer:e,version:getFirstMatch(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?r={name:"BlackBerry",blackberry:e,version:v||getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(r={name:"WebOS",webos:e,version:v||getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(r.touchpad=e)):/bada/i.test(t)?r={name:"Bada",bada:e,version:getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)}:p?r={name:"Tizen",tizen:e,version:getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/qupzilla/i.test(t)?r={name:"QupZilla",qupzilla:e,version:getFirstMatch(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||v
}:/chromium/i.test(t)?r={name:"Chromium",chromium:e,version:getFirstMatch(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||v}:/chrome|crios|crmo/i.test(t)?r={name:"Chrome",chrome:e,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?r={name:"Android",version:v}:/safari|applewebkit/i.test(t)?(r={name:"Safari",safari:e},v&&(r.version=v)):n?(r={name:"iphone"==n?"iPhone":"ipad"==n?"iPad":"iPod"},v&&(r.version=v)):r=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:getFirstMatch(/googlebot\/(\d+(\.\d+))/i)||v}:{name:getFirstMatch(/^(.*)\/(.*) /),version:getSecondMatch(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(r.name=r.name||"Blink",r.blink=e):(r.name=r.name||"Webkit",r.webkit=e),!r.version&&v&&(r.version=v)):!r.opera&&/gecko\//i.test(t)&&(r.name=r.name||"Gecko",r.gecko=e,r.version=r.version||getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)),r.msedge||!o&&!r.silk?n?(r[n]=e,r.ios=e):m?r.mac=e:w?r.xbox=e:f?r.windows=e:g&&(r.linux=e):r.android=e;var x="";r.windowsphone?x=getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n?(x=getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i),x=x.replace(/[_\s]/g,".")):o?x=getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i):r.webos?x=getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?x=getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?x=getFirstMatch(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(x=getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(r.osversion=x);var S=x.split(".")[0];return b||s||"ipad"==n||o&&(3==S||S>=4&&!_)||r.silk?r.tablet=e:(_||"iphone"==n||"ipod"==n||o||a||r.blackberry||r.webos||r.bada)&&(r.mobile=e),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=e:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=e:r.x=e,r}function getVersionPrecision(e){return e.split(".").length}function map(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function compareVersions(e){for(var t=Math.max(getVersionPrecision(e[0]),getVersionPrecision(e[1])),r=map(e,function(e){var r=t-getVersionPrecision(e);return e+=new Array(r+1).join(".0"),map(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(r[0][t]>r[1][t])return 1;if(r[0][t]!==r[1][t])return-1;if(0===t)return 0}}function isUnsupportedBrowser(e,r,n){var i=t;"string"==typeof r&&(n=r,r=void 0),void 0===r&&(r=!1),n&&(i=detect(n));var o=""+i.version;for(var a in e)if(e.hasOwnProperty(a)&&i[a])return compareVersions([o,e[a]])<0;return r}function check(e,t,r){return!isUnsupportedBrowser(e,t,r)}var e=!0,t=detect("undefined"!=typeof navigator?navigator.userAgent||"":"");return t.test=function(e){for(var r=0;r<e.length;++r){var n=e[r];if("string"==typeof n&&n in t)return!0}return!1},t.isUnsupportedBrowser=isUnsupportedBrowser,t.compareVersions=compareVersions,t.check=check,t._detect=detect,t})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,r){"use strict";function buildEditor(e,r){return void 0===r&&(r=t.DEFAULT_EDITOR_CONFIG),n(e,r)}function getModeForMime(e){return e?i[e]||o:t.DEFAULT_MODE}function filterModes(e){if(!e||0===e.length)return[];var t=n.mimeModes,r=[];return e.forEach(function(e){var n=filterModes(e.children);(n.length>0||void 0!==t[e.mime])&&(e.children=n,r.push(e))}),r.sort(function(e,t){return e.name.localeCompare(t.name)})}function indexModes(e,t){return void 0===t&&(t={}),e&&0!==e.length?(e.forEach(function(e){e.mime&&(t[e.mime]=e),indexModes(e.children,t)}),t):t}var n=r(234);r(235),r(239),r(241),r(242),r(243),r(244),r(245),r(246),r(248),r(249),r(250),r(251),r(253),r(254),r(255),r(256),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),t.DEFAULT_MODE={name:"Plaintext",mime:"text/plain",children:[]},t.JAVASCRIPT={name:"JavaScript",mime:"application/javascript",children:[]},t.C={name:"C",mime:"text/x-c",children:[]},t.PYTHON={name:"Python",mime:"text/x-python",children:[]},t.RUST={name:"Rust",mime:"text/x-rustsrc",children:[]},t.MODES=filterModes([t.DEFAULT_MODE,{name:"Markdown",mime:"text/x-markdown",children:[]},t.C,{name:"C++",mime:"text/x-c++src",children:[]},{name:"Java",mime:"text/x-java",children:[]},{name:"C#",mime:"text/x-csharp",children:[]},{name:"Scala",mime:"text/x-scala",children:[]},{name:"Kotlin",mime:"text/x-kotlin",children:[]},{name:"GLSL",children:[{name:"Vertex Shader",mime:"x-shader/x-vertex",children:[]},{name:"Fragment Shader",mime:"x-shader/x-fragment",children:[]}]},{name:"Objective C",mime:"text/x-objectivec",children:[]},{name:"Clojure",mime:"text/x-clojure",children:[]},{name:"ClojureScript",mime:"text/x-clojurescript",children:[]},{name:"CSS flavors",children:[{name:"CSS",mime:"text/css",children:[]},{name:"SCSS",mime:"text/x-scss",children:[]},{name:"Sass",mime:"text/x-sass",children:[]},{name:"LESS",mime:"text/x-less",children:[]}]},t.JAVASCRIPT,{name:"TypeScript",mime:"application/typescript",children:[]},{name:"CoffeeScript",mime:"text/coffeescript",children:[]},{name:"JSX",mime:"text/jsx",children:[]},{name:"JSON",mime:"application/json",children:[]},{name:"Julia",mime:"text/x-julia",children:[]},{name:"MATLAB",mime:"text/x-octave",children:[]},{name:"R",mime:"text/x-rsrc",children:[]},{name:"SQL",children:[{name:"ANSI SQL",mime:"text/x-sql",children:[]},{name:"Microsoft SQL",mime:"text/x-mssql",children:[]},{name:"MySQL",mime:"text/x-mysql",children:[]},{name:"MariaDB",mime:"text/x-mariadb",children:[]},{name:"Cassandra",mime:"text/x-cassandra",children:[]},{name:"PL/SQL",mime:"text/x-plsql",children:[]},{name:"HiveQL",mime:"text/x-hive",children:[]},{name:"Postgres",mime:"text/x-pgsql",children:[]},{name:"GQL",mime:"text/x-gql",children:[]}]},{name:"Dockerfile",mime:"text/x-dockerfile",children:[]},{name:"Erlang",mime:"text/x-erlang",children:[]},{name:"Go",mime:"text/x-go",children:[]},{name:"Haskell",mime:"text/x-haskell",children:[]},{name:"XML",mime:"application/xml",children:[]},{name:"HTML",mime:"text/html",children:[]},{name:"Perl",mime:"text/x-perl",children:[]},{name:"PHP",mime:"text/x-php",children:[]},t.PYTHON,{name:"Ruby",mime:"text/x-ruby",children:[]},t.RUST,{name:"Bash",mime:"text/x-sh",children:[]},{name:"Swift",mime:"text/x-swift",children:[]},{name:"Visual Basic",mime:"text/x-vb",children:[]}]);var i=indexModes(t.MODES),o={name:"Unknown",mime:t.DEFAULT_MODE.mime,children:[]};t.DEFAULT_EDITOR_CONFIG={theme:"monokai",lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,autofocus:!0,mode:t.DEFAULT_MODE.mime,viewportMargin:1/0},t.buildEditor=buildEditor,t.getModeForMime=getModeForMime},function(e,t,r){!function(t){e.exports=t()}(function(){"use strict";function CodeMirror(e,t){if(!(this instanceof CodeMirror))return new CodeMirror(e,t);this.options=t=t?copyObj(t):{},copyObj(j,t,!1),setGuttersForLineNumbers(t);var r=t.value;"string"==typeof r&&(r=new ue(r,t.mode,null,t.lineSeparator)),this.doc=r;var n=new CodeMirror.inputStyles[t.inputStyle](this),i=this.display=new Display(e,r,n);i.wrapper.CodeMirror=this,updateGutters(this),themeChanged(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!m&&i.input.focus(),initScrollbars(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Delayed,keySeq:null,specialChars:null};var l=this;o&&a<11&&setTimeout(function(){l.display.input.reset(!0)},20),registerEventHandlers(this),ensureGlobalHandlers(),startOperation(this),this.curOp.forceUpdate=!0,attachDoc(this,r),t.autofocus&&!m||l.hasFocus()?setTimeout(bind(onFocus,this),20):onBlur(this);for(var c in U)U.hasOwnProperty(c)&&U[c](this,t[c],z);maybeUpdateLineNumberWidth(this),t.finishInit&&t.finishInit(this);for(var u=0;u<G.length;++u)G[u](this);endOperation(this),s&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(i.lineDiv).textRendering&&(i.lineDiv.style.textRendering="auto")}function Display(e,t,n){var i=this;this.input=n,i.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=elt("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=elt("div",null,"CodeMirror-code"),i.selectionDiv=elt("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=elt("div",null,"CodeMirror-cursors"),i.measure=elt("div",null,"CodeMirror-measure"),i.lineMeasure=elt("div",null,"CodeMirror-measure"),i.lineSpace=elt("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=elt("div",[elt("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=elt("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=elt("div",null,null,"position: absolute; height: "+we+"px; width: 1px;"),i.gutters=elt("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=elt("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=elt("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),o&&a<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),s||r&&m||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function loadMode(e){e.doc.mode=CodeMirror.getMode(e.options,e.doc.modeOption),resetModeState(e)}function resetModeState(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,startWorker(e,100),e.state.modeGen++,e.curOp&&regChange(e)}function wrappingChanged(e){e.options.lineWrapping?(Ve(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Be(e.display.wrapper,"CodeMirror-wrap"),findMaxLine(e)),estimateLineHeights(e),regChange(e),clearCaches(e),setTimeout(function(){updateScrollbars(e)},100)}function estimateHeight(e){var t=textHeight(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/charWidth(e.display)-3);return function(i){if(lineIsHidden(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function estimateLineHeights(e){var t=e.doc,r=estimateHeight(e);t.iter(function(e){var t=r(e);t!=e.height&&updateLineHeight(e,t)})}function themeChanged(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),clearCaches(e)}function guttersChanged(e){updateGutters(e),regChange(e),setTimeout(function(){alignHorizontally(e)},20)}function updateGutters(e){var t=e.display.gutters,r=e.options.gutters;removeChildren(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(elt("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",updateGutterSpace(e)}function updateGutterSpace(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function lineLength(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=collapsedSpanAtStart(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=collapsedSpanAtEnd(n);){var i=t.find(0,!0);r-=n.text.length-i.from.ch,n=i.to.line,r+=n.text.length-i.to.ch}return r}function findMaxLine(e){var t=e.display,r=e.doc;t.maxLine=getLine(r,r.first),t.maxLineLength=lineLength(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=lineLength(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function setGuttersForLineNumbers(e){var t=indexOf(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function measureForScrollbars(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+paddingVert(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+scrollGap(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function NativeScrollbars(e,t,r){this.cm=r;var n=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n),e(i),ge(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),ge(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,o&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function NullScrollbars(){}function initScrollbars(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Be(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new CodeMirror.scrollbarModel[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ge(t,"mousedown",function(){e.state.focused&&setTimeout(function(){e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){"horizontal"==r?setScrollLeft(e,t):setScrollTop(e,t)},e),e.display.scrollbars.addClass&&Ve(e.display.wrapper,e.display.scrollbars.addClass)}function updateScrollbars(e,t){t||(t=measureForScrollbars(e));var r=e.display.barWidth,n=e.display.barHeight;updateScrollbarsInner(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&updateHeightsInViewport(e),updateScrollbarsInner(e,measureForScrollbars(e)),r=e.display.barWidth,n=e.display.barHeight}function updateScrollbarsInner(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function visibleLines(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-paddingTop(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=lineAtHeight(t,n),a=lineAtHeight(t,i);if(r&&r.ensure){var s=r.ensure.from.line,l=r.ensure.to.line;s<o?(o=s,a=lineAtHeight(t,heightAtLine(getLine(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=lineAtHeight(t,heightAtLine(getLine(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function alignHorizontally(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=compensateForHScroll(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",a=0;a<r.length;a++)if(!r[a].hidden){e.options.fixedGutter&&(r[a].gutter&&(r[a].gutter.style.left=o),r[a].gutterBackground&&(r[a].gutterBackground.style.left=o));var s=r[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function maybeUpdateLineNumberWidth(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=lineNumberFor(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(elt("div",[elt("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-a)+1,n.lineNumWidth=n.lineNumInnerWidth+a,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",updateGutterSpace(e),!0}return!1}function lineNumberFor(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function compensateForHScroll(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function DisplayUpdate(e,t,r){var n=e.display;this.viewport=t,this.visible=visibleLines(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=displayWidth(e),this.force=r,this.dims=getDimensions(e),this.events=[]}function maybeClipScrollbars(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=scrollGap(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=scrollGap(e)+"px",t.scrollbarsClipped=!0)}function updateDisplayIfNeeded(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return resetView(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==countDirtyView(e))return!1;maybeUpdateLineNumberWidth(e)&&(resetView(e),t.dims=getDimensions(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>a&&r.viewTo-a<20&&(a=Math.min(i,r.viewTo)),S&&(o=visualLineNo(e.doc,o),a=visualLineEndNo(e.doc,a));var s=o!=r.viewFrom||a!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;adjustView(e,o,a),r.viewOffset=heightAtLine(getLine(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var l=countDirtyView(e);if(!s&&0==l&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var c=activeElt();return l>4&&(r.lineDiv.style.display="none"),patchDisplay(e,r.updateLineNumbers,t.dims),l>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,c&&activeElt()!=c&&c.offsetHeight&&c.focus(),removeChildren(r.cursorDiv),removeChildren(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,s&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,startWorker(e,400)),r.updateLineNumbers=null,!0}function postUpdateDisplay(e,t){for(var r=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=displayWidth(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+paddingVert(e.display)-displayHeight(e),r.top)}),t.visible=visibleLines(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&updateDisplayIfNeeded(e,t);n=!1){updateHeightsInViewport(e);var i=measureForScrollbars(e);updateSelection(e),updateScrollbars(e,i),setDocumentHeight(e,i)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function updateDisplaySimple(e,t){var r=new DisplayUpdate(e,t);if(updateDisplayIfNeeded(e,r)){updateHeightsInViewport(e),postUpdateDisplay(e,r);var n=measureForScrollbars(e);updateSelection(e),updateScrollbars(e,n),setDocumentHeight(e,n),r.finish()}}function setDocumentHeight(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+scrollGap(e)+"px"}function updateHeightsInViewport(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i,s=t.view[n];if(!s.hidden){if(o&&a<8){var l=s.node.offsetTop+s.node.offsetHeight;i=l-r,r=l}else{var c=s.node.getBoundingClientRect();i=c.bottom-c.top}var u=s.line.height-i;if(i<2&&(i=textHeight(t)),(u>.001||u<-.001)&&(updateLineHeight(s.line,i),updateWidgetHeight(s.line),s.rest))for(var p=0;p<s.rest.length;p++)updateWidgetHeight(s.rest[p])}}}function updateWidgetHeight(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function getDimensions(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)r[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[a]]=o.clientWidth;return{fixedPos:compensateForHScroll(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function patchDisplay(e,t,r){function rm(t){var r=t.nextSibling;return s&&g&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var n=e.display,i=e.options.lineNumbers,o=n.lineDiv,a=o.firstChild,l=n.view,c=n.viewFrom,u=0;u<l.length;u++){var p=l[u];if(p.hidden);else if(p.node&&p.node.parentNode==o){for(;a!=p.node;)a=rm(a);var h=i&&null!=t&&t<=c&&p.lineNumber;p.changes&&(indexOf(p.changes,"gutter")>-1&&(h=!1),updateLineForChanges(e,p,c,r)),h&&(removeChildren(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(lineNumberFor(e.options,c)))),a=p.node.nextSibling}else{var d=buildLineElement(e,p,c,r);o.insertBefore(d,a)}c+=p.size}for(;a;)a=rm(a)}function updateLineForChanges(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?updateLineText(e,t):"gutter"==o?updateLineGutter(e,t,r,n):"class"==o?updateLineClasses(t):"widget"==o&&updateLineWidgets(e,t,n)}t.changes=null}function ensureLineWrapped(e){return e.node==e.text&&(e.node=elt("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&a<8&&(e.node.style.zIndex=2)),e.node}function updateLineBackground(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=ensureLineWrapped(e);e.background=r.insertBefore(elt("div",null,t),r.firstChild)}}function getLineContent(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):buildLineContent(e,t)}function updateLineText(e,t){var r=t.text.className,n=getLineContent(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,updateLineClasses(t)):r&&(t.text.className=r)}function updateLineClasses(e){updateLineBackground(e),e.line.wrapClass?ensureLineWrapped(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function updateLineGutter(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=ensureLineWrapped(t);t.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var i=ensureLineWrapped(t),a=t.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),i.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(elt("div",lineNumberFor(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],c=o.hasOwnProperty(l)&&o[l];c&&a.appendChild(elt("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function updateLineWidgets(e,t,r){t.alignable&&(t.alignable=null);for(var n,i=t.node.firstChild;i;i=n){var n=i.nextSibling;"CodeMirror-linewidget"==i.className&&t.node.removeChild(i)}insertLineWidgets(e,t,r)}function buildLineElement(e,t,r,n){var i=getLineContent(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),updateLineClasses(t),updateLineGutter(e,t,r,n),insertLineWidgets(e,t,n),t.node}function insertLineWidgets(e,t,r){if(insertLineWidgetsFor(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)insertLineWidgetsFor(e,t.rest[n],t,r,!1)}function insertLineWidgetsFor(e,t,r,n,i){if(t.widgets)for(var o=ensureLineWrapped(r),a=0,s=t.widgets;a<s.length;++a){var l=s[a],c=elt("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),positionLineWidget(l,c,r,n),e.display.input.setUneditable(c),i&&l.above?o.insertBefore(c,r.gutter||r.text):o.appendChild(c),signalLater(l,"redraw")}}function positionLineWidget(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function copyPos(e){return C(e.line,e.ch)}function maxPos(e,t){return k(e,t)<0?t:e}function minPos(e,t){return k(e,t)<0?e:t}function ensureFocus(e){e.state.focused||(e.display.input.focus(),onFocus(e))}function applyTextInput(e,t,r,n,i){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var a=e.state.pasteIncoming||"paste"==i,s=o.splitLines(t),l=null;if(a&&n.ranges.length>1)if(E&&E.text.join("\n")==t){if(n.ranges.length%E.text.length==0){l=[];for(var c=0;c<E.text.length;c++)l.push(o.splitLines(E.text[c]))}}else s.length==n.ranges.length&&(l=map(s,function(e){return[e]}));for(var c=n.ranges.length-1;c>=0;c--){var u=n.ranges[c],p=u.from(),h=u.to();u.empty()&&(r&&r>0?p=C(p.line,p.ch-r):e.state.overwrite&&!a?h=C(h.line,Math.min(getLine(o,h.line).text.length,h.ch+lst(s).length)):E&&E.lineWise&&E.text.join("\n")==t&&(p=h=C(p.line,0)));var d=e.curOp.updateInput,f={from:p,to:h,text:l?l[c%l.length]:s,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};makeChange(e.doc,f),signalLater(e,"inputRead",e,f)}t&&!a&&triggerElectric(e,t),ensureCursorVisible(e),e.curOp.updateInput=d,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function handlePaste(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||runInOp(t,function(){applyTextInput(t,r,0,null,"paste")}),!0}function triggerElectric(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=indentLine(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(getLine(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=indentLine(e,i.head.line,"smart"));a&&signalLater(e,"electricInput",e,i.head.line)}}}function copyableRanges(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,o={anchor:C(i,0),head:C(i+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function disableBrowserMagic(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function TextareaInput(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Delayed,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function hiddenTextarea(){var e=elt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=elt("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?e.style.width="1000px":e.setAttribute("wrap","off"),f&&(e.style.border="1px solid black"),disableBrowserMagic(e),t}function ContentEditableInput(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Delayed,this.gracePeriod=!1}function posToDOM(e,t){var r=findViewForLine(e,t.line);if(!r||r.hidden)return null;var n=getLine(e.doc,t.line),i=mapFromLineView(r,n,t.line),o=getOrder(n),a="left";if(o){var s=getBidiPartAt(o,t.ch);a=s%2?"right":"left"}var l=nodeAndOffsetInLineMap(i.map,t.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function badPos(e,t){return t&&(e.bad=!0),e}function domToPos(e,t,r){var n;if(t==e.display.lineDiv){if(n=e.display.lineDiv.childNodes[r],!n)return badPos(e.clipPos(C(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return locateNodeInLineView(o,t,r)}}function locateNodeInLineView(e,t,r){function find(t,r,n){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?l.map:c[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==r){var u=lineNo(i<0?e.line:e.rest[i]),p=o[a]+n;return(n<0||s!=t)&&(p=o[a+(n?1:0)]),C(u,p)}}}var n=e.text.firstChild,i=!1;if(!t||!Le(n,t))return badPos(C(lineNo(e.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[r],r=0,!t)){var o=e.rest?lst(e.rest):e.line;return badPos(C(lineNo(o),o.text.length),i)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,r&&(r=a.nodeValue.length));s.parentNode!=n;)s=s.parentNode;var l=e.measure,c=l.maps,u=find(a,s,r);if(u)return badPos(u,i);for(var p=s.nextSibling,h=a?a.nodeValue.length-r:0;p;p=p.nextSibling){if(u=find(p,p.firstChild,0))return badPos(C(u.line,u.ch-h),i);h+=p.textContent.length}for(var d=s.previousSibling,h=r;d;d=d.previousSibling){if(u=find(d,d.firstChild,-1))return badPos(C(u.line,u.ch+h),i);h+=d.textContent.length}}function domTextBetween(e,t,r,n,i){function recognizeMarker(e){return function(t){return t.id==e}}function walk(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(null!=r)return""==r&&(r=t.textContent.replace(/\u200b/g,"")),void(o+=r);var l,c=t.getAttribute("cm-marker");if(c){var u=e.findMarks(C(n,0),C(i+1,0),recognizeMarker(+c));return void(u.length&&(l=u[0].find())&&(o+=getBetween(e.doc,l.from,l.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;for(var p=0;p<t.childNodes.length;p++)walk(t.childNodes[p]);/^(pre|div|p)$/i.test(t.nodeName)&&(a=!0)}else if(3==t.nodeType){var h=t.nodeValue;if(!h)return;a&&(o+=s,a=!1),o+=h}}for(var o="",a=!1,s=e.doc.lineSeparator();walk(t),t!=r;)t=t.nextSibling;return o}function Selection(e,t){this.ranges=e,this.primIndex=t}function Range(e,t){this.anchor=e,this.head=t}function normalizeSelection(e,t){var r=e[t];e.sort(function(e,t){return k(e.from(),t.from());
}),t=indexOf(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(k(o.to(),i.from())>=0){var a=minPos(o.from(),i.from()),s=maxPos(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new Range(l?s:a,l?a:s))}}return new Selection(e,t)}function simpleSelection(e,t){return new Selection([new Range(e,t||e)],0)}function clipLine(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function clipPos(e,t){if(t.line<e.first)return C(e.first,0);var r=e.first+e.size-1;return t.line>r?C(r,getLine(e,r).text.length):clipToLen(t,getLine(e,t.line).text.length)}function clipToLen(e,t){var r=e.ch;return null==r||r>t?C(e.line,t):r<0?C(e.line,0):e}function isLine(e,t){return t>=e.first&&t<e.first+e.size}function clipPosArray(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=clipPos(e,t[n]);return r}function extendRange(e,t,r,n){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(n){var o=k(r,i)<0;o!=k(n,i)<0?(i=r,r=n):o!=k(r,n)<0&&(r=n)}return new Range(i,r)}return new Range(n||r,r)}function extendSelection(e,t,r,n){setSelection(e,new Selection([extendRange(e,e.sel.primary(),t,r)],0),n)}function extendSelections(e,t,r){for(var n=[],i=0;i<e.sel.ranges.length;i++)n[i]=extendRange(e,e.sel.ranges[i],t[i],null);var o=normalizeSelection(n,e.sel.primIndex);setSelection(e,o,r)}function replaceOneSelection(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,setSelection(e,normalizeSelection(i,e.sel.primIndex),n)}function setSimpleSelection(e,t,r,n){setSelection(e,simpleSelection(t,r),n)}function filterSelectionChange(e,t,r){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new Range(clipPos(e,t[r].anchor),clipPos(e,t[r].head))},origin:r&&r.origin};return be(e,"beforeSelectionChange",e,n),e.cm&&be(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?normalizeSelection(n.ranges,n.ranges.length-1):t}function setSelectionReplaceHistory(e,t,r){var n=e.history.done,i=lst(n);i&&i.ranges?(n[n.length-1]=t,setSelectionNoUndo(e,t,r)):setSelection(e,t,r)}function setSelection(e,t,r){setSelectionNoUndo(e,t,r),addSelectionToHistory(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function setSelectionNoUndo(e,t,r){(hasHandler(e,"beforeSelectionChange")||e.cm&&hasHandler(e.cm,"beforeSelectionChange"))&&(t=filterSelectionChange(e,t,r));var n=r&&r.bias||(k(t.primary().head,e.sel.primary().head)<0?-1:1);setSelectionInner(e,skipAtomicInSelection(e,t,n,!0)),r&&r.scroll===!1||!e.cm||ensureCursorVisible(e.cm)}function setSelectionInner(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,signalCursorActivity(e.cm)),signalLater(e,"cursorActivity",e))}function reCheckSelection(e){setSelectionInner(e,skipAtomicInSelection(e,e.sel,null,!1),Se)}function skipAtomicInSelection(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=skipAtomic(e,a.anchor,s&&s.anchor,r,n),c=skipAtomic(e,a.head,s&&s.head,r,n);(i||l!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Range(l,c))}return i?normalizeSelection(i,t.primIndex):t}function skipAtomicInner(e,t,r,n,i){var o=getLine(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(be(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(r){var c,u=l.find(n<0?1:-1);if((n<0?l.inclusiveRight:l.inclusiveLeft)&&(u=movePos(e,u,-n,u&&u.line==t.line?o:null)),u&&u.line==t.line&&(c=k(u,r))&&(n<0?c<0:c>0))return skipAtomicInner(e,u,t,n,i)}var p=l.find(n<0?-1:1);return(n<0?l.inclusiveLeft:l.inclusiveRight)&&(p=movePos(e,p,n,p.line==t.line?o:null)),p?skipAtomicInner(e,p,t,n,i):null}}return t}function skipAtomic(e,t,r,n,i){var o=n||1,a=skipAtomicInner(e,t,r,o,i)||!i&&skipAtomicInner(e,t,r,o,!0)||skipAtomicInner(e,t,r,-o,i)||!i&&skipAtomicInner(e,t,r,-o,!0);return a?a:(e.cantEdit=!0,C(e.first,0))}function movePos(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?clipPos(e,C(t.line-1)):null:r>0&&t.ch==(n||getLine(e,t.line)).text.length?t.line<e.first+e.size-1?C(t.line+1,0):null:new C(t.line,t.ch+r)}function updateSelection(e){e.display.input.showSelection(e.display.input.prepareSelection())}function prepareSelection(e,t){for(var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),a=0;a<r.sel.ranges.length;a++)if(t!==!1||a!=r.sel.primIndex){var s=r.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&drawSelectionCursor(e,s.head,i),l||drawSelectionRange(e,s,o)}}return n}function drawSelectionCursor(e,t,r){var n=cursorCoords(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(elt("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=r.appendChild(elt("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function drawSelectionRange(e,t,r){function add(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),o.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?l-e:r)+"px; height: "+(n-t)+"px"))}function drawForLine(t,r,n){function coords(r,n){return charCoords(e,C(t,r),"div",c,n)}var o,a,c=getLine(i,t),u=c.text.length;return iterateBidiSections(getOrder(c),r||0,null==n?u:n,function(e,t,i){var c,p,h,d=coords(e,"left");if(e==t)c=d,p=h=d.left;else{if(c=coords(t-1,"right"),"rtl"==i){var f=d;d=c,c=f}p=d.left,h=c.right}null==r&&0==e&&(p=s),c.top-d.top>3&&(add(p,d.top,null,d.bottom),p=s,d.bottom<c.top&&add(p,d.bottom,null,c.top)),null==n&&t==u&&(h=l),(!o||d.top<o.top||d.top==o.top&&d.left<o.left)&&(o=d),(!a||c.bottom>a.bottom||c.bottom==a.bottom&&c.right>a.right)&&(a=c),p<s+1&&(p=s),add(p,c.top,h-p,c.bottom)}),{start:o,end:a}}var n=e.display,i=e.doc,o=document.createDocumentFragment(),a=paddingH(e.display),s=a.left,l=Math.max(n.sizerWidth,displayWidth(e)-n.sizer.offsetLeft)-a.right,c=t.from(),u=t.to();if(c.line==u.line)drawForLine(c.line,c.ch,u.ch);else{var p=getLine(i,c.line),h=getLine(i,u.line),d=visualLine(p)==visualLine(h),f=drawForLine(c.line,c.ch,d?p.text.length+1:null).end,m=drawForLine(u.line,d?0:null,u.ch).start;d&&(f.top<m.top-2?(add(f.right,f.top,null,f.bottom),add(s,m.top,m.left,m.bottom)):add(f.right,f.top,m.left-f.right,f.bottom)),f.bottom<m.top&&add(s,f.bottom,null,m.top)}r.appendChild(o)}function restartBlink(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function startWorker(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,bind(highlightWorker,e))}function highlightWorker(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=$(t.mode,getStateBefore(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength,l=highlightLine(e,o,s?$(t.mode,n):n,!0);o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var p=!a||a.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!p&&h<a.length;++h)p=a[h]!=o.styles[h];p&&i.push(t.frontier),o.stateAfter=s?n:$(t.mode,n)}else o.text.length<=e.options.maxHighlightLength&&processLine(e,o.text,n),o.stateAfter=t.frontier%5==0?$(t.mode,n):null;if(++t.frontier,+new Date>r)return startWorker(e,e.options.workDelay),!0}),i.length&&runInOp(e,function(){for(var t=0;t<i.length;t++)regLineChange(e,i[t],"text")})}}function findStartLine(e,t,r){for(var n,i,o=e.doc,a=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=getLine(o,s-1);if(l.stateAfter&&(!r||s<=o.frontier))return s;var c=Ee(l.text,null,e.options.tabSize);(null==i||n>c)&&(i=s-1,n=c)}return i}function getStateBefore(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return!0;var o=findStartLine(e,t,r),a=o>n.first&&getLine(n,o-1).stateAfter;return a=a?$(n.mode,a):Q(n.mode),n.iter(o,t,function(r){processLine(e,r.text,a);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;r.stateAfter=s?$(n.mode,a):null,++o}),r&&(n.frontier=o),a}function paddingTop(e){return e.lineSpace.offsetTop}function paddingVert(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function paddingH(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=removeChildrenAndAdd(e.measure,elt("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function scrollGap(e){return we-e.display.nativeBarWidth}function displayWidth(e){return e.display.scroller.clientWidth-scrollGap(e)-e.display.barWidth}function displayHeight(e){return e.display.scroller.clientHeight-scrollGap(e)-e.display.barHeight}function ensureLineHeights(e,t,r){var n=e.options.lineWrapping,i=n&&displayWidth(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-r.top)}}o.push(r.bottom-r.top)}}function mapFromLineView(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(lineNo(e.rest[n])>r)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function updateExternalMeasurement(e,t){t=visualLine(t);var r=lineNo(t),n=e.display.externalMeasured=new LineView(e.doc,t,r);n.lineN=r;var i=n.built=buildLineContent(e,n);return n.text=i.pre,removeChildrenAndAdd(e.display.lineMeasure,i.pre),n}function measureChar(e,t,r,n){return measureCharPrepared(e,prepareMeasureForLine(e,t),r,n)}function findViewForLine(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[findViewIndex(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function prepareMeasureForLine(e,t){var r=lineNo(t),n=findViewForLine(e,r);n&&!n.text?n=null:n&&n.changes&&(updateLineForChanges(e,n,r,getDimensions(e)),e.curOp.forceUpdate=!0),n||(n=updateExternalMeasurement(e,t));var i=mapFromLineView(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function measureCharPrepared(e,t,r,n,i){t.before&&(r=-1);var o,a=r+(n||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(ensureLineHeights(e,t.view,t.rect),t.hasHeights=!0),o=measureCharInner(e,t,r,n),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function nodeAndOffsetInLineMap(e,t,r){for(var n,i,o,a,s=0;s<e.length;s+=3){var l=e[s],c=e[s+1];if(t<l?(i=0,o=1,a="left"):t<c?(i=t-l,o=i+1):(s==e.length-3||t==c&&e[s+3]>t)&&(o=c-l,i=o-1,t>=c&&(a="right")),null!=i){if(n=e[s+2],l==c&&r==(n.insertLeft?"left":"right")&&(a=r),"left"==r&&0==i)for(;s&&e[s-2]==e[s-3]&&e[s-1].insertLeft;)n=e[(s-=3)+2],a="left";if("right"==r&&i==c-l)for(;s<e.length-3&&e[s+3]==e[s+4]&&!e[s+5].insertLeft;)n=e[(s+=3)+2],a="right";break}}return{node:n,start:i,end:o,collapse:a,coverStart:l,coverEnd:c}}function getUsefulRect(e,t){var r=M;if("left"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var n=e.length-1;n>=0&&(r=e[n]).left==r.right;n--);return r}function measureCharInner(e,t,r,n){var i,s=nodeAndOffsetInLineMap(t.map,r,n),l=s.node,c=s.start,u=s.end,p=s.collapse;if(3==l.nodeType){for(var h=0;h<4;h++){for(;c&&isExtendingChar(t.line.text.charAt(s.coverStart+c));)--c;for(;s.coverStart+u<s.coverEnd&&isExtendingChar(t.line.text.charAt(s.coverStart+u));)++u;if(i=o&&a<9&&0==c&&u==s.coverEnd-s.coverStart?l.parentNode.getBoundingClientRect():getUsefulRect(Me(l,c,u).getClientRects(),n),i.left||i.right||0==c)break;u=c,c-=1,p="right"}o&&a<11&&(i=maybeUpdateRectForZooming(e.display.measure,i))}else{c>0&&(p=n="right");var d;i=e.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==n?d.length-1:0]:l.getBoundingClientRect()}if(o&&a<9&&!c&&(!i||!i.left&&!i.right)){var f=l.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+charWidth(e.display),top:f.top,bottom:f.bottom}:M}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,y=(m+g)/2,v=t.view.measure.heights,h=0;h<v.length-1&&!(y<v[h]);h++);var b=h?v[h-1]:0,_=v[h],w={left:("right"==p?i.right:i.left)-t.rect.left,right:("left"==p?i.left:i.right)-t.rect.left,top:b,bottom:_};return i.left||i.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}function maybeUpdateRectForZooming(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!hasBadZoomedRects(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function clearLineMeasurementCacheFor(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function clearLineMeasurementCache(e){e.display.externalMeasure=null,removeChildren(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)clearLineMeasurementCacheFor(e.display.view[t])}function clearCaches(e){clearLineMeasurementCache(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function pageScrollX(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function intoCoordSystem(e,t,r,n){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=widgetHeight(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var a=heightAtLine(t);if("local"==n?a+=paddingTop(e.display):a-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==n?0:pageScrollY());var l=s.left+("window"==n?0:pageScrollX());r.left+=l,r.right+=l}return r.top+=a,r.bottom+=a,r}function fromCoordSystem(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=pageScrollX(),i-=pageScrollY();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:n-a.left,top:i-a.top}}function charCoords(e,t,r,n,i){return n||(n=getLine(e.doc,t.line)),intoCoordSystem(e,n,measureChar(e,n,t.ch,i),r)}function cursorCoords(e,t,r,n,i,o){function get(t,a){var s=measureCharPrepared(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,intoCoordSystem(e,n,s,r)}function getBidi(e,t){var r=a[t],n=r.level%2;return e==bidiLeft(r)&&t&&r.level<a[t-1].level?(r=a[--t],e=bidiRight(r)-(r.level%2?0:1),n=!0):e==bidiRight(r)&&t<a.length-1&&r.level<a[t+1].level&&(r=a[++t],e=bidiLeft(r)-r.level%2,n=!1),n&&e==r.to&&e>r.from?get(e-1):get(e,n)}n=n||getLine(e.doc,t.line),i||(i=prepareMeasureForLine(e,n));var a=getOrder(n),s=t.ch;if(!a)return get(s);var l=getBidiPartAt(a,s),c=getBidi(s,l);return null!=Ge&&(c.other=getBidi(s,Ge)),c}function estimateCoords(e,t){var r=0,t=clipPos(e.doc,t);e.options.lineWrapping||(r=charWidth(e.display)*t.ch);var n=getLine(e.doc,t.line),i=heightAtLine(n)+paddingTop(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function PosWithInfo(e,t,r,n){var i=C(e,t);return i.xRel=n,r&&(i.outside=!0),i}function coordsChar(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,r<0)return PosWithInfo(n.first,0,!0,-1);var i=lineAtHeight(n,r),o=n.first+n.size-1;if(i>o)return PosWithInfo(n.first+n.size-1,getLine(n,o).text.length,!0,1);t<0&&(t=0);for(var a=getLine(n,i);;){var s=coordsCharInner(e,a,i,t,r),l=collapsedSpanAtEnd(a),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;i=lineNo(a=c.to.line)}}function coordsCharInner(e,t,r,n,i){function getX(n){var i=cursorCoords(e,C(r,n),"line",t,l);return a=!0,o>i.bottom?i.left-s:o<i.top?i.left+s:(a=!1,i.left)}var o=i-heightAtLine(t),a=!1,s=2*e.display.wrapper.clientWidth,l=prepareMeasureForLine(e,t),c=getOrder(t),u=t.text.length,p=lineLeft(t),h=lineRight(t),d=getX(p),f=a,m=getX(h),g=a;if(n>m)return PosWithInfo(r,h,g,1);for(;;){if(c?h==p||h==moveVisually(t,p,1):h-p<=1){var y=n<d||n-d<=m-n?p:h,v=y==p?f:g,b=n-(y==p?d:m);if(g&&!c&&!/\s/.test(t.text.charAt(y))&&b>0&&y<t.text.length&&l.view.measure.heights.length>1){var _=measureCharPrepared(e,l,y,"right");o<=_.bottom&&o>=_.top&&Math.abs(n-_.right)<b&&(v=!1,y++,b=n-_.right)}for(;isExtendingChar(t.text.charAt(y));)++y;var w=PosWithInfo(r,y,v,b<-1?-1:b>1?1:0);return w}var x=Math.ceil(u/2),S=p+x;if(c){S=p;for(var k=0;k<x;++k)S=moveVisually(t,S,1)}var E=getX(S);E>n?(h=S,m=E,(g=a)&&(m+=1e3),u=x):(p=S,d=E,f=a,u-=x)}}function textHeight(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==A){A=elt("pre");for(var t=0;t<49;++t)A.appendChild(document.createTextNode("x")),A.appendChild(elt("br"));A.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(e.measure,A);var r=A.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),removeChildren(e.measure),r||1}function charWidth(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=elt("span","xxxxxxxxxx"),r=elt("pre",[t]);removeChildrenAndAdd(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function startOperation(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++O},I?I.ops.push(e.curOp):e.curOp.ownsGroup=I={ops:[e.curOp],delayedCallbacks:[]}}function fireCallbacksForOps(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}function endOperation(e){var t=e.curOp,r=t.ownsGroup;if(r)try{fireCallbacksForOps(r)}finally{I=null;for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;endOperations(r)}}function endOperations(e){for(var t=e.ops,r=0;r<t.length;r++)endOperation_R1(t[r]);for(var r=0;r<t.length;r++)endOperation_W1(t[r]);for(var r=0;r<t.length;r++)endOperation_R2(t[r]);for(var r=0;r<t.length;r++)endOperation_W2(t[r]);for(var r=0;r<t.length;r++)endOperation_finish(t[r])}function endOperation_R1(e){var t=e.cm,r=t.display;maybeClipScrollbars(t),e.updateMaxLine&&findMaxLine(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new DisplayUpdate(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function endOperation_W1(e){e.updatedDisplay=e.mustUpdate&&updateDisplayIfNeeded(e.cm,e.update)}function endOperation_R2(e){var t=e.cm,r=t.display;e.updatedDisplay&&updateHeightsInViewport(t),e.barMeasure=measureForScrollbars(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=measureChar(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+scrollGap(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-displayWidth(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection(e.focus))}function endOperation_W2(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&setScrollLeft(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==activeElt()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&updateScrollbars(t,e.barMeasure),e.updatedDisplay&&setDocumentHeight(t,e.barMeasure),e.selectionChanged&&restartBlink(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&ensureFocus(e.cm)}function endOperation_finish(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&postUpdateDisplay(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null==e.scrollTop||r.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(n.scrollTop=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop)),r.scrollbars.setScrollTop(n.scrollTop),r.scroller.scrollTop=n.scrollTop),null==e.scrollLeft||r.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(n.scrollLeft=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft)),r.scrollbars.setScrollLeft(n.scrollLeft),r.scroller.scrollLeft=n.scrollLeft,alignHorizontally(t)),e.scrollToPos){var i=scrollPosIntoView(t,clipPos(n,e.scrollToPos.from),clipPos(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&maybeScrollWindow(t,i)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||be(o[s],"hide");if(a)for(var s=0;s<a.length;++s)a[s].lines.length&&be(a[s],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&be(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function runInOp(e,t){if(e.curOp)return t();startOperation(e);try{return t()}finally{endOperation(e)}}function operation(e,t){return function(){if(e.curOp)return t.apply(e,arguments);startOperation(e);try{return t.apply(e,arguments)}finally{endOperation(e)}}}function methodOp(e){return function(){if(this.curOp)return e.apply(this,arguments);startOperation(this);try{return e.apply(this,arguments)}finally{endOperation(this)}}}function docMethodOp(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);startOperation(t);try{return e.apply(this,arguments)}finally{endOperation(t)}}}function LineView(e,t,r){this.line=t,this.rest=visualLineContinued(t),this.size=this.rest?lineNo(lst(this.rest))-r+1:1,this.node=this.text=null,this.hidden=lineIsHidden(e,t)}function buildViewArray(e,t,r){for(var n,i=[],o=t;o<r;o=n){var a=new LineView(e.doc,getLine(e.doc,o),o);n=o+a.size,i.push(a)}return i}function regChange(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)S&&visualLineNo(e.doc,t)<i.viewTo&&resetView(e);else if(r<=i.viewFrom)S&&visualLineEndNo(e.doc,r+n)>i.viewFrom?resetView(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)resetView(e);else if(t<=i.viewFrom){var o=viewCuttingPoint(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):resetView(e)}else if(r>=i.viewTo){var o=viewCuttingPoint(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):resetView(e)}else{var a=viewCuttingPoint(e,t,t,-1),s=viewCuttingPoint(e,r,r+n,1);a&&s?(i.view=i.view.slice(0,a.index).concat(buildViewArray(e,a.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):resetView(e)}var l=i.externalMeasured;l&&(r<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(i.externalMeasured=null))}function regLineChange(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[findViewIndex(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);indexOf(a,r)==-1&&a.push(r)}}}function resetView(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function findViewIndex(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,t<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if(t-=r[n].size,t<0)return n}function viewCuttingPoint(e,t,r,n){var i,o=findViewIndex(e,t),a=e.display.view;if(!S||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=0,l=e.display.viewFrom;s<o;s++)l+=a[s].size;if(l!=t){if(n>0){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,r+=i}for(;visualLineNo(e.doc,r)!=r;){if(o==(n<0?0:a.length-1))return null;r+=n*a[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function adjustView(e,t,r){var n=e.display,i=n.view;0==i.length||t>=n.viewTo||r<=n.viewFrom?(n.view=buildViewArray(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=buildViewArray(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(findViewIndex(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(buildViewArray(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,findViewIndex(e,r)))),n.viewTo=r}function countDirtyView(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function registerEventHandlers(e){function finishTouch(){t.activeTouch&&(r=setTimeout(function(){t.activeTouch=null},1e3),n=t.activeTouch,n.end=+new Date)}function isMouseLikeTouchEvent(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function farAway(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}var t=e.display;ge(t.scroller,"mousedown",operation(e,onMouseDown)),o&&a<11?ge(t.scroller,"dblclick",operation(e,function(t){if(!signalDOMEvent(e,t)){var r=posFromMouse(e,t);if(r&&!clickInGutter(e,t)&&!eventInWidget(e.display,t)){de(t);var n=e.findWordAt(r);extendSelection(e.doc,n.anchor,n.head)}}})):ge(t.scroller,"dblclick",function(t){signalDOMEvent(e,t)||de(t)}),w||ge(t.scroller,"contextmenu",function(t){onContextMenu(e,t)});var r,n={end:0};ge(t.scroller,"touchstart",function(i){if(!signalDOMEvent(e,i)&&!isMouseLikeTouchEvent(i)){clearTimeout(r);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-n.end<=300?n:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),ge(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ge(t.scroller,"touchend",function(r){var n=t.activeTouch;if(n&&!eventInWidget(t,r)&&null!=n.left&&!n.moved&&new Date-n.start<300){var i,o=e.coordsChar(t.activeTouch,"page");i=!n.prev||farAway(n,n.prev)?new Range(o,o):!n.prev.prev||farAway(n,n.prev.prev)?e.findWordAt(o):new Range(C(o.line,0),clipPos(e.doc,C(o.line+1,0))),e.setSelection(i.anchor,i.head),e.focus(),de(r)}finishTouch()}),ge(t.scroller,"touchcancel",finishTouch),ge(t.scroller,"scroll",function(){t.scroller.clientHeight&&(setScrollTop(e,t.scroller.scrollTop),setScrollLeft(e,t.scroller.scrollLeft,!0),be(e,"scroll",e))}),ge(t.scroller,"mousewheel",function(t){onScrollWheel(e,t)}),ge(t.scroller,"DOMMouseScroll",function(t){onScrollWheel(e,t)}),ge(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){signalDOMEvent(e,t)||me(t)},over:function(t){signalDOMEvent(e,t)||(onDragOver(e,t),me(t))},start:function(t){onDragStart(e,t)},drop:operation(e,onDrop),leave:function(t){signalDOMEvent(e,t)||clearDragCursor(e)}};var i=t.input.getField();ge(i,"keyup",function(t){onKeyUp.call(e,t)}),ge(i,"keydown",operation(e,onKeyDown)),ge(i,"keypress",operation(e,onKeyPress)),ge(i,"focus",function(t){onFocus(e,t)}),ge(i,"blur",function(t){onBlur(e,t)})}function dragDropChanged(e,t,r){var n=r&&r!=CodeMirror.Init;if(!t!=!n){var i=e.display.dragFunctions,o=t?ge:ve;o(e.display.scroller,"dragstart",i.start),o(e.display.scroller,"dragenter",i.enter),o(e.display.scroller,"dragover",i.over),o(e.display.scroller,"dragleave",i.leave),o(e.display.scroller,"drop",i.drop)}}function onResize(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function eventInWidget(e,t){for(var r=e_target(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function posFromMouse(e,t,r,n){var i=e.display;if(!r&&"true"==e_target(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,c=coordsChar(e,o,a);if(n&&1==c.xRel&&(l=getLine(e.doc,c.line).text).length==c.ch){var u=Ee(l,l.length,e.options.tabSize)-l.length;c=C(c.line,Math.max(0,Math.round((o-paddingH(e.display).left)/charWidth(e.display))-u))}return c}function onMouseDown(e){var t=this,r=t.display;if(!(signalDOMEvent(t,e)||r.activeTouch&&r.input.supportsTouch())){if(r.shift=e.shiftKey,eventInWidget(r,e))return void(s||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100)));if(!clickInGutter(t,e)){var n=posFromMouse(t,e);switch(window.focus(),e_button(e)){case 1:t.state.selectingText?t.state.selectingText(e):n?leftButtonDown(t,e,n):e_target(e)==r.scroller&&de(e);break;case 2:s&&(t.state.lastMiddleDown=+new Date),n&&extendSelection(t.doc,n),setTimeout(function(){r.input.focus()},20),de(e);break;case 3:w?onContextMenu(t,e):delayBlurEvent(t)}}}}function leftButtonDown(e,t,r){o?setTimeout(bind(ensureFocus,e),0):e.curOp.focus=activeElt();var n,i=+new Date;T&&T.time>i-400&&0==k(T.pos,r)?n="triple":P&&P.time>i-400&&0==k(P.pos,r)?(n="double",T={time:i,pos:r}):(n="single",P={time:i,pos:r});var a,s=e.doc.sel,l=g?t.metaKey:t.ctrlKey;e.options.dragDrop&&je&&!e.isReadOnly()&&"single"==n&&(a=s.contains(r))>-1&&(k((a=s.ranges[a]).from(),r)<0||r.xRel>0)&&(k(a.to(),r)>0||r.xRel<0)?leftButtonStartDrag(e,t,r,l):leftButtonSelect(e,t,r,n,l)}function leftButtonStartDrag(e,t,r,n){var i=e.display,l=+new Date,c=operation(e,function(u){s&&(i.scroller.draggable=!1),e.state.draggingText=!1,ve(document,"mouseup",c),ve(i.scroller,"drop",c),Math.abs(t.clientX-u.clientX)+Math.abs(t.clientY-u.clientY)<10&&(de(u),!n&&+new Date-200<l&&extendSelection(e.doc,r),s||o&&9==a?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())});s&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=g?t.altKey:t.ctrlKey,i.scroller.dragDrop&&i.scroller.dragDrop(),ge(document,"mouseup",c),ge(i.scroller,"drop",c)}function leftButtonSelect(e,t,r,n,i){function extendTo(t){if(0!=k(d,t))if(d=t,"rect"==n){for(var i=[],o=e.options.tabSize,u=Ee(getLine(a,r.line).text,r.ch,o),p=Ee(getLine(a,t.line).text,t.ch,o),h=Math.min(u,p),f=Math.max(u,p),m=Math.min(r.line,t.line),g=Math.min(e.lastLine(),Math.max(r.line,t.line));m<=g;m++){var y=getLine(a,m).text,v=Ae(y,h,o);h==f?i.push(new Range(C(m,v),C(m,v))):y.length>v&&i.push(new Range(C(m,v),C(m,Ae(y,f,o))))}i.length||i.push(new Range(r,r)),setSelection(a,normalizeSelection(c.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=s,_=b.anchor,w=t;if("single"!=n){if("double"==n)var x=e.findWordAt(t);else var x=new Range(C(t.line,0),clipPos(a,C(t.line+1,0)));k(x.anchor,_)>0?(w=x.head,_=minPos(b.from(),x.anchor)):(w=x.anchor,_=maxPos(b.to(),x.head))}var i=c.ranges.slice(0);i[l]=new Range(clipPos(a,_),w),setSelection(a,normalizeSelection(i,l),Ce)}}function extend(t){var r=++m,i=posFromMouse(e,t,!0,"rect"==n);
if(i)if(0!=k(i,d)){e.curOp.focus=activeElt(),extendTo(i);var s=visibleLines(o,a);(i.line>=s.to||i.line<s.from)&&setTimeout(operation(e,function(){m==r&&extend(t)}),150)}else{var l=t.clientY<f.top?-20:t.clientY>f.bottom?20:0;l&&setTimeout(operation(e,function(){m==r&&(o.scroller.scrollTop+=l,extend(t))}),50)}}function done(t){e.state.selectingText=!1,m=1/0,de(t),o.input.focus(),ve(document,"mousemove",g),ve(document,"mouseup",v),a.history.lastSelOrigin=null}var o=e.display,a=e.doc;de(t);var s,l,c=a.sel,u=c.ranges;if(i&&!t.shiftKey?(l=a.sel.contains(r),s=l>-1?u[l]:new Range(r,r)):(s=a.sel.primary(),l=a.sel.primIndex),y?t.shiftKey&&t.metaKey:t.altKey)n="rect",i||(s=new Range(r,r)),r=posFromMouse(e,t,!0,!0),l=-1;else if("double"==n){var p=e.findWordAt(r);s=e.display.shift||a.extend?extendRange(a,s,p.anchor,p.head):p}else if("triple"==n){var h=new Range(C(r.line,0),clipPos(a,C(r.line+1,0)));s=e.display.shift||a.extend?extendRange(a,s,h.anchor,h.head):h}else s=extendRange(a,s,r);i?l==-1?(l=u.length,setSelection(a,normalizeSelection(u.concat([s]),l),{scroll:!1,origin:"*mouse"})):u.length>1&&u[l].empty()&&"single"==n&&!t.shiftKey?(setSelection(a,normalizeSelection(u.slice(0,l).concat(u.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),c=a.sel):replaceOneSelection(a,l,s,Ce):(l=0,setSelection(a,new Selection([s],0),Ce),c=a.sel);var d=r,f=o.wrapper.getBoundingClientRect(),m=0,g=operation(e,function(e){e_button(e)?extend(e):done(e)}),v=operation(e,done);e.state.selectingText=v,ge(document,"mousemove",g),ge(document,"mouseup",v)}function gutterEvent(e,t,r,n){try{var i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&de(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!hasHandler(e,r))return e_defaultPrevented(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=a.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i){var u=lineAtHeight(e.doc,o),p=e.options.gutters[l];return be(e,r,e,u,p,t),e_defaultPrevented(t)}}}function clickInGutter(e,t){return gutterEvent(e,t,"gutterClick",!0)}function onDrop(e){var t=this;if(clearDragCursor(t),!signalDOMEvent(t,e)&&!eventInWidget(t.display,e)){de(e),o&&(R=+new Date);var r=posFromMouse(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,a=Array(i),s=0,l=function(e,n){if(!t.options.allowDropFileTypes||indexOf(t.options.allowDropFileTypes,e.type)!=-1){var o=new FileReader;o.onload=operation(t,function(){var e=o.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),a[n]=e,++s==i){r=clipPos(t.doc,r);var l={from:r,to:r,text:t.doc.splitLines(a.join(t.doc.lineSeparator())),origin:"paste"};makeChange(t.doc,l),setSelectionReplaceHistory(t.doc,simpleSelection(r,F(l)))}}),o.readAsText(e)}},c=0;c<i;++c)l(n[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var a=e.dataTransfer.getData("Text");if(a){if(t.state.draggingText&&!t.state.draggingText.copy)var u=t.listSelections();if(setSelectionNoUndo(t.doc,simpleSelection(r,r)),u)for(var c=0;c<u.length;++c)replaceRange(t.doc,"",u[c].anchor,u[c].head,"drag");t.replaceSelection(a,"around","paste"),t.display.input.focus()}}catch(e){}}}}function onDragStart(e,t){if(o&&(!e.state.draggingText||+new Date-R<100))return void me(t);if(!signalDOMEvent(e,t)&&!eventInWidget(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var r=elt("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",u&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),u&&r.parentNode.removeChild(r)}}function onDragOver(e,t){var r=posFromMouse(e,t);if(r){var n=document.createDocumentFragment();drawSelectionCursor(e,r,n),e.display.dragCursor||(e.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),removeChildrenAndAdd(e.display.dragCursor,n)}}function clearDragCursor(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function setScrollTop(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,r||updateDisplaySimple(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),r&&updateDisplaySimple(e),startWorker(e,100))}function setScrollLeft(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,alignHorizontally(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function onScrollWheel(e,t){var n=D(t),i=n.x,o=n.y,a=e.display,l=a.scroller,c=l.scrollWidth>l.clientWidth,p=l.scrollHeight>l.clientHeight;if(i&&c||o&&p){if(o&&g&&s)e:for(var h=t.target,d=a.view;h!=l;h=h.parentNode)for(var f=0;f<d.length;f++)if(d[f].node==h){e.display.currentWheelTarget=h;break e}if(i&&!r&&!u&&null!=N)return o&&p&&setScrollTop(e,Math.max(0,Math.min(l.scrollTop+o*N,l.scrollHeight-l.clientHeight))),setScrollLeft(e,Math.max(0,Math.min(l.scrollLeft+i*N,l.scrollWidth-l.clientWidth))),(!o||o&&p)&&de(t),void(a.wheelStartX=null);if(o&&null!=N){var m=o*N,y=e.doc.scrollTop,v=y+a.wrapper.clientHeight;m<0?y=Math.max(0,y+m-50):v=Math.min(e.doc.height,v+m+50),updateDisplaySimple(e,{top:y,bottom:v})}L<20&&(null==a.wheelStartX?(a.wheelStartX=l.scrollLeft,a.wheelStartY=l.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout(function(){if(null!=a.wheelStartX){var e=l.scrollLeft-a.wheelStartX,t=l.scrollTop-a.wheelStartY,r=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,r&&(N=(N*L+r)/(L+1),++L)}},200)):(a.wheelDX+=i,a.wheelDY+=o))}}function doHandleBinding(e,t,r){if("string"==typeof t&&(t=Y[t],!t))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=xe}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function lookupKeyForEditor(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=Z(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&Z(t,e.options.extraKeys,r,e)||Z(t,e.options.keyMap,r,e)}function dispatchKey(e,t,r,n){var i=e.state.keySeq;if(i){if(J(t))return"handled";B.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}var o=lookupKeyForEditor(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&signalLater(e,"keyHandled",e,t,r),"handled"!=o&&"multi"!=o||(de(r),restartBlink(e)),i&&!o&&/\'$/.test(t)?(de(r),!0):!!o}function handleKeyBinding(e,t){var r=ee(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?dispatchKey(e,"Shift-"+r,t,function(t){return doHandleBinding(e,t,!0)})||dispatchKey(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return doHandleBinding(e,t)}):dispatchKey(e,r,t,function(t){return doHandleBinding(e,t)}))}function handleCharBinding(e,t,r){return dispatchKey(e,"'"+r+"'",t,function(t){return doHandleBinding(e,t,!0)})}function onKeyDown(e){var t=this;if(t.curOp.focus=activeElt(),!signalDOMEvent(t,e)){o&&a<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=handleKeyBinding(t,e);u&&(V=n?r:null,!n&&88==r&&!We&&(g?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||showCrossHair(t)}}function showCrossHair(e){function up(e){18!=e.keyCode&&e.altKey||(Be(t,"CodeMirror-crosshair"),ve(document,"keyup",up),ve(document,"mouseover",up))}var t=e.display.lineDiv;Ve(t,"CodeMirror-crosshair"),ge(document,"keyup",up),ge(document,"mouseover",up)}function onKeyUp(e){16==e.keyCode&&(this.doc.sel.shift=!1),signalDOMEvent(this,e)}function onKeyPress(e){var t=this;if(!(eventInWidget(t.display,e)||signalDOMEvent(t,e)||e.ctrlKey&&!e.altKey||g&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(u&&r==V)return V=null,void de(e);if(!u||e.which&&!(e.which<10)||!handleKeyBinding(t,e)){var i=String.fromCharCode(null==n?r:n);handleCharBinding(t,e,i)||t.display.input.onKeyPress(e)}}}function delayBlurEvent(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,onBlur(e))},100)}function onFocus(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(be(e,"focus",e,t),e.state.focused=!0,Ve(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),s&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),restartBlink(e))}function onBlur(e,t){e.state.delayingBlurEvent||(e.state.focused&&(be(e,"blur",e,t),e.state.focused=!1,Be(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function onContextMenu(e,t){eventInWidget(e.display,t)||contextMenuInGutter(e,t)||signalDOMEvent(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function contextMenuInGutter(e,t){return!!hasHandler(e,"gutterContextMenu")&&gutterEvent(e,t,"gutterContextMenu",!1)}function adjustForChange(e,t){if(k(e,t.from)<0)return e;if(k(e,t.to)<=0)return F(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=F(t).ch-t.to.ch),C(r,n)}function computeSelAfterChange(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new Range(adjustForChange(i.anchor,t),adjustForChange(i.head,t)))}return normalizeSelection(r,e.sel.primIndex)}function offsetPos(e,t,r){return e.line==t.line?C(r.line,e.ch-t.ch+r.ch):C(r.line+(e.line-t.line),e.ch)}function computeReplacedSel(e,t,r){for(var n=[],i=C(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=offsetPos(s.from,i,o),c=offsetPos(F(s),i,o);if(i=s.to,o=c,"around"==r){var u=e.sel.ranges[a],p=k(u.head,u.anchor)<0;n[a]=new Range(p?c:l,p?l:c)}else n[a]=new Range(l,l)}return new Selection(n,e.sel.primIndex)}function filterChange(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(n.update=function(t,r,n,i){t&&(this.from=clipPos(e,t)),r&&(this.to=clipPos(e,r)),n&&(this.text=n),void 0!==i&&(this.origin=i)}),be(e,"beforeChange",e,n),e.cm&&be(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function makeChange(e,t,r){if(e.cm){if(!e.cm.curOp)return operation(e.cm,makeChange)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(hasHandler(e,"beforeChange")||e.cm&&hasHandler(e.cm,"beforeChange"))||(t=filterChange(e,t,!0))){var n=x&&!r&&removeReadOnlyRanges(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)makeChangeInner(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text});else makeChangeInner(e,t)}}function makeChangeInner(e,t){if(1!=t.text.length||""!=t.text[0]||0!=k(t.from,t.to)){var r=computeSelAfterChange(e,t);addChangeToHistory(e,t,r,e.cm?e.cm.curOp.id:NaN),makeChangeSingleDoc(e,t,r,stretchSpansOverChange(e,t));var n=[];linkedDocs(e,function(e,r){r||indexOf(n,e.history)!=-1||(rebaseHist(e.history,t),n.push(e.history)),makeChangeSingleDoc(e,t,null,stretchSpansOverChange(e,t))})}}function makeChangeFromHistory(e,t,r){if(!e.cm||!e.cm.state.suppressEdits||r){for(var n,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,l=0;l<a.length&&(n=a[l],r?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;n=a.pop(),n.ranges;){if(pushSelectionToHistory(n,s),r&&!n.equals(e.sel))return void setSelection(e,n,{clearRedo:!1});o=n}var c=[];pushSelectionToHistory(o,s),s.push({changes:c,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;for(var u=hasHandler(e,"beforeChange")||e.cm&&hasHandler(e.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var p=n.changes[l];if(p.origin=t,u&&!filterChange(e,p,!1))return void(a.length=0);c.push(historyChangeFromChange(e,p));var h=l?computeSelAfterChange(e,p):lst(a);makeChangeSingleDoc(e,p,h,mergeOldSpans(e,p)),!l&&e.cm&&e.cm.scrollIntoView({from:p.from,to:F(p)});var d=[];linkedDocs(e,function(e,t){t||indexOf(d,e.history)!=-1||(rebaseHist(e.history,p),d.push(e.history)),makeChangeSingleDoc(e,p,null,mergeOldSpans(e,p))})}}}}function shiftDoc(e,t){if(0!=t&&(e.first+=t,e.sel=new Selection(map(e.sel.ranges,function(e){return new Range(C(e.anchor.line+t,e.anchor.ch),C(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){regChange(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)regLineChange(e.cm,n,"gutter")}}function makeChangeSingleDoc(e,t,r,n){if(e.cm&&!e.cm.curOp)return operation(e.cm,makeChangeSingleDoc)(e,t,r,n);if(t.to.line<e.first)return void shiftDoc(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);shiftDoc(e,i),t={from:C(e.first,0),to:C(t.to.line+i,t.to.ch),text:[lst(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:C(o,getLine(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=getBetween(e,t.from,t.to),r||(r=computeSelAfterChange(e,t)),e.cm?makeChangeSingleDocInEditor(e.cm,t,n):updateDoc(e,t,n),setSelectionNoUndo(e,r,Se)}}function makeChangeSingleDocInEditor(e,t,r){var n=e.doc,i=e.display,o=t.from,a=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=lineNo(visualLine(getLine(n,o.line))),n.iter(l,a.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),n.sel.contains(t.from,t.to)>-1&&signalCursorActivity(e),updateDoc(n,t,r,estimateHeight(e)),e.options.lineWrapping||(n.iter(l,o.line+t.text.length,function(e){var t=lineLength(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,o.line),startWorker(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?regChange(e):o.line!=a.line||1!=t.text.length||isWholeLineUpdate(e.doc,t)?regChange(e,o.line,a.line+1,c):regLineChange(e,o.line,"text");var u=hasHandler(e,"changes"),p=hasHandler(e,"change");if(p||u){var h={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};p&&signalLater(e,"change",e,h),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function replaceRange(e,t,r,n,i){if(n||(n=r),k(n,r)<0){var o=n;n=r,r=o}"string"==typeof t&&(t=e.splitLines(t)),makeChange(e,{from:r,to:n,text:t,origin:i})}function maybeScrollWindow(e,t){if(!signalDOMEvent(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!d){var o=elt("div","​",null,"position: absolute; top: "+(t.top-r.viewOffset-paddingTop(e.display))+"px; height: "+(t.bottom-t.top+scrollGap(e)+r.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}function scrollPosIntoView(e,t,r,n){null==n&&(n=0);for(var i=0;i<5;i++){var o=!1,a=cursorCoords(e,t),s=r&&r!=t?cursorCoords(e,r):a,l=calculateScrollPos(e,Math.min(a.left,s.left),Math.min(a.top,s.top)-n,Math.max(a.left,s.left),Math.max(a.bottom,s.bottom)+n),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(setScrollTop(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(setScrollLeft(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(o=!0)),!o)break}return a}function scrollIntoView(e,t,r,n,i){var o=calculateScrollPos(e,t,r,n,i);null!=o.scrollTop&&setScrollTop(e,o.scrollTop),null!=o.scrollLeft&&setScrollLeft(e,o.scrollLeft)}function calculateScrollPos(e,t,r,n,i){var o=e.display,a=textHeight(e.display);r<0&&(r=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=displayHeight(e),c={};i-r>l&&(i=r+l);var u=e.doc.height+paddingVert(o),p=r<a,h=i>u-a;if(r<s)c.scrollTop=p?0:r;else if(i>s+l){var d=Math.min(r,(h?u:i)-l);d!=s&&(c.scrollTop=d)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=displayWidth(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=n-t>m;return g&&(n=t+m),t<10?c.scrollLeft=0:t<f?c.scrollLeft=Math.max(0,t-(g?0:10)):n>m+f-3&&(c.scrollLeft=n+(g?0:10)-m),c}function addToScrollPos(e,t,r){null==t&&null==r||resolveScrollToPos(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=r&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+r)}function ensureCursorVisible(e){resolveScrollToPos(e);var t=e.getCursor(),r=t,n=t;e.options.lineWrapping||(r=t.ch?C(t.line,t.ch-1):t,n=C(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function resolveScrollToPos(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=estimateCoords(e,t.from),n=estimateCoords(e,t.to),i=calculateScrollPos(e,Math.min(r.left,n.left),Math.min(r.top,n.top)-t.margin,Math.max(r.right,n.right),Math.max(r.bottom,n.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function indentLine(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=getStateBefore(e,t):r="prev");var a=e.options.tabSize,s=getLine(o,t),l=Ee(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&(c=o.mode.indent(i,s.text.slice(u.length),s.text),c==xe||c>150)){if(!n)return;r="prev"}}else c=0,r="not";"prev"==r?c=t>o.first?Ee(getLine(o,t-1).text,null,a):0:"add"==r?c=l+e.options.indentUnit:"subtract"==r?c=l-e.options.indentUnit:"number"==typeof r&&(c=l+r),c=Math.max(0,c);var p="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/a);d;--d)h+=a,p+="\t";if(h<c&&(p+=spaceStr(c-h)),p!=u)return replaceRange(o,p,C(t,0),C(t,u.length),"+input"),s.stateAfter=null,!0;for(var d=0;d<o.sel.ranges.length;d++){var f=o.sel.ranges[d];if(f.head.line==t&&f.head.ch<u.length){var h=C(t,u.length);replaceOneSelection(o,d,new Range(h,h));break}}}function changeLine(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=getLine(e,clipLine(e,t)):i=lineNo(t),null==i?null:(n(o,i)&&e.cm&&regLineChange(e.cm,i,r),o)}function deleteNearSelection(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&k(o.from,lst(n).to)<=0;){var a=n.pop();if(k(a.from,o.from)<0){o.from=a.from;break}}n.push(o)}runInOp(e,function(){for(var t=n.length-1;t>=0;t--)replaceRange(e.doc,"",n[t].from,n[t].to,"+delete");ensureCursorVisible(e)})}function findPosH(e,t,r,n,i){function findNextLine(){var t=o+r;return!(t<e.first||t>=e.first+e.size)&&(o=t,l=getLine(e,t))}function moveOnce(e){var t=(i?moveVisually:moveLogically)(l,a,r,!0);if(null==t){if(e||!findNextLine())return!1;a=i?(r<0?lineRight:lineLeft)(l):r<0?l.text.length:0}else a=t;return!0}var o=t.line,a=t.ch,s=r,l=getLine(e,o);if("char"==n)moveOnce();else if("column"==n)moveOnce(!0);else if("word"==n||"group"==n)for(var c=null,u="group"==n,p=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(r<0)||moveOnce(!h);h=!1){var d=l.text.charAt(a)||"\n",f=isWordChar(d,p)?"w":u&&"\n"==d?"n":!u||/\s/.test(d)?null:"p";if(!u||h||f||(f="s"),c&&c!=f){r<0&&(r=1,moveOnce());break}if(f&&(c=f),r>0&&!moveOnce(!h))break}var m=skipAtomic(e,C(o,a),t,s,!0);return k(t,m)||(m.hitSide=!0),m}function findPosV(e,t,r,n){var i,o=e.doc,a=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(s-.5*textHeight(e.display),3);i=(r>0?t.bottom:t.top)+r*l}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;;){var c=coordsChar(e,a,i);if(!c.outside)break;if(r<0?i<=0:i>=o.height){c.hitSide=!0;break}i+=5*r}return c}function option(e,t,r,n){CodeMirror.defaults[e]=t,r&&(U[e]=n?function(e,t,n){n!=z&&r(e,t,n)}:r)}function normalizeKeyName(e){for(var t,r,n,i,o=e.split(/-(?!$)/),e=o[o.length-1],a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function getKeyMap(e){return"string"==typeof e?X[e]:e}function markText(e,t,r,n,i){if(n&&n.shared)return markTextShared(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return operation(e.cm,markText)(e,t,r,n,i);var o=new ne(e,i),a=k(t,r);if(n&&copyObj(n,o,!1),a>0||0==a&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=elt("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(conflictingCollapsedRange(e,t.line,t,r,o)||t.line!=r.line&&conflictingCollapsedRange(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");S=!0}o.addToHistory&&addChangeToHistory(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var s,l=t.line,c=e.cm;if(e.iter(l,r.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&visualLine(e)==c.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&updateLineHeight(e,0),addMarkedSpan(e,new MarkedSpan(o,l==t.line?t.ch:null,l==r.line?r.ch:null)),++l}),o.collapsed&&e.iter(t.line,r.line+1,function(t){lineIsHidden(e,t)&&updateLineHeight(t,0)}),o.clearOnEnter&&ge(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(x=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++re,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)regChange(c,t.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=r.line;u++)regLineChange(c,u,"text");o.atomic&&reCheckSelection(c.doc),signalLater(c,"markerAdded",c,o)}return o}function markTextShared(e,t,r,n,i){n=copyObj(n),n.shared=!1;var o=[markText(e,t,r,n,i)],a=o[0],s=n.widgetNode;return linkedDocs(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(markText(e,clipPos(e,t),clipPos(e,r),n,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=lst(o)}),new ie(o,a)}function findSharedMarkers(e){return e.findMarks(C(e.first,0),e.clipPos(C(e.lastLine())),function(e){return e.parent})}function copySharedMarkers(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(k(o,a)){var s=markText(e,o,a,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}function detachSharedMarkers(e){for(var t=0;t<e.length;t++){var r=e[t],n=[r.primary.doc];linkedDocs(r.primary.doc,function(e){n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];indexOf(n,o.doc)==-1&&(o.parent=null,r.markers.splice(i--,1))}}}function MarkedSpan(e,t,r){this.marker=e,this.from=t,this.to=r}function getMarkedSpanFor(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function removeMarkedSpan(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function addMarkedSpan(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function markedSpansBefore(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!r||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new MarkedSpan(a,o.from,l?null:o.to))}}return n}function markedSpansAfter(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!r||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new MarkedSpan(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return n}function stretchSpansOverChange(e,t){if(t.full)return null;var r=isLine(e,t.from.line)&&getLine(e,t.from.line).markedSpans,n=isLine(e,t.to.line)&&getLine(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,a=0==k(t.from,t.to),s=markedSpansBefore(r,i,a),l=markedSpansAfter(n,o,a),c=1==t.text.length,u=lst(t.text).length+(c?i:0);if(s)for(var p=0;p<s.length;++p){var h=s[p];if(null==h.to){var d=getMarkedSpanFor(l,h.marker);d?c&&(h.to=null==d.to?null:d.to+u):h.to=i}}if(l)for(var p=0;p<l.length;++p){var h=l[p];if(null!=h.to&&(h.to+=u),null==h.from){var d=getMarkedSpanFor(s,h.marker);d||(h.from=u,c&&(s||(s=[])).push(h))}else h.from+=u,c&&(s||(s=[])).push(h)}s&&(s=clearEmptySpans(s)),l&&l!=s&&(l=clearEmptySpans(l));var f=[s];if(!c){var m,g=t.text.length-2;if(g>0&&s)for(var p=0;p<s.length;++p)null==s[p].to&&(m||(m=[])).push(new MarkedSpan(s[p].marker,null,null));for(var p=0;p<g;++p)f.push(m);f.push(l)}return f}function clearEmptySpans(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function mergeOldSpans(e,t){var r=getOldSpans(e,t),n=stretchSpansOverChange(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],a=n[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else a&&(r[i]=a)}return r}function removeReadOnlyRanges(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&indexOf(n,r)!=-1||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var a=n[o],s=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(k(c.to,s.from)<0||k(c.from,s.to)>0)){var u=[l,1],p=k(c.from,s.from),h=k(c.to,s.to);(p<0||!a.inclusiveLeft&&!p)&&u.push({from:c.from,to:s.from}),(h>0||!a.inclusiveRight&&!h)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-1}}return i}function detachMarkedSpans(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function attachMarkedSpans(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function extraLeft(e){return e.inclusiveLeft?-1:0}function extraRight(e){return e.inclusiveRight?1:0}function compareCollapsedMarkers(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=k(n.from,i.from)||extraLeft(e)-extraLeft(t);if(o)return-o;var a=k(n.to,i.to)||extraRight(e)-extraRight(t);return a?a:t.id-e.id}function collapsedSpanAtSide(e,t){var r,n=S&&e.markedSpans;if(n)for(var i,o=0;o<n.length;++o)i=n[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!r||compareCollapsedMarkers(r,i.marker)<0)&&(r=i.marker);return r}function collapsedSpanAtStart(e){return collapsedSpanAtSide(e,!0)}function collapsedSpanAtEnd(e){return collapsedSpanAtSide(e,!1)}function conflictingCollapsedRange(e,t,r,n,i){var o=getLine(e,t),a=S&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=k(c.from,r)||extraLeft(l.marker)-extraLeft(i),p=k(c.to,n)||extraRight(l.marker)-extraRight(i);if(!(u>=0&&p<=0||u<=0&&p>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?k(c.to,r)>=0:k(c.to,r)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?k(c.from,n)<=0:k(c.from,n)<0)))return!0}}}function visualLine(e){for(var t;t=collapsedSpanAtStart(e);)e=t.find(-1,!0).line;return e}function visualLineContinued(e){for(var t,r;t=collapsedSpanAtEnd(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function visualLineNo(e,t){var r=getLine(e,t),n=visualLine(r);return r==n?t:lineNo(n)}function visualLineEndNo(e,t){if(t>e.lastLine())return t;var r,n=getLine(e,t);if(!lineIsHidden(e,n))return t;for(;r=collapsedSpanAtEnd(n);)n=r.find(1,!0).line;return lineNo(n)+1}function lineIsHidden(e,t){var r=S&&t.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if(n=r[i],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&lineIsHiddenInner(e,t,n))return!0}}function lineIsHiddenInner(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return lineIsHiddenInner(e,n.line,getMarkedSpanFor(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&lineIsHiddenInner(e,t,i))return!0}function adjustScrollWhenAboveVisible(e,t,r){heightAtLine(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&addToScrollPos(e,null,r)}function widgetHeight(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Le(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),removeChildrenAndAdd(t.display.measure,elt("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function addLineWidget(e,t,r,n){var i=new oe(e,r,n),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),changeLine(e,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!lineIsHidden(e,t)){var n=heightAtLine(t)<e.scrollTop;updateLineHeight(t,t.height+widgetHeight(i)),n&&addToScrollPos(o,null,i.height),o.curOp.forceUpdate=!0}return!0}),i}function updateLine(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),detachMarkedSpans(e),attachMarkedSpans(e,r);var i=n?n(e):1;i!=e.height&&updateLineHeight(e,i)}function cleanUpLine(e){e.parent=null,detachMarkedSpans(e)}function extractLineClasses(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function callBlankLine(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=CodeMirror.innerMode(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function readToken(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=CodeMirror.innerMode(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function takeToken(e,t,r,n){function getObj(e){return{start:u.start,end:u.pos,string:u.current(),type:i||null,state:e?$(o.mode,c):c}}var i,o=e.doc,a=o.mode;t=clipPos(o,t);var s,l=getLine(o,t.line),c=getStateBefore(e,t.line,r),u=new te(l.text,e.options.tabSize);for(n&&(s=[]);(n||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=readToken(a,u,c),n&&s.push(getObj(!0));return n?s:getObj()}function runMode(e,t,r,n,i,o,a){var s=r.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,u=null,p=new te(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&extractLineClasses(callBlankLine(r,n),o);!p.eol();){if(p.pos>e.options.maxHighlightLength?(s=!1,a&&processLine(e,t,n,p.pos),p.pos=t.length,l=null):l=extractLineClasses(readToken(r,p,n,h),o),h){var d=h[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!s||u!=l){for(;c<p.start;)c=Math.min(p.start,c+5e3),i(c,u);u=l}p.start=p.pos}for(;c<p.pos;){var f=Math.min(p.pos,c+5e3);i(f,u),c=f}}function highlightLine(e,t,r,n){var i=[e.state.modeGen],o={};runMode(e,t.text,e.doc.mode,r,function(e,t){i.push(e,t)},o,n);for(var a=0;a<e.state.overlays.length;++a){var s=e.state.overlays[a],l=1,c=0;runMode(e,t.text,s.mode,!0,function(e,t){for(var r=l;c<e;){var n=i[l];n>e&&i.splice(l,1,e,i[l+1],n),l+=2,c=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,l-r,e,"cm-overlay "+t),l=r+2;else for(;r<l;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function getLineStyles(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=getStateBefore(e,lineNo(t)),i=highlightLine(e,t,t.text.length>e.options.maxHighlightLength?$(e.doc.mode,n):n);t.stateAfter=n,
t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.frontier&&e.doc.frontier++}return t.styles}function processLine(e,t,r,n){var i=e.doc.mode,o=new te(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&callBlankLine(i,r);!o.eol();)readToken(i,o,r),o.start=o.pos}function interpretTokenStyle(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?le:se;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function buildLineContent(e,t){var r=elt("span",null,null,s?"padding-right: .1px":null),n={pre:elt("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(o||s)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a,l=i?t.rest[i-1]:t.line;n.pos=0,n.addToken=buildToken,hasBadBidiRects(e.display.measure)&&(a=getOrder(l))&&(n.addToken=buildTokenBadBidi(n.addToken,a)),n.map=[];var c=t!=e.display.externalMeasured&&lineNo(l);insertLineContent(l,n,getLineStyles(e,l,c)),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=joinClasses(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=joinClasses(l.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(zeroWidthElement(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(s){var u=n.content.lastChild;(/\bcm-tab\b/.test(u.className)||u.querySelector&&u.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return be(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=joinClasses(n.pre.className,n.textClass||"")),n}function defaultSpecialCharPlaceholder(e){var t=elt("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function buildToken(e,t,r,n,i,s,l){if(t){var c=e.splitSpaces?splitSpaces(t,e.trailingSpace):t,u=e.cm.state.specialChars,p=!1;if(u.test(t))for(var h=document.createDocumentFragment(),d=0;;){u.lastIndex=d;var f=u.exec(t),m=f?f.index-d:t.length-d;if(m){var g=document.createTextNode(c.slice(d,d+m));o&&a<9?h.appendChild(elt("span",[g])):h.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;if(d+=m+1,"\t"==f[0]){var y=e.cm.options.tabSize,v=y-e.col%y,g=h.appendChild(elt("span",spaceStr(v),"cm-tab"));g.setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),e.col+=v}else if("\r"==f[0]||"\n"==f[0]){var g=h.appendChild(elt("span","\r"==f[0]?"␍":"␤","cm-invalidchar"));g.setAttribute("cm-text",f[0]),e.col+=1}else{var g=e.cm.options.specialCharPlaceholder(f[0]);g.setAttribute("cm-text",f[0]),o&&a<9?h.appendChild(elt("span",[g])):h.appendChild(g),e.col+=1}e.map.push(e.pos,e.pos+1,g),e.pos++}else{e.col+=t.length;var h=document.createTextNode(c);e.map.push(e.pos,e.pos+t.length,h),o&&a<9&&(p=!0),e.pos+=t.length}if(e.trailingSpace=32==c.charCodeAt(t.length-1),r||n||i||p||l){var b=r||"";n&&(b+=n),i&&(b+=i);var _=elt("span",[h],b,l);return s&&(_.title=s),e.content.appendChild(_)}e.content.appendChild(h)}}function splitSpaces(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),n+=o,r=" "==o}return n}function buildTokenBadBidi(e,t){return function(r,n,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=r.pos,u=c+n.length;;){for(var p=0;p<t.length;p++){var h=t[p];if(h.to>c&&h.from<=c)break}if(h.to>=u)return e(r,n,i,o,a,s,l);e(r,n.slice(0,h.to-c),i,o,null,s,l),o=null,n=n.slice(h.to-c),c=h.to}}}function buildCollapsedSpan(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function insertLineContent(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var a,s,l,c,u,p,h,d=i.length,f=0,m=1,g="",y=0;;){if(y==f){l=c=u=p=s="",h=null,y=1/0;for(var v,b=[],_=0;_<n.length;++_){var w=n[_],x=w.marker;"bookmark"==x.type&&w.from==f&&x.widgetNode?b.push(x):w.from<=f&&(null==w.to||w.to>f||x.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&y>w.to&&(y=w.to,c=""),x.className&&(l+=" "+x.className),x.css&&(s=(s?s+";":"")+x.css),x.startStyle&&w.from==f&&(u+=" "+x.startStyle),x.endStyle&&w.to==y&&(v||(v=[])).push(x.endStyle,w.to),x.title&&!p&&(p=x.title),x.collapsed&&(!h||compareCollapsedMarkers(h.marker,x)<0)&&(h=w)):w.from>f&&y>w.from&&(y=w.from)}if(v)for(var _=0;_<v.length;_+=2)v[_+1]==y&&(c+=" "+v[_]);if(!h||h.from==f)for(var _=0;_<b.length;++_)buildCollapsedSpan(t,0,b[_]);if(h&&(h.from||0)==f){if(buildCollapsedSpan(t,(null==h.to?d+1:h.to)-f,h.marker,null==h.from),null==h.to)return;h.to==f&&(h=!1)}}if(f>=d)break;for(var S=Math.min(d,y);;){if(g){var C=f+g.length;if(!h){var k=C>S?g.slice(0,S-f):g;t.addToken(t,k,a?a+l:l,u,f+k.length==y?c:"",p,s)}if(C>=S){g=g.slice(S-f),f=S;break}f=C,u=""}g=i.slice(o,o=r[m++]),a=interpretTokenStyle(r[m++],t.cm.options)}}else for(var m=1;m<r.length;m+=2)t.addToken(t,i.slice(o,o=r[m]),interpretTokenStyle(r[m+1],t.cm.options))}function isWholeLineUpdate(e,t){return 0==t.from.ch&&0==t.to.ch&&""==lst(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function updateDoc(e,t,r,n){function spansFor(e){return r?r[e]:null}function update(e,r,i){updateLine(e,r,i,n),signalLater(e,"change",e,t)}function linesFor(e,t){for(var r=e,i=[];r<t;++r)i.push(new ae(a[r],spansFor(r),n));return i}var i=t.from,o=t.to,a=t.text,s=getLine(e,i.line),l=getLine(e,o.line),c=lst(a),u=spansFor(a.length-1),p=o.line-i.line;if(t.full)e.insert(0,linesFor(0,a.length)),e.remove(a.length,e.size-a.length);else if(isWholeLineUpdate(e,t)){var h=linesFor(0,a.length-1);update(l,l.text,u),p&&e.remove(i.line,p),h.length&&e.insert(i.line,h)}else if(s==l)if(1==a.length)update(s,s.text.slice(0,i.ch)+c+s.text.slice(o.ch),u);else{var h=linesFor(1,a.length-1);h.push(new ae(c+s.text.slice(o.ch),u,n)),update(s,s.text.slice(0,i.ch)+a[0],spansFor(0)),e.insert(i.line+1,h)}else if(1==a.length)update(s,s.text.slice(0,i.ch)+a[0]+l.text.slice(o.ch),spansFor(0)),e.remove(i.line+1,p);else{update(s,s.text.slice(0,i.ch)+a[0],spansFor(0)),update(l,c+l.text.slice(o.ch),u);var h=linesFor(1,a.length-1);p>1&&e.remove(i.line+1,p-1),e.insert(i.line+1,h)}signalLater(e,"change",e,t)}function LeafChunk(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}function BranchChunk(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}function linkedDocs(e,t,r){function propagate(e,n,i){if(e.linked)for(var o=0;o<e.linked.length;++o){var a=e.linked[o];if(a.doc!=n){var s=i&&a.sharedHist;r&&!s||(t(a.doc,s),propagate(a.doc,e,s))}}}propagate(e,null,!0)}function attachDoc(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,estimateLineHeights(e),loadMode(e),e.options.lineWrapping||findMaxLine(e),e.options.mode=t.modeOption,regChange(e)}function getLine(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function getBetween(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function getLines(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function updateLineHeight(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function lineNo(e){if(null==e.parent)return null;for(var t=e.parent,r=indexOf(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function lineAtHeight(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var n=0;n<e.lines.length;++n){var a=e.lines[n],s=a.height;if(t<s)break;t-=s}return r+n}function heightAtLine(e){e=visualLine(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var n=0;n<o.children.length;++n){var a=o.children[n];if(a==r)break;t+=a.height}return t}function getOrder(e){var t=e.order;return null==t&&(t=e.order=Ke(e.text)),t}function History(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function historyChangeFromChange(e,t){var r={from:copyPos(t.from),to:F(t),text:getBetween(e,t.from,t.to)};return attachLocalSpans(e,r,t.from.line,t.to.line+1),linkedDocs(e,function(e){attachLocalSpans(e,r,t.from.line,t.to.line+1)},!0),r}function clearSelectionEvents(e){for(;e.length;){var t=lst(e);if(!t.ranges)break;e.pop()}}function lastChangeEvent(e,t){return t?(clearSelectionEvents(e.done),lst(e.done)):e.done.length&&!lst(e.done).ranges?lst(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),lst(e.done)):void 0}function addChangeToHistory(e,t,r,n){var i=e.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=lastChangeEvent(i,i.lastOp==n))){var s=lst(o.changes);0==k(t.from,t.to)&&0==k(t.from,s.to)?s.to=F(t):o.changes.push(historyChangeFromChange(e,t))}else{var l=lst(i.done);for(l&&l.ranges||pushSelectionToHistory(e.sel,i.done),o={changes:[historyChangeFromChange(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,s||be(e,"historyAdded")}function selectionEventCanBeMerged(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function addSelectionToHistory(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||selectionEventCanBeMerged(e,o,lst(i.done),t))?i.done[i.done.length-1]=t:pushSelectionToHistory(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&n.clearRedo!==!1&&clearSelectionEvents(i.undone)}function pushSelectionToHistory(e,t){var r=lst(t);r&&r.ranges&&r.equals(e)||t.push(e)}function attachLocalSpans(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function removeClearedSpans(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function getOldSpans(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=0,i=[];n<t.text.length;++n)i.push(removeClearedSpans(r[n]));return i}function copyHistoryArray(e,t,r){for(var n=0,i=[];n<e.length;++n){var o=e[n];if(o.ranges)i.push(r?Selection.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var c,u=a[l];if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var p in u)(c=p.match(/^spans_(\d+)$/))&&indexOf(t,Number(c[1]))>-1&&(lst(s)[p]=u[p],delete u[p])}}}return i}function rebaseHistSelSingle(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function rebaseHistArray(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)rebaseHistSelSingle(o.ranges[s].anchor,t,r,n),rebaseHistSelSingle(o.ranges[s].head,t,r,n)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(r<l.from.line)l.from=C(l.from.line+n,l.from.ch),l.to=C(l.to.line+n,l.to.ch);else if(t<=l.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function rebaseHist(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;rebaseHistArray(e.done,r,n,i),rebaseHistArray(e.undone,r,n,i)}function e_defaultPrevented(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function e_target(e){return e.target||e.srcElement}function e_button(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),g&&e.ctrlKey&&1==t&&(t=3),t}function getHandlers(e,t,r){var n=e._handlers&&e._handlers[t];return r?n&&n.length>0?n.slice():ye:n||ye}function signalLater(e,t){function bnd(e){return function(){e.apply(null,i)}}var r=getHandlers(e,t,!1);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);I?n=I.delayedCallbacks:_e?n=_e:(n=_e=[],setTimeout(fireOrphanDelayed,0));for(var o=0;o<r.length;++o)n.push(bnd(r[o]))}}function fireOrphanDelayed(){var e=_e;_e=null;for(var t=0;t<e.length;++t)e[t]()}function signalDOMEvent(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),be(e,r||t.type,e,t),e_defaultPrevented(t)||t.codemirrorIgnore}function signalCursorActivity(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)indexOf(r,t[n])==-1&&r.push(t[n])}function hasHandler(e,t){return getHandlers(e,t).length>0}function eventMixin(e){e.prototype.on=function(e,t){ge(this,e,t)},e.prototype.off=function(e,t){ve(this,e,t)}}function Delayed(){this.id=null}function spaceStr(e){for(;Pe.length<=e;)Pe.push(lst(Pe)+" ");return Pe[e]}function lst(e){return e[e.length-1]}function indexOf(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function map(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function insertSorted(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}function nothing(){}function createObj(e,t){var r;return Object.create?r=Object.create(e):(nothing.prototype=e,r=new nothing),t&&copyObj(t,r),r}function copyObj(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||r===!1&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function bind(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function isWordChar(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Oe(e))||t.test(e):Oe(e)}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function isExtendingChar(e){return e.charCodeAt(0)>=768&&Re.test(e)}function elt(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function removeChildren(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function removeChildrenAndAdd(e,t){return removeChildren(e).appendChild(t)}function activeElt(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function classTest(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function joinClasses(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!classTest(r[n]).test(t)&&(t+=" "+r[n]);return t}function forEachCodeMirror(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}function ensureGlobalHandlers(){Fe||(registerGlobalHandlers(),Fe=!0)}function registerGlobalHandlers(){var e;ge(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,forEachCodeMirror(onResize)},100))}),ge(window,"blur",function(){forEachCodeMirror(onBlur)})}function zeroWidthElement(e){if(null==Ne){var t=elt("span","​");removeChildrenAndAdd(e,elt("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ne=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&a<8))}var r=Ne?elt("span","​"):elt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function hasBadBidiRects(e){if(null!=De)return De;var t=removeChildrenAndAdd(e,document.createTextNode("AخA")),r=Me(t,0,1).getBoundingClientRect(),n=Me(t,1,2).getBoundingClientRect();return removeChildren(e),!(!r||r.left==r.right)&&(De=n.right-r.right<3)}function hasBadZoomedRects(e){if(null!=He)return He;var t=removeChildrenAndAdd(e,elt("span","x")),r=t.getBoundingClientRect(),n=Me(t,0,1).getBoundingClientRect();return He=Math.abs(r.left-n.left)>1}function iterateBidiSections(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<r&&a.to>t||t==r&&a.to==t)&&(n(Math.max(a.from,t),Math.min(a.to,r),1==a.level?"rtl":"ltr"),i=!0)}i||n(t,r,"ltr")}function bidiLeft(e){return e.level%2?e.to:e.from}function bidiRight(e){return e.level%2?e.from:e.to}function lineLeft(e){var t=getOrder(e);return t?bidiLeft(t[0]):0}function lineRight(e){var t=getOrder(e);return t?bidiRight(lst(t)):e.text.length}function lineStart(e,t){var r=getLine(e.doc,t),n=visualLine(r);n!=r&&(t=lineNo(n));var i=getOrder(n),o=i?i[0].level%2?lineRight(n):lineLeft(n):0;return C(t,o)}function lineEnd(e,t){for(var r,n=getLine(e.doc,t);r=collapsedSpanAtEnd(n);)n=r.find(1,!0).line,t=null;var i=getOrder(n),o=i?i[0].level%2?lineLeft(n):lineRight(n):n.text.length;return C(null==t?lineNo(n):t,o)}function lineStartSmart(e,t){var r=lineStart(e,t.line),n=getLine(e.doc,r.line),i=getOrder(n);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),a=t.line==r.line&&t.ch<=o&&t.ch;return C(r.line,a?0:o)}return r}function compareBidiLevel(e,t,r){var n=e[0].level;return t==n||r!=n&&t<r}function getBidiPartAt(e,t){Ge=null;for(var r,n=0;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(null!=r)return compareBidiLevel(e,i.level,e[r].level)?(i.from!=i.to&&(Ge=r),n):(i.from!=i.to&&(Ge=n),r);r=n}}return r}function moveInLine(e,t,r,n){if(!n)return t+r;do t+=r;while(t>0&&isExtendingChar(e.text.charAt(t)));return t}function moveVisually(e,t,r,n){var i=getOrder(e);if(!i)return moveLogically(e,t,r,n);for(var o=getBidiPartAt(i,t),a=i[o],s=moveInLine(e,t,a.level%2?-r:r,n);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return getBidiPartAt(i,s)==o?s:(a=i[o+=r],r>0==a.level%2?a.to:a.from);if(a=i[o+=r],!a)return null;s=r>0==a.level%2?moveInLine(e,a.to,-1,n):moveInLine(e,a.from,1,n)}}function moveLogically(e,t,r,n){var i=t+r;if(n)for(;i>0&&isExtendingChar(e.text.charAt(i));)i+=r;return i<0||i>e.text.length?null:i}var e=navigator.userAgent,t=navigator.platform,r=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=n||i,a=o&&(n?document.documentMode||6:i[1]),s=/WebKit\//.test(e),l=s&&/Qt\/\d+\.\d+/.test(e),c=/Chrome\//.test(e),u=/Opera\//.test(e),p=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),d=/PhantomJS/.test(e),f=/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=f||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),g=f||/Mac/.test(t),y=/\bCrOS\b/.test(e),v=/win/i.test(t),b=u&&e.match(/Version\/(\d*\.\d*)/);b&&(b=Number(b[1])),b&&b>=15&&(u=!1,s=!0);var _=g&&(l||u&&(null==b||b<12.11)),w=r||o&&a>=9,x=!1,S=!1;NativeScrollbars.prototype=copyObj({update:function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=g&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Delayed,this.disableVert=new Delayed},enableZeroWidthBar:function(e,t){function maybeDisable(){var r=e.getBoundingClientRect(),n=document.elementFromPoint(r.left+1,r.bottom-1);n!=e?e.style.pointerEvents="none":t.set(1e3,maybeDisable)}e.style.pointerEvents="auto",t.set(1e3,maybeDisable)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},NativeScrollbars.prototype),NullScrollbars.prototype=copyObj({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},NullScrollbars.prototype),CodeMirror.scrollbarModel={"native":NativeScrollbars,"null":NullScrollbars},DisplayUpdate.prototype.signal=function(e,t){hasHandler(e,t)&&this.events.push(arguments)},DisplayUpdate.prototype.finish=function(){for(var e=0;e<this.events.length;e++)be.apply(null,this.events[e])};var C=CodeMirror.Pos=function(e,t){return this instanceof C?(this.line=e,void(this.ch=t)):new C(e,t)},k=CodeMirror.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},E=null;TextareaInput.prototype=copyObj({init:function(e){function prepareCopyCut(e){if(!signalDOMEvent(r,e)){if(r.somethingSelected())E={lineWise:!1,text:r.getSelections()},t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,i.value=E.text.join("\n"),Te(i));else{if(!r.options.lineWiseCopyCut)return;var n=copyableRanges(r);E={lineWise:!0,text:n.text},"cut"==e.type?r.setSelections(n.ranges,null,Se):(t.prevInput="",i.value=n.text.join("\n"),Te(i))}"cut"==e.type&&(r.state.cutIncoming=!0)}}var t=this,r=this.cm,n=this.wrapper=hiddenTextarea(),i=this.textarea=n.firstChild;e.wrapper.insertBefore(n,e.wrapper.firstChild),f&&(i.style.width="0px"),ge(i,"input",function(){o&&a>=9&&t.hasSelection&&(t.hasSelection=null),t.poll()}),ge(i,"paste",function(e){signalDOMEvent(r,e)||handlePaste(e,r)||(r.state.pasteIncoming=!0,t.fastPoll())}),ge(i,"cut",prepareCopyCut),ge(i,"copy",prepareCopyCut),ge(e.scroller,"paste",function(n){eventInWidget(e,n)||signalDOMEvent(r,n)||(r.state.pasteIncoming=!0,t.focus())}),ge(e.lineSpace,"selectstart",function(t){eventInWidget(e,t)||de(t)}),ge(i,"compositionstart",function(){var e=r.getCursor("from");t.composing&&t.composing.range.clear(),t.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ge(i,"compositionend",function(){t.composing&&(t.poll(),t.composing.range.clear(),t.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,r=e.doc,n=prepareSelection(e);if(e.options.moveInputWithCursor){var i=cursorCoords(e,r.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return n},showSelection:function(e){var t=this.cm,r=t.display;removeChildrenAndAdd(r.cursorDiv,e.cursors),removeChildrenAndAdd(r.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,r,n=this.cm,i=n.doc;if(n.somethingSelected()){this.prevInput="";var s=i.sel.primary();t=We&&(s.to().line-s.from().line>100||(r=n.getSelection()).length>1e3);var l=t?"-":r||n.getSelection();this.textarea.value=l,n.state.focused&&Te(this.textarea),o&&a>=9&&(this.hasSelection=l)}else e||(this.prevInput=this.textarea.value="",o&&a>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!m||activeElt()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function p(){var r=t.poll();r||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,p))}var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,p)},poll:function(){var e=this.cm,t=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||ze(t)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var n=t.value;if(n==r&&!e.somethingSelected())return!1;if(o&&a>=9&&this.hasSelection===n||g&&/[\uf700-\uf7ff]/.test(n))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var i=n.charCodeAt(0);if(8203!=i||r||(r="​"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var s=0,l=Math.min(r.length,n.length);s<l&&r.charCodeAt(s)==n.charCodeAt(s);)++s;var c=this;return runInOp(e,function(){applyTextInput(e,n.slice(s),r.length-s,null,c.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?t.value=c.prevInput="":c.prevInput=n,c.composing&&(c.composing.range.clear(),c.composing.range=e.markText(c.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){o&&a>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function prepareSelectAllHack(){if(null!=i.selectionStart){var e=r.somethingSelected(),o="​"+(e?i.value:"");i.value="⇚",i.value=o,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=o.length,n.selForContextMenu=r.doc.sel}}function rehide(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=h,o&&a<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=c),null!=i.selectionStart){(!o||o&&a<9)&&prepareSelectAllHack();var e=0,s=function(){n.selForContextMenu==r.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?operation(r,Y.selectAll)(r):e++<10?n.detectingSelectAll=setTimeout(s,500):n.input.reset()};n.detectingSelectAll=setTimeout(s,200)}}var t=this,r=t.cm,n=r.display,i=t.textarea,l=posFromMouse(r,e),c=n.scroller.scrollTop;if(l&&!u){var p=r.options.resetSelectionOnContextMenu;p&&r.doc.sel.contains(l)==-1&&operation(r,setSelection)(r.doc,simpleSelection(l),Se);var h=i.style.cssText,d=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var f=t.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px; z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s)var m=window.scrollY;if(n.input.focus(),s&&window.scrollTo(null,m),n.input.reset(),r.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=!0,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),o&&a>=9&&prepareSelectAllHack(),w){me(e);var g=function(){ve(window,"mouseup",g),setTimeout(rehide,20)};ge(window,"mouseup",g)}else setTimeout(rehide,50)}},readOnlyChanged:function(e){e||this.reset()},setUneditable:nothing,needsContentAttribute:!1},TextareaInput.prototype),ContentEditableInput.prototype=copyObj({init:function(e){function onCopyCut(e){if(!signalDOMEvent(r,e)){if(r.somethingSelected())E={lineWise:!1,text:r.getSelections()},"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var i=copyableRanges(r);E={lineWise:!0,text:i.text},"cut"==e.type&&r.operation(function(){r.setSelections(i.ranges,0,Se),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=E.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=hiddenTextarea(),s=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),s.value=E.text.join("\n");var l=document.activeElement;Te(s),setTimeout(function(){r.display.lineSpace.removeChild(a),l.focus(),l==n&&t.showPrimarySelection()},50)}}var t=this,r=t.cm,n=t.div=e.lineDiv;disableBrowserMagic(n,r.options.spellcheck),ge(n,"paste",function(e){signalDOMEvent(r,e)||handlePaste(e,r)||a<=11&&setTimeout(operation(r,function(){t.pollContent()||regChange(r)}),20)}),ge(n,"compositionstart",function(e){var n=e.data;if(t.composing={sel:r.doc.sel,data:n,startData:n},n){var i=r.doc.sel.primary(),o=r.getLine(i.head.line),a=o.indexOf(n,Math.max(0,i.head.ch-n.length));a>-1&&a<=i.head.ch&&(t.composing.sel=simpleSelection(C(i.head.line,a),C(i.head.line,a+n.length)))}}),ge(n,"compositionupdate",function(e){t.composing.data=e.data}),ge(n,"compositionend",function(e){var r=t.composing;r&&(e.data==r.startData||/\u200b/.test(e.data)||(r.data=e.data),setTimeout(function(){r.handled||t.applyComposition(r),t.composing==r&&(t.composing=null)},50))}),ge(n,"touchstart",function(){t.forceCompositionEnd()}),ge(n,"input",function(){t.composing||!r.isReadOnly()&&t.pollContent()||runInOp(t.cm,function(){regChange(r)})}),ge(n,"copy",onCopyCut),ge(n,"cut",onCopyCut)},prepareSelection:function(){var e=prepareSelection(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=domToPos(this.cm,e.anchorNode,e.anchorOffset),i=domToPos(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!i||i.bad||0!=k(minPos(n,i),t.from())||0!=k(maxPos(n,i),t.to())){var o=posToDOM(this.cm,t.from()),a=posToDOM(this.cm,t.to());if(o||a){var s=this.cm.display.view,l=e.rangeCount&&e.getRangeAt(0);if(o){if(!a){var c=s[s.length-1].measure,u=c.maps?c.maps[c.maps.length-1]:c.map;a={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}}else o={node:s[0].measure.map[2],offset:0};try{var p=Me(o.node,o.offset,a.offset,a.node)}catch(h){}p&&(!r&&this.cm.state.focused?(e.collapse(o.node,o.offset),p.collapsed||e.addRange(p)):(e.removeAllRanges(),e.addRange(p)),l&&null==e.anchorNode?e.addRange(l):r&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){removeChildrenAndAdd(this.cm.display.cursorDiv,e.cursors),removeChildrenAndAdd(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Le(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function poll(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,poll))}var e=this;this.selectionInEditor()?this.pollSelection():runInOp(this.cm,function(){e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,poll)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset;
},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var r=domToPos(t,e.anchorNode,e.anchorOffset),n=domToPos(t,e.focusNode,e.focusOffset);r&&n&&runInOp(t,function(){setSelection(t.doc,simpleSelection(r,n),Se),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,r=e.doc.sel.primary(),n=r.from(),i=r.to();if(n.line<t.viewFrom||i.line>t.viewTo-1)return!1;var o;if(n.line==t.viewFrom||0==(o=findViewIndex(e,n.line)))var a=lineNo(t.view[0].line),s=t.view[0].node;else var a=lineNo(t.view[o].line),s=t.view[o-1].node.nextSibling;var l=findViewIndex(e,i.line);if(l==t.view.length-1)var c=t.viewTo-1,u=t.lineDiv.lastChild;else var c=lineNo(t.view[l+1].line)-1,u=t.view[l+1].node.previousSibling;for(var p=e.doc.splitLines(domTextBetween(e,s,u,a,c)),h=getBetween(e.doc,C(a,0),C(c,getLine(e.doc,c).text.length));p.length>1&&h.length>1;)if(lst(p)==lst(h))p.pop(),h.pop(),c--;else{if(p[0]!=h[0])break;p.shift(),h.shift(),a++}for(var d=0,f=0,m=p[0],g=h[0],y=Math.min(m.length,g.length);d<y&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var v=lst(p),b=lst(h),_=Math.min(v.length-(1==p.length?d:0),b.length-(1==h.length?d:0));f<_&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)++f;p[p.length-1]=v.slice(0,v.length-f),p[0]=p[0].slice(d);var w=C(a,d),x=C(c,h.length?lst(h).length-f:0);return p.length>1||p[0]||k(w,x)?(replaceRange(e.doc,p,w,x,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?operation(this.cm,regChange)(this.cm):e.data&&e.data!=e.startData&&operation(this.cm,applyTextInput)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:nothing,resetPosition:nothing,needsContentAttribute:!0},ContentEditableInput.prototype),CodeMirror.inputStyles={textarea:TextareaInput,contenteditable:ContentEditableInput},Selection.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(0!=k(r.anchor,n.anchor)||0!=k(r.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Range(copyPos(this.ranges[t].anchor),copyPos(this.ranges[t].head));return new Selection(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(k(t,n.from())>=0&&k(e,n.to())<=0)return r}return-1}},Range.prototype={from:function(){return minPos(this.anchor,this.head)},to:function(){return maxPos(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var A,P,T,M={left:0,right:0,top:0,bottom:0},I=null,O=0,R=0,L=0,N=null;o?N=-.53:r?N=15:c?N=-.7:p&&(N=-1/3);var D=function(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}};CodeMirror.wheelEventPixels=function(e){var t=D(e);return t.x*=N,t.y*=N,t};var B=new Delayed,V=null,F=CodeMirror.changeEnd=function(e){return e.text?C(e.from.line+e.text.length-1,lst(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var r=this.options,n=r[e];r[e]==t&&"mode"!=e||(r[e]=t,U.hasOwnProperty(e)&&operation(this,U[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](getKeyMap(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:methodOp(function(e,t){var r=e.token?e:CodeMirror.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");insertSorted(this.state.overlays,{mode:r,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,regChange(this)}),removeOverlay:methodOp(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void regChange(this)}}),indentLine:methodOp(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),isLine(this.doc,e)&&indentLine(this,e,t,r)}),indentSelection:methodOp(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(indentLine(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&ensureCursorVisible(this));else{var o=i.from(),a=i.to(),s=Math.max(r,o.line);r=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<r;++l)indentLine(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[n].from().ch>0&&replaceOneSelection(this.doc,n,new Range(o,c[n].to()),Se)}}}),getTokenAt:function(e,t){return takeToken(this,e,t)},getLineTokens:function(e,t){return takeToken(this,C(e),t,!0)},getTokenTypeAt:function(e){e=clipPos(this.doc,e);var t,r=getLineStyles(this,getLine(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var a=n+i>>1;if((a?r[2*a-1]:0)>=o)i=a;else{if(!(r[2*a+1]<o)){t=r[2*a+2];break}n=a+1}}var s=t?t.indexOf("cm-overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?CodeMirror.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!K.hasOwnProperty(t))return r;var n=K[t],i=this.getModeAt(e);if("string"==typeof i[t])n[i[t]]&&r.push(n[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=n[i[t][o]];a&&r.push(a)}else i.helperType&&n[i.helperType]?r.push(n[i.helperType]):n[i.name]&&r.push(n[i.name]);for(var o=0;o<n._global.length;o++){var s=n._global[o];s.pred(i,this)&&indexOf(r,s.val)==-1&&r.push(s.val)}return r},getStateAfter:function(e,t){var r=this.doc;return e=clipLine(r,null==e?r.first+r.size-1:e),getStateBefore(this,e+1,t)},cursorCoords:function(e,t){var r,n=this.doc.sel.primary();return r=null==e?n.head:"object"==typeof e?clipPos(this.doc,e):e?n.from():n.to(),cursorCoords(this,r,t||"page")},charCoords:function(e,t){return charCoords(this,clipPos(this.doc,e),t||"page")},coordsChar:function(e,t){return e=fromCoordSystem(this,e,t||"page"),coordsChar(this,e.left,e.top)},lineAtHeight:function(e,t){return e=fromCoordSystem(this,{top:e,left:0},t||"page").top,lineAtHeight(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r,n=!1;if("number"==typeof e){var i=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>i&&(e=i,n=!0),r=getLine(this.doc,e)}else r=e;return intoCoordSystem(this,r,{top:0,left:0},t||"page").top+(n?this.doc.height-heightAtLine(r):0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},setGutterMarker:methodOp(function(e,t,r){return changeLine(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&isEmpty(n)&&(e.gutterMarkers=null),!0})}),clearGutter:methodOp(function(e){var t=this,r=t.doc,n=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,regLineChange(t,n,"gutter"),isEmpty(r.gutterMarkers)&&(r.gutterMarkers=null)),++n})}),lineInfo:function(e){if("number"==typeof e){if(!isLine(this.doc,e))return null;var t=e;if(e=getLine(this.doc,e),!e)return null}else{var t=lineNo(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=cursorCoords(this,clipPos(this.doc,e));var a=e.bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==n)a=e.top;else if("above"==n||"near"==n){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&scrollIntoView(this,s,a,s+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,execCommand:function(e){if(Y.hasOwnProperty(e))return Y[e].call(null,this)},triggerElectric:methodOp(function(e){triggerElectric(this,e)}),findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var o=0,a=clipPos(this.doc,e);o<t&&(a=findPosH(this.doc,a,i,r,n),!a.hitSide);++o);return a},moveH:methodOp(function(e,t){var r=this;r.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?findPosH(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},ke)}),deleteH:methodOp(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):deleteNearSelection(this,function(r){var i=findPosH(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=1,o=n;t<0&&(i=-1,t=-t);for(var a=0,s=clipPos(this.doc,e);a<t;++a){var l=cursorCoords(this,s,"div");if(null==o?o=l.left:l.left=o,s=findPosV(this,l,i,r),s.hitSide)break}return s},moveV:methodOp(function(e,t){var r=this,n=this.doc,i=[],o=!r.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=cursorCoords(r,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=findPosV(r,s,e,t);return"page"==t&&a==n.sel.primary()&&addToScrollPos(r,null,charCoords(r,l,"div").top-s.top),l},ke),i.length)for(var a=0;a<n.sel.ranges.length;a++)n.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=this.doc,r=getLine(t,e.line).text,n=e.ch,i=e.ch;if(r){var o=this.getHelper(e,"wordChars");(e.xRel<0||i==r.length)&&n?--n:++i;for(var a=r.charAt(n),s=isWordChar(a,o)?function(e){return isWordChar(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!isWordChar(e)};n>0&&s(r.charAt(n-1));)--n;for(;i<r.length&&s(r.charAt(i));)++i}return new Range(C(e.line,n),C(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ve(this.display.cursorDiv,"CodeMirror-overwrite"):Be(this.display.cursorDiv,"CodeMirror-overwrite"),be(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==activeElt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:methodOp(function(e,t){null==e&&null==t||resolveScrollToPos(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-scrollGap(this)-this.display.barHeight,width:e.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:C(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)resolveScrollToPos(this),this.curOp.scrollToPos=e;else{var r=calculateScrollPos(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:methodOp(function(e,t){function interpret(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var r=this;null!=e&&(r.display.wrapper.style.width=interpret(e)),null!=t&&(r.display.wrapper.style.height=interpret(t)),r.options.lineWrapping&&clearLineMeasurementCache(this);var n=r.display.viewFrom;r.doc.iter(n,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){regLineChange(r,n,"widget");break}++n}),r.curOp.forceUpdate=!0,be(r,"refresh",this)}),operation:function(e){return runInOp(this,e)},refresh:methodOp(function(){var e=this.display.cachedTextHeight;regChange(this),this.curOp.forceUpdate=!0,clearCaches(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),updateGutterSpace(this),(null==e||Math.abs(e-textHeight(this.display))>.5)&&estimateLineHeights(this),be(this,"refresh",this)}),swapDoc:methodOp(function(e){var t=this.doc;return t.cm=null,attachDoc(this,e),clearCaches(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,signalLater(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},eventMixin(CodeMirror);var j=CodeMirror.defaults={},U=CodeMirror.optionHandlers={},z=CodeMirror.Init={toString:function(){return"CodeMirror.Init"}};option("value","",function(e,t){e.setValue(t)},!0),option("mode",null,function(e,t){e.doc.modeOption=t,loadMode(e)},!0),option("indentUnit",2,loadMode,!0),option("indentWithTabs",!1),option("smartIndent",!0),option("tabSize",4,function(e){resetModeState(e),clearCaches(e),regChange(e)},!0),option("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(o==-1)break;i=o+t.length,r.push(C(n,o))}n++});for(var i=r.length-1;i>=0;i--)replaceRange(e.doc,t,r[i],C(r[i].line,r[i].ch+t.length))}}),option("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=CodeMirror.Init&&e.refresh()}),option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(e){e.refresh()},!0),option("electricChars",!0),option("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),option("spellcheck",!1,function(e,t){e.getInputField().spellcheck=t},!0),option("rtlMoveVisually",!v),option("wholeLineUpdateBefore",!0),option("theme","default",function(e){themeChanged(e),guttersChanged(e)},!0),option("keyMap","default",function(e,t,r){var n=getKeyMap(t),i=r!=CodeMirror.Init&&getKeyMap(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)}),option("extraKeys",null),option("lineWrapping",!1,wrappingChanged,!0),option("gutters",[],function(e){setGuttersForLineNumbers(e.options),guttersChanged(e)},!0),option("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?compensateForHScroll(e.display)+"px":"0",e.refresh()},!0),option("coverGutterNextToScrollbar",!1,function(e){updateScrollbars(e)},!0),option("scrollbarStyle","native",function(e){initScrollbars(e),updateScrollbars(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),option("lineNumbers",!1,function(e){setGuttersForLineNumbers(e.options),guttersChanged(e)},!0),option("firstLineNumber",1,guttersChanged,!0),option("lineNumberFormatter",function(e){return e},guttersChanged,!0),option("showCursorWhenSelecting",!1,updateSelection,!0),option("resetSelectionOnContextMenu",!0),option("lineWiseCopyCut",!0),option("readOnly",!1,function(e,t){"nocursor"==t?(onBlur(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),option("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),option("dragDrop",!0,dragDropChanged),option("allowDropFileTypes",null),option("cursorBlinkRate",530),option("cursorScrollMargin",0),option("cursorHeight",1,updateSelection,!0),option("singleCursorHeightPerLine",!0,updateSelection,!0),option("workTime",100),option("workDelay",100),option("flattenSpans",!0,resetModeState,!0),option("addModeClass",!1,resetModeState,!0),option("pollInterval",100),option("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),option("historyEventDelay",1250),option("viewportMargin",10,function(e){e.refresh()},!0),option("maxHighlightLength",1e4,resetModeState,!0),option("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),option("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),option("autofocus",null);var W=CodeMirror.modes={},H=CodeMirror.mimeModes={};CodeMirror.defineMode=function(e,t){CodeMirror.defaults.mode||"null"==e||(CodeMirror.defaults.mode=e),arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),W[e]=t},CodeMirror.defineMIME=function(e,t){H[e]=t},CodeMirror.resolveMode=function(e){if("string"==typeof e&&H.hasOwnProperty(e))e=H[e];else if(e&&"string"==typeof e.name&&H.hasOwnProperty(e.name)){var t=H[e.name];"string"==typeof t&&(t={name:t}),e=createObj(t,e),e.name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return CodeMirror.resolveMode("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return CodeMirror.resolveMode("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}},CodeMirror.getMode=function(e,t){var t=CodeMirror.resolveMode(t),r=W[t.name];if(!r)return CodeMirror.getMode(e,"text/plain");var n=r(e,t);if(q.hasOwnProperty(t.name)){var i=q[t.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)n[o]=t.modeProps[o];return n},CodeMirror.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),CodeMirror.defineMIME("text/plain","null");var q=CodeMirror.modeExtensions={};CodeMirror.extendMode=function(e,t){var r=q.hasOwnProperty(e)?q[e]:q[e]={};copyObj(t,r)},CodeMirror.defineExtension=function(e,t){CodeMirror.prototype[e]=t},CodeMirror.defineDocExtension=function(e,t){ue.prototype[e]=t},CodeMirror.defineOption=option;var G=[];CodeMirror.defineInitHook=function(e){G.push(e)};var K=CodeMirror.helpers={};CodeMirror.registerHelper=function(e,t,r){K.hasOwnProperty(e)||(K[e]=CodeMirror[e]={_global:[]}),K[e][t]=r},CodeMirror.registerGlobalHelper=function(e,t,r,n){CodeMirror.registerHelper(e,t,n),K[e]._global.push({pred:r,val:n})};var $=CodeMirror.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r},Q=CodeMirror.startState=function(e,t,r){return!e.startState||e.startState(t,r)};CodeMirror.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var Y=CodeMirror.commands={selectAll:function(e){e.setSelection(C(e.firstLine(),0),C(e.lastLine()),Se)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Se)},killLine:function(e){deleteNearSelection(e,function(t){if(t.empty()){var r=getLine(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:C(t.head.line+1,0)}:{from:t.head,to:C(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){deleteNearSelection(e,function(t){return{from:C(t.from().line,0),to:clipPos(e.doc,C(t.to().line+1,0))}})},delLineLeft:function(e){deleteNearSelection(e,function(e){return{from:C(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){deleteNearSelection(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){deleteNearSelection(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(C(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(C(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return lineStart(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return lineStartSmart(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return lineEnd(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},ke)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},ke)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?lineStartSmart(e,t.head):n},ke)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),a=Ee(e.getLine(o.line),o.ch,n);t.push(spaceStr(n-a%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){runInOp(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++){var i=t[n].head,o=getLine(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new C(i.line,i.ch-1)),i.ch>0)i=new C(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),C(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=getLine(e.doc,i.line-1).text;a&&e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),C(i.line-1,a.length-1),C(i.line,1),"+transpose")}r.push(new Range(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){runInOp(e,function(){for(var t=e.listSelections().length,r=0;r<t;r++){var n=e.listSelections()[r];e.replaceRange(e.doc.lineSeparator(),n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0)}ensureCursorVisible(e)})},openLine:function(e){e.replaceSelection("\n","start")},toggleOverwrite:function(e){e.toggleOverwrite()}},X=CodeMirror.keyMap={};X.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},X.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},X.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},X.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},X.default=g?X.macDefault:X.pcDefault,CodeMirror.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=map(r.split(" "),normalizeKeyName),o=0;o<i.length;o++){var a,s;o==i.length-1?(s=i.join(" "),a=n):(s=i.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[r]}for(var c in t)e[c]=t[c];return e};var Z=CodeMirror.lookupKey=function(e,t,r,n){t=getKeyMap(t);var i=t.call?t.call(e,n):t[e];if(i===!1)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Z(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var a=Z(e,t.fallthrough[o],r,n);if(a)return a}}},J=CodeMirror.isModifierKey=function(e){var t="string"==typeof e?e:qe[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},ee=CodeMirror.keyName=function(e,t){if(u&&34==e.keyCode&&e.char)return!1;var r=qe[e.keyCode],n=r;return null!=n&&!e.altGraphKey&&(e.altKey&&"Alt"!=r&&(n="Alt-"+n),(_?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(n="Ctrl-"+n),(_?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=r&&(n="Shift-"+n),n)};CodeMirror.fromTextArea=function(e,t){function save(){e.value=s.getValue()}if(t=t?copyObj(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=activeElt();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(ge(e.form,"submit",save),!t.leaveSubmitMethodAlone)){var n=e.form,i=n.submit;try{var o=n.submit=function(){save(),n.submit=i,n.submit(),n.submit=o}}catch(a){}}t.finishInit=function(t){t.save=save,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,save(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(ve(e.form,"submit",save),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var s=CodeMirror(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return s};var te=CodeMirror.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};te.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));if(r)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ee(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ee(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Ee(this.string,null,this.tabSize)-(this.lineStart?Ee(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(i(o)==i(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var re=0,ne=CodeMirror.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++re};eventMixin(ne),ne.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&startOperation(e),hasHandler(this,"clear")){var r=this.find();r&&signalLater(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=getMarkedSpanFor(a.markedSpans,this);e&&!this.collapsed?regLineChange(e,lineNo(a),"text"):e&&(null!=s.to&&(i=lineNo(a)),null!=s.from&&(n=lineNo(a))),a.markedSpans=removeMarkedSpan(a.markedSpans,s),null==s.from&&this.collapsed&&!lineIsHidden(this.doc,a)&&e&&updateLineHeight(a,textHeight(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=visualLine(this.lines[o]),c=lineLength(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&regChange(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&reCheckSelection(e.doc)),e&&signalLater(e,"markerCleared",e,this),t&&endOperation(e),this.parent&&this.parent.clear()}},ne.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var r,n,i=0;i<this.lines.length;++i){var o=this.lines[i],a=getMarkedSpanFor(o.markedSpans,this);if(null!=a.from&&(r=C(t?o:lineNo(o),a.from),e==-1))return r;if(null!=a.to&&(n=C(t?o:lineNo(o),a.to),1==e))return n}return r&&{from:r,to:n}},ne.prototype.changed=function(){
var e=this.find(-1,!0),t=this,r=this.doc.cm;e&&r&&runInOp(r,function(){var n=e.line,i=lineNo(e.line),o=findViewForLine(r,i);if(o&&(clearLineMeasurementCacheFor(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!lineIsHidden(t.doc,n)&&null!=t.height){var a=t.height;t.height=null;var s=widgetHeight(t)-a;s&&updateLineHeight(n,n.height+s)}})},ne.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&indexOf(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ne.prototype.detachLine=function(e){if(this.lines.splice(indexOf(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var re=0,ie=CodeMirror.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};eventMixin(ie),ie.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();signalLater(this,"clear")}},ie.prototype.find=function(e,t){return this.primary.find(e,t)};var oe=CodeMirror.LineWidget=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};eventMixin(oe),oe.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=lineNo(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=widgetHeight(this);updateLineHeight(r,Math.max(0,r.height-o)),e&&runInOp(e,function(){adjustScrollWhenAboveVisible(e,r,-o),regLineChange(e,n,"widget")})}},oe.prototype.changed=function(){var e=this.height,t=this.doc.cm,r=this.line;this.height=null;var n=widgetHeight(this)-e;n&&(updateLineHeight(r,r.height+n),t&&runInOp(t,function(){t.curOp.forceUpdate=!0,adjustScrollWhenAboveVisible(t,r,n)}))};var ae=CodeMirror.Line=function(e,t,r){this.text=e,attachMarkedSpans(this,t),this.height=r?r(this):1};eventMixin(ae),ae.prototype.lineNo=function(){return lineNo(this)};var se={},le={};LeafChunk.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,cleanUpLine(i),signalLater(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},BranchChunk.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var o=Math.min(t,i-e),a=n.height;if(n.removeInner(e,o),this.height-=a-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof LeafChunk))){var s=[];this.collapse(s),this.children=[new LeafChunk(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var l=new LeafChunk(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++n,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new BranchChunk(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=indexOf(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new BranchChunk(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,r))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var ce=0,ue=CodeMirror.Doc=function(e,t,r,n){if(!(this instanceof ue))return new ue(e,t,r,n);null==r&&(r=0),BranchChunk.call(this,[new LeafChunk([new ae("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var i=C(r,0);this.sel=simpleSelection(i),this.history=new History(null),this.id=++ce,this.modeOption=t,this.lineSep=n,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),updateDoc(this,{from:i,to:i,text:e}),setSelection(this,simpleSelection(i),Se)};ue.prototype=createObj(BranchChunk.prototype,{constructor:ue,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=getLines(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:docMethodOp(function(e){var t=C(this.first,0),r=this.first+this.size-1;makeChange(this,{from:t,to:C(r,getLine(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),setSelection(this,simpleSelection(t))}),replaceRange:function(e,t,r,n){t=clipPos(this,t),r=r?clipPos(this,r):t,replaceRange(this,e,t,r,n)},getRange:function(e,t,r){var n=getBetween(this,clipPos(this,e),clipPos(this,t));return r===!1?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(isLine(this,e))return getLine(this,e)},getLineNumber:function(e){return lineNo(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=getLine(this,e)),visualLine(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return clipPos(this,e)},getCursor:function(e){var t,r=this.sel.primary();return t=null==e||"head"==e?r.head:"anchor"==e?r.anchor:"end"==e||"to"==e||e===!1?r.to():r.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(e,t,r){setSimpleSelection(this,clipPos(this,"number"==typeof e?C(e,t||0):e),null,r)}),setSelection:docMethodOp(function(e,t,r){setSimpleSelection(this,clipPos(this,e),clipPos(this,t||e),r)}),extendSelection:docMethodOp(function(e,t,r){extendSelection(this,clipPos(this,e),t&&clipPos(this,t),r)}),extendSelections:docMethodOp(function(e,t){extendSelections(this,clipPosArray(this,e),t)}),extendSelectionsBy:docMethodOp(function(e,t){var r=map(this.sel.ranges,e);extendSelections(this,clipPosArray(this,r),t)}),setSelections:docMethodOp(function(e,t,r){if(e.length){for(var n=0,i=[];n<e.length;n++)i[n]=new Range(clipPos(this,e[n].anchor),clipPos(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),setSelection(this,normalizeSelection(i,t),r)}}),addSelection:docMethodOp(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new Range(clipPos(this,e),clipPos(this,t||e))),setSelection(this,normalizeSelection(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=getBetween(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=getBetween(this,r[n].from(),r[n].to());e!==!1&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:docMethodOp(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];n[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:r}}for(var s=t&&"end"!=t&&computeReplacedSel(this,n,t),o=n.length-1;o>=0;o--)makeChange(this,n[o]);s?setSelectionReplaceHistory(this,s):this.cm&&ensureCursorVisible(this.cm)}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",!0)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new History(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function(e){var t=this.history=new History(this.history.maxGeneration);t.done=copyHistoryArray(e.done.slice(0),null,!0),t.undone=copyHistoryArray(e.undone.slice(0),null,!0)},addLineClass:docMethodOp(function(e,t,r){return changeLine(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(classTest(r).test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:docMethodOp(function(e,t,r){return changeLine(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(classTest(r));if(!o)return!1;var a=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:docMethodOp(function(e,t,r){return addLineWidget(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return markText(this,clipPos(this,e),clipPos(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=clipPos(this,e),markText(this,e,e,r,"bookmark")},findMarksAt:function(e){e=clipPos(this,e);var t=[],r=getLine(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=clipPos(this,e),t=clipPos(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||r&&!r(l.marker)||n.push(l.marker.parent||l.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+n;return o>e?(t=e,!0):(e-=o,void++r)}),clipPos(this,C(r,t))},indexFromPos:function(e){e=clipPos(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new ue(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new ue(getLines(this,t,r),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],copySharedMarkers(n,findSharedMarkers(this)),n},unlinkDoc:function(e){if(e instanceof CodeMirror&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var r=this.linked[t];if(r.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),detachSharedMarkers(findSharedMarkers(this));break}}if(e.history==this.history){var n=[e.id];linkedDocs(e,function(e){n.push(e.id)},!0),e.history=new History(null),e.history.done=copyHistoryArray(this.history.done,n),e.history.undone=copyHistoryArray(this.history.undone,n)}},iterLinkedDocs:function(e){linkedDocs(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ue(e)},lineSeparator:function(){return this.lineSep||"\n"}}),ue.prototype.eachLine=ue.prototype.iter;var pe="iter insert remove copy getEditor constructor".split(" ");for(var he in ue.prototype)ue.prototype.hasOwnProperty(he)&&indexOf(pe,he)<0&&(CodeMirror.prototype[he]=function(e){return function(){return e.apply(this.doc,arguments)}}(ue.prototype[he]));eventMixin(ue);var de=CodeMirror.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},fe=CodeMirror.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},me=CodeMirror.e_stop=function(e){de(e),fe(e)},ge=CodeMirror.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}},ye=[],ve=CodeMirror.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else for(var n=getHandlers(e,t,!1),i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}},be=CodeMirror.signal=function(e,t){var r=getHandlers(e,t,!0);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)},_e=null,we=30,xe=CodeMirror.Pass={toString:function(){return"CodeMirror.Pass"}},Se={scroll:!1},Ce={origin:"*mouse"},ke={origin:"+move"};Delayed.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Ee=CodeMirror.countColumn=function(e,t,r,n,i){null==t&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var o=n||0,a=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=r-a%r,o=s+1}},Ae=CodeMirror.findColumn=function(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);o==-1&&(o=e.length);var a=o-n;if(o==e.length||i+a>=t)return n+Math.min(a,t-i);if(i+=o-n,i+=r-i%r,n=o+1,i>=t)return n}},Pe=[""],Te=function(e){e.select()};f?Te=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(Te=function(e){try{e.select()}catch(t){}});var Me,Ie=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Oe=CodeMirror.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ie.test(e))},Re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Me=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(i){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var Le=CodeMirror.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)};o&&a<11&&(activeElt=function(){try{return document.activeElement}catch(e){return document.body}});var Ne,De,Be=CodeMirror.rmClass=function(e,t){var r=e.className,n=classTest(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:"")}},Ve=CodeMirror.addClass=function(e,t){var r=e.className;classTest(t).test(r)||(e.className+=(r?" ":"")+t)},Fe=!1,je=function(){if(o&&a<9)return!1;var e=elt("div");return"draggable"in e||"dragDrop"in e}(),Ue=CodeMirror.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");a!=-1?(r.push(o.slice(0,a)),t+=a+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},ze=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(r){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},We=function(){var e=elt("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),He=null,qe=CodeMirror.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var e=0;e<10;e++)qe[e+48]=qe[e+96]=String(e);for(var e=65;e<=90;e++)qe[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)qe[e+111]=qe[e+63235]="F"+e}();var Ge,Ke=function(){function charType(r){return r<=247?e.charAt(r):1424<=r&&r<=1524?"R":1536<=r&&r<=1773?t.charAt(r-1536):1774<=r&&r<=2220?"r":8192<=r&&r<=8203?"w":8204==r?"b":"L"}function BidiSpan(e,t,r){this.level=e,this.from=t,this.to=r}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,a=/[1n]/,s="L";return function(e){if(!r.test(e))return!1;for(var t,l=e.length,c=[],u=0;u<l;++u)c.push(t=charType(e.charCodeAt(u)));for(var u=0,p=s;u<l;++u){var t=c[u];"m"==t?c[u]=p:p=t}for(var u=0,h=s;u<l;++u){var t=c[u];"1"==t&&"r"==h?c[u]="n":i.test(t)&&(h=t,"r"==t&&(c[u]="R"))}for(var u=1,p=c[0];u<l-1;++u){var t=c[u];"+"==t&&"1"==p&&"1"==c[u+1]?c[u]="1":","!=t||p!=c[u+1]||"1"!=p&&"n"!=p||(c[u]=p),p=t}for(var u=0;u<l;++u){var t=c[u];if(","==t)c[u]="N";else if("%"==t){for(var d=u+1;d<l&&"%"==c[d];++d);for(var f=u&&"!"==c[u-1]||d<l&&"1"==c[d]?"1":"N",m=u;m<d;++m)c[m]=f;u=d-1}}for(var u=0,h=s;u<l;++u){var t=c[u];"L"==h&&"1"==t?c[u]="L":i.test(t)&&(h=t)}for(var u=0;u<l;++u)if(n.test(c[u])){for(var d=u+1;d<l&&n.test(c[d]);++d);for(var g="L"==(u?c[u-1]:s),y="L"==(d<l?c[d]:s),f=g||y?"L":"R",m=u;m<d;++m)c[m]=f;u=d-1}for(var v,b=[],u=0;u<l;)if(o.test(c[u])){var _=u;for(++u;u<l&&o.test(c[u]);++u);b.push(new BidiSpan(0,_,u))}else{var w=u,x=b.length;for(++u;u<l&&"L"!=c[u];++u);for(var m=w;m<u;)if(a.test(c[m])){w<m&&b.splice(x,0,new BidiSpan(1,w,m));var S=m;for(++m;m<u&&a.test(c[m]);++m);b.splice(x,0,new BidiSpan(2,S,m)),w=m}else++m;w<u&&b.splice(x,0,new BidiSpan(1,w,u))}return 1==b[0].level&&(v=e.match(/^\s+/))&&(b[0].from=v[0].length,b.unshift(new BidiSpan(0,0,v[0].length))),1==lst(b).level&&(v=e.match(/\s+$/))&&(lst(b).to-=v[0].length,b.push(new BidiSpan(0,l-v[0].length,l))),2==b[0].level&&b.unshift(new BidiSpan(1,b[0].to,b[0].to)),b[0].level!=lst(b).level&&b.push(new BidiSpan(b[0].level,l,l)),b}}();return CodeMirror.version="5.19.0",CodeMirror})},function(e,t,r){var n=r(236);"string"==typeof n&&(n=[[e.id,n,""]]);r(238)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(237)(),t.push([e.id,".CodeMirror{font-family:monospace;height:300px;color:#000}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-animate-fat-cursor{width:auto;border:0;-webkit-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@-webkit-keyframes blink{50%{background-color:transparent}}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:-20px;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:blue}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-invalidchar,.cm-s-default .cm-error{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0f0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#f22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px;*zoom:1;*display:inline}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper{-webkit-user-select:none;-moz-user-select:none;user-select:none}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;-webkit-font-variant-ligatures:none;font-variant-ligatures:none}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;overflow:auto}.CodeMirror-code{outline:none}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.CodeMirror-focused div.CodeMirror-cursors,div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background:#ffa;background:rgba(255,255,0,.4)}.CodeMirror span{*vertical-align:text-bottom}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:''}span.CodeMirror-selectedtext{background:none}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(e,t,r){function addStylesToDom(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=n[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(addStyle(i.parts[a],t))}else{for(var s=[],a=0;a<i.parts.length;a++)s.push(addStyle(i.parts[a],t));n[i.id]={id:i.id,refs:1,parts:s}}}}function listToStyles(e){for(var t=[],r={},n=0;n<e.length;n++){var i=e[n],o=i[0],a=i[1],s=i[2],l=i[3],c={css:a,media:s,sourceMap:l};r[o]?r[o].parts.push(c):t.push(r[o]={id:o,parts:[c]})}return t}function insertStyleElement(e,t){var r=a(),n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function removeStyleElement(e){e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function createStyleElement(e){var t=document.createElement("style");return t.type="text/css",insertStyleElement(e,t),t}function createLinkElement(e){var t=document.createElement("link");return t.rel="stylesheet",insertStyleElement(e,t),t}function addStyle(e,t){var r,n,i;if(t.singleton){var o=l++;r=s||(s=createStyleElement(t)),n=applyToSingletonTag.bind(null,r,o,!1),i=applyToSingletonTag.bind(null,r,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=createLinkElement(t),n=updateLink.bind(null,r),i=function(){removeStyleElement(r),r.href&&URL.revokeObjectURL(r.href)}):(r=createStyleElement(t),n=applyToTag.bind(null,r),i=function(){removeStyleElement(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}function applyToSingletonTag(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function applyToTag(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function updateLink(e,t){var r=t.css,n=t.sourceMap;n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var i=new Blob([r],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var n={},i=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},o=i(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),a=i(function(){return document.head||document.getElementsByTagName("head")[0]}),s=null,l=0,c=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=o()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var r=listToStyles(e);return addStylesToDom(r,t),function(e){for(var i=[],o=0;o<r.length;o++){var a=r[o],s=n[a.id];s.refs--,i.push(s)}if(e){var l=listToStyles(e);addStylesToDom(l,t)}for(var o=0;o<i.length;o++){var s=i[o];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete n[s.id]}}}};var u=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t,r){var n=r(240);"string"==typeof n&&(n=[[e.id,n,""]]);r(238)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(237)(),t.push([e.id,".cm-s-monokai.CodeMirror{background:#272822;color:#f8f8f2}.cm-s-monokai div.CodeMirror-selected{background:#49483e}.cm-s-monokai .CodeMirror-line::selection,.cm-s-monokai .CodeMirror-line>span::selection,.cm-s-monokai .CodeMirror-line>span>span::selection{background:rgba(73,72,62,.99)}.cm-s-monokai .CodeMirror-line::-moz-selection,.cm-s-monokai .CodeMirror-line>span::-moz-selection,.cm-s-monokai .CodeMirror-line>span>span::-moz-selection{background:rgba(73,72,62,.99)}.cm-s-monokai .CodeMirror-gutters{background:#272822;border-right:0}.cm-s-monokai .CodeMirror-guttermarker{color:#fff}.cm-s-monokai .CodeMirror-guttermarker-subtle,.cm-s-monokai .CodeMirror-linenumber{color:#d0d0d0}.cm-s-monokai .CodeMirror-cursor{border-left:1px solid #f8f8f0}.cm-s-monokai span.cm-comment{color:#75715e}.cm-s-monokai span.cm-atom,.cm-s-monokai span.cm-number{color:#ae81ff}.cm-s-monokai span.cm-attribute,.cm-s-monokai span.cm-property{color:#a6e22e}.cm-s-monokai span.cm-keyword{color:#f92672}.cm-s-monokai span.cm-builtin{color:#66d9ef}.cm-s-monokai span.cm-string{color:#e6db74}.cm-s-monokai span.cm-variable{color:#f8f8f2}.cm-s-monokai span.cm-variable-2{color:#9effff}.cm-s-monokai span.cm-variable-3{color:#66d9ef}.cm-s-monokai span.cm-def{color:#fd971f}.cm-s-monokai span.cm-bracket{color:#f8f8f2}.cm-s-monokai span.cm-tag{color:#f92672}.cm-s-monokai span.cm-header,.cm-s-monokai span.cm-link{color:#ae81ff}.cm-s-monokai span.cm-error{background:#f92672;color:#f8f8f0}.cm-s-monokai .CodeMirror-activeline-background{background:#373831}.cm-s-monokai .CodeMirror-matchingbracket{text-decoration:underline;color:#fff!important}",""]);
},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";function clearActiveLines(e){for(var i=0;i<e.state.activeLines.length;i++)e.removeLineClass(e.state.activeLines[i],"wrap",t),e.removeLineClass(e.state.activeLines[i],"background",r),e.removeLineClass(e.state.activeLines[i],"gutter",n)}function sameArray(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function updateActiveLines(e,i){for(var o=[],a=0;a<i.length;a++){var s=i[a];if(s.empty()){var l=e.getLineHandleVisualStart(s.head.line);o[o.length-1]!=l&&o.push(l)}}sameArray(e.state.activeLines,o)||e.operation(function(){clearActiveLines(e);for(var i=0;i<o.length;i++)e.addLineClass(o[i],"wrap",t),e.addLineClass(o[i],"background",r),e.addLineClass(o[i],"gutter",n);e.state.activeLines=o})}function selectionChange(e,t){updateActiveLines(e,t.ranges)}var t="CodeMirror-activeline",r="CodeMirror-activeline-background",n="CodeMirror-activeline-gutter";e.defineOption("styleActiveLine",!1,function(t,r,n){var i=n&&n!=e.Init;r&&!i?(t.state.activeLines=[],updateActiveLines(t,t.listSelections()),t.on("beforeSelectionChange",selectionChange)):!r&&i&&(t.off("beforeSelectionChange",selectionChange),clearActiveLines(t),delete t.state.activeLines)})})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";function Context(e,t,r,n,i,o){this.indented=e,this.column=t,this.type=r,this.info=n,this.align=i,this.prev=o}function pushContext(e,t,r,n){var i=e.indented;return e.context&&"statement"!=e.context.type&&"statement"!=r&&(i=e.context.indented),e.context=new Context(i,t,r,n,null,e.context)}function popContext(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}function typeBefore(e,t,r){return"variable"==t.prevToken||"variable-3"==t.prevToken||(!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(e.string.slice(0,r))||(!(!t.typeAtEndOfLine||e.column()!=e.indentation())||void 0))}function isTopScope(e){for(;;){if(!e||"top"==e.type)return!0;if("}"==e.type&&"namespace"!=e.prev.info)return!1;e=e.prev}}function words(e){for(var t={},r=e.split(" "),n=0;n<r.length;++n)t[r[n]]=!0;return t}function contains(e,t){return"function"==typeof e?e(t):e.propertyIsEnumerable(t)}function cppHook(e,t){if(!t.startOfLine)return!1;for(var r,n=null;r=e.peek();){if("\\"==r&&e.match(/^.$/)){n=cppHook;break}if("/"==r&&e.match(/^\/[\/\*]/,!1))break;e.next()}return t.tokenize=n,"meta"}function pointerHook(e,t){return"variable-3"==t.prevToken&&"variable-3"}function cpp14Literal(e){return e.eatWhile(/[\w\.']/),"number"}function cpp11StringHook(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var r=e.match(/"([^\s\\()]{0,16})\(/);return!!r&&(t.cpp11RawStringDelim=r[1],t.tokenize=tokenRawString,tokenRawString(e,t))}return e.match(/(u8|u|U|L)/)?!!e.match(/["']/,!1)&&"string":(e.next(),!1)}function cppLooksLikeConstructor(e){var t=/(\w+)::(\w+)$/.exec(e);return t&&t[1]==t[2]}function tokenAtString(e,t){for(var r;null!=(r=e.next());)if('"'==r&&!e.eat('"')){t.tokenize=null;break}return"string"}function tokenRawString(e,t){var r=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),n=e.match(new RegExp(".*?\\)"+r+'"'));return n?t.tokenize=null:e.skipToEnd(),"string"}function def(t,r){function add(e){if(e)for(var t in e)e.hasOwnProperty(t)&&n.push(t)}"string"==typeof t&&(t=[t]);var n=[];add(r.keywords),add(r.types),add(r.builtin),add(r.atoms),n.length&&(r.helperType=t[0],e.registerHelper("hintWords",t[0],n));for(var i=0;i<t.length;++i)e.defineMIME(t[i],r)}function tokenTripleString(e,t){for(var r=!1;!e.eol();){if(!r&&e.match('"""')){t.tokenize=null;break}r="\\"==e.next()&&!r}return"string"}function tokenKotlinString(e){return function(t,r){for(var n,i=!1,o=!1;!t.eol();){if(!e&&!i&&t.match('"')){o=!0;break}if(e&&t.match('"""')){o=!0;break}n=t.next(),!i&&"$"==n&&t.match("{")&&t.skipTo("}"),i=!i&&"\\"==n&&!e}return!o&&e||(r.tokenize=null),"string"}}function tokenCeylonString(e){return function(t,r){for(var i,o=!1,a=!1;!t.eol();){if(!o&&t.match('"')&&("single"==e||t.match('""'))){a=!0;break}if(!o&&t.match("``")){n=tokenCeylonString(e),a=!0;break}i=t.next(),o="single"==e&&!o&&"\\"==i}return a&&(r.tokenize=null),"string"}}e.defineMode("clike",function(t,r){function tokenBase(e,t){var r=e.next();if(f[r]){var o=f[r](e,t);if(o!==!1)return o}if('"'==r||"'"==r)return t.tokenize=tokenString(r),t.tokenize(e,t);if(b.test(r))return n=r,null;if(_.test(r)){if(e.backUp(1),e.match(w))return"number";e.next()}if("/"==r){if(e.eat("*"))return t.tokenize=tokenComment,tokenComment(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(x.test(r)){for(;!e.match(/^\/[\/*]/,!1)&&e.eat(x););return"operator"}if(e.eatWhile(/[\w\$_\xa1-\uffff]/),v)for(;e.match(v);)e.eatWhile(/[\w\$_\xa1-\uffff]/);var a=e.current();return contains(l,a)?(contains(p,a)&&(n="newstatement"),contains(h,a)&&(i=!0),"keyword"):contains(c,a)?"variable-3":contains(u,a)?(contains(p,a)&&(n="newstatement"),"builtin"):contains(d,a)?"atom":"variable"}function tokenString(e){return function(t,r){for(var n,i=!1,o=!1;null!=(n=t.next());){if(n==e&&!i){o=!0;break}i=!i&&"\\"==n}return(o||!i&&!m)&&(r.tokenize=null),"string"}}function tokenComment(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=null;break}n="*"==r}return"comment"}function maybeEOL(e,t){r.typeFirstDefinitions&&e.eol()&&isTopScope(t.context)&&(t.typeAtEndOfLine=typeBefore(e,t,e.pos))}var n,i,o=t.indentUnit,a=r.statementIndentUnit||o,s=r.dontAlignCalls,l=r.keywords||{},c=r.types||{},u=r.builtin||{},p=r.blockKeywords||{},h=r.defKeywords||{},d=r.atoms||{},f=r.hooks||{},m=r.multiLineStrings,g=r.indentStatements!==!1,y=r.indentSwitch!==!1,v=r.namespaceSeparator,b=r.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,_=r.numberStart||/[\d\.]/,w=r.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,x=r.isOperatorChar||/[+\-*&%=<>!?|\/]/,S=r.endStatement||/^[;:,]$/;return{startState:function(e){return{tokenize:null,context:new Context((e||0)-o,0,"top",null,(!1)),indented:0,startOfLine:!0,prevToken:null}},token:function(e,t){var o=t.context;if(e.sol()&&(null==o.align&&(o.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return maybeEOL(e,t),null;n=i=null;var a=(t.tokenize||tokenBase)(e,t);if("comment"==a||"meta"==a)return a;if(null==o.align&&(o.align=!0),S.test(n))for(;"statement"==t.context.type;)popContext(t);else if("{"==n)pushContext(t,e.column(),"}");else if("["==n)pushContext(t,e.column(),"]");else if("("==n)pushContext(t,e.column(),")");else if("}"==n){for(;"statement"==o.type;)o=popContext(t);for("}"==o.type&&(o=popContext(t));"statement"==o.type;)o=popContext(t)}else n==o.type?popContext(t):g&&(("}"==o.type||"top"==o.type)&&";"!=n||"statement"==o.type&&"newstatement"==n)&&pushContext(t,e.column(),"statement",e.current());if("variable"==a&&("def"==t.prevToken||r.typeFirstDefinitions&&typeBefore(e,t,e.start)&&isTopScope(t.context)&&e.match(/^\s*\(/,!1))&&(a="def"),f.token){var s=f.token(e,t,a);void 0!==s&&(a=s)}return"def"==a&&r.styleDefs===!1&&(a="variable"),t.startOfLine=!1,t.prevToken=i?"def":a||n,maybeEOL(e,t),a},indent:function(t,n){if(t.tokenize!=tokenBase&&null!=t.tokenize||t.typeAtEndOfLine)return e.Pass;var i=t.context,l=n&&n.charAt(0);if("statement"==i.type&&"}"==l&&(i=i.prev),r.dontIndentStatements)for(;"statement"==i.type&&r.dontIndentStatements.test(i.info);)i=i.prev;if(f.indent){var c=f.indent(t,i,n);if("number"==typeof c)return c}var u=l==i.type,p=i.prev&&"switch"==i.prev.info;if(r.allmanIndentation&&/[{(]/.test(l)){for(;"top"!=i.type&&"}"!=i.type;)i=i.prev;return i.indented}return"statement"==i.type?i.indented+("{"==l?0:a):!i.align||s&&")"==i.type?")"!=i.type||u?i.indented+(u?0:o)+(u||!p||/^(?:case|default)\b/.test(n)?0:o):i.indented+a:i.column+(u?0:1)},electricInput:y?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var t="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",r="int long char short double float unsigned signed void size_t ptrdiff_t";def(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:words(t),types:words(r+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:words("case do else for if switch while struct"),defKeywords:words("struct"),typeFirstDefinitions:!0,atoms:words("null true false"),hooks:{"#":cppHook,"*":pointerHook},modeProps:{fold:["brace","include"]}}),def(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:words(t+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:words(r+" bool wchar_t"),blockKeywords:words("catch class do else finally for if struct switch try while"),defKeywords:words("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:words("true false null"),dontIndentStatements:/^template$/,hooks:{"#":cppHook,"*":pointerHook,u:cpp11StringHook,U:cpp11StringHook,L:cpp11StringHook,R:cpp11StringHook,0:cpp14Literal,1:cpp14Literal,2:cpp14Literal,3:cpp14Literal,4:cpp14Literal,5:cpp14Literal,6:cpp14Literal,7:cpp14Literal,8:cpp14Literal,9:cpp14Literal,token:function(e,t,r){if("variable"==r&&"("==e.peek()&&(";"==t.prevToken||null==t.prevToken||"}"==t.prevToken)&&cppLooksLikeConstructor(e.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),def("text/x-java",{name:"clike",keywords:words("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),types:words("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:words("catch class do else finally for if switch try while"),defKeywords:words("class interface package enum"),typeFirstDefinitions:!0,atoms:words("true false null"),endStatement:/^[;:]$/,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),def("text/x-csharp",{name:"clike",keywords:words("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:words("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:words("catch class do else finally for foreach if struct switch try while"),defKeywords:words("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:words("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=tokenAtString,tokenAtString(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),def("text/x-scala",{name:"clike",keywords:words("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),types:words("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:words("catch class do else finally for forSome if match switch try while"),defKeywords:words("class def object package trait type val var"),atoms:words("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return!!e.match('""')&&(t.tokenize=tokenTripleString,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(e,t){var r=t.context;return!("}"!=r.type||!r.align||!e.eat(">"))&&(t.context=new Context(r.indented,r.column,r.type,r.info,null,r.prev),"operator")}},modeProps:{closeBrackets:{triples:'"'}}}),def("text/x-kotlin",{name:"clike",keywords:words("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix"),types:words("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,blockKeywords:words("catch class do else finally for if where try while enum"),defKeywords:words("class val var object package interface fun"),atoms:words("true false null this"),hooks:{'"':function(e,t){return t.tokenize=tokenKotlinString(e.match('""')),t.tokenize(e,t)}},modeProps:{closeBrackets:{triples:'"'}}}),def(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:words("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:words("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:words("for while do if else struct"),builtin:words("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:words("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}}),def("text/x-nesc",{name:"clike",keywords:words(t+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:words(r),blockKeywords:words("case do else for if switch while struct"),atoms:words("null true false"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}}),def("text/x-objectivec",{name:"clike",keywords:words(t+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:words(r),atoms:words("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(e){return e.eatWhile(/[\w\$]/),"keyword"},"#":cppHook,indent:function(e,t,r){if("statement"==t.type&&/^@\w/.test(r))return t.indented}},modeProps:{fold:"brace"}}),def("text/x-squirrel",{name:"clike",keywords:words("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:words(r),blockKeywords:words("case catch class else for foreach if switch try while"),defKeywords:words("function local class"),typeFirstDefinitions:!0,atoms:words("true false null"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});var n=null;def("text/x-ceylon",{name:"clike",keywords:words("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(e){var t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:words("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:words("class dynamic function interface module object package value"),builtin:words("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:words("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return t.tokenize=tokenCeylonString(e.match('""')?"triple":"single"),t.tokenize(e,t)},"`":function(e,t){return!(!n||!e.match("`"))&&(t.tokenize=n,n=null,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(e,t,r){if(("variable"==r||"variable-3"==r)&&"."==t.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("clojure",function(e){function makeKeywords(e){for(var t={},r=e.split(" "),n=0;n<r.length;++n)t[r[n]]=!0;return t}function stateStack(e,t,r){this.indent=e,this.type=t,this.prev=r}function pushStack(e,t,r){e.indentStack=new stateStack(t,r,e.indentStack)}function popStack(e){e.indentStack=e.indentStack.prev}function isNumber(e,t){return"0"===e&&t.eat(/x/i)?(t.eatWhile(g.hex),!0):("+"!=e&&"-"!=e||!g.digit.test(t.peek())||(t.eat(g.sign),e=t.next()),!!g.digit.test(e)&&(t.eat(e),t.eatWhile(g.digit),"."==t.peek()?(t.eat("."),t.eatWhile(g.digit)):"/"==t.peek()&&(t.eat("/"),t.eatWhile(g.digit)),t.eat(g.exponent)&&(t.eat(g.sign),t.eatWhile(g.digit)),!0))}function eatCharacter(e){var t=e.next();t&&t.match(/[a-z]/)&&e.match(/[a-z]+/,!0)||"u"===t&&e.match(/[0-9a-z]{4}/i,!0)}var t="builtin",r="comment",n="string",i="string-2",o="atom",a="number",s="bracket",l="keyword",c="variable",u=e.indentUnit||2,p=e.indentUnit||2,h=makeKeywords("true false nil"),d=makeKeywords("defn defn- def def- defonce defmulti defmethod defmacro defstruct deftype defprotocol defrecord defproject deftest slice defalias defhinted defmacro- defn-memo defnk defnk defonce- defunbound defunbound- defvar defvar- let letfn do case cond condp for loop recur when when-not when-let when-first if if-let if-not . .. -> ->> doto and or dosync doseq dotimes dorun doall load import unimport ns in-ns refer try catch finally throw with-open with-local-vars binding gen-class gen-and-load-class gen-and-save-class handler-case handle"),f=makeKeywords("* *' *1 *2 *3 *agent* *allow-unresolved-vars* *assert* *clojure-version* *command-line-args* *compile-files* *compile-path* *compiler-options* *data-readers* *e *err* *file* *flush-on-newline* *fn-loader* *in* *math-context* *ns* *out* *print-dup* *print-length* *print-level* *print-meta* *print-readably* *read-eval* *source-path* *unchecked-math* *use-context-classloader* *verbose-defrecords* *warn-on-reflection* + +' - -' -> ->> ->ArrayChunk ->Vec ->VecNode ->VecSeq -cache-protocol-fn -reset-methods .. / < <= = == > >= EMPTY-NODE accessor aclone add-classpath add-watch agent agent-error agent-errors aget alength alias all-ns alter alter-meta! alter-var-root amap ancestors and apply areduce array-map aset aset-boolean aset-byte aset-char aset-double aset-float aset-int aset-long aset-short assert assoc assoc! assoc-in associative? atom await await-for await1 bases bean bigdec bigint biginteger binding bit-and bit-and-not bit-clear bit-flip bit-not bit-or bit-set bit-shift-left bit-shift-right bit-test bit-xor boolean boolean-array booleans bound-fn bound-fn* bound? butlast byte byte-array bytes case cat cast char char-array char-escape-string char-name-string char? chars chunk chunk-append chunk-buffer chunk-cons chunk-first chunk-next chunk-rest chunked-seq? class class? clear-agent-errors clojure-version coll? comment commute comp comparator compare compare-and-set! compile complement completing concat cond condp conj conj! cons constantly construct-proxy contains? count counted? create-ns create-struct cycle dec dec' decimal? declare dedupe default-data-readers definline definterface defmacro defmethod defmulti defn defn- defonce defprotocol defrecord defstruct deftype delay delay? deliver denominator deref derive descendants destructure disj disj! dissoc dissoc! distinct distinct? doall dorun doseq dosync dotimes doto double double-array doubles drop drop-last drop-while eduction empty empty? ensure enumeration-seq error-handler error-mode eval even? every-pred every? ex-data ex-info extend extend-protocol extend-type extenders extends? false? ffirst file-seq filter filterv find find-keyword find-ns find-protocol-impl find-protocol-method find-var first flatten float float-array float? floats flush fn fn? fnext fnil for force format frequencies future future-call future-cancel future-cancelled? future-done? future? gen-class gen-interface gensym get get-in get-method get-proxy-class get-thread-bindings get-validator group-by hash hash-combine hash-map hash-set identical? identity if-let if-not ifn? import in-ns inc inc' init-proxy instance? int int-array integer? interleave intern interpose into into-array ints io! isa? iterate iterator-seq juxt keep keep-indexed key keys keyword keyword? last lazy-cat lazy-seq let letfn line-seq list list* list? load load-file load-reader load-string loaded-libs locking long long-array longs loop macroexpand macroexpand-1 make-array make-hierarchy map map-indexed map? mapcat mapv max max-key memfn memoize merge merge-with meta method-sig methods min min-key mod munge name namespace namespace-munge neg? newline next nfirst nil? nnext not not-any? not-empty not-every? not= ns ns-aliases ns-imports ns-interns ns-map ns-name ns-publics ns-refers ns-resolve ns-unalias ns-unmap nth nthnext nthrest num number? numerator object-array odd? or parents partial partition partition-all partition-by pcalls peek persistent! pmap pop pop! pop-thread-bindings pos? pr pr-str prefer-method prefers primitives-classnames print print-ctor print-dup print-method print-simple print-str printf println println-str prn prn-str promise proxy proxy-call-with-super proxy-mappings proxy-name proxy-super push-thread-bindings pvalues quot rand rand-int rand-nth random-sample range ratio? rational? rationalize re-find re-groups re-matcher re-matches re-pattern re-seq read read-line read-string realized? reduce reduce-kv reductions ref ref-history-count ref-max-history ref-min-history ref-set refer refer-clojure reify release-pending-sends rem remove remove-all-methods remove-method remove-ns remove-watch repeat repeatedly replace replicate require reset! reset-meta! resolve rest restart-agent resultset-seq reverse reversible? rseq rsubseq satisfies? second select-keys send send-off seq seq? seque sequence sequential? set set-error-handler! set-error-mode! set-validator! set? short short-array shorts shuffle shutdown-agents slurp some some-fn sort sort-by sorted-map sorted-map-by sorted-set sorted-set-by sorted? special-symbol? spit split-at split-with str string? struct struct-map subs subseq subvec supers swap! symbol symbol? sync take take-last take-nth take-while test the-ns thread-bound? time to-array to-array-2d trampoline transduce transient tree-seq true? type unchecked-add unchecked-add-int unchecked-byte unchecked-char unchecked-dec unchecked-dec-int unchecked-divide-int unchecked-double unchecked-float unchecked-inc unchecked-inc-int unchecked-int unchecked-long unchecked-multiply unchecked-multiply-int unchecked-negate unchecked-negate-int unchecked-remainder-int unchecked-short unchecked-subtract unchecked-subtract-int underive unquote unquote-splicing update update-in update-proxy use val vals var-get var-set var? vary-meta vec vector vector-of vector? volatile! volatile? vreset! vswap! when when-first when-let when-not while with-bindings with-bindings* with-in-str with-loading-context with-local-vars with-meta with-open with-out-str with-precision with-redefs with-redefs-fn xml-seq zero? zipmap *default-data-reader-fn* as-> cond-> cond->> reduced reduced? send-via set-agent-send-executor! set-agent-send-off-executor! some-> some->>"),m=makeKeywords("ns fn def defn defmethod bound-fn if if-not case condp when while when-not when-first do future comment doto locking proxy with-open with-precision reify deftype defrecord defprotocol extend extend-protocol extend-type try catch let letfn binding loop for doseq dotimes when-let if-let defstruct struct-map assoc testing deftest handler-case handle dotrace deftrace"),g={digit:/\d/,digit_or_colon:/[\d:]/,hex:/[0-9a-f]/i,sign:/[+-]/,exponent:/e/i,keyword_char:/[^\s\(\[\;\)\]]/,symbol:/[\w*+!\-\._?:<>\/\xa1-\uffff]/,block_indent:/^(?:def|with)[^\/]+$|\/(?:def|with)/};return{startState:function(){return{indentStack:null,indentation:0,mode:!1}},token:function(e,y){if(null==y.indentStack&&e.sol()&&(y.indentation=e.indentation()),"string"!=y.mode&&e.eatSpace())return null;var v=null;switch(y.mode){case"string":for(var b,_=!1;null!=(b=e.next());){if('"'==b&&!_){y.mode=!1;break}_=!_&&"\\"==b}v=n;break;default:var w=e.next();if('"'==w)y.mode="string",v=n;else if("\\"==w)eatCharacter(e),v=i;else if("'"!=w||g.digit_or_colon.test(e.peek()))if(";"==w)e.skipToEnd(),v=r;else if(isNumber(w,e))v=a;else if("("==w||"["==w||"{"==w){var x,S="",C=e.column();if("("==w)for(;null!=(x=e.eat(g.keyword_char));)S+=x;S.length>0&&(m.propertyIsEnumerable(S)||g.block_indent.test(S))?pushStack(y,C+u,w):(e.eatSpace(),e.eol()||";"==e.peek()?pushStack(y,C+p,w):pushStack(y,C+e.current().length,w)),e.backUp(e.current().length-1),v=s}else if(")"==w||"]"==w||"}"==w)v=s,null!=y.indentStack&&y.indentStack.type==(")"==w?"(":"]"==w?"[":"{")&&popStack(y);else{if(":"==w)return e.eatWhile(g.symbol),o;e.eatWhile(g.symbol),v=d&&d.propertyIsEnumerable(e.current())?l:f&&f.propertyIsEnumerable(e.current())?t:h&&h.propertyIsEnumerable(e.current())?o:c}else v=o}return v},indent:function(e){return null==e.indentStack?e.indentation:e.indentStack.indent},closeBrackets:{pairs:'()[]{}""'},lineComment:";;"}}),e.defineMIME("text/x-clojure","clojure"),e.defineMIME("text/x-clojurescript","clojure"),e.defineMIME("application/edn","clojure")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("coffeescript",function(e,t){function wordRegexp(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function tokenBase(e,t){if(e.sol()){null===t.scope.align&&(t.scope.align=!1);var l=t.scope.offset;if(e.eatSpace()){var c=e.indentation();return c>l&&"coffee"==t.scope.type?"indent":c<l?"dedent":null}l>0&&dedent(e,t)}if(e.eatSpace())return null;var d=e.peek();if(e.match("####"))return e.skipToEnd(),"comment";if(e.match("###"))return t.tokenize=longComment,t.tokenize(e,t);if("#"===d)return e.skipToEnd(),"comment";if(e.match(/^-?[0-9\.]/,!1)){var m=!1;if(e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(m=!0),e.match(/^-?\d+\.\d*/)&&(m=!0),e.match(/^-?\.\d+/)&&(m=!0),m)return"."==e.peek()&&e.backUp(1),"number";var g=!1;if(e.match(/^-?0x[0-9a-f]+/i)&&(g=!0),e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(g=!0),e.match(/^-?0(?![\dx])/i)&&(g=!0),g)return"number"}if(e.match(p))return t.tokenize=tokenFactory(e.current(),!1,"string"),t.tokenize(e,t);if(e.match(h)){if("/"!=e.current()||e.match(/^.*\//,!1))return t.tokenize=tokenFactory(e.current(),!0,"string-2"),t.tokenize(e,t);e.backUp(1)}return e.match(n)||e.match(s)?"operator":e.match(i)?"punctuation":e.match(f)?"atom":e.match(a)||t.prop&&e.match(o)?"property":e.match(u)?"keyword":e.match(o)?"variable":(e.next(),r)}function tokenFactory(e,n,i){return function(o,a){for(;!o.eol();)if(o.eatWhile(/[^'"\/\\]/),o.eat("\\")){if(o.next(),n&&o.eol())return i}else{if(o.match(e))return a.tokenize=tokenBase,i;o.eat(/['"\/]/)}return n&&(t.singleLineStringErrors?i=r:a.tokenize=tokenBase),i}}function longComment(e,t){for(;!e.eol();){if(e.eatWhile(/[^#]/),e.match("###")){t.tokenize=tokenBase;break}e.eatWhile("#")}return"comment"}function indent(t,r,n){n=n||"coffee";for(var i=0,o=!1,a=null,s=r.scope;s;s=s.prev)if("coffee"===s.type||"}"==s.type){i=s.offset+e.indentUnit;break}"coffee"!==n?(o=null,a=t.column()+t.current().length):r.scope.align&&(r.scope.align=!1),r.scope={offset:i,type:n,prev:r.scope,align:o,alignOffset:a}}function dedent(e,t){if(t.scope.prev){if("coffee"===t.scope.type){for(var r=e.indentation(),n=!1,i=t.scope;i;i=i.prev)if(r===i.offset){n=!0;break}if(!n)return!0;for(;t.scope.prev&&t.scope.offset!==r;)t.scope=t.scope.prev;return!1}return t.scope=t.scope.prev,!1}}function tokenLexer(e,t){var n=t.tokenize(e,t),i=e.current();"return"===i&&(t.dedent=!0),(("->"===i||"=>"===i)&&e.eol()||"indent"===n)&&indent(e,t);
var o="[({".indexOf(i);if(o!==-1&&indent(e,t,"])}".slice(o,o+1)),l.exec(i)&&indent(e,t),"then"==i&&dedent(e,t),"dedent"===n&&dedent(e,t))return r;if(o="])}".indexOf(i),o!==-1){for(;"coffee"==t.scope.type&&t.scope.prev;)t.scope=t.scope.prev;t.scope.type==i&&(t.scope=t.scope.prev)}return t.dedent&&e.eol()&&("coffee"==t.scope.type&&t.scope.prev&&(t.scope=t.scope.prev),t.dedent=!1),n}var r="error",n=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/,i=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,o=/^[_A-Za-z$][_A-Za-z$0-9]*/,a=/^@[_A-Za-z$][_A-Za-z$0-9]*/,s=wordRegexp(["and","or","not","is","isnt","in","instanceof","typeof"]),l=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],c=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","@","throw","when","until","extends"],u=wordRegexp(l.concat(c));l=wordRegexp(l);var p=/^('{3}|\"{3}|['\"])/,h=/^(\/{3}|\/)/,d=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],f=wordRegexp(d),m={startState:function(e){return{tokenize:tokenBase,scope:{offset:e||0,type:"coffee",prev:null,align:!1},prop:!1,dedent:0}},token:function(e,t){var r=null===t.scope.align&&t.scope;r&&e.sol()&&(r.align=!1);var n=tokenLexer(e,t);return n&&"comment"!=n&&(r&&(r.align=!0),t.prop="punctuation"==n&&"."==e.current()),n},indent:function(e,t){if(e.tokenize!=tokenBase)return 0;var r=e.scope,n=t&&"])}".indexOf(t.charAt(0))>-1;if(n)for(;"coffee"==r.type&&r.prev;)r=r.prev;var i=n&&r.type===t.charAt(0);return r.align?r.alignOffset-(i?1:0):(i?r.prev:r).offset},lineComment:"#",fold:"indent"};return m}),e.defineMIME("text/x-coffeescript","coffeescript"),e.defineMIME("text/coffeescript","coffeescript")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";function keySet(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=!0;return t}function tokenCComment(e,t){for(var r,n=!1;null!=(r=e.next());){if(n&&"/"==r){t.tokenize=null;break}n="*"==r}return["comment","comment"]}e.defineMode("css",function(t,r){function ret(e,t){return i=t,e}function tokenBase(e,t){var r=e.next();if(s[r]){var n=s[r](e,t);if(n!==!1)return n}return"@"==r?(e.eatWhile(/[\w\\\-]/),ret("def",e.current())):"="==r||("~"==r||"|"==r)&&e.eat("=")?ret(null,"compare"):'"'==r||"'"==r?(t.tokenize=tokenString(r),t.tokenize(e,t)):"#"==r?(e.eatWhile(/[\w\\\-]/),ret("atom","hash")):"!"==r?(e.match(/^\s*\w*/),ret("keyword","important")):/\d/.test(r)||"."==r&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),ret("number","unit")):"-"!==r?/[,+>*\/]/.test(r)?ret(null,"select-op"):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?ret("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(r)?ret(null,r):"u"==r&&e.match(/rl(-prefix)?\(/)||"d"==r&&e.match("omain(")||"r"==r&&e.match("egexp(")?(e.backUp(1),t.tokenize=tokenParenthesized,ret("property","word")):/[\w\\\-]/.test(r)?(e.eatWhile(/[\w\\\-]/),ret("property","word")):ret(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),ret("number","unit")):e.match(/^-[\w\\\-]+/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?ret("variable-2","variable-definition"):ret("variable-2","variable")):e.match(/^\w+-/)?ret("meta","meta"):void 0}function tokenString(e){return function(t,r){for(var n,i=!1;null!=(n=t.next());){if(n==e&&!i){")"==e&&t.backUp(1);break}i=!i&&"\\"==n}return(n==e||!i&&")"!=e)&&(r.tokenize=null),ret("string","string")}}function tokenParenthesized(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=tokenString(")"),ret(null,"(")}function Context(e,t,r){this.type=e,this.indent=t,this.prev=r}function pushContext(e,t,r,n){return e.context=new Context(r,t.indentation()+(n===!1?0:a),e.context),r}function popContext(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function pass(e,t,r){return _[r.context.type](e,t,r)}function popAndPass(e,t,r,n){for(var i=n||1;i>0;i--)r.context=r.context.prev;return pass(e,t,r)}function wordAsValue(e){var t=e.current().toLowerCase();o=y.hasOwnProperty(t)?"atom":g.hasOwnProperty(t)?"keyword":"variable"}var n=r.inline;r.propertyKeywords||(r=e.resolveMode("text/css"));var i,o,a=t.indentUnit,s=r.tokenHooks,l=r.documentTypes||{},c=r.mediaTypes||{},u=r.mediaFeatures||{},p=r.mediaValueKeywords||{},h=r.propertyKeywords||{},d=r.nonStandardPropertyKeywords||{},f=r.fontProperties||{},m=r.counterDescriptors||{},g=r.colorKeywords||{},y=r.valueKeywords||{},v=r.allowNested,b=r.supportsAtComponent===!0,_={};return _.top=function(e,t,r){if("{"==e)return pushContext(r,t,"block");if("}"==e&&r.context.prev)return popContext(r);if(b&&/@component/.test(e))return pushContext(r,t,"atComponentBlock");if(/^@(-moz-)?document$/.test(e))return pushContext(r,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(e))return pushContext(r,t,"atBlock");if(/^@(font-face|counter-style)/.test(e))return r.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return pushContext(r,t,"at");if("hash"==e)o="builtin";else if("word"==e)o="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return pushContext(r,t,"interpolation");if(":"==e)return"pseudo";if(v&&"("==e)return pushContext(r,t,"parens")}return r.context.type},_.block=function(e,t,r){if("word"==e){var n=t.current().toLowerCase();return h.hasOwnProperty(n)?(o="property","maybeprop"):d.hasOwnProperty(n)?(o="string-2","maybeprop"):v?(o=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==e?"block":v||"hash"!=e&&"qualifier"!=e?_.top(e,t,r):(o="error","block")},_.maybeprop=function(e,t,r){return":"==e?pushContext(r,t,"prop"):pass(e,t,r)},_.prop=function(e,t,r){if(";"==e)return popContext(r);if("{"==e&&v)return pushContext(r,t,"propBlock");if("}"==e||"{"==e)return popAndPass(e,t,r);if("("==e)return pushContext(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)wordAsValue(t);else if("interpolation"==e)return pushContext(r,t,"interpolation")}else o+=" error";return"prop"},_.propBlock=function(e,t,r){return"}"==e?popContext(r):"word"==e?(o="property","maybeprop"):r.context.type},_.parens=function(e,t,r){return"{"==e||"}"==e?popAndPass(e,t,r):")"==e?popContext(r):"("==e?pushContext(r,t,"parens"):"interpolation"==e?pushContext(r,t,"interpolation"):("word"==e&&wordAsValue(t),"parens")},_.pseudo=function(e,t,r){return"word"==e?(o="variable-3",r.context.type):pass(e,t,r)},_.documentTypes=function(e,t,r){return"word"==e&&l.hasOwnProperty(t.current())?(o="tag",r.context.type):_.atBlock(e,t,r)},_.atBlock=function(e,t,r){if("("==e)return pushContext(r,t,"atBlock_parens");if("}"==e||";"==e)return popAndPass(e,t,r);if("{"==e)return popContext(r)&&pushContext(r,t,v?"block":"top");if("interpolation"==e)return pushContext(r,t,"interpolation");if("word"==e){var n=t.current().toLowerCase();o="only"==n||"not"==n||"and"==n||"or"==n?"keyword":c.hasOwnProperty(n)?"attribute":u.hasOwnProperty(n)?"property":p.hasOwnProperty(n)?"keyword":h.hasOwnProperty(n)?"property":d.hasOwnProperty(n)?"string-2":y.hasOwnProperty(n)?"atom":g.hasOwnProperty(n)?"keyword":"error"}return r.context.type},_.atComponentBlock=function(e,t,r){return"}"==e?popAndPass(e,t,r):"{"==e?popContext(r)&&pushContext(r,t,v?"block":"top",!1):("word"==e&&(o="error"),r.context.type)},_.atBlock_parens=function(e,t,r){return")"==e?popContext(r):"{"==e||"}"==e?popAndPass(e,t,r,2):_.atBlock(e,t,r)},_.restricted_atBlock_before=function(e,t,r){return"{"==e?pushContext(r,t,"restricted_atBlock"):"word"==e&&"@counter-style"==r.stateArg?(o="variable","restricted_atBlock_before"):pass(e,t,r)},_.restricted_atBlock=function(e,t,r){return"}"==e?(r.stateArg=null,popContext(r)):"word"==e?(o="@font-face"==r.stateArg&&!f.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==r.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},_.keyframes=function(e,t,r){return"word"==e?(o="variable","keyframes"):"{"==e?pushContext(r,t,"top"):pass(e,t,r)},_.at=function(e,t,r){return";"==e?popContext(r):"{"==e||"}"==e?popAndPass(e,t,r):("word"==e?o="tag":"hash"==e&&(o="builtin"),"at")},_.interpolation=function(e,t,r){return"}"==e?popContext(r):"{"==e||";"==e?popAndPass(e,t,r):("word"==e?o="variable":"variable"!=e&&"("!=e&&")"!=e&&(o="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new Context(n?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||tokenBase)(e,t);return r&&"object"==typeof r&&(i=r[1],r=r[0]),o=r,t.state=_[t.state](i,e,t),o},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),i=r.indent;return"prop"!=r.type||"}"!=n&&")"!=n||(r=r.prev),r.prev&&("}"!=n||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"restricted_atBlock"!=r.type?(")"!=n||"parens"!=r.type&&"atBlock_parens"!=r.type)&&("{"!=n||"at"!=r.type&&"atBlock"!=r.type)||(i=Math.max(0,r.indent-a),r=r.prev):(r=r.prev,i=r.indent)),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var t=["domain","regexp","url","url-prefix"],r=keySet(t),n=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],i=keySet(n),o=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],a=keySet(o),s=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],l=keySet(s),c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],u=keySet(c),p=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],h=keySet(p),d=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],f=keySet(d),m=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],g=keySet(m),y=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=keySet(y),b=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],_=keySet(b),w=t.concat(n).concat(o).concat(s).concat(c).concat(p).concat(y).concat(b);e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:r,mediaTypes:i,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:u,nonStandardPropertyKeywords:h,fontProperties:f,counterDescriptors:g,colorKeywords:v,valueKeywords:_,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=tokenCComment,tokenCComment(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:i,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:u,nonStandardPropertyKeywords:h,colorKeywords:v,valueKeywords:_,fontProperties:f,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=tokenCComment,tokenCComment(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:i,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:u,nonStandardPropertyKeywords:h,colorKeywords:v,valueKeywords:_,fontProperties:f,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=tokenCComment,tokenCComment(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:i,mediaFeatures:a,propertyKeywords:u,nonStandardPropertyKeywords:h,fontProperties:f,counterDescriptors:g,colorKeywords:v,valueKeywords:_,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=tokenCComment,tokenCComment(e,t))}},name:"css",helperType:"gss"})})},function(e,t,r){!function(e){e(r(234),r(247))}(function(e){"use strict";var t=["from","maintainer","run","cmd","expose","env","add","copy","entrypoint","volume","user","workdir","onbuild"],r="("+t.join("|")+")",n=new RegExp(r+"\\s*$","i"),i=new RegExp(r+"(\\s+)","i");e.defineSimpleMode("dockerfile",{start:[{regex:/#.*$/,token:"comment"},{regex:n,token:"variable-2"},{regex:i,token:["variable-2",null],next:"arguments"},{regex:/./,token:null}],arguments:[{regex:/#.*$/,token:"error",next:"start"},{regex:/[^#]+\\$/,token:null},{regex:/[^#]+/,token:null,next:"start"},{regex:/$/,token:null,next:"start"},{token:null,next:"start"}],meta:{lineComment:"#"}}),e.defineMIME("text/x-dockerfile","dockerfile")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";function ensureState(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function toRegex(e,t){if(!e)return/(?:)/;var r="";return e instanceof RegExp?(e.ignoreCase&&(r="i"),e=e.source):e=String(e),new RegExp((t===!1?"":"^")+"(?:"+e+")",r)}function asToken(e){if(!e)return null;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],r=0;r<e.length;r++)t.push(e[r]&&e[r].replace(/\./g," "));return t}function Rule(e,t){(e.next||e.push)&&ensureState(t,e.next||e.push),this.regex=toRegex(e.regex),this.token=asToken(e.token),this.data=e}function tokenFunction(e,t){return function(r,n){if(n.pending){var i=n.pending.shift();return 0==n.pending.length&&(n.pending=null),r.pos+=i.text.length,i.token}if(n.local){if(n.local.end&&r.match(n.local.end)){var o=n.local.endToken||null;return n.local=n.localState=null,o}var a,o=n.local.mode.token(r,n.localState);return n.local.endScan&&(a=n.local.endScan.exec(r.current()))&&(r.pos=r.start+a.index),o}for(var s=e[n.state],l=0;l<s.length;l++){var c=s[l],u=(!c.data.sol||r.sol())&&r.match(c.regex);if(u){if(c.data.next?n.state=c.data.next:c.data.push?((n.stack||(n.stack=[])).push(n.state),n.state=c.data.push):c.data.pop&&n.stack&&n.stack.length&&(n.state=n.stack.pop()),c.data.mode&&enterLocalMode(t,n,c.data.mode,c.token),c.data.indent&&n.indent.push(r.indentation()+t.indentUnit),c.data.dedent&&n.indent.pop(),u.length>2){n.pending=[];for(var p=2;p<u.length;p++)u[p]&&n.pending.push({text:u[p],token:c.token[p-1]});return r.backUp(u[0].length-(u[1]?u[1].length:0)),c.token[0]}return c.token&&c.token.join?c.token[0]:c.token}}return r.next(),null}}function cmp(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var r=0;for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)||!cmp(e[n],t[n]))return!1;r++}for(var n in t)t.hasOwnProperty(n)&&r--;return 0==r}function enterLocalMode(t,r,n,i){var o;if(n.persistent)for(var a=r.persistentStates;a&&!o;a=a.next)(n.spec?cmp(n.spec,a.spec):n.mode==a.mode)&&(o=a);var s=o?o.mode:n.mode||e.getMode(t,n.spec),l=o?o.state:e.startState(s);n.persistent&&!o&&(r.persistentStates={mode:s,spec:n.spec,state:l,next:r.persistentStates}),r.localState=l,r.local={mode:s,end:n.end&&toRegex(n.end),endScan:n.end&&n.forceEnd!==!1&&toRegex(n.end,!1),endToken:i&&i.join?i[i.length-1]:i}}function indexOf(e,t){for(var r=0;r<t.length;r++)if(t[r]===e)return!0}function indentFunction(t,r){return function(n,i,o){if(n.local&&n.local.mode.indent)return n.local.mode.indent(n.localState,i,o);if(null==n.indent||n.local||r.dontIndentStates&&indexOf(n.state,r.dontIndentStates)>-1)return e.Pass;var a=n.indent.length-1,s=t[n.state];e:for(;;){for(var l=0;l<s.length;l++){var c=s[l];if(c.data.dedent&&c.data.dedentIfLineStart!==!1){var u=c.regex.exec(i);if(u&&u[0]){a--,(c.next||c.push)&&(s=t[c.next||c.push]),i=i.slice(u[0].length);continue e}}}break}return a<0?0:n.indent[a]}}e.defineSimpleMode=function(t,r){e.defineMode(t,function(t){return e.simpleMode(t,r)})},e.simpleMode=function(t,r){ensureState(r,"start");var n={},i=r.meta||{},o=!1;for(var a in r)if(a!=i&&r.hasOwnProperty(a))for(var s=n[a]=[],l=r[a],c=0;c<l.length;c++){var u=l[c];s.push(new Rule(u,r)),(u.indent||u.dedent)&&(o=!0)}var p={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:o?[]:null}},copyState:function(t){var r={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(r.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(r.stack=t.stack.slice(0));for(var n=t.persistentStates;n;n=n.next)r.persistentStates={mode:n.mode,spec:n.spec,state:n.state==t.localState?r.localState:e.copyState(n.mode,n.state),next:r.persistentStates};return r},token:tokenFunction(n,t),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:indentFunction(n,i)};if(i)for(var h in i)i.hasOwnProperty(h)&&(p[h]=i[h]);return p}})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMIME("text/x-erlang","erlang"),e.defineMode("erlang",function(t){function tokenizer(e,t){if(t.in_string)return t.in_string=!doubleQuote(e),rval(t,e,"string");if(t.in_atom)return t.in_atom=!singleQuote(e),rval(t,e,"atom");if(e.eatSpace())return rval(t,e,"whitespace");if(!peekToken(t)&&e.match(/-\s*[a-zß-öø-ÿ][\wØ-ÞÀ-Öß-öø-ÿ]*/))return is_member(e.current(),r)?rval(t,e,"type"):rval(t,e,"attribute");var d=e.next();if("%"==d)return e.skipToEnd(),
rval(t,e,"comment");if(":"==d)return rval(t,e,"colon");if("?"==d)return e.eatSpace(),e.eatWhile(g),rval(t,e,"macro");if("#"==d)return e.eatSpace(),e.eatWhile(g),rval(t,e,"record");if("$"==d)return"\\"!=e.next()||e.match(y)?rval(t,e,"number"):rval(t,e,"error");if("."==d)return rval(t,e,"dot");if("'"==d){if(!(t.in_atom=!singleQuote(e))){if(e.match(/\s*\/\s*[0-9]/,!1))return e.match(/\s*\/\s*[0-9]/,!0),rval(t,e,"fun");if(e.match(/\s*\(/,!1)||e.match(/\s*:/,!1))return rval(t,e,"function")}return rval(t,e,"atom")}if('"'==d)return t.in_string=!doubleQuote(e),rval(t,e,"string");if(/[A-Z_Ø-ÞÀ-Ö]/.test(d))return e.eatWhile(g),rval(t,e,"variable");if(/[a-z_ß-öø-ÿ]/.test(d)){if(e.eatWhile(g),e.match(/\s*\/\s*[0-9]/,!1))return e.match(/\s*\/\s*[0-9]/,!0),rval(t,e,"fun");var v=e.current();return is_member(v,n)?rval(t,e,"keyword"):is_member(v,a)?rval(t,e,"operator"):e.match(/\s*\(/,!1)?!is_member(v,m)||":"==peekToken(t).token&&"erlang"!=peekToken(t,2).token?is_member(v,f)?rval(t,e,"guard"):rval(t,e,"function"):rval(t,e,"builtin"):":"==lookahead(e)?"erlang"==v?rval(t,e,"builtin"):rval(t,e,"function"):is_member(v,["true","false"])?rval(t,e,"boolean"):rval(t,e,"atom")}var b=/[0-9]/,_=/[0-9a-zA-Z]/;return b.test(d)?(e.eatWhile(b),e.eat("#")?e.eatWhile(_)||e.backUp(1):e.eat(".")&&(e.eatWhile(b)?e.eat(/[eE]/)&&(e.eat(/[-+]/)?e.eatWhile(b)||e.backUp(2):e.eatWhile(b)||e.backUp(1)):e.backUp(1)),rval(t,e,"number")):nongreedy(e,c,u)?rval(t,e,"open_paren"):nongreedy(e,p,h)?rval(t,e,"close_paren"):greedy(e,i,o)?rval(t,e,"separator"):greedy(e,s,l)?rval(t,e,"operator"):rval(t,e,null)}function nongreedy(e,t,r){if(1==e.current().length&&t.test(e.current())){for(e.backUp(1);t.test(e.peek());)if(e.next(),is_member(e.current(),r))return!0;e.backUp(e.current().length-1)}return!1}function greedy(e,t,r){if(1==e.current().length&&t.test(e.current())){for(;t.test(e.peek());)e.next();for(;0<e.current().length;){if(is_member(e.current(),r))return!0;e.backUp(1)}e.next()}return!1}function doubleQuote(e){return quote(e,'"',"\\")}function singleQuote(e){return quote(e,"'","\\")}function quote(e,t,r){for(;!e.eol();){var n=e.next();if(n==t)return!0;n==r&&e.next()}return!1}function lookahead(e){var t=e.match(/([\n\s]+|%[^\n]*\n)*(.)/,!1);return t?t.pop():""}function is_member(e,t){return-1<t.indexOf(e)}function rval(e,t,r){switch(pushToken(e,realToken(r,t)),r){case"atom":return"atom";case"attribute":return"attribute";case"boolean":return"atom";case"builtin":return"builtin";case"close_paren":return null;case"colon":return null;case"comment":return"comment";case"dot":return null;case"error":return"error";case"fun":return"meta";case"function":return"tag";case"guard":return"property";case"keyword":return"keyword";case"macro":return"variable-2";case"number":return"number";case"open_paren":return null;case"operator":return"operator";case"record":return"bracket";case"separator":return null;case"string":return"string";case"type":return"def";case"variable":return"variable";default:return null}}function aToken(e,t,r,n){return{token:e,column:t,indent:r,type:n}}function realToken(e,t){return aToken(t.current(),t.column(),t.indentation(),e)}function fakeToken(e){return aToken(e,0,0,e)}function peekToken(e,t){var r=e.tokenStack.length,n=t?t:1;return!(r<n)&&e.tokenStack[r-n]}function pushToken(e,t){"comment"!=t.type&&"whitespace"!=t.type&&(e.tokenStack=maybe_drop_pre(e.tokenStack,t),e.tokenStack=maybe_drop_post(e.tokenStack))}function maybe_drop_pre(e,t){var r=e.length-1;return 0<r&&"record"===e[r].type&&"dot"===t.type?e.pop():0<r&&"group"===e[r].type?(e.pop(),e.push(t)):e.push(t),e}function maybe_drop_post(e){if(!e.length)return e;var t=e.length-1;if("dot"===e[t].type)return[];if(t>1&&"fun"===e[t].type&&"fun"===e[t-1].token)return e.slice(0,t-1);switch(e[t].token){case"}":return d(e,{g:["{"]});case"]":return d(e,{i:["["]});case")":return d(e,{i:["("]});case">>":return d(e,{i:["<<"]});case"end":return d(e,{i:["begin","case","fun","if","receive","try"]});case",":return d(e,{e:["begin","try","when","->",",","(","[","{","<<"]});case"->":return d(e,{r:["when"],m:["try","if","case","receive"]});case";":return d(e,{E:["case","fun","if","receive","try","when"]});case"catch":return d(e,{e:["try"]});case"of":return d(e,{e:["case"]});case"after":return d(e,{e:["receive","try"]});default:return e}}function d(e,t){for(var r in t)for(var n=e.length-1,i=t[r],o=n-1;-1<o;o--)if(is_member(e[o].token,i)){var a=e.slice(0,o);switch(r){case"m":return a.concat(e[o]).concat(e[n]);case"r":return a.concat(e[n]);case"i":return a;case"g":return a.concat(fakeToken("group"));case"E":return a.concat(e[o]);case"e":return a.concat(e[o])}}return"E"==r?[]:e}function indenter(r,n){var i,o=t.indentUnit,a=wordafter(n),s=peekToken(r,1),l=peekToken(r,2);return r.in_string||r.in_atom?e.Pass:l?"when"==s.token?s.column+o:"when"===a&&"function"===l.type?l.indent+o:"("===a&&"fun"===s.token?s.column+3:"catch"===a&&(i=getToken(r,["try"]))?i.column:is_member(a,["end","after","of"])?(i=getToken(r,["begin","case","fun","if","receive","try"]),i?i.column:e.Pass):is_member(a,h)?(i=getToken(r,u),i?i.column:e.Pass):is_member(s.token,[",","|","||"])||is_member(a,[",","|","||"])?(i=postcommaToken(r),i?i.column+i.token.length:o):"->"==s.token?is_member(l.token,["receive","case","if","try"])?l.column+o+o:l.column+o:is_member(s.token,u)?s.column+s.token.length:(i=defaultToken(r),truthy(i)?i.column+o:0):0}function wordafter(e){var t=e.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/);return truthy(t)&&0===t.index?t[0]:""}function postcommaToken(e){var t=e.tokenStack.slice(0,-1),r=getTokenIndex(t,"type",["open_paren"]);return!!truthy(t[r])&&t[r]}function defaultToken(e){var t=e.tokenStack,r=getTokenIndex(t,"type",["open_paren","separator","keyword"]),n=getTokenIndex(t,"type",["operator"]);return truthy(r)&&truthy(n)&&r<n?t[r+1]:!!truthy(r)&&t[r]}function getToken(e,t){var r=e.tokenStack,n=getTokenIndex(r,"token",t);return!!truthy(r[n])&&r[n]}function getTokenIndex(e,t,r){for(var n=e.length-1;-1<n;n--)if(is_member(e[n][t],r))return n;return!1}function truthy(e){return e!==!1&&null!=e}var r=["-type","-spec","-export_type","-opaque"],n=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"],i=/[\->,;]/,o=["->",";",","],a=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"],s=/[\+\-\*\/<>=\|:!]/,l=["=","+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"],c=/[<\(\[\{]/,u=["<<","(","[","{"],p=/[>\)\]\}]/,h=["}","]",")",">>"],f=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary","bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"],m=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node","node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"],g=/[\w@Ø-ÞÀ-Öß-öø-ÿ]/,y=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;return{startState:function(){return{tokenStack:[],in_string:!1,in_atom:!1}},token:function(e,t){return tokenizer(e,t)},indent:function(e,t){return indenter(e,t)},lineComment:"%"}})})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("go",function(e){function tokenBase(e,r){var a=e.next();if('"'==a||"'"==a||"`"==a)return r.tokenize=tokenString(a),r.tokenize(e,r);if(/[\d\.]/.test(a))return"."==a?e.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==a?e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^0[0-7]+/):e.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(a))return t=a,null;if("/"==a){if(e.eat("*"))return r.tokenize=tokenComment,tokenComment(e,r);if(e.eat("/"))return e.skipToEnd(),"comment"}if(o.test(a))return e.eatWhile(o),"operator";e.eatWhile(/[\w\$_\xa1-\uffff]/);var s=e.current();return n.propertyIsEnumerable(s)?("case"!=s&&"default"!=s||(t="case"),"keyword"):i.propertyIsEnumerable(s)?"atom":"variable"}function tokenString(e){return function(t,r){for(var n,i=!1,o=!1;null!=(n=t.next());){if(n==e&&!i){o=!0;break}i=!i&&"`"!=e&&"\\"==n}return(o||!i&&"`"!=e)&&(r.tokenize=tokenBase),"string"}}function tokenComment(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=tokenBase;break}n="*"==r}return"comment"}function Context(e,t,r,n,i){this.indented=e,this.column=t,this.type=r,this.align=n,this.prev=i}function pushContext(e,t,r){return e.context=new Context(e.indented,t,r,null,e.context)}function popContext(e){if(e.context.prev){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}}var t,r=e.indentUnit,n={"break":!0,"case":!0,chan:!0,"const":!0,"continue":!0,"default":!0,defer:!0,"else":!0,fallthrough:!0,"for":!0,func:!0,go:!0,"goto":!0,"if":!0,"import":!0,"interface":!0,map:!0,"package":!0,range:!0,"return":!0,select:!0,struct:!0,"switch":!0,type:!0,"var":!0,bool:!0,"byte":!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,"int":!0,uint:!0,uintptr:!0,error:!0},i={"true":!0,"false":!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,imag:!0,len:!0,make:!0,"new":!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},o=/[+\-*&^%:=<>!|\/]/;return{startState:function(e){return{tokenize:null,context:new Context((e||0)-r,0,"top",(!1)),indented:0,startOfLine:!0}},token:function(e,r){var n=r.context;if(e.sol()&&(null==n.align&&(n.align=!1),r.indented=e.indentation(),r.startOfLine=!0,"case"==n.type&&(n.type="}")),e.eatSpace())return null;t=null;var i=(r.tokenize||tokenBase)(e,r);return"comment"==i?i:(null==n.align&&(n.align=!0),"{"==t?pushContext(r,e.column(),"}"):"["==t?pushContext(r,e.column(),"]"):"("==t?pushContext(r,e.column(),")"):"case"==t?n.type="case":"}"==t&&"}"==n.type?n=popContext(r):t==n.type&&popContext(r),r.startOfLine=!1,i)},indent:function(e,t){if(e.tokenize!=tokenBase&&null!=e.tokenize)return 0;var n=e.context,i=t&&t.charAt(0);if("case"==n.type&&/^(?:case|default)\b/.test(t))return e.context.type="}",n.indented;var o=i==n.type;return n.align?n.column+(o?0:1):n.indented+(o?0:r)},electricChars:"{}):",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-go","go")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("haskell",function(e,t){function switchState(e,t,r){return t(r),r(e,t)}function normal(e,t){if(e.eatWhile(u))return null;var p=e.next();if(c.test(p)){if("{"==p&&e.eat("-")){var h="comment";return e.eat("#")&&(h="meta"),switchState(e,t,ncomment(h,1))}return null}if("'"==p)return e.eat("\\")?e.next():e.next(),e.eat("'")?"string":"error";if('"'==p)return switchState(e,t,stringLiteral);if(n.test(p))return e.eatWhile(s),e.eat(".")?"qualifier":"variable-2";if(r.test(p))return e.eatWhile(s),"variable";if(i.test(p)){if("0"==p){if(e.eat(/[xX]/))return e.eatWhile(o),"integer";if(e.eat(/[oO]/))return e.eatWhile(a),"number"}e.eatWhile(i);var h="number";return e.match(/^\.\d+/)&&(h="number"),e.eat(/[eE]/)&&(h="number",e.eat(/[-+]/),e.eatWhile(i)),h}if("."==p&&e.eat("."))return"keyword";if(l.test(p)){if("-"==p&&e.eat(/-/)&&(e.eatWhile(/-/),!e.eat(l)))return e.skipToEnd(),"comment";var h="variable";return":"==p&&(h="variable-2"),e.eatWhile(l),h}return"error"}function ncomment(e,t){return 0==t?normal:function(r,n){for(var i=t;!r.eol();){var o=r.next();if("{"==o&&r.eat("-"))++i;else if("-"==o&&r.eat("}")&&(--i,0==i))return n(normal),e}return n(ncomment(e,i)),e}}function stringLiteral(e,t){for(;!e.eol();){var r=e.next();if('"'==r)return t(normal),"string";if("\\"==r){if(e.eol()||e.eat(u))return t(stringGap),"string";e.eat("&")||e.next()}}return t(normal),"error"}function stringGap(e,t){return e.eat("\\")?switchState(e,t,stringLiteral):(e.next(),t(normal),"error")}var r=/[a-z_]/,n=/[A-Z]/,i=/\d/,o=/[0-9A-Fa-f]/,a=/[0-7]/,s=/[a-z_A-Z0-9'\xa1-\uffff]/,l=/[-!#$%&*+.\/<=>?@\\^|~:]/,c=/[(),;[\]`{}]/,u=/[ \t\v\f]/,p=function(){function setType(t){return function(){for(var r=0;r<arguments.length;r++)e[arguments[r]]=t}}var e={};setType("keyword")("case","class","data","default","deriving","do","else","foreign","if","import","in","infix","infixl","infixr","instance","let","module","newtype","of","then","type","where","_"),setType("keyword")("..",":","::","=","\\",'"',"<-","->","@","~","=>"),setType("builtin")("!!","$!","$","&&","+","++","-",".","/","/=","<","<=","=<<","==",">",">=",">>",">>=","^","^^","||","*","**"),setType("builtin")("Bool","Bounded","Char","Double","EQ","Either","Enum","Eq","False","FilePath","Float","Floating","Fractional","Functor","GT","IO","IOError","Int","Integer","Integral","Just","LT","Left","Maybe","Monad","Nothing","Num","Ord","Ordering","Rational","Read","ReadS","Real","RealFloat","RealFrac","Right","Show","ShowS","String","True"),setType("builtin")("abs","acos","acosh","all","and","any","appendFile","asTypeOf","asin","asinh","atan","atan2","atanh","break","catch","ceiling","compare","concat","concatMap","const","cos","cosh","curry","cycle","decodeFloat","div","divMod","drop","dropWhile","either","elem","encodeFloat","enumFrom","enumFromThen","enumFromThenTo","enumFromTo","error","even","exp","exponent","fail","filter","flip","floatDigits","floatRadix","floatRange","floor","fmap","foldl","foldl1","foldr","foldr1","fromEnum","fromInteger","fromIntegral","fromRational","fst","gcd","getChar","getContents","getLine","head","id","init","interact","ioError","isDenormalized","isIEEE","isInfinite","isNaN","isNegativeZero","iterate","last","lcm","length","lex","lines","log","logBase","lookup","map","mapM","mapM_","max","maxBound","maximum","maybe","min","minBound","minimum","mod","negate","not","notElem","null","odd","or","otherwise","pi","pred","print","product","properFraction","putChar","putStr","putStrLn","quot","quotRem","read","readFile","readIO","readList","readLn","readParen","reads","readsPrec","realToFrac","recip","rem","repeat","replicate","return","reverse","round","scaleFloat","scanl","scanl1","scanr","scanr1","seq","sequence","sequence_","show","showChar","showList","showParen","showString","shows","showsPrec","significand","signum","sin","sinh","snd","span","splitAt","sqrt","subtract","succ","sum","tail","take","takeWhile","tan","tanh","toEnum","toInteger","toRational","truncate","uncurry","undefined","unlines","until","unwords","unzip","unzip3","userError","words","writeFile","zip","zip3","zipWith","zipWith3");var r=t.overrideKeywords;if(r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}();return{startState:function(){return{f:normal}},copyState:function(e){return{f:e.f}},token:function(e,t){var r=t.f(e,function(e){t.f=e}),n=e.current();return p.hasOwnProperty(n)?p[n]:r},blockCommentStart:"{-",blockCommentEnd:"-}",lineComment:"--"}}),e.defineMIME("text/x-haskell","haskell")})},function(e,t,r){!function(e){e(r(234),r(252),r(253),r(245))}(function(e){"use strict";function maybeBackup(e,t,r){var n=e.current(),i=n.search(t);return i>-1?e.backUp(n.length-i):n.match(/<\/?$/)&&(e.backUp(n.length),e.match(t,!1)||e.match(n)),r}function getAttrRegexp(e){var t=r[e];return t?t:r[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")}function getAttrValue(e,t){var r=e.match(getAttrRegexp(t));return r?/^\s*(.*?)\s*$/.exec(r[2])[1]:""}function getTagRegexp(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function addTags(e,t){for(var r in e)for(var n=t[r]||(t[r]=[]),i=e[r],o=i.length-1;o>=0;o--)n.unshift(i[o])}function findMatchingMode(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!n[0]||n[1].test(getAttrValue(t,n[0])))return n[2]}}var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},r={};e.defineMode("htmlmixed",function(r,n){function html(t,n){var a,s=i.token(t,n.htmlState),l=/\btag\b/.test(s);if(l&&!/[<>\s\/]/.test(t.current())&&(a=n.htmlState.tagName&&n.htmlState.tagName.toLowerCase())&&o.hasOwnProperty(a))n.inTag=a+" ";else if(n.inTag&&l&&/>$/.test(t.current())){var c=/^([\S]+) (.*)/.exec(n.inTag);n.inTag=null;var u=">"==t.current()&&findMatchingMode(o[c[1]],c[2]),p=e.getMode(r,u),h=getTagRegexp(c[1],!0),d=getTagRegexp(c[1],!1);n.token=function(e,t){return e.match(h,!1)?(t.token=html,t.localState=t.localMode=null,null):maybeBackup(e,d,t.localMode.token(e,t.localState))},n.localMode=p,n.localState=e.startState(p,i.indent(n.htmlState,""))}else n.inTag&&(n.inTag+=t.current(),t.eol()&&(n.inTag+=" "));return s}var i=e.getMode(r,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),o={},a=n&&n.tags,s=n&&n.scriptTypes;if(addTags(t,o),a&&addTags(a,o),s)for(var l=s.length-1;l>=0;l--)o.script.unshift(["type",s[l].matches,s[l].mode]);return{startState:function(){var t=e.startState(i);return{token:html,inTag:null,localMode:null,localState:null,htmlState:t}},copyState:function(t){var r;return t.localState&&(r=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:r,htmlState:e.copyState(i,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,r){return!t.localMode||/^\s*<\//.test(r)?i.indent(t.htmlState,r):t.localMode.indent?t.localMode.indent(t.localState,r):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||i}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};e.defineMode("xml",function(n,i){function inText(e,t){function chain(r){return t.tokenize=r,r(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?chain(inBlock("atom","]]>")):null:e.match("--")?chain(inBlock("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),chain(doctype(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=inBlock("meta","?>"),"meta"):(c=e.eat("/")?"closeTag":"openTag",t.tokenize=inTag,"tag bracket");if("&"==r){var n;return n=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),n?"atom":"error"}return e.eatWhile(/[^&<]/),null}function inTag(e,t){var r=e.next();if(">"==r||"/"==r&&e.eat(">"))return t.tokenize=inText,c=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return c="equals",null;if("<"==r){t.tokenize=inText,t.state=baseState,t.tagName=t.tagStart=null;var n=t.tokenize(e,t);return n?n+" tag error":"tag error"}return/[\'\"]/.test(r)?(t.tokenize=inAttribute(r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function inAttribute(e){var t=function(t,r){for(;!t.eol();)if(t.next()==e){r.tokenize=inTag;break}return"string"};return t.isInAttribute=!0,t}function inBlock(e,t){return function(r,n){for(;!r.eol();){if(r.match(t)){n.tokenize=inText;break}r.next()}return e}}function doctype(e){return function(t,r){for(var n;null!=(n=t.next());){if("<"==n)return r.tokenize=doctype(e+1),r.tokenize(t,r);if(">"==n){if(1==e){r.tokenize=inText;break}return r.tokenize=doctype(e-1),r.tokenize(t,r)}}return"meta"}}function Context(e,t,r){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=r,(a.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function popContext(e){e.context&&(e.context=e.context.prev)}function maybePopContext(e,t){for(var r;;){if(!e.context)return;if(r=e.context.tagName,!a.contextGrabbers.hasOwnProperty(r)||!a.contextGrabbers[r].hasOwnProperty(t))return;popContext(e)}}function baseState(e,t,r){return"openTag"==e?(r.tagStart=t.column(),tagNameState):"closeTag"==e?closeTagNameState:baseState}function tagNameState(e,t,r){return"word"==e?(r.tagName=t.current(),u="tag",attrState):(u="error",tagNameState)}function closeTagNameState(e,t,r){if("word"==e){var n=t.current();return r.context&&r.context.tagName!=n&&a.implicitlyClosed.hasOwnProperty(r.context.tagName)&&popContext(r),r.context&&r.context.tagName==n||a.matchClosing===!1?(u="tag",closeState):(u="tag error",closeStateErr)}return u="error",closeStateErr}function closeState(e,t,r){return"endTag"!=e?(u="error",closeState):(popContext(r),baseState)}function closeStateErr(e,t,r){return u="error",closeState(e,t,r)}function attrState(e,t,r){if("word"==e)return u="attribute",attrEqState;if("endTag"==e||"selfcloseTag"==e){var n=r.tagName,i=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==e||a.autoSelfClosers.hasOwnProperty(n)?maybePopContext(r,n):(maybePopContext(r,n),r.context=new Context(r,n,i==r.indented)),baseState}return u="error",attrState}function attrEqState(e,t,r){return"equals"==e?attrValueState:(a.allowMissing||(u="error"),attrState(e,t,r))}function attrValueState(e,t,r){return"string"==e?attrContinuedState:"word"==e&&a.allowUnquoted?(u="string",attrState):(u="error",attrState(e,t,r))}function attrContinuedState(e,t,r){return"string"==e?attrContinuedState:attrState(e,t,r)}var o=n.indentUnit,a={},s=i.htmlMode?t:r;for(var l in s)a[l]=s[l];for(var l in i)a[l]=i[l];var c,u;return inText.isInText=!0,{startState:function(e){var t={tokenize:inText,state:baseState,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;c=null;var r=t.tokenize(e,t);return(r||c)&&"comment"!=r&&(u=null,t.state=t.state(c||r,e,t),u&&(r="error"==u?r+" error":u)),r},indent:function(t,r,n){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+o;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=inTag&&t.tokenize!=inText)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return a.multilineTagIndentPastTag!==!1?t.tagStart+t.tagName.length+2:t.tagStart+o*(a.multilineTagIndentFactor||1);if(a.alignCDATA&&/<!\[CDATA\[/.test(r))return 0;var s=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(s&&s[1])for(;i;){if(i.tagName==s[2]){i=i.prev;break}if(!a.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(s)for(;i;){var l=a.contextGrabbers[i.tagName];if(!l||!l.hasOwnProperty(s[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+o:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:a.htmlMode?"html":"xml",helperType:a.htmlMode?"html":"xml",skipAttribute:function(e){e.state==attrValueState&&(e.state=attrState)}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";function expressionAllowed(e,t,r){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}e.defineMode("javascript",function(t,r){function readRegexp(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}function ret(e,t,r){return n=e,i=r,t}function tokenBase(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=tokenString(r),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return ret("number","number");if("."==r&&e.match(".."))return ret("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return ret(r);if("="==r&&e.eat(">"))return ret("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),ret("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),ret("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),ret("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),ret("number","number");if("/"==r)return e.eat("*")?(t.tokenize=tokenComment,tokenComment(e,t)):e.eat("/")?(e.skipToEnd(),ret("comment","comment")):expressionAllowed(e,t,1)?(readRegexp(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),ret("regexp","string-2")):(e.eatWhile(h),ret("operator","operator",e.current()));if("`"==r)return t.tokenize=tokenQuasi,tokenQuasi(e,t);if("#"==r)return e.skipToEnd(),ret("error","error");if(h.test(r))return e.eatWhile(h),ret("operator","operator",e.current());if(u.test(r)){e.eatWhile(u);var n=e.current(),i=p.propertyIsEnumerable(n)&&p[n];return i&&"."!=t.lastType?ret(i.type,i.style,n):ret("variable","variable",n)}}function tokenString(e){return function(t,r){var n,i=!1;if(s&&"@"==t.peek()&&t.match(d))return r.tokenize=tokenBase,ret("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||i);)i=!i&&"\\"==n;return i||(r.tokenize=tokenBase),ret("string","string")}}function tokenComment(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=tokenBase;break}n="*"==r}return ret("comment","comment")}function tokenQuasi(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=tokenBase;break}n=!n&&"\\"==r}return ret("quasi","string-2",e.current())}function findFatArrow(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){for(var n=0,i=!1,o=r-1;o>=0;--o){var a=e.string.charAt(o),s=f.indexOf(a);if(s>=0&&s<3){if(!n){++o;break}if(0==--n){"("==a&&(i=!0);break}}else if(s>=3&&s<6)++n;else if(u.test(a))i=!0;else{if(/["'\/]/.test(a))return;if(i&&!n){++o;break}}}i&&!n&&(t.fatArrowAt=o)}}function JSLexical(e,t,r,n,i,o){this.indented=e,this.column=t,this.type=r,this.prev=i,this.info=o,null!=n&&(this.align=n)}function inScope(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(var r=n.vars;r;r=r.next)if(r.name==t)return!0}function parseJS(e,t,r,n,i){var o=e.cc;for(g.state=e,g.stream=i,g.marked=null,g.cc=o,g.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=o.length?o.pop():l?expression:statement;if(a(r,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return g.marked?g.marked:"variable"==r&&inScope(e,n)?"variable-2":t}}}function pass(){for(var e=arguments.length-1;e>=0;e--)g.cc.push(arguments[e])}function cont(){return pass.apply(null,arguments),!0}function register(e){function inList(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var t=g.state;if(g.marked="def",t.context){if(inList(t.localVars))return;t.localVars={name:e,next:t.localVars}}else{if(inList(t.globalVars))return;r.globalVars&&(t.globalVars={name:e,next:t.globalVars})}}function pushcontext(){g.state.context={prev:g.state.context,vars:g.state.localVars},g.state.localVars=y}function popcontext(){g.state.localVars=g.state.context.vars,g.state.context=g.state.context.prev}function pushlex(e,t){var r=function(){var r=g.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var i=r.lexical;i&&")"==i.type&&i.align;i=i.prev)n=i.indented;r.lexical=new JSLexical(n,g.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function poplex(){var e=g.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function expect(e){function exp(t){return t==e?cont():";"==e?pass():cont(exp)}return exp}function statement(e,t){return"var"==e?cont(pushlex("vardef",t.length),vardef,expect(";"),poplex):"keyword a"==e?cont(pushlex("form"),parenExpr,statement,poplex):"keyword b"==e?cont(pushlex("form"),statement,poplex):"{"==e?cont(pushlex("}"),block,poplex):";"==e?cont():"if"==e?("else"==g.state.lexical.info&&g.state.cc[g.state.cc.length-1]==poplex&&g.state.cc.pop()(),cont(pushlex("form"),parenExpr,statement,poplex,maybeelse)):"function"==e?cont(functiondef):"for"==e?cont(pushlex("form"),forspec,statement,poplex):"variable"==e?cont(pushlex("stat"),maybelabel):"switch"==e?cont(pushlex("form"),parenExpr,pushlex("}","switch"),expect("{"),block,poplex,poplex):"case"==e?cont(expression,expect(":")):"default"==e?cont(expect(":")):"catch"==e?cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext):"class"==e?cont(pushlex("form"),className,poplex):"export"==e?cont(pushlex("stat"),afterExport,poplex):"import"==e?cont(pushlex("stat"),afterImport,poplex):"module"==e?cont(pushlex("form"),pattern,pushlex("}"),expect("{"),block,poplex,poplex):"type"==e?cont(typeexpr,expect("operator"),typeexpr,expect(";")):"async"==e?cont(statement):pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(e){return expressionInner(e,!1)}function expressionNoComma(e){return expressionInner(e,!0)}function parenExpr(e){return"("!=e?pass():cont(pushlex(")"),expression,expect(")"),poplex)}function expressionInner(e,t){if(g.state.fatArrowAt==g.stream.start){var r=t?arrowBodyNoComma:arrowBody;if("("==e)return cont(pushcontext,pushlex(")"),commasep(pattern,")"),poplex,expect("=>"),r,popcontext);if("variable"==e)return pass(pushcontext,pattern,expect("=>"),r,popcontext)}var n=t?maybeoperatorNoComma:maybeoperatorComma;return m.hasOwnProperty(e)?cont(n):"function"==e?cont(functiondef,n):"keyword c"==e||"async"==e?cont(t?maybeexpressionNoComma:maybeexpression):"("==e?cont(pushlex(")"),maybeexpression,expect(")"),poplex,n):"operator"==e||"spread"==e?cont(t?expressionNoComma:expression):"["==e?cont(pushlex("]"),arrayLiteral,poplex,n):"{"==e?contCommasep(objprop,"}",null,n):"quasi"==e?pass(quasi,n):"new"==e?cont(maybeTarget(t)):cont()}function maybeexpression(e){return e.match(/[;\}\)\],]/)?pass():pass(expression)}function maybeexpressionNoComma(e){return e.match(/[;\}\)\],]/)?pass():pass(expressionNoComma)}function maybeoperatorComma(e,t){return","==e?cont(expression):maybeoperatorNoComma(e,t,!1)}function maybeoperatorNoComma(e,t,r){var n=0==r?maybeoperatorComma:maybeoperatorNoComma,i=0==r?expression:expressionNoComma;return"=>"==e?cont(pushcontext,r?arrowBodyNoComma:arrowBody,popcontext):"operator"==e?/\+\+|--/.test(t)?cont(n):"?"==t?cont(expression,expect(":"),i):cont(i):"quasi"==e?pass(quasi,n):";"!=e?"("==e?contCommasep(expressionNoComma,")","call",n):"."==e?cont(property,n):"["==e?cont(pushlex("]"),maybeexpression,expect("]"),poplex,n):void 0:void 0;
}function quasi(e,t){return"quasi"!=e?pass():"${"!=t.slice(t.length-2)?cont(quasi):cont(expression,continueQuasi)}function continueQuasi(e){if("}"==e)return g.marked="string-2",g.state.tokenize=tokenQuasi,cont(quasi)}function arrowBody(e){return findFatArrow(g.stream,g.state),pass("{"==e?statement:expression)}function arrowBodyNoComma(e){return findFatArrow(g.stream,g.state),pass("{"==e?statement:expressionNoComma)}function maybeTarget(e){return function(t){return"."==t?cont(e?targetNoComma:target):pass(e?expressionNoComma:expression)}}function target(e,t){if("target"==t)return g.marked="keyword",cont(maybeoperatorComma)}function targetNoComma(e,t){if("target"==t)return g.marked="keyword",cont(maybeoperatorNoComma)}function maybelabel(e){return":"==e?cont(poplex,statement):pass(maybeoperatorComma,expect(";"),poplex)}function property(e){if("variable"==e)return g.marked="property",cont()}function objprop(e,t){return"async"==e?(g.marked="property",cont(objprop)):"variable"==e||"keyword"==g.style?(g.marked="property",cont("get"==t||"set"==t?getterSetter:afterprop)):"number"==e||"string"==e?(g.marked=s?"property":g.style+" property",cont(afterprop)):"jsonld-keyword"==e?cont(afterprop):"modifier"==e?cont(objprop):"["==e?cont(expression,expect("]"),afterprop):"spread"==e?cont(expression):":"==e?pass(afterprop):void 0}function getterSetter(e){return"variable"!=e?pass(afterprop):(g.marked="property",cont(functiondef))}function afterprop(e){return":"==e?cont(expressionNoComma):"("==e?pass(functiondef):void 0}function commasep(e,t){function proceed(r,n){if(","==r){var i=g.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),cont(function(r,n){return r==t||n==t?pass():pass(e)},proceed)}return r==t||n==t?cont():cont(expect(t))}return function(r,n){return r==t||n==t?cont():pass(e,proceed)}}function contCommasep(e,t,r){for(var n=3;n<arguments.length;n++)g.cc.push(arguments[n]);return cont(pushlex(t,r),commasep(e,t),poplex)}function block(e){return"}"==e?cont():pass(statement,block)}function maybetype(e,t){if(c){if(":"==e)return cont(typeexpr);if("?"==t)return cont(maybetype)}}function maybedefault(e,t){if("="==t)return cont(expressionNoComma)}function typeexpr(e){return"variable"==e?(g.marked="variable-3",cont(afterType)):"{"==e?cont(commasep(typeprop,"}")):"("==e?cont(commasep(typearg,")"),maybeReturnType):void 0}function maybeReturnType(e){if("=>"==e)return cont(typeexpr)}function typeprop(e){return"variable"==e||"keyword"==g.style?(g.marked="property",cont(typeprop)):":"==e?cont(typeexpr):void 0}function typearg(e){return"variable"==e?cont(typearg):":"==e?cont(typeexpr):void 0}function afterType(e,t){return"<"==t?cont(commasep(typeexpr,">"),afterType):"["==e?cont(expect("]"),afterType):void 0}function vardef(){return pass(pattern,maybetype,maybeAssign,vardefCont)}function pattern(e,t){return"modifier"==e?cont(pattern):"variable"==e?(register(t),cont()):"spread"==e?cont(pattern):"["==e?contCommasep(pattern,"]"):"{"==e?contCommasep(proppattern,"}"):void 0}function proppattern(e,t){return"variable"!=e||g.stream.match(/^\s*:/,!1)?("variable"==e&&(g.marked="property"),"spread"==e?cont(pattern):"}"==e?pass():cont(expect(":"),pattern,maybeAssign)):(register(t),cont(maybeAssign))}function maybeAssign(e,t){if("="==t)return cont(expressionNoComma)}function vardefCont(e){if(","==e)return cont(vardef)}function maybeelse(e,t){if("keyword b"==e&&"else"==t)return cont(pushlex("form","else"),statement,poplex)}function forspec(e){if("("==e)return cont(pushlex(")"),forspec1,expect(")"),poplex)}function forspec1(e){return"var"==e?cont(vardef,expect(";"),forspec2):";"==e?cont(forspec2):"variable"==e?cont(formaybeinof):pass(expression,expect(";"),forspec2)}function formaybeinof(e,t){return"in"==t||"of"==t?(g.marked="keyword",cont(expression)):cont(maybeoperatorComma,forspec2)}function forspec2(e,t){return";"==e?cont(forspec3):"in"==t||"of"==t?(g.marked="keyword",cont(expression)):pass(expression,expect(";"),forspec3)}function forspec3(e){")"!=e&&cont(expression)}function functiondef(e,t){return"*"==t?(g.marked="keyword",cont(functiondef)):"variable"==e?(register(t),cont(functiondef)):"("==e?cont(pushcontext,pushlex(")"),commasep(funarg,")"),poplex,maybetype,statement,popcontext):void 0}function funarg(e){return"spread"==e?cont(funarg):pass(pattern,maybetype,maybedefault)}function className(e,t){if("variable"==e)return register(t),cont(classNameAfter)}function classNameAfter(e,t){return"extends"==t?cont(c?typeexpr:expression,classNameAfter):"{"==e?cont(pushlex("}"),classBody,poplex):void 0}function classBody(e,t){return"variable"==e||"keyword"==g.style?("static"==t||"get"==t||"set"==t||c&&("public"==t||"private"==t||"protected"==t))&&g.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(g.marked="keyword",cont(classBody)):(g.marked="property",cont(c?classfield:functiondef,classBody)):"*"==t?(g.marked="keyword",cont(classBody)):";"==e?cont(classBody):"}"==e?cont():void 0}function classfield(e){return":"==e?cont(typeexpr):pass(functiondef)}function afterExport(e,t){return"*"==t?(g.marked="keyword",cont(maybeFrom,expect(";"))):"default"==t?(g.marked="keyword",cont(expression,expect(";"))):pass(statement)}function afterImport(e){return"string"==e?cont():pass(importSpec,maybeFrom)}function importSpec(e,t){return"{"==e?contCommasep(importSpec,"}"):("variable"==e&&register(t),"*"==t&&(g.marked="keyword"),cont(maybeAs))}function maybeAs(e,t){if("as"==t)return g.marked="keyword",cont(importSpec)}function maybeFrom(e,t){if("from"==t)return g.marked="keyword",cont(expression)}function arrayLiteral(e){return"]"==e?cont():pass(commasep(expressionNoComma,"]"))}function isContinuedStatement(e,t){return"operator"==e.lastType||","==e.lastType||h.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var n,i,o=t.indentUnit,a=r.statementIndent,s=r.jsonld,l=r.json||s,c=r.typescript,u=r.wordCharacters||/[\w$\xa1-\uffff]/,p=function(){function kw(e){return{type:e,style:"keyword"}}var e=kw("keyword a"),t=kw("keyword b"),r=kw("keyword c"),n=kw("operator"),i={type:"atom",style:"atom"},o={"if":kw("if"),"while":e,"with":e,"else":t,"do":t,"try":t,"finally":t,"return":r,"break":r,"continue":r,"new":kw("new"),"delete":r,"throw":r,"debugger":r,"var":kw("var"),"const":kw("var"),"let":kw("var"),"function":kw("function"),"catch":kw("catch"),"for":kw("for"),"switch":kw("switch"),"case":kw("case"),"default":kw("default"),"in":n,"typeof":n,"instanceof":n,"true":i,"false":i,"null":i,undefined:i,NaN:i,Infinity:i,"this":kw("this"),"class":kw("class"),"super":kw("atom"),"yield":r,"export":kw("export"),"import":kw("import"),"extends":r,await:r,async:kw("async")};if(c){var a={type:"variable",style:"variable-3"},s={"interface":kw("class"),"implements":r,namespace:r,module:kw("module"),"enum":kw("module"),type:kw("type"),"public":kw("modifier"),"private":kw("modifier"),"protected":kw("modifier"),"abstract":kw("modifier"),as:n,string:a,number:a,"boolean":a,any:a};for(var l in s)o[l]=s[l]}return o}(),h=/[+\-*&%=<>!?|~^]/,d=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,f="([{}])",m={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},g={state:null,column:null,marked:null,cc:null},y={name:"this",next:{name:"arguments"}};return poplex.lex=!0,{startState:function(e){var t={tokenize:tokenBase,lastType:"sof",cc:[],lexical:new JSLexical((e||0)-o,0,"block",(!1)),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),findFatArrow(e,t)),t.tokenize!=tokenComment&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=i&&"--"!=i?n:"incdec",parseJS(t,r,n,i,e))},indent:function(t,n){if(t.tokenize==tokenComment)return e.Pass;if(t.tokenize!=tokenBase)return 0;var i,s=n&&n.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(n))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==poplex)l=l.prev;else if(u!=maybeelse)break}for(;("stat"==l.type||"form"==l.type)&&("}"==s||(i=t.cc[t.cc.length-1])&&(i==maybeoperatorComma||i==maybeoperatorNoComma)&&!/^[,\.=+\-*:?[\(]/.test(n));)l=l.prev;a&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var p=l.type,h=s==p;return"vardef"==p?l.indented+("operator"==t.lastType||","==t.lastType?l.info+1:0):"form"==p&&"{"==s?l.indented:"form"==p?l.indented+o:"stat"==p?l.indented+(isContinuedStatement(t,n)?a||o:0):"switch"!=l.info||h||0==r.doubleIndentSwitch?l.align?l.column+(h?0:1):l.indented+(h?0:o):l.indented+(/^(?:case|default)\b/.test(n)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:s,jsonMode:l,expressionAllowed:expressionAllowed,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=expression&&t!=expressionNoComma||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},function(e,t,r){!function(e){e(r(234),r(252),r(253))}(function(e){"use strict";function Context(e,t,r,n){this.state=e,this.mode=t,this.depth=r,this.prev=n}function copyContext(t){return new Context(e.copyState(t.mode,t.state),t.mode,t.depth,t.prev&&copyContext(t.prev))}e.defineMode("jsx",function(t,r){function flatXMLIndent(e){var t=e.tagName;e.tagName=null;var r=n.indent(e,"");return e.tagName=t,r}function token(e,t){return t.context.mode==n?xmlToken(e,t,t.context):jsToken(e,t,t.context)}function xmlToken(r,o,a){if(2==a.depth)return r.match(/^.*?\*\//)?a.depth=1:r.skipToEnd(),"comment";if("{"==r.peek()){n.skipAttribute(a.state);var s=flatXMLIndent(a.state),l=a.state.context;if(l&&r.match(/^[^>]*>\s*$/,!1)){for(;l.prev&&!l.startOfLine;)l=l.prev;l.startOfLine?s-=t.indentUnit:a.prev.state.lexical&&(s=a.prev.state.lexical.indented)}else 1==a.depth&&(s+=t.indentUnit);return o.context=new Context(e.startState(i,s),i,0,o.context),null}if(1==a.depth){if("<"==r.peek())return n.skipAttribute(a.state),o.context=new Context(e.startState(n,flatXMLIndent(a.state)),n,0,o.context),null;if(r.match("//"))return r.skipToEnd(),"comment";if(r.match("/*"))return a.depth=2,token(r,o)}var c,u=n.token(r,a.state),p=r.current();return/\btag\b/.test(u)?/>$/.test(p)?a.state.context?a.depth=0:o.context=o.context.prev:/^</.test(p)&&(a.depth=1):!u&&(c=p.indexOf("{"))>-1&&r.backUp(p.length-c),u}function jsToken(t,r,o){if("<"==t.peek()&&i.expressionAllowed(t,o.state))return i.skipExpression(o.state),r.context=new Context(e.startState(n,i.indent(o.state,"")),n,0,r.context),null;var a=i.token(t,o.state);if(!a&&null!=o.depth){var s=t.current();"{"==s?o.depth++:"}"==s&&0==--o.depth&&(r.context=r.context.prev)}return a}var n=e.getMode(t,{name:"xml",allowMissing:!0,multilineTagIndentPastTag:!1}),i=e.getMode(t,r&&r.base||"javascript");return{startState:function(){return{context:new Context(e.startState(i),i)}},copyState:function(e){return{context:copyContext(e.context)}},token:token,indent:function(e,t,r){return e.context.mode.indent(e.context.state,t,r)},innerMode:function(e){return e.context}}},"xml","javascript"),e.defineMIME("text/jsx","jsx"),e.defineMIME("text/typescript-jsx",{name:"jsx",base:{name:"javascript",typescript:!0}})})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("julia",function(e,t){function wordRegexp(e,t){return"undefined"==typeof t&&(t="\\b"),new RegExp("^(("+e.join(")|(")+"))"+t)}function inArray(e){var t=currentScope(e);return"["==t}function currentScope(e){return 0==e.scopes.length?null:e.scopes[e.scopes.length-1]}function tokenBase(e,t){if(e.match(/^#=/,!1))return t.tokenize=tokenComment,t.tokenize(e,t);var n=t.leavingExpr;if(e.sol()&&(n=!1),t.leavingExpr=!1,n&&e.match(/^'+/))return"operator";if(e.match(/^\.{2,3}/))return"operator";if(e.eatSpace())return null;var i=e.peek();if("#"===i)return e.skipToEnd(),"comment";"["===i&&t.scopes.push("["),"("===i&&t.scopes.push("(");var o=currentScope(t);"["==o&&"]"===i&&(t.scopes.pop(),t.leavingExpr=!0),"("==o&&")"===i&&(t.scopes.pop(),t.leavingExpr=!0);var a;if(!inArray(t)&&(a=e.match(b,!1))&&t.scopes.push(a),!inArray(t)&&e.match(_,!1)&&t.scopes.pop(),inArray(t)){if("end"==t.lastToken&&e.match(/^:/))return"operator";if(e.match(/^end/))return"number"}if(e.match(/^=>/))return"operator";if(e.match(/^[0-9\.]/,!1)){var u=RegExp(/^im\b/),p=!1;if(e.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)&&(p=!0),e.match(/^\d+\.(?!\.)\d*/)&&(p=!0),e.match(/^\.\d+/)&&(p=!0),e.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)&&(p=!0),e.match(/^0x[0-9a-f]+/i)&&(p=!0),e.match(/^0b[01]+/i)&&(p=!0),e.match(/^0o[0-7]+/i)&&(p=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(p=!0),e.match(/^0(?![\dx])/i)&&(p=!0),p)return e.match(u),t.leavingExpr=!0,"number"}if(e.match(/^<:/))return"operator";if(e.match(S))return"builtin";if(!n&&e.match(x)||e.match(/:\./))return"builtin";if(e.match(/^{[^}]*}(?=\()/))return"builtin";if(e.match(s))return"operator";if(e.match(/^'/))return t.tokenize=tokenChar,t.tokenize(e,t);if(e.match(m))return t.tokenize=tokenStringFactory(e.current()),t.tokenize(e,t);if(e.match(w))return"meta";if(e.match(l))return null;if(e.match(y))return"keyword";if(e.match(v))return"builtin";var h=t.isDefinition||"function"==t.lastToken||"macro"==t.lastToken||"type"==t.lastToken||"immutable"==t.lastToken;return e.match(c)?h?"."===e.peek()?(t.isDefinition=!0,"variable"):(t.isDefinition=!1,"def"):e.match(/^({[^}]*})*\(/,!1)?callOrDef(e,t):(t.leavingExpr=!0,"variable"):(e.next(),r)}function callOrDef(e,t){var r=e.match(/^(\(\s*)/);if(r&&(t.firstParenPos<0&&(t.firstParenPos=t.scopes.length),t.scopes.push("("),t.charsAdvanced+=r[1].length),"("==currentScope(t)&&e.match(/^\)/)&&(t.scopes.pop(),t.charsAdvanced+=1,t.scopes.length<=t.firstParenPos)){var n=e.match(/^\s*?=(?!=)/,!1);return e.backUp(t.charsAdvanced),t.firstParenPos=-1,t.charsAdvanced=0,n?"def":"builtin"}if(e.match(/^$/g,!1)){for(e.backUp(t.charsAdvanced);t.scopes.length>t.firstParenPos;)t.scopes.pop();return t.firstParenPos=-1,t.charsAdvanced=0,"builtin"}return t.charsAdvanced+=e.match(/^([^()]*)/)[1].length,callOrDef(e,t)}function tokenComment(e,t){return e.match(/^#=/)&&t.weakScopes++,e.match(/.*?(?=(#=|=#))/)||e.skipToEnd(),e.match(/^=#/)&&(t.weakScopes--,0==t.weakScopes&&(t.tokenize=tokenBase)),"comment"}function tokenChar(e,t){var n,i=!1;if(e.match(g))i=!0;else if(n=e.match(/\\u([a-f0-9]{1,4})(?=')/i)){var o=parseInt(n[1],16);(o<=55295||o>=57344)&&(i=!0,e.next())}else if(n=e.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var o=parseInt(n[1],16);o<=1114111&&(i=!0,e.next())}return i?(t.leavingExpr=!0,t.tokenize=tokenBase,"string"):(e.match(/^[^']+(?=')/)||e.skipToEnd(),e.match(/^'/)&&(t.tokenize=tokenBase),r)}function tokenStringFactory(e){function tokenString(r,n){for(;!r.eol();)if(r.eatWhile(/[^"\\]/),r.eat("\\"))r.next();else{if(r.match(e))return n.tokenize=tokenBase,n.leavingExpr=!0,t;r.eat(/["]/)}return t}for(;"bruv".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var t="string";return tokenString.isString=!0,tokenString}var r="error",n="\\\\[0-7]{1,3}",i="\\\\x[A-Fa-f0-9]{1,2}",o="\\\\[abfnrtv0%?'\"\\\\]",a="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])",s=t.operators||/^\.?[|&^\\%*+\-<>!=\/]=?|\?|~|:|\$|\.[<>]|<<=?|>>>?=?|\.[<>=]=|->?|\/\/|\bin\b(?!\()|[\u2208\u2209](?!\()/,l=t.delimiters||/^[;,()[\]{}]/,c=t.identifiers||/^[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,u=[n,i,o,a],p=["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"],h=["end","else","elseif","catch","finally"],d=["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype"],f=["true","false","nothing","NaN","Inf"],m=/^(`|"{3}|([brv]?"))/,g=wordRegexp(u,"'"),y=wordRegexp(d),v=wordRegexp(f),b=wordRegexp(p),_=wordRegexp(h),w=/^@[_A-Za-z][\w]*/,x=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,S=/^::[^,;"{()=$\s]+({[^}]*}+)*/,C={startState:function(){return{tokenize:tokenBase,scopes:[],weakScopes:0,lastToken:null,leavingExpr:!1,isDefinition:!1,charsAdvanced:0,firstParenPos:-1}},token:function(e,t){var n=t.tokenize(e,t),i=e.current();return i&&n&&(t.lastToken=i),"."===i&&(n=e.match(c,!1)||e.match(w,!1)||e.match(/\(/,!1)?"operator":r),n},indent:function(t,r){var n=0;return"]"!=r&&")"!=r&&"end"!=r&&"else"!=r&&"elseif"!=r&&"catch"!=r&&"finally"!=r||(n=-1),(t.scopes.length+n)*e.indentUnit},electricInput:/(end|else(if)?|catch|finally)$/,lineComment:"#",fold:"indent"};return C}),e.defineMIME("text/x-julia","julia")})},function(e,t,r){!function(e){e(r(234),r(252),r(257))}(function(e){"use strict";e.defineMode("markdown",function(t,r){function getMode(r){if(e.findModeByName){var n=e.findModeByName(r);n&&(r=n.mime||n.mimes[0])}var i=e.getMode(t,r);return"null"==i.name?null:i}function switchInline(e,t,r){return t.f=t.inline=r,r(e,t)}function switchBlock(e,t,r){return t.f=t.block=r,r(e,t)}function lineIsEmpty(e){return!e||!/\S/.test(e.string)}function blankLine(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,i&&e.f==htmlBlock&&(e.f=inlineNormal,e.block=blockNormal),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine=null,null}function blockNormal(t,n){var i=t.sol(),a=n.list!==!1,d=n.indentedCode;n.indentedCode=!1,a&&(n.indentationDiff>=0?(n.indentationDiff<4&&(n.indentation-=n.indentationDiff),n.list=null):n.indentation>0?n.list=null:n.list=!1);var m=null;if(n.indentationDiff>=4)return t.skipToEnd(),d||lineIsEmpty(n.prevLine)?(n.indentation-=4,n.indentedCode=!0,o.code):null;if(t.eatSpace())return null;if((m=t.match(p))&&m[1].length<=6)return n.header=m[1].length,r.highlightFormatting&&(n.formatting="header"),n.f=n.inline,getType(n);if(!(lineIsEmpty(n.prevLine)||n.quote||a||d)&&(m=t.match(h)))return n.header="="==m[0].charAt(0)?1:2,r.highlightFormatting&&(n.formatting="header"),n.f=n.inline,getType(n);if(t.eat(">"))return n.quote=i?1:n.quote+1,r.highlightFormatting&&(n.formatting="quote"),t.eatSpace(),getType(n);if("["===t.peek())return switchInline(t,n,footnoteLink);if(t.match(s,!0))return n.hr=!0,o.hr;if((lineIsEmpty(n.prevLine)||a)&&(t.match(l,!1)||t.match(c,!1))){var g=null;for(t.match(l,!0)?g="ul":(t.match(c,!0),g="ol"),n.indentation=t.column()+t.current().length,n.list=!0;n.listStack&&t.column()<n.listStack[n.listStack.length-1];)n.listStack.pop();return n.listStack.push(n.indentation),r.taskLists&&t.match(u,!1)&&(n.taskList=!0),n.f=n.inline,r.highlightFormatting&&(n.formatting=["list","list-"+g]),getType(n)}return r.fencedCodeBlocks&&(m=t.match(f,!0))?(n.fencedChars=m[1],n.localMode=getMode(m[2]),n.localMode&&(n.localState=e.startState(n.localMode)),n.f=n.block=local,r.highlightFormatting&&(n.formatting="code-block"),n.code=-1,getType(n)):switchInline(t,n,n.inline)}function htmlBlock(t,r){var o=n.token(t,r.htmlState);if(!i){var a=e.innerMode(n,r.htmlState);("xml"==a.mode.name&&null===a.state.tagStart&&!a.state.context&&a.state.tokenize.isInText||r.md_inside&&t.current().indexOf(">")>-1)&&(r.f=inlineNormal,r.block=blockNormal,r.htmlState=null)}return o}function local(e,t){return t.fencedChars&&e.match(t.fencedChars,!1)?(t.localMode=t.localState=null,t.f=t.block=leavingLocal,null):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),o.code)}function leavingLocal(e,t){e.match(t.fencedChars),t.block=blockNormal,t.f=inlineNormal,t.fencedChars=null,r.highlightFormatting&&(t.formatting="code-block"),t.code=1;var n=getType(t);return t.code=0,n}function getType(e){var t=[];if(e.formatting){t.push(o.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var n=0;n<e.formatting.length;n++)t.push(o.formatting+"-"+e.formatting[n]),"header"===e.formatting[n]&&t.push(o.formatting+"-"+e.formatting[n]+"-"+e.header),"quote"===e.formatting[n]&&(!r.maxBlockquoteDepth||r.maxBlockquoteDepth>=e.quote?t.push(o.formatting+"-"+e.formatting[n]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(o.linkHref,"url"):(e.strong&&t.push(o.strong),e.em&&t.push(o.em),e.strikethrough&&t.push(o.strikethrough),e.linkText&&t.push(o.linkText),e.code&&t.push(o.code),e.image&&t.push(o.image),e.imageAltText&&t.push(o.imageAltText,"link"),e.imageMarker&&t.push(o.imageMarker)),e.header&&t.push(o.header,o.header+"-"+e.header),e.quote&&(t.push(o.quote),!r.maxBlockquoteDepth||r.maxBlockquoteDepth>=e.quote?t.push(o.quote+"-"+e.quote):t.push(o.quote+"-"+r.maxBlockquoteDepth)),e.list!==!1){var i=(e.listStack.length-1)%3;i?1===i?t.push(o.list2):t.push(o.list3):t.push(o.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function handleText(e,t){if(e.match(d,!0))return getType(t)}function inlineNormal(t,i){var a=i.text(t,i);if("undefined"!=typeof a)return a;if(i.list)return i.list=null,getType(i);if(i.taskList){var s="x"!==t.match(u,!0)[1];return s?i.taskOpen=!0:i.taskClosed=!0,r.highlightFormatting&&(i.formatting="task"),i.taskList=!1,getType(i)}if(i.taskOpen=!1,i.taskClosed=!1,i.header&&t.match(/^#+$/,!0))return r.highlightFormatting&&(i.formatting="header"),getType(i);var l=t.sol(),c=t.next();if(i.linkTitle){i.linkTitle=!1;var p=c;"("===c&&(p=")"),p=(p+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var h="^\\s*(?:[^"+p+"\\\\]+|\\\\\\\\|\\\\.)"+p;if(t.match(new RegExp(h),!0))return o.linkHref}if("`"===c){var d=i.formatting;r.highlightFormatting&&(i.formatting="code"),t.eatWhile("`");var f=t.current().length;if(0==i.code)return i.code=f,getType(i);if(f==i.code){var m=getType(i);return i.code=0,m}return i.formatting=d,getType(i)}if(i.code)return getType(i);if("\\"===c&&(t.next(),r.highlightFormatting)){var g=getType(i),y=o.formatting+"-escape";return g?g+" "+y:y}if("!"===c&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return i.imageMarker=!0,i.image=!0,r.highlightFormatting&&(i.formatting="image"),getType(i);if("["===c&&i.imageMarker)return i.imageMarker=!1,i.imageAltText=!0,r.highlightFormatting&&(i.formatting="image"),getType(i);if("]"===c&&i.imageAltText){r.highlightFormatting&&(i.formatting="image");var g=getType(i);return i.imageAltText=!1,i.image=!1,i.inline=i.f=linkHref,g}if("["===c&&t.match(/[^\]]*\](\(.*\)| ?\[.*?\])/,!1)&&!i.image)return i.linkText=!0,r.highlightFormatting&&(i.formatting="link"),getType(i);if("]"===c&&i.linkText&&t.match(/\(.*?\)| ?\[.*?\]/,!1)){r.highlightFormatting&&(i.formatting="link");var g=getType(i);return i.linkText=!1,i.inline=i.f=linkHref,g}if("<"===c&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=linkInline,r.highlightFormatting&&(i.formatting="link");var g=getType(i);return g?g+=" ":g="",g+o.linkInline}if("<"===c&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=linkInline,r.highlightFormatting&&(i.formatting="link");var g=getType(i);return g?g+=" ":g="",g+o.linkEmail}if("<"===c&&t.match(/^(!--|\w)/,!1)){var v=t.string.indexOf(">",t.pos);if(v!=-1){var b=t.string.substring(t.start,v);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(b)&&(i.md_inside=!0)}return t.backUp(1),i.htmlState=e.startState(n),switchBlock(t,i,htmlBlock)}if("<"===c&&t.match(/^\/\w*?>/))return i.md_inside=!1,"tag";var _=!1;if(!r.underscoresBreakWords&&"_"===c&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var w=t.pos-2;if(w>=0){var x=t.string.charAt(w);"_"!==x&&x.match(/(\w)/,!1)&&(_=!0)}}if("*"===c||"_"===c&&!_)if(l&&" "===t.peek());else{if(i.strong===c&&t.eat(c)){r.highlightFormatting&&(i.formatting="strong");var m=getType(i);return i.strong=!1,m}if(!i.strong&&t.eat(c))return i.strong=c,r.highlightFormatting&&(i.formatting="strong"),getType(i);if(i.em===c){r.highlightFormatting&&(i.formatting="em");var m=getType(i);return i.em=!1,m}if(!i.em)return i.em=c,r.highlightFormatting&&(i.formatting="em"),getType(i)}else if(" "===c&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return getType(i);t.backUp(1)}if(r.strikethrough)if("~"===c&&t.eatWhile(c)){if(i.strikethrough){r.highlightFormatting&&(i.formatting="strikethrough");var m=getType(i);return i.strikethrough=!1,m}if(t.match(/^[^\s]/,!1))return i.strikethrough=!0,r.highlightFormatting&&(i.formatting="strikethrough"),getType(i)}else if(" "===c&&t.match(/^~~/,!0)){if(" "===t.peek())return getType(i);t.backUp(2)}return" "===c&&(t.match(/ +$/,!1)?i.trailingSpace++:i.trailingSpace&&(i.trailingSpaceNewLine=!0)),getType(i)}function linkInline(e,t){var n=e.next();if(">"===n){t.f=t.inline=inlineNormal,r.highlightFormatting&&(t.formatting="link");var i=getType(t);return i?i+=" ":i="",i+o.linkInline}return e.match(/^[^>]+/,!0),o.linkInline}function linkHref(e,t){if(e.eatSpace())return null;var n=e.next();return"("===n||"["===n?(t.f=t.inline=getLinkHrefInside("("===n?")":"]",0),r.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,getType(t)):"error"}function getLinkHrefInside(e){return function(t,n){var i=t.next();if(i===e){n.f=n.inline=inlineNormal,r.highlightFormatting&&(n.formatting="link-string");var o=getType(n);return n.linkHref=!1,o}return t.match(m[e]),n.linkHref=!0,getType(n)}}function footnoteLink(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=footnoteLinkInside,e.next(),r.highlightFormatting&&(t.formatting="link"),t.linkText=!0,getType(t)):switchInline(e,t,inlineNormal)}function footnoteLinkInside(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=footnoteUrl,r.highlightFormatting&&(t.formatting="link");var n=getType(t);return t.linkText=!1,n}return e.match(/^([^\]\\]|\\.)+/,!0),o.linkText}function footnoteUrl(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=inlineNormal,o.linkHref+" url")}var n=e.getMode(t,"text/html"),i="null"==n.name;void 0===r.highlightFormatting&&(r.highlightFormatting=!1),void 0===r.maxBlockquoteDepth&&(r.maxBlockquoteDepth=0),void 0===r.underscoresBreakWords&&(r.underscoresBreakWords=!0),void 0===r.taskLists&&(r.taskLists=!1),void 0===r.strikethrough&&(r.strikethrough=!1),void 0===r.tokenTypeOverrides&&(r.tokenTypeOverrides={});var o={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"};for(var a in o)o.hasOwnProperty(a)&&r.tokenTypeOverrides[a]&&(o[a]=r.tokenTypeOverrides[a]);var s=/^([*\-_])(?:\s*\1){2,}\s*$/,l=/^[*\-+]\s+/,c=/^[0-9]+([.)])\s+/,u=/^\[(x| )\](?=\s)/,p=r.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,h=/^ *(?:\={1,}|-{1,})\s*$/,d=/^[^#!\[\]*_\\<>` "'(~]+/,f=new RegExp("^("+(r.fencedCodeBlocks===!0?"~~~+|```+":r.fencedCodeBlocks)+")[ \\t]*([\\w+#-]*)"),m={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\\]]|\\.)*\])*?(?=\])/},g={startState:function(){return{f:blockNormal,prevLine:null,thisLine:null,block:blockNormal,htmlState:null,indentation:0,inline:inlineNormal,text:handleText,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(n,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkTitle:t.linkTitle,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,header:t.header,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedChars:t.fencedChars}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine){var r=t.header||t.hr;if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0)||r){if(blankLine(t),!r)return null;t.prevLine=null}t.prevLine=t.thisLine,t.thisLine=e,t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentationDiff=Math.min(n-t.indentation,4),t.indentation=t.indentation+t.indentationDiff,n>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==htmlBlock?{state:e.htmlState,mode:n}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:g}},blankLine:blankLine,getType:getType,fold:"markdown"};return g},"xml"),e.defineMIME("text/x-markdown","markdown")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",
ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var r=e.modeInfo[t];r.mimes&&(r.mime=r.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var r=0;r<e.modeInfo.length;r++){var n=e.modeInfo[r];if(n.mime==t)return n;if(n.mimes)for(var i=0;i<n.mimes.length;i++)if(n.mimes[i]==t)return n}},e.findModeByExtension=function(t){for(var r=0;r<e.modeInfo.length;r++){var n=e.modeInfo[r];if(n.ext)for(var i=0;i<n.ext.length;i++)if(n.ext[i]==t)return n}},e.findModeByFileName=function(t){for(var r=0;r<e.modeInfo.length;r++){var n=e.modeInfo[r];if(n.file&&n.file.test(t))return n}var i=t.lastIndexOf("."),o=i>-1&&t.substring(i+1,t.length);if(o)return e.findModeByExtension(o)},e.findModeByName=function(t){t=t.toLowerCase();for(var r=0;r<e.modeInfo.length;r++){var n=e.modeInfo[r];if(n.name.toLowerCase()==t)return n;if(n.alias)for(var i=0;i<n.alias.length;i++)if(n.alias[i].toLowerCase()==t)return n}}})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("octave",function(){function wordRegexp(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function tokenTranspose(e,t){return e.sol()||"'"!==e.peek()?(t.tokenize=tokenBase,tokenBase(e,t)):(e.next(),t.tokenize=tokenBase,"operator")}function tokenComment(e,t){return e.match(/^.*%}/)?(t.tokenize=tokenBase,"comment"):(e.skipToEnd(),"comment")}function tokenBase(c,u){if(c.eatSpace())return null;if(c.match("%{"))return u.tokenize=tokenComment,c.skipToEnd(),"comment";if(c.match(/^[%#]/))return c.skipToEnd(),"comment";if(c.match(/^[0-9\.+-]/,!1)){if(c.match(/^[+-]?0x[0-9a-fA-F]+[ij]?/))return c.tokenize=tokenBase,"number";if(c.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?[ij]?/))return"number";if(c.match(/^[+-]?\d+([EeDd][+-]?\d+)?[ij]?/))return"number"}return c.match(wordRegexp(["nan","NaN","inf","Inf"]))?"number":c.match(/^"([^"]|(""))*"/)?"string":c.match(/^'([^']|(''))*'/)?"string":c.match(l)?"keyword":c.match(s)?"builtin":c.match(a)?"variable":c.match(e)||c.match(r)?"operator":c.match(t)||c.match(n)||c.match(i)?null:c.match(o)?(u.tokenize=tokenTranspose,null):(c.next(),"error")}var e=new RegExp("^[\\+\\-\\*/&|\\^~<>!@'\\\\]"),t=new RegExp("^[\\(\\[\\{\\},:=;]"),r=new RegExp("^((==)|(~=)|(<=)|(>=)|(<<)|(>>)|(\\.[\\+\\-\\*/\\^\\\\]))"),n=new RegExp("^((!=)|(\\+=)|(\\-=)|(\\*=)|(/=)|(&=)|(\\|=)|(\\^=))"),i=new RegExp("^((>>=)|(<<=))"),o=new RegExp("^[\\]\\)]"),a=new RegExp("^[_A-Za-z¡-￿][_A-Za-z0-9¡-￿]*"),s=wordRegexp(["error","eval","function","abs","acos","atan","asin","cos","cosh","exp","log","prod","sum","log10","max","min","sign","sin","sinh","sqrt","tan","reshape","break","zeros","default","margin","round","ones","rand","syn","ceil","floor","size","clear","zeros","eye","mean","std","cov","det","eig","inv","norm","rank","trace","expm","logm","sqrtm","linspace","plot","title","xlabel","ylabel","legend","text","grid","meshgrid","mesh","num2str","fft","ifft","arrayfun","cellfun","input","fliplr","flipud","ismember"]),l=wordRegexp(["return","case","switch","else","elseif","end","endif","endfunction","if","otherwise","do","for","while","try","catch","classdef","properties","events","methods","global","persistent","endfor","endwhile","printf","sprintf","disp","until","continue","pkg"]);return{startState:function(){return{tokenize:tokenBase}},token:function(e,t){var r=t.tokenize(e,t);return"number"!==r&&"variable"!==r||(t.tokenize=tokenTranspose),r}}}),e.defineMIME("text/x-octave","octave")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";function look(e,t){return e.string.charAt(e.pos+(t||0))}function prefix(e,t){if(t){var r=e.pos-t;return e.string.substr(r>=0?r:0,t)}return e.string.substr(0,e.pos-1)}function suffix(e,t){var r=e.string.length,n=r-e.pos+1;return e.string.substr(e.pos,t&&t<r?t:n)}function eatSuffix(e,t){var r,n=e.pos+t;n<=0?e.pos=0:n>=(r=e.string.length-1)?e.pos=r:e.pos=n}e.defineMode("perl",function(){function tokenChain(e,t,r,n,i){return t.chain=null,t.style=null,t.tail=null,t.tokenize=function(e,t){for(var o,a=!1,s=0;o=e.next();){if(o===r[s]&&!a)return void 0!==r[++s]?(t.chain=r[s],t.style=n,t.tail=i):i&&e.eatWhile(i),t.tokenize=tokenPerl,n;a=!a&&"\\"==o}return n},t.tokenize(e,t)}function tokenSOMETHING(e,t,r){return t.tokenize=function(e,t){return e.string==r&&(t.tokenize=tokenPerl),e.skipToEnd(),"string"},t.tokenize(e,t)}function tokenPerl(n,i){if(n.eatSpace())return null;if(i.chain)return tokenChain(n,i,i.chain,i.style,i.tail);if(n.match(/^\-?[\d\.]/,!1)&&n.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(n.match(/^<<(?=\w)/))return n.eatWhile(/\w/),tokenSOMETHING(n,i,n.current().substr(2));if(n.sol()&&n.match(/^\=item(?!\w)/))return tokenSOMETHING(n,i,"=cut");var o=n.next();if('"'==o||"'"==o){if(prefix(n,3)=="<<"+o){var a=n.pos;n.eatWhile(/\w/);var s=n.current().substr(1);if(s&&n.eat(o))return tokenSOMETHING(n,i,s);n.pos=a}return tokenChain(n,i,[o],"string")}if("q"==o){var l=look(n,-2);if(!l||!/\w/.test(l))if(l=look(n,0),"x"==l){if(l=look(n,1),"("==l)return eatSuffix(n,2),tokenChain(n,i,[")"],t,r);if("["==l)return eatSuffix(n,2),tokenChain(n,i,["]"],t,r);if("{"==l)return eatSuffix(n,2),tokenChain(n,i,["}"],t,r);if("<"==l)return eatSuffix(n,2),tokenChain(n,i,[">"],t,r);if(/[\^'"!~\/]/.test(l))return eatSuffix(n,1),tokenChain(n,i,[n.eat(l)],t,r)}else if("q"==l){if(l=look(n,1),"("==l)return eatSuffix(n,2),tokenChain(n,i,[")"],"string");if("["==l)return eatSuffix(n,2),tokenChain(n,i,["]"],"string");if("{"==l)return eatSuffix(n,2),tokenChain(n,i,["}"],"string");if("<"==l)return eatSuffix(n,2),tokenChain(n,i,[">"],"string");if(/[\^'"!~\/]/.test(l))return eatSuffix(n,1),tokenChain(n,i,[n.eat(l)],"string")}else if("w"==l){if(l=look(n,1),"("==l)return eatSuffix(n,2),tokenChain(n,i,[")"],"bracket");if("["==l)return eatSuffix(n,2),tokenChain(n,i,["]"],"bracket");if("{"==l)return eatSuffix(n,2),tokenChain(n,i,["}"],"bracket");if("<"==l)return eatSuffix(n,2),tokenChain(n,i,[">"],"bracket");if(/[\^'"!~\/]/.test(l))return eatSuffix(n,1),tokenChain(n,i,[n.eat(l)],"bracket")}else if("r"==l){if(l=look(n,1),"("==l)return eatSuffix(n,2),tokenChain(n,i,[")"],t,r);if("["==l)return eatSuffix(n,2),tokenChain(n,i,["]"],t,r);if("{"==l)return eatSuffix(n,2),tokenChain(n,i,["}"],t,r);if("<"==l)return eatSuffix(n,2),tokenChain(n,i,[">"],t,r);if(/[\^'"!~\/]/.test(l))return eatSuffix(n,1),tokenChain(n,i,[n.eat(l)],t,r)}else if(/[\^'"!~\/(\[{<]/.test(l)){if("("==l)return eatSuffix(n,1),tokenChain(n,i,[")"],"string");if("["==l)return eatSuffix(n,1),tokenChain(n,i,["]"],"string");if("{"==l)return eatSuffix(n,1),tokenChain(n,i,["}"],"string");if("<"==l)return eatSuffix(n,1),tokenChain(n,i,[">"],"string");if(/[\^'"!~\/]/.test(l))return tokenChain(n,i,[n.eat(l)],"string")}}if("m"==o){var l=look(n,-2);if((!l||!/\w/.test(l))&&(l=n.eat(/[(\[{<\^'"!~\/]/))){if(/[\^'"!~\/]/.test(l))return tokenChain(n,i,[l],t,r);if("("==l)return tokenChain(n,i,[")"],t,r);if("["==l)return tokenChain(n,i,["]"],t,r);if("{"==l)return tokenChain(n,i,["}"],t,r);if("<"==l)return tokenChain(n,i,[">"],t,r)}}if("s"==o){var l=/[\/>\]})\w]/.test(look(n,-2));if(!l&&(l=n.eat(/[(\[{<\^'"!~\/]/)))return"["==l?tokenChain(n,i,["]","]"],t,r):"{"==l?tokenChain(n,i,["}","}"],t,r):"<"==l?tokenChain(n,i,[">",">"],t,r):"("==l?tokenChain(n,i,[")",")"],t,r):tokenChain(n,i,[l,l],t,r)}if("y"==o){var l=/[\/>\]})\w]/.test(look(n,-2));if(!l&&(l=n.eat(/[(\[{<\^'"!~\/]/)))return"["==l?tokenChain(n,i,["]","]"],t,r):"{"==l?tokenChain(n,i,["}","}"],t,r):"<"==l?tokenChain(n,i,[">",">"],t,r):"("==l?tokenChain(n,i,[")",")"],t,r):tokenChain(n,i,[l,l],t,r)}if("t"==o){var l=/[\/>\]})\w]/.test(look(n,-2));if(!l&&(l=n.eat("r"),l&&(l=n.eat(/[(\[{<\^'"!~\/]/))))return"["==l?tokenChain(n,i,["]","]"],t,r):"{"==l?tokenChain(n,i,["}","}"],t,r):"<"==l?tokenChain(n,i,[">",">"],t,r):"("==l?tokenChain(n,i,[")",")"],t,r):tokenChain(n,i,[l,l],t,r)}if("`"==o)return tokenChain(n,i,[o],"variable-2");if("/"==o)return/~\s*$/.test(prefix(n))?tokenChain(n,i,[o],t,r):"operator";if("$"==o){var a=n.pos;if(n.eatWhile(/\d/)||n.eat("{")&&n.eatWhile(/\d/)&&n.eat("}"))return"variable-2";n.pos=a}if(/[$@%]/.test(o)){var a=n.pos;if(n.eat("^")&&n.eat(/[A-Z]/)||!/[@$%&]/.test(look(n,-2))&&n.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var l=n.current();if(e[l])return"variable-2"}n.pos=a}if(/[$@%&]/.test(o)&&(n.eatWhile(/[\w$\[\]]/)||n.eat("{")&&n.eatWhile(/[\w$\[\]]/)&&n.eat("}"))){var l=n.current();return e[l]?"variable-2":"variable"}if("#"==o&&"$"!=look(n,-2))return n.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(o)){var a=n.pos;if(n.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),e[n.current()])return"operator";n.pos=a}if("_"==o&&1==n.pos){if("_END__"==suffix(n,6))return tokenChain(n,i,["\0"],"comment");if("_DATA__"==suffix(n,7))return tokenChain(n,i,["\0"],"variable-2");if("_C__"==suffix(n,7))return tokenChain(n,i,["\0"],"string")}if(/\w/.test(o)){var a=n.pos;if("{"==look(n,-2)&&("}"==look(n,0)||n.eatWhile(/\w/)&&"}"==look(n,0)))return"string";n.pos=a}if(/[A-Z]/.test(o)){var c=look(n,-2),a=n.pos;if(n.eatWhile(/[A-Z_]/),!/[\da-z]/.test(look(n,0))){var l=e[n.current()];return l?(l[1]&&(l=l[0]),":"!=c?1==l?"keyword":2==l?"def":3==l?"atom":4==l?"operator":5==l?"variable-2":"meta":"meta"):"meta"}n.pos=a}if(/[a-zA-Z_]/.test(o)){var c=look(n,-2);n.eatWhile(/\w/);var l=e[n.current()];return l?(l[1]&&(l=l[0]),":"!=c?1==l?"keyword":2==l?"def":3==l?"atom":4==l?"operator":5==l?"variable-2":"meta":"meta"):"meta"}return null}var e={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,"if":[1,1],elsif:[1,1],"else":[1,1],"while":[1,1],unless:[1,1],"for":[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,"break":1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,"continue":[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,"default":1,defined:1,"delete":1,die:1,"do":1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,"goto":1,grep:1,hex:1,"import":1,index:1,"int":1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,"new":1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,"package":1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,"return":1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},t="string-2",r=/[goseximacplud]/;return{startState:function(){return{tokenize:tokenPerl,chain:null,style:null,tail:null}},token:function(e,t){return(t.tokenize||tokenPerl)(e,t)},lineComment:"#"}}),e.registerHelper("wordChars","perl",/[\w$]/),e.defineMIME("text/x-perl","perl")})},function(e,t,r){!function(e){e(r(234),r(251),r(242))}(function(e){"use strict";function keywords(e){for(var t={},r=e.split(" "),n=0;n<r.length;++n)t[r[n]]=!0;return t}function matchSequence(e,t,r){return 0==e.length?phpString(t):function(n,i){for(var o=e[0],a=0;a<o.length;a++)if(n.match(o[a][0]))return i.tokenize=matchSequence(e.slice(1),t),o[a][1];return i.tokenize=phpString(t,r),"string"}}function phpString(e,t){return function(r,n){return phpString_(r,n,e,t)}}function phpString_(e,t,r,n){if(n!==!1&&e.match("${",!1)||e.match("{$",!1))return t.tokenize=null,"string";if(n!==!1&&e.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))return e.match("[",!1)&&(t.tokenize=matchSequence([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],r,n)),e.match(/\-\>\w/,!1)&&(t.tokenize=matchSequence([[["->",null]],[[/[\w]+/,"variable"]]],r,n)),"variable-2";for(var i=!1;!e.eol()&&(i||n===!1||!e.match("{$",!1)&&!e.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!i&&e.match(r)){t.tokenize=null,t.tokStack.pop(),t.tokStack.pop();break}i="\\"==e.next()&&!i}return"string"}var t="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",r="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",n="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";
e.registerHelper("hintWords","php",[t,r,n].join(" ").split(" ")),e.registerHelper("wordChars","php",/[\w$]/);var i={name:"clike",helperType:"php",keywords:keywords(t),blockKeywords:keywords("catch do else elseif for foreach if switch try while finally"),defKeywords:keywords("class function interface namespace trait"),atoms:keywords(r),builtin:keywords(n),multiLineStrings:!0,hooks:{$:function(e){return e.eatWhile(/[\w\$_]/),"variable-2"},"<":function(e,t){var r;if(r=e.match(/<<\s*/)){var n=e.eat(/['"]/);e.eatWhile(/[\w\.]/);var i=e.current().slice(r[0].length+(n?2:1));if(n&&e.eat(n),i)return(t.tokStack||(t.tokStack=[])).push(i,0),t.tokenize=phpString(i,"'"!=n),"string"}return!1},"#":function(e){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"},"/":function(e){if(e.eat("/")){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"}return!1},'"':function(e,t){return(t.tokStack||(t.tokStack=[])).push('"',0),t.tokenize=phpString('"'),"string"},"{":function(e,t){return t.tokStack&&t.tokStack.length&&t.tokStack[t.tokStack.length-1]++,!1},"}":function(e,t){return t.tokStack&&t.tokStack.length>0&&!--t.tokStack[t.tokStack.length-1]&&(t.tokenize=phpString(t.tokStack[t.tokStack.length-2])),!1}}};e.defineMode("php",function(t,r){function dispatch(t,r){var i=r.curMode==o;if(t.sol()&&r.pending&&'"'!=r.pending&&"'"!=r.pending&&(r.pending=null),i)return i&&null==r.php.tokenize&&t.match("?>")?(r.curMode=n,r.curState=r.html,r.php.context.prev||(r.php=null),"meta"):o.token(t,r.curState);if(t.match(/^<\?\w*/))return r.curMode=o,r.php||(r.php=e.startState(o,n.indent(r.html,""))),r.curState=r.php,"meta";if('"'==r.pending||"'"==r.pending){for(;!t.eol()&&t.next()!=r.pending;);var a="string"}else if(r.pending&&t.pos<r.pending.end){t.pos=r.pending.end;var a=r.pending.style}else var a=n.token(t,r.curState);r.pending&&(r.pending=null);var s,l=t.current(),c=l.search(/<\?/);return c!=-1&&("string"==a&&(s=l.match(/[\'\"]$/))&&!/\?>/.test(l)?r.pending=s[0]:r.pending={end:t.pos,style:a},t.backUp(l.length-c)),a}var n=e.getMode(t,"text/html"),o=e.getMode(t,i);return{startState:function(){var t=e.startState(n),i=r.startOpen?e.startState(o):null;return{html:t,php:i,curMode:r.startOpen?o:n,curState:r.startOpen?i:t,pending:null}},copyState:function(t){var r,i=t.html,a=e.copyState(n,i),s=t.php,l=s&&e.copyState(o,s);return r=t.curMode==n?a:l,{html:a,php:l,curMode:t.curMode,curState:r,pending:t.pending}},token:dispatch,indent:function(e,t){return e.curMode!=o&&/^\s*<\//.test(t)||e.curMode==o&&/^\?>/.test(t)?n.indent(e.html,t):e.curMode.indent(e.curState,t)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(e){return{state:e.curState,mode:e.curMode}}}},"htmlmixed","clike"),e.defineMIME("application/x-httpd-php","php"),e.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),e.defineMIME("text/x-php",i)})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";function wordRegexp(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function top(e){return e.scopes[e.scopes.length-1]}var t=wordRegexp(["and","or","not","is"]),r=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],n=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];e.registerHelper("hintWords","python",r.concat(n)),e.defineMode("python",function(i,o){function tokenBase(e,t){if(e.sol()&&(t.indent=e.indentation()),e.sol()&&"py"==top(t).type){var r=top(t).offset;if(e.eatSpace()){var n=e.indentation();return n>r?pushPyScope(t):n<r&&dedent(e,t)&&(t.errorToken=!0),null}var i=tokenBaseInner(e,t);return r>0&&dedent(e,t)&&(i+=" "+a),i}return tokenBaseInner(e,t)}function tokenBaseInner(e,r){if(e.eatSpace())return null;var n=e.peek();if("#"==n)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var i=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),e.match(/^\d+\.\d*/)&&(i=!0),e.match(/^\.\d+/)&&(i=!0),i)return e.eat(/J/i),"number";var o=!1;if(e.match(/^0x[0-9a-f]+/i)&&(o=!0),e.match(/^0b[01]+/i)&&(o=!0),e.match(/^0o[0-7]+/i)&&(o=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),o=!0),e.match(/^0(?![\dx])/i)&&(o=!0),o)return e.eat(/L/i),"number"}return e.match(y)?(r.tokenize=tokenStringFactory(e.current()),r.tokenize(e,r)):e.match(u)||e.match(c)?"punctuation":e.match(l)||e.match(m)?"operator":e.match(s)?"punctuation":"."==r.lastToken&&e.match(g)?"property":e.match(v)||e.match(t)?"keyword":e.match(b)?"builtin":e.match(/^(self|cls)\b/)?"variable-2":e.match(g)?"def"==r.lastToken||"class"==r.lastToken?"def":"variable":(e.next(),a)}function tokenStringFactory(e){function tokenString(n,i){for(;!n.eol();)if(n.eatWhile(/[^'"\\]/),n.eat("\\")){if(n.next(),t&&n.eol())return r}else{if(n.match(e))return i.tokenize=tokenBase,r;n.eat(/['"]/)}if(t){if(o.singleLineStringErrors)return a;i.tokenize=tokenBase}return r}for(;"rubf".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var t=1==e.length,r="string";return tokenString.isString=!0,tokenString}function pushPyScope(e){for(;"py"!=top(e).type;)e.scopes.pop();e.scopes.push({offset:top(e).offset+i.indentUnit,type:"py",align:null})}function pushBracketScope(e,t,r){var n=e.match(/^([\s\[\{\(]|#.*)*$/,!1)?null:e.column()+1;t.scopes.push({offset:t.indent+p,type:r,align:n})}function dedent(e,t){for(var r=e.indentation();t.scopes.length>1&&top(t).offset>r;){if("py"!=top(t).type)return!0;t.scopes.pop()}return top(t).offset!=r}function tokenLexer(e,t){e.sol()&&(t.beginningOfLine=!0);var r=t.tokenize(e,t),n=e.current();if(t.beginningOfLine&&"@"==n)return e.match(g,!1)?"meta":f?"operator":a;/\S/.test(n)&&(t.beginningOfLine=!1),"variable"!=r&&"builtin"!=r||"meta"!=t.lastToken||(r="meta"),"pass"!=n&&"return"!=n||(t.dedent+=1),"lambda"==n&&(t.lambda=!0),":"!=n||t.lambda||"py"!=top(t).type||pushPyScope(t);var i=1==n.length?"[({".indexOf(n):-1;if(i!=-1&&pushBracketScope(e,t,"])}".slice(i,i+1)),i="])}".indexOf(n),i!=-1){if(top(t).type!=n)return a;t.indent=t.scopes.pop().offset-p}return t.dedent>0&&e.eol()&&"py"==top(t).type&&(t.scopes.length>1&&t.scopes.pop(),t.dedent-=1),r}var a="error",s=o.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/,l=o.doubleOperators||/^([!<>]==|<>|<<|>>|\/\/|\*\*)/,c=o.doubleDelimiters||/^(\+=|\-=|\*=|%=|\/=|&=|\|=|\^=)/,u=o.tripleDelimiters||/^(\/\/=|>>=|<<=|\*\*=)/,p=o.hangingIndent||i.indentUnit,h=r,d=n;void 0!=o.extra_keywords&&(h=h.concat(o.extra_keywords)),void 0!=o.extra_builtins&&(d=d.concat(o.extra_builtins));var f=!(o.version&&Number(o.version)<3);if(f){var m=o.singleOperators||/^[\+\-\*\/%&|\^~<>!@]/,g=o.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;h=h.concat(["nonlocal","False","True","None","async","await"]),d=d.concat(["ascii","bytes","exec","print"]);var y=new RegExp("^(([rbuf]|(br))?('{3}|\"{3}|['\"]))","i")}else{var m=o.singleOperators||/^[\+\-\*\/%&|\^~<>!]/,g=o.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;h=h.concat(["exec","print"]),d=d.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var y=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var v=wordRegexp(h),b=wordRegexp(d),_={startState:function(e){return{tokenize:tokenBase,scopes:[{offset:e||0,type:"py",align:null}],indent:e||0,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var r=t.errorToken;r&&(t.errorToken=!1);var n=tokenLexer(e,t);return n&&"comment"!=n&&(t.lastToken="keyword"==n||"punctuation"==n?e.current():n),"punctuation"==n&&(n=null),e.eol()&&t.lambda&&(t.lambda=!1),r?n+" "+a:n},indent:function(t,r){if(t.tokenize!=tokenBase)return t.tokenize.isString?e.Pass:0;var n=top(t),i=n.type==r.charAt(0);return null!=n.align?n.align-(i?1:0):n.offset-(i?p:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"};return _}),e.defineMIME("text/x-python","python");var i=function(e){return e.split(" ")};e.defineMIME("text/x-cython",{name:"python",extra_keywords:i("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.registerHelper("wordChars","r",/[\w.]/),e.defineMode("r",function(e){function wordObj(e){for(var t=e.split(" "),r={},n=0;n<t.length;++n)r[t[n]]=!0;return r}function tokenBase(e,s){t=null;var l=e.next();if("#"==l)return e.skipToEnd(),"comment";if("0"==l&&e.eat("x"))return e.eatWhile(/[\da-f]/i),"number";if("."==l&&e.eat(/\d/))return e.match(/\d*(?:e[+\-]?\d+)?/),"number";if(/\d/.test(l))return e.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/),"number";if("'"==l||'"'==l)return s.tokenize=tokenString(l),"string";if("."==l&&e.match(/.[.\d]+/))return"keyword";if(/[\w\.]/.test(l)&&"_"!=l){e.eatWhile(/[\w\.]/);var c=e.current();return r.propertyIsEnumerable(c)?"atom":i.propertyIsEnumerable(c)?(o.propertyIsEnumerable(c)&&!e.match(/\s*if(\s+|$)/,!1)&&(t="block"),"keyword"):n.propertyIsEnumerable(c)?"builtin":"variable"}return"%"==l?(e.skipTo("%")&&e.next(),"variable-2"):"<"==l&&e.eat("-")?"arrow":"="==l&&s.ctx.argList?"arg-is":a.test(l)?"$"==l?"dollar":(e.eatWhile(a),"operator"):/[\(\){}\[\];]/.test(l)?(t=l,";"==l?"semi":null):null}function tokenString(e){return function(t,r){if(t.eat("\\")){var n=t.next();return"x"==n?t.match(/^[a-f0-9]{2}/i):("u"==n||"U"==n)&&t.eat("{")&&t.skipTo("}")?t.next():"u"==n?t.match(/^[a-f0-9]{4}/i):"U"==n?t.match(/^[a-f0-9]{8}/i):/[0-7]/.test(n)&&t.match(/^[0-7]{1,2}/),"string-2"}for(var i;null!=(i=t.next());){if(i==e){r.tokenize=tokenBase;break}if("\\"==i){t.backUp(1);break}}return"string"}}function push(e,t,r){e.ctx={type:t,indent:e.indent,align:null,column:r.column(),prev:e.ctx}}function pop(e){e.indent=e.ctx.indent,e.ctx=e.ctx.prev}var t,r=wordObj("NULL NA Inf NaN NA_integer_ NA_real_ NA_complex_ NA_character_"),n=wordObj("list quote bquote eval return call parse deparse"),i=wordObj("if else repeat while function for in next break"),o=wordObj("if else repeat while function for"),a=/[+\-*\/^<>=!&|~$:]/;return{startState:function(){return{tokenize:tokenBase,ctx:{type:"top",indent:-e.indentUnit,align:!1},indent:0,afterIdent:!1}},token:function(e,r){if(e.sol()&&(null==r.ctx.align&&(r.ctx.align=!1),r.indent=e.indentation()),e.eatSpace())return null;var n=r.tokenize(e,r);"comment"!=n&&null==r.ctx.align&&(r.ctx.align=!0);var i=r.ctx.type;return";"!=t&&"{"!=t&&"}"!=t||"block"!=i||pop(r),"{"==t?push(r,"}",e):"("==t?(push(r,")",e),r.afterIdent&&(r.ctx.argList=!0)):"["==t?push(r,"]",e):"block"==t?push(r,"block",e):t==i&&pop(r),r.afterIdent="variable"==n||"keyword"==n,n},indent:function(t,r){if(t.tokenize!=tokenBase)return 0;var n=r&&r.charAt(0),i=t.ctx,o=n==i.type;return"block"==i.type?i.indent+("{"==n?0:e.indentUnit):i.align?i.column+(o?0:1):i.indent+(o?0:e.indentUnit)},lineComment:"#"}}),e.defineMIME("text/x-rsrc","r")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("ruby",function(e){function wordObj(e){for(var t={},r=0,n=e.length;r<n;++r)t[e[r]]=!0;return t}function chain(e,t,r){return r.tokenize.push(e),e(t,r)}function tokenBase(e,r){if(e.sol()&&e.match("=begin")&&e.eol())return r.tokenize.push(readBlockComment),"comment";if(e.eatSpace())return null;var n,i=e.next();if("`"==i||"'"==i||'"'==i)return chain(readQuoted(i,"string",'"'==i||"`"==i),e,r);if("/"==i){var a=e.current().length;if(e.skipTo("/")){var s=e.current().length;e.backUp(e.current().length-a);for(var l=0;e.current().length<s;){var c=e.next();if("("==c?l+=1:")"==c&&(l-=1),l<0)break}if(e.backUp(e.current().length-a),0==l)return chain(readQuoted(i,"string-2",!0),e,r)}return"operator"}if("%"==i){var u="string",p=!0;e.eat("s")?u="atom":e.eat(/[WQ]/)?u="string":e.eat(/[r]/)?u="string-2":e.eat(/[wxq]/)&&(u="string",p=!1);var h=e.eat(/[^\w\s=]/);return h?(o.propertyIsEnumerable(h)&&(h=o[h]),chain(readQuoted(h,u,p,!0),e,r)):"operator"}if("#"==i)return e.skipToEnd(),"comment";if("<"==i&&(n=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return chain(readHereDoc(n[1]),e,r);if("0"==i)return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(i))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==i){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}if(":"==i)return e.eat("'")?chain(readQuoted("'","atom",!1),e,r):e.eat('"')?chain(readQuoted('"',"atom",!0),e,r):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(e.eatWhile(/[\w$\xa1-\uffff]/),e.eat(/[\?\!\=]/),"atom"):"operator";if("@"==i&&e.match(/^@?[a-zA-Z_\xa1-\uffff]/))return e.eat("@"),e.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==i)return e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(i))return e.eatWhile(/[\w\xa1-\uffff]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident";if("|"!=i||!r.varList&&"{"!=r.lastTok&&"do"!=r.lastTok){if(/[\(\)\[\]{}\\;]/.test(i))return t=i,null;if("-"==i&&e.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(i)){var d=e.eatWhile(/[=+\-\/*:\.^%<>~|]/);return"."!=i||d||(t="."),"operator"}return null}return t="|",null}function tokenBaseUntilBrace(e){return e||(e=1),function(t,r){if("}"==t.peek()){if(1==e)return r.tokenize.pop(),r.tokenize[r.tokenize.length-1](t,r);r.tokenize[r.tokenize.length-1]=tokenBaseUntilBrace(e-1)}else"{"==t.peek()&&(r.tokenize[r.tokenize.length-1]=tokenBaseUntilBrace(e+1));return tokenBase(t,r)}}function tokenBaseOnce(){var e=!1;return function(t,r){return e?(r.tokenize.pop(),r.tokenize[r.tokenize.length-1](t,r)):(e=!0,tokenBase(t,r))}}function readQuoted(e,t,r,n){return function(i,o){var a,s=!1;for("read-quoted-paused"===o.context.type&&(o.context=o.context.prev,i.eat("}"));null!=(a=i.next());){if(a==e&&(n||!s)){o.tokenize.pop();break}if(r&&"#"==a&&!s){if(i.eat("{")){"}"==e&&(o.context={prev:o.context,type:"read-quoted-paused"}),o.tokenize.push(tokenBaseUntilBrace());break}if(/[@\$]/.test(i.peek())){o.tokenize.push(tokenBaseOnce());break}}s=!s&&"\\"==a}return t}}function readHereDoc(e){return function(t,r){return t.match(e)?r.tokenize.pop():t.skipToEnd(),"string"}}function readBlockComment(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var t,r=wordObj(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),n=wordObj(["def","class","case","for","while","until","module","then","catch","loop","proc","begin"]),i=wordObj(["end","until"]),o={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[tokenBase],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,o){t=null,e.sol()&&(o.indented=e.indentation());var a,s=o.tokenize[o.tokenize.length-1](e,o),l=t;if("ident"==s){var c=e.current();s="."==o.lastTok?"property":r.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(c)?"tag":"def"==o.lastTok||"class"==o.lastTok||o.varList?"def":"variable","keyword"==s&&(l=c,n.propertyIsEnumerable(c)?a="indent":i.propertyIsEnumerable(c)?a="dedent":"if"!=c&&"unless"!=c||e.column()!=e.indentation()?"do"==c&&o.context.indented<o.indented&&(a="indent"):a="indent")}return(t||s&&"comment"!=s)&&(o.lastTok=l),"|"==t&&(o.varList=!o.varList),"indent"==a||/[\(\[\{]/.test(t)?o.context={prev:o.context,type:t||s,indented:o.indented}:("dedent"==a||/[\)\]\}]/.test(t))&&o.context.prev&&(o.context=o.context.prev),e.eol()&&(o.continuedLine="\\"==t||"operator"==s),s},indent:function(t,r){if(t.tokenize[t.tokenize.length-1]!=tokenBase)return 0;var n=r&&r.charAt(0),i=t.context,a=i.type==o[n]||"keyword"==i.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(r);return i.indented+(a?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricInput:/^\s*(?:end|rescue|\})$/,lineComment:"#"}}),e.defineMIME("text/x-ruby","ruby")})},function(e,t,r){!function(e){e(r(234),r(247))}(function(e){"use strict";e.defineSimpleMode("rust",{start:[{regex:/b?"/,token:"string",next:"string"},{regex:/b?r"/,token:"string",next:"string_raw"},{regex:/b?r#+"/,token:"string",next:"string_raw_hash"},{regex:/'(?:[^'\\]|\\(?:[nrt0'"]|x[\da-fA-F]{2}|u\{[\da-fA-F]{6}\}))'/,token:"string-2"},{regex:/b'(?:[^']|\\(?:['\\nrt0]|x[\da-fA-F]{2}))'/,token:"string-2"},{regex:/(?:(?:[0-9][0-9_]*)(?:(?:[Ee][+-]?[0-9_]+)|\.[0-9_]+(?:[Ee][+-]?[0-9_]+)?)(?:f32|f64)?)|(?:0(?:b[01_]+|(?:o[0-7_]+)|(?:x[0-9a-fA-F_]+))|(?:[0-9][0-9_]*))(?:u8|u16|u32|u64|i8|i16|i32|i64|isize|usize)?/,token:"number"},{regex:/(let(?:\s+mut)?|fn|enum|mod|struct|type)(\s+)([a-zA-Z_][a-zA-Z0-9_]*)/,token:["keyword",null,"def"]},{regex:/(?:abstract|alignof|as|box|break|continue|const|crate|do|else|enum|extern|fn|for|final|if|impl|in|loop|macro|match|mod|move|offsetof|override|priv|proc|pub|pure|ref|return|self|sizeof|static|struct|super|trait|type|typeof|unsafe|unsized|use|virtual|where|while|yield)\b/,token:"keyword"},{regex:/\b(?:Self|isize|usize|char|bool|u8|u16|u32|u64|f16|f32|f64|i8|i16|i32|i64|str|Option)\b/,token:"atom"},{regex:/\b(?:true|false|Some|None|Ok|Err)\b/,token:"builtin"},{regex:/\b(fn)(\s+)([a-zA-Z_][a-zA-Z0-9_]*)/,token:["keyword",null,"def"]},{regex:/#!?\[.*\]/,token:"meta"},{regex:/\/\/.*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+\/*=<>!]+/,token:"operator"},{regex:/[a-zA-Z_]\w*!/,token:"variable-3"},{regex:/[a-zA-Z_]\w*/,token:"variable"},{regex:/[\{\[\(]/,indent:!0},{regex:/[\}\]\)]/,dedent:!0}],string:[{regex:/"/,token:"string",next:"start"},{regex:/(?:[^\\"]|\\(?:.|$))*/,token:"string"}],string_raw:[{regex:/"/,token:"string",next:"start"},{regex:/[^"]*/,token:"string"}],string_raw_hash:[{regex:/"#+/,token:"string",next:"start"},{regex:/(?:[^"]|"(?!#))*/,token:"string"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],electricInput:/^\s*\}$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}}),e.defineMIME("text/x-rustsrc","rust")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("sass",function(e){function tokenRegexp(e){return new RegExp("^"+e.join("|"))}function urlTokens(e,t){var r=e.peek();return")"===r?(e.next(),t.tokenizer=tokenBase,"operator"):"("===r?(e.next(),e.eatSpace(),"operator"):"'"===r||'"'===r?(t.tokenizer=buildStringTokenizer(e.next()),"string"):(t.tokenizer=buildStringTokenizer(")",!1),"string")}function comment(e,t){return function(r,n){return r.sol()&&r.indentation()<=e?(n.tokenizer=tokenBase,tokenBase(r,n)):(t&&r.skipTo("*/")?(r.next(),r.next(),n.tokenizer=tokenBase):r.skipToEnd(),"comment")}}function buildStringTokenizer(e,t){function stringTokenizer(r,n){var i=r.next(),o=r.peek(),a=r.string.charAt(r.pos-2),s="\\"!==i&&o===e||i===e&&"\\"!==a;return s?(i!==e&&t&&r.next(),n.tokenizer=tokenBase,"string"):"#"===i&&"{"===o?(n.tokenizer=buildInterpolationTokenizer(stringTokenizer),r.next(),"operator"):"string"}return null==t&&(t=!0),stringTokenizer}function buildInterpolationTokenizer(e){return function(t,r){return"}"===t.peek()?(t.next(),r.tokenizer=e,"operator"):tokenBase(t,r)}}function indent(t){if(0==t.indentCount){t.indentCount++;var r=t.scopes[0].offset,n=r+e.indentUnit;t.scopes.unshift({offset:n})}}function dedent(e){1!=e.scopes.length&&e.scopes.shift()}function tokenBase(e,t){var n=e.peek();if(e.match("/*"))return t.tokenizer=comment(e.indentation(),!0),t.tokenizer(e,t);if(e.match("//"))return t.tokenizer=comment(e.indentation(),!1),t.tokenizer(e,t);if(e.match("#{"))return t.tokenizer=buildInterpolationTokenizer(tokenBase),"operator";if('"'===n||"'"===n)return e.next(),t.tokenizer=buildStringTokenizer(n),"string";if(t.cursorHalf){if("#"===n&&(e.next(),e.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/)))return e.peek()||(t.cursorHalf=0),"number";if(e.match(/^-?[0-9\.]+/))return e.peek()||(t.cursorHalf=0),"number";if(e.match(/^(px|em|in)\b/))return e.peek()||(t.cursorHalf=0),"unit";if(e.match(r))return e.peek()||(t.cursorHalf=0),"keyword";if(e.match(/^url/)&&"("===e.peek())return t.tokenizer=urlTokens,e.peek()||(t.cursorHalf=0),"atom";if("$"===n)return e.next(),e.eatWhile(/[\w-]/),e.peek()||(t.cursorHalf=0),"variable-3";if("!"===n)return e.next(),e.peek()||(t.cursorHalf=0),e.match(/^[\w]+/)?"keyword":"operator";if(e.match(i))return e.peek()||(t.cursorHalf=0),"operator";if(e.eatWhile(/[\w-]/))return e.peek()||(t.cursorHalf=0),"attribute";if(!e.peek())return t.cursorHalf=0,null}else{if("."===n){if(e.next(),e.match(/^[\w-]+/))return indent(t),"atom";if("#"===e.peek())return indent(t),"atom"}if("#"===n){if(e.next(),e.match(/^[\w-]+/))return indent(t),"atom";if("#"===e.peek())return indent(t),"atom"}if("$"===n)return e.next(),e.eatWhile(/[\w-]/),"variable-2";if(e.match(/^-?[0-9\.]+/))return"number";if(e.match(/^(px|em|in)\b/))return"unit";if(e.match(r))return"keyword";if(e.match(/^url/)&&"("===e.peek())return t.tokenizer=urlTokens,"atom";if("="===n&&e.match(/^=[\w-]+/))return indent(t),"meta";if("+"===n&&e.match(/^\+[\w-]+/))return"variable-3";if("@"===n&&e.match(/@extend/)&&(e.match(/\s*[\w]/)||dedent(t)),e.match(/^@(else if|if|media|else|for|each|while|mixin|function)/))return indent(t),"meta";if("@"===n)return e.next(),e.eatWhile(/[\w-]/),"meta";if(e.eatWhile(/[\w-]/))return e.match(/ *: *[\w-\+\$#!\("']/,!1)?"property":e.match(/ *:/,!1)?(indent(t),t.cursorHalf=1,"atom"):e.match(/ *,/,!1)?"atom":(indent(t),"atom");if(":"===n)return e.match(o)?"keyword":(e.next(),t.cursorHalf=1,"operator")}return e.match(i)?"operator":(e.next(),null)}function tokenLexer(t,r){t.sol()&&(r.indentCount=0);var n=r.tokenizer(t,r),i=t.current();if("@return"!==i&&"}"!==i||dedent(r),null!==n){for(var o=t.pos-i.length,a=o+e.indentUnit*r.indentCount,s=[],l=0;l<r.scopes.length;l++){var c=r.scopes[l];c.offset<=a&&s.push(c)}r.scopes=s}return n}var t=["true","false","null","auto"],r=new RegExp("^"+t.join("|")),n=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not",";","\\{","\\}",":"],i=tokenRegexp(n),o=/^::?[a-zA-Z_][\w\-]*/;return{startState:function(){return{tokenizer:tokenBase,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(e,t){var r=tokenLexer(e,t);return t.lastToken={style:r,content:e.current()},r},indent:function(e){return e.scopes[0].offset}}}),e.defineMIME("text/x-sass","sass")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("shell",function(){function define(t,r){for(var n=r.split(" "),i=0;i<n.length;i++)e[n[i]]=t}function tokenBase(r,n){if(r.eatSpace())return null;var i=r.sol(),o=r.next();if("\\"===o)return r.next(),null;if("'"===o||'"'===o||"`"===o)return n.tokens.unshift(tokenString(o)),tokenize(r,n);if("#"===o)return i&&r.eat("!")?(r.skipToEnd(),"meta"):(r.skipToEnd(),"comment");if("$"===o)return n.tokens.unshift(t),tokenize(r,n);if("+"===o||"="===o)return"operator";if("-"===o)return r.eat("-"),r.eatWhile(/\w/),"attribute";if(/\d/.test(o)&&(r.eatWhile(/\d/),r.eol()||!/\w/.test(r.peek())))return"number";r.eatWhile(/[\w-]/);var a=r.current();return"="===r.peek()&&/\w+/.test(a)?"def":e.hasOwnProperty(a)?e[a]:null}function tokenString(e){return function(r,n){for(var i,o=!1,a=!1;null!=(i=r.next());){if(i===e&&!a){o=!0;break}if("$"===i&&!a&&"'"!==e){a=!0,r.backUp(1),n.tokens.unshift(t);break}a=!a&&"\\"===i}return!o&&a||n.tokens.shift(),"`"===e||")"===e?"quote":"string"}}function tokenize(e,t){return(t.tokens[0]||tokenBase)(e,t)}var e={};define("atom","true false"),define("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function"),define("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");var t=function(e,t){t.tokens.length>1&&e.eat("$");var r=e.next(),n=/\w/;return"{"===r&&(n=/[^}]/),"("===r?(t.tokens[0]=tokenString(")"),tokenize(e,t)):(/\d/.test(r)||(e.eatWhile(n),e.eat("}")),t.tokens.shift(),"def")};return{startState:function(){return{tokens:[]}},token:function(e,t){return tokenize(e,t)},lineComment:"#",fold:"brace"}}),e.defineMIME("text/x-sh","shell")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("sql",function(t,r){function tokenBase(e,t){var r=e.next();if(c[r]){var p=c[r](e,t);if(p!==!1)return p}if(1==l.hexNumber&&("0"==r&&e.match(/^[xX][0-9a-fA-F]+/)||("x"==r||"X"==r)&&e.match(/^'[0-9a-fA-F]+'/)))return"number";if(1==l.binaryNumber&&(("b"==r||"B"==r)&&e.match(/^'[01]+'/)||"0"==r&&e.match(/^b[01]+/)))return"number";if(r.charCodeAt(0)>47&&r.charCodeAt(0)<58)return e.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==l.decimallessFloat&&e.eat("."),"number";if("?"==r&&(e.eatSpace()||e.eol()||e.eat(";")))return"variable-3";if("'"==r||'"'==r&&l.doubleQuote)return t.tokenize=tokenLiteral(r),t.tokenize(e,t);if((1==l.nCharCast&&("n"==r||"N"==r)||1==l.charsetCast&&"_"==r&&e.match(/[a-z][a-z0-9]*/i))&&("'"==e.peek()||'"'==e.peek()))return"keyword";if(/^[\(\),\;\[\]]/.test(r))return null;if(l.commentSlashSlash&&"/"==r&&e.eat("/"))return e.skipToEnd(),"comment";if(l.commentHash&&"#"==r||"-"==r&&e.eat("-")&&(!l.commentSpaceRequired||e.eat(" ")))return e.skipToEnd(),"comment";if("/"==r&&e.eat("*"))return t.tokenize=tokenComment,t.tokenize(e,t);if("."!=r){if(s.test(r))return e.eatWhile(s),null;if("{"==r&&(e.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||e.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";e.eatWhile(/^[_\w\d]/);var h=e.current().toLowerCase();return u.hasOwnProperty(h)&&(e.match(/^( )+'[^']*'/)||e.match(/^( )+"[^"]*"/))?"number":i.hasOwnProperty(h)?"atom":o.hasOwnProperty(h)?"builtin":a.hasOwnProperty(h)?"keyword":n.hasOwnProperty(h)?"string-2":null}return 1==l.zerolessFloat&&e.match(/^(?:\d+(?:e[+-]?\d+)?)/i)?"number":1==l.ODBCdotTable&&e.match(/^[a-zA-Z_]+/)?"variable-2":void 0}function tokenLiteral(e){return function(t,r){for(var n,i=!1;null!=(n=t.next());){if(n==e&&!i){r.tokenize=tokenBase;break}i=!i&&"\\"==n}return"string"}}function tokenComment(e,t){for(;;){if(!e.skipTo("*")){e.skipToEnd();break}if(e.next(),e.eat("/")){t.tokenize=tokenBase;break}}return"comment"}function pushContext(e,t,r){t.context={prev:t.context,indent:e.indentation(),col:e.column(),type:r}}function popContext(e){e.indent=e.context.indent,e.context=e.context.prev}var n=r.client||{},i=r.atoms||{"false":!0,"true":!0,"null":!0},o=r.builtin||{},a=r.keywords||{},s=r.operatorChars||/^[*+\-%<>!=&|~^]/,l=r.support||{},c=r.hooks||{},u=r.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:tokenBase,context:null}},token:function(e,t){if(e.sol()&&t.context&&null==t.context.align&&(t.context.align=!1),e.eatSpace())return null;var r=t.tokenize(e,t);if("comment"==r)return r;t.context&&null==t.context.align&&(t.context.align=!0);var n=e.current();return"("==n?pushContext(e,t,")"):"["==n?pushContext(e,t,"]"):t.context&&t.context.type==n&&popContext(t),r},indent:function(r,n){var i=r.context;if(!i)return e.Pass;var o=n.charAt(0)==i.type;return i.align?i.col+(o?0:1):i.indent+(o?0:t.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:l.commentSlashSlash?"//":l.commentHash?"#":null}}),function(){function hookIdentifier(e){for(var t;null!=(t=e.next());)if("`"==t&&!e.eat("`"))return"variable-2";return e.backUp(e.current().length-1),e.eatWhile(/\w/)?"variable-2":null}function hookVar(e){return e.eat("@")&&(e.match(/^session\./),e.match(/^local\./),e.match(/^global\./)),e.eat("'")?(e.match(/^.*'/),"variable-2"):e.eat('"')?(e.match(/^.*"/),"variable-2"):e.eat("`")?(e.match(/^.*`/),"variable-2"):e.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function hookClient(e){return e.eat("N")?"atom":e.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function set(e){for(var t={},r=e.split(" "),n=0;n<r.length;++n)t[r[n]]=!0;return t}var t="alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit ";e.defineMIME("text/x-sql",{name:"sql",keywords:set(t+"begin"),builtin:set("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable doubleQuote binaryNumber hexNumber")}),e.defineMIME("text/x-mssql",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(t+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare"),builtin:set("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":hookVar}}),e.defineMIME("text/x-mysql",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(t+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:set("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":hookVar,"`":hookIdentifier,"\\":hookClient}}),e.defineMIME("text/x-mariadb",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(t+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:set("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":hookVar,"`":hookIdentifier,"\\":hookClient}}),e.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:set("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),builtin:set("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:set("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:set("commentSlashSlash decimallessFloat"),hooks:{}}),e.defineMIME("text/x-plsql",{name:"sql",client:set("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:set("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:set("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:set("date time timestamp"),support:set("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")}),e.defineMIME("text/x-hive",{name:"sql",keywords:set("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),builtin:set("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date timestamp"),support:set("ODBCdotTable doubleQuote binaryNumber hexNumber")}),e.defineMIME("text/x-pgsql",{name:"sql",client:set("source"),keywords:set(t+"a abort abs absent absolute access according action ada add admin after aggregate all allocate also always analyse analyze any are array array_agg array_max_cardinality asensitive assertion assignment asymmetric at atomic attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli binary bit_length blob blocked bom both breadth c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain characteristics characters character_length character_set_catalog character_set_name character_set_schema char_length check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column columns column_name command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constraint constraints constraint_catalog constraint_name constraint_schema constructor contains content continue control conversion convert copy corr corresponding cost covar_pop covar_samp cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datetime_interval_code datetime_interval_precision day db deallocate dec declare default defaults deferrable deferred defined definer degree delimiter delimiters dense_rank depth deref derived describe descriptor deterministic diagnostics dictionary disable discard disconnect dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain dynamic dynamic_function dynamic_function_code each element else empty enable encoding encrypted end end-exec end_frame end_partition enforced enum equals escape event every except exception exclude excluding exclusive exec execute exists exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreign fortran forward found frame_row free freeze fs full function functions fusion g general generated get global go goto grant granted greatest grouping groups handler header hex hierarchy hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import including increment indent index indexes indicator inherit inherits initially inline inner inout input insensitive instance instantiable instead integrity intersect intersection invoker isnull isolation k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like_regex link listen ln load local localtime localtimestamp location locator lock locked logged lower m map mapping match matched materialized max maxvalue max_cardinality member merge message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized nothing notify notnull nowait nth_value ntile null nullable nullif nulls number object occurrences_regex octets octet_length of off offset oids old only open operator option options ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password percent percentile_cont percentile_disc percent_rank period permission placing plans pli policy portion position position_regex power precedes preceding prepare prepared preserve primary prior privileges procedural procedure program public quote range rank read reads reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns revoke right role rollback rollup routine routine_catalog routine_name routine_schema row rows row_count row_number rule savepoint scale schema schema_name scope scope_catalog scope_name scope_schema scroll search second section security selective self sensitive sequence sequences serializable server server_name session session_user setof sets share show similar simple size skip snapshot some source space specific specifictype specific_name sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset substring substring_regex succeeds sum symmetric sysid system system_time system_user t tables tablesample tablespace table_name temp template temporary then ties timezone_hour timezone_minute to token top_level_count trailing transaction transactions_committed transactions_rolled_back transaction_active transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted unique unknown unlink unlisten unlogged unnamed unnest until untyped upper uri usage user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of varbinary variadic var_pop var_samp verbose version versioning view views volatile when whenever whitespace width_bucket window within work wrapper write xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes loop repeat"),builtin:set("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")}),e.defineMIME("text/x-gql",{name:"sql",keywords:set("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:set("false true"),builtin:set("blob datetime first key __key__ string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/})}()})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";function wordSet(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}function tokenBase(e,p,h){if(e.sol()&&(p.indented=e.indentation()),e.eatSpace())return null;var d=e.peek();if("/"==d){if(e.match("//"))return e.skipToEnd(),"comment";if(e.match("/*"))return p.tokenize.push(tokenComment),tokenComment(e,p);if(e.match(u))return"string-2"}if(o.indexOf(d)>-1)return e.next(),"operator";if(a.indexOf(d)>-1)return e.next(),e.match(".."),"punctuation";if('"'==d||"'"==d){e.next();var f=tokenString(d);return p.tokenize.push(f),f(e,p)}if(e.match(s))return"number";if(e.match(c))return"property";if(e.match(l)){var m=e.current();return t.hasOwnProperty(m)?(r.hasOwnProperty(m)&&(p.prev="define"),"keyword"):i.hasOwnProperty(m)?"variable-2":n.hasOwnProperty(m)?"atom":"define"==h?"def":"variable"}return e.next(),null}function tokenUntilClosingParen(){var e=0;return function(t,r,n){var i=tokenBase(t,r,n);if("punctuation"==i)if("("==t.current())++e;else if(")"==t.current()){if(0==e)return t.backUp(1),r.tokenize.pop(),r.tokenize[r.tokenize.length-1](t,r);--e}return i}}function tokenString(e){return function(t,r){for(var n,i=!1;n=t.next();)if(i){if("("==n)return r.tokenize.push(tokenUntilClosingParen()),"string";i=!1}else{if(n==e)break;i="\\"==n}return r.tokenize.pop(),"string"}}function tokenComment(e,t){return e.match(/^(?:[^*]|\*(?!\/))*/),e.match("*/")&&t.tokenize.pop(),"comment"}function Context(e,t,r){this.prev=e,this.align=t,this.indented=r}function pushContext(e,t){var r=t.match(/^\s*($|\/[\/\*])/,!1)?null:t.column()+1;e.context=new Context(e.context,r,e.indented)}function popContext(e){e.context&&(e.indented=e.context.indented,e.context=e.context.prev)}var t=wordSet(["var","let","class","deinit","enum","extension","func","import","init","protocol","static","struct","subscript","typealias","as","dynamicType","is","new","super","self","Self","Type","__COLUMN__","__FILE__","__FUNCTION__","__LINE__","break","case","continue","default","do","else","fallthrough","if","in","for","return","switch","where","while","associativity","didSet","get","infix","inout","left","mutating","none","nonmutating","operator","override","postfix","precedence","prefix","right","set","unowned","weak","willSet"]),r=wordSet(["var","let","class","enum","extension","func","import","protocol","struct","typealias","dynamicType","for"]),n=wordSet(["Infinity","NaN","undefined","null","true","false","on","off","yes","no","nil","null","this","super"]),i=wordSet(["String","bool","int","string","double","Double","Int","Float","float","public","private","extension"]),o="+-/*%=|&<>#",a=";,.(){}[]",s=/^-?(?:(?:[\d_]+\.[_\d]*|\.[_\d]+|0o[0-7_\.]+|0b[01_\.]+)(?:e-?[\d_]+)?|0x[\d_a-f\.]+(?:p-?[\d_]+)?)/i,l=/^[_A-Za-z$][_A-Za-z$0-9]*/,c=/^[@\.][_A-Za-z$][_A-Za-z$0-9]*/,u=/^\/(?!\s)(?:\/\/)?(?:\\.|[^\/])+\//;e.defineMode("swift",function(e){return{startState:function(){return{prev:null,context:null,indented:0,tokenize:[]}},token:function(e,t){var r=t.prev;t.prev=null;var n=t.tokenize[t.tokenize.length-1]||tokenBase,i=n(e,t,r);if(i&&"comment"!=i?t.prev||(t.prev=i):t.prev=r,"punctuation"==i){var o=/[\(\[\{]|([\]\)\}])/.exec(e.current());o&&(o[1]?popContext:pushContext)(t,e)}return i},indent:function(t,r){var n=t.context;if(!n)return 0;var i=/^[\]\}\)]/.test(r);return null!=n.align?n.align-(i?1:0):n.indented+(i?0:e.indentUnit)},electricInput:/^\s*[\)\}\]]$/,lineComment:"//",blockCommentStart:"/*",blockCommentEnd:"*/"}}),e.defineMIME("text/x-swift","swift")})},function(e,t,r){!function(e){e(r(234))}(function(e){"use strict";e.defineMode("vb",function(t,r){function wordRegexp(e){return new RegExp("^(("+e.join(")|(")+"))\\b","i")}function indent(e,t){t.currentIndent++}function dedent(e,t){t.currentIndent--}function tokenBase(e,t){if(e.eatSpace())return null;var r=e.peek();if("'"===r)return e.skipToEnd(),"comment";if(e.match(/^((&H)|(&O))?[0-9\.a-f]/i,!1)){var u=!1;if(e.match(/^\d*\.\d+F?/i)?u=!0:e.match(/^\d+\.\d*F?/)?u=!0:e.match(/^\.\d+F?/)&&(u=!0),u)return e.eat(/J/i),"number";var p=!1;if(e.match(/^&H[0-9a-f]+/i)?p=!0:e.match(/^&O[0-7]+/i)?p=!0:e.match(/^[1-9]\d*F?/)?(e.eat(/J/i),p=!0):e.match(/^0(?![\dx])/i)&&(p=!0),p)return e.eat(/L/i),"number"}return e.match(b)?(t.tokenize=tokenStringFactory(e.current()),t.tokenize(e,t)):e.match(l)||e.match(s)?null:e.match(a)||e.match(i)||e.match(f)?"operator":e.match(o)?null:e.match(C)?(indent(e,t),t.doInCurrentLine=!0,"keyword"):e.match(_)?(t.doInCurrentLine?t.doInCurrentLine=!1:indent(e,t),"keyword"):e.match(w)?"keyword":e.match(S)?(dedent(e,t),dedent(e,t),"keyword"):e.match(x)?(dedent(e,t),"keyword"):e.match(v)?"keyword":e.match(y)?"keyword":e.match(c)?"variable":(e.next(),n)}function tokenStringFactory(e){var t=1==e.length,i="string";return function(o,a){for(;!o.eol();){if(o.eatWhile(/[^'"]/),o.match(e))return a.tokenize=tokenBase,i;o.eat(/['"]/)}if(t){if(r.singleLineStringErrors)return n;a.tokenize=tokenBase}return i}}function tokenLexer(e,t){var r=t.tokenize(e,t),i=e.current();if("."===i)return r=t.tokenize(e,t),i=e.current(),"variable"===r?"variable":n;var o="[({".indexOf(i);return o!==-1&&indent(e,t),"dedent"===k&&dedent(e,t)?n:(o="])}".indexOf(i),o!==-1&&dedent(e,t)?n:r)}var n="error",i=new RegExp("^[\\+\\-\\*/%&\\\\|\\^~<>!]"),o=new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),a=new RegExp("^((==)|(<>)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),s=new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),l=new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),c=new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),u=["class","module","sub","enum","select","while","if","function","get","set","property","try"],p=["else","elseif","case","catch"],h=["next","loop"],d=["and","or","not","xor","in"],f=wordRegexp(d),m=["as","dim","break","continue","optional","then","until","goto","byval","byref","new","handles","property","return","const","private","protected","friend","public","shared","static","true","false"],g=["integer","string","double","decimal","boolean","short","char","float","single"],y=wordRegexp(m),v=wordRegexp(g),b='"',_=wordRegexp(u),w=wordRegexp(p),x=wordRegexp(h),S=wordRegexp(["end"]),C=wordRegexp(["do"]),k=null;e.registerHelper("hintWords","vb",u.concat(p).concat(h).concat(d).concat(m).concat(g));var E={electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:tokenBase,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1}},token:function(e,t){e.sol()&&(t.currentIndent+=t.nextLineIndent,t.nextLineIndent=0,t.doInCurrentLine=0);var r=tokenLexer(e,t);return t.lastToken={style:r,content:e.current()},r},indent:function(e,r){var n=r.replace(/^\s+|\s+$/g,"");return n.match(x)||n.match(S)||n.match(w)?t.indentUnit*(e.currentIndent-1):e.currentIndent<0?0:e.currentIndent*t.indentUnit},lineComment:"'"};return E}),e.defineMIME("text/x-vb","vb")})},function(e,t,r){"use strict";var n=r(3);t.fadeInOut=n.trigger("fadeInOut",[n.state("*",n.style({opacity:1,height:"*"})),n.transition("void => *",[n.style({opacity:0,height:0}),n.animate("300ms ease-in")]),n.transition("* => void",[n.animate("300ms ease-out",n.style({opacity:0,height:0}))])])},function(e,t){e.exports='<welcome-modal [@fadeInOut] *ngIf="getView() == PadView.Welcome">\n    <modal-body>\n        <h1>blindpad is an <a href="https://www.github.com/blindpad/blindpad">open source</a> shared peer-to-peer text editor\n            for collaborating on code and technical documents.</h1>\n        <div *ngIf="media.needsCalibration() && browserIsSupported()">\n            <button (click)="startAudioSetup()">Setup Voice</button>\n            <button class="opt-out-button text invert" (click)="optOutOfVoice()">I don\'t want to use voice chat.</button>\n        </div>\n        <div *ngIf="!media.needsCalibration() && browserIsSupported()">\n            <p *ngIf="media.isOptOut()" class="warning">You\'ve disabled your microphone. Others in your pad won\'t be able to hear you.</p>\n            <button (click)="joinPad()">\n                <span *ngIf="hasPad()">Join <em>{{getJoinId()}}</em></span>\n                <span *ngIf="!hasPad()">Start a new pad</span>\n            </button>\n            <p class="reconfigure-prompt" *ngIf="media.isCalibrated()"><button (click)="media.clearCalibration()" class="text invert inline">You\'re all set. Click here if you want to reset your audio settings.</button></p>\n        </div>\n        <p *ngIf="!hasWebRTC()" class="error">\n            It looks like your browser doesn\'t currently support WebRTC. <a href="https://webrtc.org/">Click here</a> for\n            a list of compatible browsers.\n        </p>\n        <p *ngIf="!hasWebAudio()" class="error">\n            It looks like your browser doesn\'t currently support WebAudio. <a href="http://caniuse.com/#feat=audio-api">Click here</a>            for a list of compatible browsers.\n        </p>\n    </modal-body>\n</welcome-modal>\n<audio-modal [@fadeInOut] *ngIf="getView() == PadView.AudioSetup">\n    <modal-body>\n        <div [@fadeInOut] *ngIf="!media.isCalibrating() && media.needsCalibration()">\n            <h2>Audio Setup</h2>\n            <div *ngIf="media.getCalibrationAttempts() == 0">\n                <p>Please ensure your microphone is plugged in. We strongly recommended headphones.</p>\n                <p>Press the button below and read the text that appears. Press it again when you\'re finished.</p>\n            </div>\n            <div *ngIf="media.getCalibrationAttempts() > 0">\n                <p class="warning">Setup unsuccessful, please check your microphone and try again.</p>\n                <p *ngIf="media.getCalibrationQuality() === 0.0">No voice data recorded.</p>\n                <p *ngIf="media.getCalibrationQuality() > 0.0 && media.getCalibrationQuality() < 1.0">The recording was low quality: make sure to read all of the phrases at an even pace.</p>\n                <p *ngIf="isChromeOnMac()">\n                    It looks like you\'re using Chrome on OS X. If your microphone is connected but you\'re not getting any input you might be\n                    hitting <a href="https://bugs.chromium.org/p/webrtc/issues/detail?id=4799">this bug</a>                    (which requires restarting Chrome).\n                </p>\n                <p *ngIf="media.getCalibrationAttempts() > 1">\n                    If you\'re still having trouble please <a href="https://github.com/blindpad/blindpad/issues/new">open an issue</a>                    on Github.\n                </p>\n            </div>\n        </div>\n        <div [@fadeInOut] *ngIf="media.needsCalibration()">\n            <button class="start-button" [disabled]="media.getLocalStream().value == null" (click)="media.setCalibrating(!media.isCalibrating())">\n                {{media.isCalibrating() ? "Stop" : "Begin"}}\n            </button>\n            <audio-monitor class="voice" [analyser]="media.getLocalAnalyser()"></audio-monitor>\n            <button class="opt-out-button text invert" *ngIf="!media.isCalibrating()" (click)="optOutOfVoice()">I don\'t want to use voice chat.</button>\n            <test-phrases [@fadeInOut] *ngIf="media.isCalibrating()">\n                <p *ngFor="let phrase of media.getPhrases()">{{phrase}}</p>\n            </test-phrases>\n        </div>\n    </modal-body>\n</audio-modal>\n<about-modal [@fadeInOut] *ngIf="getView() == PadView.About">\n    <modal-body>\n        <bp-logo routerLink="/">blind<span class="primary">pad</span></bp-logo>\n        <h2>What is Blindpad?</h2>\n        <p>Blindpad is an <a href="https://github.com/blindpad/blindpad">open source</a> collaborative text editor (like Google\n            Docs or <a href="https://coderpad.io">CoderPad</a>) with integrated semi-anonymizing voice chat intended to help\n            reduce bias in technical communication.  In particular it can be used to extend the concept of “<a href="https://en.wikipedia.org/wiki/Blind_audition">blind auditions</a>”\n            to software programming and technical design interviews.  It is inspired by economists Claudia Goldin (Harvard)\n            and Cecilia Rouse (Princeton) who concluded in <a href="https://www.aeaweb.org/articles?id=10.1257/aer.90.4.715">their 1997 paper</a>            that the introduction of blind auditions in professional orchestras is likely responsible for about one-third\n            of the 250% increase in female membership between 1970 and the mid 1990s.</p>\n        <p>For more information:</p>\n        <ul>\n            <li>The New York Times Magazine. <a href="http://www.nytimes.com/2016/02/28/magazine/is-blind-hiring-the-best-hiring.html">&quot;Is Blind Hiring the Best Hiring&quot;</a>,\n                Feb 25 2016</li>\n            <li>Atlantic Monthly. <a href="http://www.theatlantic.com/business/archive/2015/12/meritocracy/418074/">&quot;The False Promise of Meritocracy&quot;</a>,\n                Dec 1 2015</li>\n            <li>NPR. <a href="http://www.npr.org/sections/alltechconsidered/2015/05/28/410264592/blind-auditions-could-give-employers-a-better-hiring-sense">&quot;Blind Auditions Could Give Employers A Better Hiring Sense&quot;</a>,\n                May 28 2015</li>\n            <li>The Today Show. <a href="http://www.today.com/video/companies-using-blind-auditions-to-hire-top-talent-459650627844">&quot;Companies using \'blind auditions\' to hire top talent&quot;</a>,\n                Jun 8 2015</li>\n            <li>Fast Company. <a href="http://www.fastcompany.com/3042618/strong-female-lead/can-blind-interviews-finally-solve-techs-diversity-hiring-problem">&quot;Can Blind Interviews Finally Solve Tech\'s Diversity Hiring Problem?&quot;</a>,\n                Feb 23 2015</li>\n            <li>Business Insider. <a href="http://www.businessinsider.com/companies-are-using-blind-auditions-to-hire-top-talent-2015-5">&quot;Why companies are using \'blind auditions\' to hire top talent&quot;</a>,\n                May 31 2015</li>\n        </ul>\n        <h2>How does it work?</h2>\n        <h3>Semi-anonymizing voice chat</h3>\n        <p>Before joining a pad the app has an simple (one-time) audio calibration screen where the user is asked to read a\n            few phrases.  During this process Blindpad attempts to measure the <a href="https://en.wikipedia.org/wiki/Fundamental_frequency">fundamental frequency</a>            of the user’s voice.  With this information Blindpad can perform a slight pitch-shift to an ambiguous frequency\n            in the range where many male and female voices overlap.  This can help reduce bias in an interview setting (potentially\n            in both directions) although <a href="http://www.ncbi.nlm.nih.gov/pubmed/22080221">studies have shown</a> that\n            pitch is not the only factor that human brains use to classify the gender of a speaker.</p>\n        <h3>Multi-way blind</h3>\n        <p>All participants in a pad are anonymized: usernames are randomly generated pseudonyms and no account sign-up is necessary.</p>\n        <h3>Peer-to-peer and ephemeral</h3>\n        <p>Blindpad users connect directly to each other using peer-to-peer technology (via the WebRTC API).  This makes Blindpad\n            fairly inexpensive to host (and thus free to use) and guarantees no intermediary exists that needs to know a\n            user’s real identity or contact information.</p>\n        <h3>Reducing “stereotype threat”</h3>\n        <p>The typical user flow avoids <a href="https://en.wikipedia.org/wiki/Stereotype_threat">stereotype threat</a> as much\n            as possible by removing the focus from the user’s identity and placing it on the workspace.  Besides the name,\n            the core app doesn’t provide any indication of a special purpose beyond similar text editors.</p>\n        <h3>No special configuration</h3>\n        <p>Applicant Tracking Systems or recruiting coordinators need only decide on a URL to share with with all parties before\n            an interview.</p>\n        <h2>How can I use Blindpad?</h2>\n        <p>A public version of Blindpad is hosted at <a href="https://blindpad.github.io">blindpad.github.io</a>.  Blindpad\n            can be hosted on your own servers quite easily: you only need to serve the static content and host a small (~100\n            line) NodeJS signaler (used for peer discovery).</p>\n        <h2>What’s the long-term goal of the project?</h2>\n        <p>The overarching goal of the project is to build a community capable of producing, hosting, and maintaining excellent\n            free tooling that reduces bias in evaluation and communication.  This is a really hard problem and while a perfect\n            solution might not be possible incremental progress is straightforward.</p>\n        <p>An important next step would be to produce (or lobby for) anonymizing plugins for popular Applicant Tracking Systems\n            (like <a href="https://www.greenhouse.io/">Greenhouse</a>, <a href="http://www.lever.co/">Lever</a>, <a href="http://www.jobvite.com/">Jobvite</a>,\n            and <a href="http://www.oracle.com/us/products/applications/taleo/enterprise/overview/index.html">Taleo</a>).\n             With sufficient resources we could also start to produce an open-source ATS designed from the ground up to anonymize\n            certain steps of the hiring process.</p>\n        <h2>How can I contribute to the project?</h2>\n        <p>If you’d like to support the project financially you can <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=VW2QSSP76L36N">click here</a>            to donate. Donations will be used to upgrade the public hosted version of Blindpad and to fund ongoing development.</p>\n        <p>If you’re inclined to contribute creatively (with code or design help) feel free to check out the repository, read\n            over the project’s roadmap, and/or submit a pull request.</p>\n        <p>Lastly: if you have any ideas or feature requests on how to make the app more successful feel free to <a href="https://github.com/blindpad/blindpad/issues/new">open an issue</a>            on Github.</p>\n        <h2>What should I do if I have a problem or run into a bug?</h2>\n        <p>For all problems please <a href="https://github.com/blindpad/blindpad/issues/new">open an issue</a> on Github. If\n            possible please try to include simple steps to reproduce the problem.</p>\n        <h2>Who developed Blindpad?</h2>\n        <p>Blindpad was developed by <a href="http://rmnoon.github.io">Ryan Noon</a>. It leverages many other open source projects,\n            including Typescript, Angular2, and libraries by <a href="https://github.com/mikolalysenko">@mikolalysenko</a>            and <a href="https://github.com/nkohari">@nkohari</a>.  See comments in the code for full attribution.  Blindpad\n            is free software under the Apache License.</p>\n        <a class="footer" routerLink="/">Blindpad Home</a>\n    </modal-body>\n</about-modal>\n<pad-page [class.disabled]="getView() != PadView.Editor" class="disabled">\n    <pad-header>\n        <bp-logo routerLink="/">blind<span class="primary">pad</span></bp-logo>\n        <nav *ngIf="hasPad()">\n            <a class="invert" href="https://github.com/blindpad/blindpad/issues/new">feedback</a>\n            <a class="invert" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=VW2QSSP76L36N">donate</a>\n            <a class="invert" routerLink="/about">about</a>\n            <button class="mode-button" *ngIf="!!getPadMode()" (click)="onModeButtonClick()">\n                {{ getPadMode().name }}\n            </button>\n            <mode-choices [@fadeInOut] *ngIf="visibleModeChoices != null">\n                <mode-choice *ngFor="let mode of visibleModeChoices" (click)="onModeChoice(mode)" [class.has-children]="mode.children.length > 0"\n                    [class.is-picked]="mode == getPadMode()">\n                    {{ mode.name }}\n                </mode-choice>\n            </mode-choices>\n        </nav>\n    </pad-header>\n    <pad-body>\n        <pad-toolbar>\n            <pad-status *ngIf="!isConnected()">Looking for others...</pad-status>\n            <pad-users>\n                <user *ngFor="let user of getUsers()" [model]="user"></user>\n            </pad-users>\n        </pad-toolbar>\n        <editor [pad]="getPad()"></editor>\n    </pad-body>\n</pad-page>';
},function(e,t){e.exports=':host{position:absolute;top:0;left:0;width:100%;height:100%}:host bp-logo{display:block;color:#FEFEFE;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;cursor:pointer}:host .opt-out-button{font-style:italic;margin-top:24px}:host pad-page{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-flow:column nowrap;background-color:#1E1E1E;transition:.3s all linear}:host pad-page.disabled{filter:blur(1.7px) opacity(0.6);-webkit-filter:blur(1.7px) opacity(0.6)}:host pad-page.disabled>pad-header{opacity:0}:host pad-page.disabled>pad-body>pad-toolbar{opacity:0}:host pad-page.disabled:after{content:"";position:absolute;z-index:1000;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.95) 100%)}:host pad-page pad-header{background-color:#000;flex:0 0 33px;box-sizing:border-box;border-bottom:1px solid #2E2F2A;display:flex;align-items:center}:host pad-page pad-header bp-logo{display:inline;margin-left:8px;font-size:14pt}:host pad-page pad-header nav{margin-left:auto;display:flex;align-items:center}:host pad-page pad-header nav>*{margin-left:16px}:host pad-page pad-header nav .mode-button{padding:0px 12px;margin-top:0px;margin-bottom:0px;height:32px;border-radius:0;font-size:14px}:host pad-page pad-header nav .mode-button:after{margin-left:4px;content:"\\25BE"}:host pad-page pad-header nav mode-choices{position:absolute;top:33px;right:0;background-color:rgba(0,0,0,0.5);max-height:calc(100% - 33px);overflow-y:auto;z-index:1000;min-width:140px}:host pad-page pad-header nav mode-choices mode-choice{display:block;text-align:left;font-size:14px;padding:4px 12px 4px 16px;cursor:pointer}:host pad-page pad-header nav mode-choices mode-choice:hover{background-color:#2196F3}:host pad-page pad-header nav mode-choices mode-choice.has-children:after{content:"\\25B8";float:right}:host pad-page pad-header nav mode-choices mode-choice.is-picked:before{content:"\\2713";margin:0 0 0 -12px;padding:4px 0px 4px 0px}:host pad-page pad-body{flex-grow:1;display:flex;flex-flow:row}:host pad-page pad-body pad-toolbar{display:flex;flex-direction:column;justify-content:flex-end;overflow-y:auto;max-width:200px;min-width:60px;flex:1 1}:host pad-page pad-body pad-toolbar pad-status{display:block;padding-left:6px;padding-bottom:16px}:host pad-page pad-body editor{display:block;flex:3 3;overflow-y:auto}:host welcome-modal,:host audio-modal,:host about-modal{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;display:flex;align-items:center}:host welcome-modal modal-body,:host audio-modal modal-body,:host about-modal modal-body{width:400px;display:block;margin:auto}:host welcome-modal .reconfigure-prompt{margin-top:24px}:host welcome-modal .reconfigure-prompt,:host welcome-modal .reconfigure-prompt *{font-style:italic}:host audio-modal .start-button{display:inline-block;vertical-align:middle}:host audio-modal audio-monitor{display:inline-block;height:12px;width:180px;margin-left:12px;vertical-align:middle}:host audio-modal test-phrases{display:block}:host about-modal{overflow:auto}:host about-modal modal-body{width:600px;padding:0px 12px}:host about-modal bp-logo{font-size:48px;margin-top:48px}:host about-modal .footer{display:block;margin:40px 0}\n'},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=r(3);r(274);var a=r(130),s=45,l=function(){function AudioMonitorComponent(e){var t=this;this.zone=e,this.onLevel=function(e){e=Math.max(Math.min(e,1),.01),e*=2-e;var r=100*e+"%",n=void 0!==t.vertical;t.bar.nativeElement.style.width=n?"100%":r,t.bar.nativeElement.style.height=n?r:"100%"},this.onVoiceDetected=function(e){t.voiceActive=e}}return AudioMonitorComponent.prototype.ngOnDestroy=function(){this.analyser=null,this.ngOnChanges()},AudioMonitorComponent.prototype.ngOnChanges=function(){this.levelSub&&(this.levelSub.unsubscribe(),this.levelSub=null),this.voiceDetectedSub&&(this.voiceDetectedSub.unsubscribe(),this.voiceDetectedSub=null),this.analyser&&(this.levelSub=this.analyser.getLevel().throttleTime(1e3/s).subscribe(this.onLevel),this.voiceDetectedSub=this.analyser.getVoiceDetected().subscribe(this.onVoiceDetected))},n([o.Input(),i("design:type",a.VoiceAnalyser)],AudioMonitorComponent.prototype,"analyser",void 0),n([o.Input(),i("design:type",Object)],AudioMonitorComponent.prototype,"vertical",void 0),n([o.ViewChild("bar"),i("design:type",o.ElementRef)],AudioMonitorComponent.prototype,"bar",void 0),n([o.HostBinding("class.voice-active"),i("design:type",Boolean)],AudioMonitorComponent.prototype,"voiceActive",void 0),AudioMonitorComponent=n([o.Component({selector:"audio-monitor",template:"<monitor-bar #bar></monitor-bar>",styles:[r(281)]}),i("design:paramtypes",[o.NgZone])],AudioMonitorComponent)}();t.AudioMonitorComponent=l},function(e,t,r){"use strict";var n=r(5),i=r(275);n.Observable.prototype.throttleTime=i.throttleTime},function(e,t,r){"use strict";function throttleTime(e,t){return void 0===t&&(t=o.async),this.lift(new a(e,t))}function dispatchNext(e){var t=e.subscriber;t.clearThrottle()}var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(8),o=r(276);t.throttleTime=throttleTime;var a=function(){function ThrottleTimeOperator(e,t){this.duration=e,this.scheduler=t}return ThrottleTimeOperator.prototype.call=function(e,t){return t._subscribe(new s(e,this.duration,this.scheduler))},ThrottleTimeOperator}(),s=function(e){function ThrottleTimeSubscriber(t,r,n){e.call(this,t),this.duration=r,this.scheduler=n}return n(ThrottleTimeSubscriber,e),ThrottleTimeSubscriber.prototype._next=function(e){this.throttled||(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.destination.next(e))},ThrottleTimeSubscriber.prototype.clearThrottle=function(){var e=this.throttled;e&&(e.unsubscribe(),this.remove(e),this.throttled=null)},ThrottleTimeSubscriber}(i.Subscriber)},function(e,t,r){"use strict";var n=r(277),i=r(279);t.async=new i.AsyncScheduler(n.AsyncAction)},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(6),o=r(278),a=function(e){function AsyncAction(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return n(AsyncAction,e),AsyncAction.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},AsyncAction.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.root.setInterval(e.flush.bind(e,this),r)},AsyncAction.prototype.recycleAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&this.delay===r?t:i.root.clearInterval(t)&&void 0||void 0},AsyncAction.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);return r?r:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},AsyncAction.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n},AsyncAction.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,n!==-1&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null))},AsyncAction}(o.Action);t.AsyncAction=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(10),o=function(e){function Action(t,r){e.call(this)}return n(Action,e),Action.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},Action}(i.Subscription);t.Action=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=r(280),o=function(e){function AsyncScheduler(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(AsyncScheduler,e),AsyncScheduler.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var r;this.active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}},AsyncScheduler}(i.Scheduler);t.AsyncScheduler=o},function(e,t){"use strict";var r=function(){function Scheduler(e,t){void 0===t&&(t=Scheduler.now),this.SchedulerAction=e,this.now=t}return Scheduler.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},Scheduler.now=Date.now?Date.now:function(){return+new Date},Scheduler}();t.Scheduler=r},function(e,t){e.exports=":host{position:relative;height:20px;width:20px}:host.voice.voice-active>monitor-bar{background-color:#2196F3}:host monitor-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;background-color:rgba(189,189,189,0.2)}\n"},function(e,t,r){"use strict";function indicesFromMarker(e,t){if(!e)return{from:null,to:null};var r=e.find();if(!r)return{from:null,to:null};var n,i;void 0===r.from?(n=r,i=r):(n=r.from,i=r.to);var o=n?t.indexFromPos(n):null,a=i?t.indexFromPos(i):null;return o>a?{from:a,to:o}:{from:o,to:a}}function buildRemoteCursorElem(e,t){var r=document.createElement("span");return r.style.display="inline",r.style.padding="0",r.style.marginTop=r.style.marginBottom=r.style.marginLeft=r.style.marginRight="-1px",r.style.borderLeftWidth="2px",r.style.borderLeftStyle="solid",r.style.borderLeftColor=t.val,r}var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=r(3),a=r(233),s=r(283),l=r(284),c=r(222),u=r(131),p=r(213),h=function(){function EditorComponent(e){var t=this;this.elementRef=e,this.applyingRemoteChanges=!1,this.isDemoMode=!1,this.localUserId=null,this.remoteMarkers=new Map,this.setMode=function(e){t.editor.setOption("mode",e.mime)},this.onRemoteEdits=function(e){t.isDemoMode&&t.pad&&t.pad.isStarted()&&t.setDemoMode(!1),t.applyingRemoteChanges=!0;var r=t.editor.getDoc();t.editor.operation(function(){e.forEach(function(e){var t=r.posFromIndex(e.index),n=r.posFromIndex(e.index+e.text.length);e.isInsert?r.replaceRange(e.text,t,null):r.replaceRange("",t,n)})}),t.applyingRemoteChanges=!1},this.onLocalEdits=function(e,r){if(!t.applyingRemoteChanges&&!t.isDemoMode&&t.localEdits){var n=e.getDoc();r.forEach(function(e){var r=n.indexFromPos(e.from),i=e.text.join("\n"),o=e.removed.join("\n"),a=[];if(o.length>0){var s={isInsert:!1,index:r,text:o};a.push(s)}if(i.length>0){var l={isInsert:!0,index:r,text:i};a.push(l)}a.length>0&&t.localEdits&&t.localEdits.next(a)})}},this.onRemoteCursors=function(e){if(t.pad){var r=t.editor,n=r.getDoc(),i=t.remoteMarkers,o=t.pad.getAllUsers();t.editor.operation(function(){Object.keys(e||{}).forEach(function(t){var r=e[t],a=o.get(t),s=a?a.getColor().value:c.PRIMARY.GREY,l=r?Math.min(r.startIndex,r.endIndex):null,u=r?Math.max(r.startIndex,r.endIndex):null;if(i.has(t)){var p=i.get(t),h=indicesFromMarker(p,n);if(r&&null!==l&&null!==u&&l===h.from&&u===h.to)return;p.clear(),i.delete(t)}if(r&&null!==l&&null!==u){if(l===u){var d=n.posFromIndex(l),f=buildRemoteCursorElem(d,s),m=n.setBookmark(d,{widget:f,insertLeft:!0});return void i.set(t,m)}var g=n.markText(n.posFromIndex(l),n.posFromIndex(u),{className:c.getBackgroundClass(s)});i.set(t,g)}})})}},this.onLocalCursors=function(e){if(!t.isDemoMode&&!t.applyingRemoteChanges&&t.localCursors){var r=t.getLocalCursor(),n={},i=t.getRemoteCursors();Object.keys(i||{}).forEach(function(e){return n[e]=i[e]}),n[t.localUserId]=r,t.localCursors.next(n)}}}return EditorComponent.prototype.ngOnInit=function(){var e=this;this.editor=a.buildEditor(this.elementRef.nativeElement),this.autoEditor=new s.AutoEditor,this.autoEditsSub=this.autoEditor.getEdits().subscribe(function(t){return e.onRemoteEdits([t])}),this.autoModeSub=this.autoEditor.getMode().subscribe(this.setMode),this.editor.on("changes",this.onLocalEdits),this.editor.on("cursorActivity",this.onLocalCursors),this.ngOnChanges()},EditorComponent.prototype.ngOnDestroy=function(){this.autoEditor.stop(),this.autoEditsSub.unsubscribe(),this.autoModeSub.unsubscribe(),this.editor.off("changes",this.onLocalEdits),this.editor.off("cursorActivity",this.onLocalCursors),this.ngOnChanges()},EditorComponent.prototype.ngOnChanges=function(){var e=this;this.localUserId=null,this.mimeSub&&(this.mimeSub.unsubscribe(),this.mimeSub=null),this.remoteEditSub&&(this.remoteEditSub.unsubscribe(),this.remoteEditSub=null,this.localEdits=null),this.remoteCursorSub&&(this.remoteCursorSub.unsubscribe(),this.remoteCursorSub=null,this.localCursors=null);var t=this.pad;this.editor&&(t&&t.isStarted()||this.setDemoMode(!0),t&&(this.localUserId=t.getLocalUser().getId(),this.mimeSub=t.getMimeType().subscribe(function(t){return e.setMode(a.getModeForMime(t))}),this.remoteEditSub=t.getRemoteEdits().subscribe(this.onRemoteEdits),this.localEdits=t.getLocalEdits(),this.remoteCursorSub=t.getRemoteCursors().subscribe(this.onRemoteCursors),this.localCursors=t.getLocalCursors()))},EditorComponent.prototype.onEditorClick=function(e){this.editor.focus()},EditorComponent.prototype.getLocalCursor=function(){if(!this.editor)return null;var e,t,r=this.editor.getDoc(),n=r.listSelections(),i=r.getCursor();if(n&&n.length>0?(e=n[0].anchor,t=n[0].head):i&&(e=i,t=i),!e||!t)return null;var o=new p.Cursor,a=r.indexFromPos(e),s=r.indexFromPos(t);return o.srcId=this.localUserId,o.startIndex=Math.min(a,s),o.endIndex=Math.max(a,s),o},EditorComponent.prototype.getRemoteCursors=function(){var e={};if(!this.editor)return e;var t=this.editor.getDoc();return this.remoteMarkers.forEach(function(r,n){var i=new p.Cursor,o=indicesFromMarker(r,t);i.srcId=n,i.startIndex=o.from,i.endIndex=o.to,e[n]=i}),e},EditorComponent.prototype.setDemoMode=function(e){e!==this.isDemoMode&&(e?(this.isDemoMode=!0,this.autoEditor.start(l.EXAMPLES)):(this.autoEditor.stop(),this.editor.setValue(""),this.setMode(a.getModeForMime(null)),this.isDemoMode=!1))},n([o.Input(),i("design:type",u.PadModel)],EditorComponent.prototype,"pad",void 0),EditorComponent=n([o.Component({selector:"editor",template:"",styles:[r(285)],encapsulation:o.ViewEncapsulation.None,host:{"(click)":"onEditorClick($event)"}}),i("design:paramtypes",[o.ElementRef])],EditorComponent)}();t.EditorComponent=h},function(e,t,r){"use strict";var n=r(4),i=r(64),o=r(213),a=r(233),s=function(){function AutoEditor(){var e=this;this.edits=new n.Subject,this.mode=new i.BehaviorSubject(a.DEFAULT_MODE),this.requestId=null,this.docs=null,this.baseTime=null,this.wiggleTime=null,this.curDocIdx=null,this.curPosition=null,this.onTick=function(){if(e.isRunning()){var t=e.docs[e.curDocIdx];0===e.curPosition&&e.mode.next(t.mode);for(var r=t.text.substring(e.curPosition,e.curPosition+1),n=e.curPosition+r.length,i=t.text.substring(n,n+1);""!==i&&" \t\n\r\x0B".indexOf(i)>-1;n++,i=t.text.substring(n,n+1))r+=i;if(r.length>0){var a=new o.PadEdit;a.isInsert=!0,a.index=e.curPosition,a.text=r,e.curPosition+=r.length,e.edits.next(a)}else{var a=new o.PadEdit;a.isInsert=!1,a.index=0,a.text=t.text,e.curDocIdx=(e.curDocIdx+1)%e.docs.length,e.curPosition=0,e.edits.next(a)}var s=e.getNextTimeout();e.isRunning()&&(e.requestId=window.setTimeout(e.onTick,s))}}}return AutoEditor.prototype.start=function(e,t,r){void 0===t&&(t=100),void 0===r&&(r=100),this.isRunning()||(this.docs=e,this.baseTime=t,this.wiggleTime=r,this.requestId=window.setTimeout(this.onTick,this.getNextTimeout()),this.curDocIdx=Math.floor(Math.random()*this.docs.length),this.curPosition=0)},AutoEditor.prototype.stop=function(){if(this.isRunning()){var e=this.requestId;this.requestId=null,window.clearTimeout(e)}},AutoEditor.prototype.getEdits=function(){return this.edits},AutoEditor.prototype.getMode=function(){return this.mode},AutoEditor.prototype.isRunning=function(){return null!==this.requestId},AutoEditor.prototype.getNextTimeout=function(){return this.baseTime+(Math.random()-.5)*this.wiggleTime},AutoEditor}();t.AutoEditor=s},function(e,t,r){"use strict";var n=r(233);t.EXAMPLES=[{mode:n.JAVASCRIPT,text:"\n\n\n\n\nfunction eratosthenes(n) {\n    // Eratosthenes algorithm to find all primes under n\n    var array = [], upperLimit = Math.sqrt(n), output = [];\n\n    // Make an array from 2 to (n - 1)\n    for (var i = 0; i < n; i++) {\n        array.push(true);\n    }\n\n    // Remove multiples of primes starting from 2, 3, 5,...\n    for (var i = 2; i <= upperLimit; i++) {\n        if (array[i]) {\n            for (var j = i * i; j < n; j += i) {\n                array[j] = false;\n            }\n        }\n    }\n\n    // All array[i] set to true are primes\n    for (var i = 2; i < n; i++) {\n        if (array[i]) {\n            output.push(i);\n        }\n    }\n\n    return output;\n}"},{mode:n.C,text:"\n\n\n\n\nstatic struct node *prev = NULL;\n\nbool isBST(struct node* root)\n{\n    // traverse the tree in inorder fashion and keep track of prev node\n    if (root)\n    {\n        if (!isBST(root->left))\n          return false;\n\n        // Allows only distinct valued nodes\n        if (prev != NULL && root->data <= prev->data)\n          return false;\n\n        prev = root;\n\n        return isBST(root->right);\n    }\n\n    return true;\n}"},{mode:n.PYTHON,text:'\n\n\n\n\nfrom bitarray import bitarray\nimport mmh3\n \nclass BloomFilter:\n    \n    def __init__(self, size, hash_count):\n        self.size = size\n        self.hash_count = hash_count\n        self.bit_array = bitarray(size)\n        self.bit_array.setall(0)\n        \n    def add(self, string):\n        for seed in xrange(self.hash_count):\n            result = mmh3.hash(string, seed) % self.size\n            self.bit_array[result] = 1\n            \n    def lookup(self, string):\n        for seed in xrange(self.hash_count):\n            result = mmh3.hash(string, seed) % self.size\n            if self.bit_array[result] == 0:\n                return "Nope"\n        return "Probably"\n'},{mode:n.RUST,text:'\n\n\n\n\nfn fib(x: int) -> int {\n    match x {\n        0 | 1 => x,\n        _     => fib(x - 1) + fib(x - 2),\n    }\n}\n\nfn main() {\n    let number = 20;\n    println(fmt!("%?th fib number is: %?", number, fib(number)));\n}'}]},function(e,t){e.exports=".CodeMirror{height:auto}.disabled editor .CodeMirror-linenumber{opacity:0.0}.disabled editor .CodeMirror-activeline-background{background:none}\n"},function(e,t,r){"use strict";function getInitials(e){return e.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()}).split(" ").map(function(e){return e.charAt(0)}).join("").substring(0,2)}var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=r(3),a=r(222),s=r(214);r(287),r(288),r(289),r(290),r(291),r(292);var l=function(){function UserComponent(){}return UserComponent.prototype.ngOnDestroy=function(){this.model=null,this.ngOnChanges()},UserComponent.prototype.ngOnChanges=function(){var e=this;this.streamSub&&(this.streamSub.unsubscribe(),this.streamSub=null),this.muteSub&&(this.muteSub.unsubscribe(),this.muteSub=null),this.voiceDetectedSub&&(this.voiceDetectedSub.unsubscribe(),this.voiceDetectedSub=null),this.nameSub&&(this.nameSub.unsubscribe(),this.nameSub=null),this.colorSub&&(this.colorSub.unsubscribe(),this.colorSub=null),this.voiceIsActive=!1,this.initials="",this.name="",this.color=a.PRIMARY.RED,this.connected=!1,this.model&&(this.colorSub=this.model.getColor().subscribe(function(t){return e.color=t}),this.nameSub=this.model.getName().subscribe(function(t){e.model.isLocalUser()?(e.name=t?t:"Local",e.initials="YOU",e.connected=!0):null===t?(e.name="",e.initials="",e.connected=!1):(e.name=null!==t?t:"",e.initials=null!==t?getInitials(e.name):"",e.connected=!0)}),this.model.isRemoteUser()&&(this.streamSub=this.model.getAudioStream().subscribe(function(t){e.audioElem.nativeElement.srcObject=t}),this.muteSub=this.model.getIsMuted().subscribe(function(t){e.audioElem.nativeElement.muted=t})),this.voiceDetectedSub=this.model.getVoiceAnalyser().getVoiceDetected().subscribe(function(t){e.voiceIsActive=t}))},UserComponent.prototype.getTitle=function(){return this.connected?this.model.isUnavailable()?"Currently unavailable":this.name:"Connecting..."},n([o.Input(),i("design:type",s.UserModel)],UserComponent.prototype,"model",void 0),n([o.ViewChild("audio"),i("design:type",o.ElementRef)],UserComponent.prototype,"audioElem",void 0),UserComponent=n([o.Component({selector:"user",template:r(293),styles:[r(294)]}),i("design:paramtypes",[])],UserComponent)}();t.UserComponent=l},function(e,t,r){e.exports=r.p+"assets/volume_up.png"},function(e,t,r){e.exports=r.p+"assets/volume_down.png"},function(e,t,r){e.exports=r.p+"assets/volume_muted.png"},function(e,t,r){e.exports=r.p+"assets/mic_up.png"},function(e,t,r){e.exports=r.p+"assets/mic_down.png"},function(e,t,r){e.exports=r.p+"assets/mic_muted.png"},function(e,t){e.exports='<audio #audio autoplay></audio>\n<audio-monitor [analyser]="model.getVoiceAnalyser()"></audio-monitor>\n<user-foreground [class.unavailable]="model.isUnavailable()" [title]="getTitle()">\n    <user-icon [class.local-user]="model.isLocalUser()" [class.dark-text]="color.darkText" [style.background-color]="connected ? color.val : \'transparent\'">\n        {{initials}}\n        <div class="spinner" *ngIf="!connected">\n            <div class="double-bounce1"></div>\n            <div class="double-bounce2"></div>\n        </div>\n    </user-icon>\n    <user-name>\n        {{ connected ? name : \'Connecting...\' }}\n    </user-name>\n    <button *ngIf="connected" title="Mute" class="mute-button text" [class.muted]="model.getIsMuted().value" [class.voice-active]="voiceIsActive" [class.local-user]="model.isLocalUser()" (click)="model.setMuted()"></button>\n</user-foreground>'},function(e,t){e.exports=":host{display:block;height:40px;width:100%;position:relative}:host audio{display:none}:host audio-monitor{position:absolute;width:100%;height:100%;top:0;left:0;z-index:0}:host audio-monitor monitor-bar{background-color:rgba(189,189,189,0.2)}:host audio-monitor.voice-active>bar{background-color:rgba(189,189,189,0.2)}:host user-foreground{position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;display:flex;align-items:center}:host user-foreground>*{margin:0px}:host user-foreground.unavailable{opacity:0.5}:host user-foreground.unavailable>user-name{font-style:italic}:host user-foreground user-icon{width:28px;height:28px;line-height:28px;margin:6px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;-moz-border-radius:20px;-webkit-border-radius:20px;border-radius:20px;background-clip:padding-box;text-align:center;background-color:red;font-size:14px}:host user-foreground user-icon.local-user{font-size:10px}:host user-foreground user-icon.dark-text{color:black}:host user-foreground user-name{flex:1 1;text-overflow:ellipsis;overflow:hidden;font-size:12px}:host user-foreground .mute-button{width:29px;height:24px;padding:0;background-image:url(assets/volume_down.png);background-repeat:no-repeat}:host user-foreground .mute-button.local-user{background-image:url(assets/mic_down.png)}:host user-foreground .mute-button:hover{filter:invert(50%);-webkit-filter:invert(50%)}:host user-foreground .mute-button:active{filter:invert(20%);-webkit-filter:invert(20%)}:host user-foreground .mute-button.voice-active:not(.muted){background-image:url(assets/volume_up.png);background-position-x:3.5px}:host user-foreground .mute-button.voice-active:not(.muted).local-user{background-image:url(assets/mic_up.png);background-position-x:0px}:host user-foreground .mute-button.muted{background-image:url(assets/volume_muted.png);background-position-x:3.5px}:host user-foreground .mute-button.muted.local-user{background-image:url(assets/mic_muted.png);background-position-x:0px}.spinner{position:absolute;width:100%;height:100%;top:0;left:0}.double-bounce1,.double-bounce2{width:100%;height:100%;border-radius:50%;background-color:white;opacity:0.6;position:absolute;top:0;left:0;-webkit-animation:sk-bounce 2.0s infinite ease-in-out;animation:sk-bounce 2.0s infinite ease-in-out}.double-bounce2{-webkit-animation-delay:-1.0s;animation-delay:-1.0s}@-webkit-keyframes sk-bounce{0%,100%{-webkit-transform:scale(0)}50%{-webkit-transform:scale(1)}}@keyframes sk-bounce{0%,100%{transform:scale(0);-webkit-transform:scale(0)}50%{transform:scale(1);-webkit-transform:scale(1)}}\n"},function(e,t,r){e.exports=r.p+"404.html"},function(e,t,r){e.exports=r.p+"LICENSE"},function(e,t,r){e.exports=r.p+"README.md"},function(e,t,r,n,i){"use strict";function CompiledProcedure(){this.numArgs=0,this.numArrayArgs=0,this.numScalarArgs=0,this.hasIndex=!1,this.hasShape=!1,this.hasReturn=!1,this.pre="",this.body="",this.post="",this.unroll=1,this.printCode=!1}function compile(e){for(var t in e)if(s.indexOf(t)<0&&l.indexOf(t)<0)throw new Error("Unknown argument '"+t+"' passed to expression compiler");for(var r=0;r<s.length;++r)if(!e[s[r]])throw new Error("Missing argument: "+s[r]);for(var n=new CompiledProcedure,i=e.args.slice(0),c=[],r=0;r<i.length;++r)switch(i[r]){case"array":c.push("array"+n.numArrayArgs),i[r]+=n.numArrayArgs++;break;case"scalar":c.push("scalar"+n.numScalarArgs),i[r]+=n.numScalarArgs++;break;case"index":n.hasIndex=!0;break;case"shape":n.hasShape=!0;break;default:throw new Error("Unknown argument types")}if(n.numArrayArgs<=0)throw new Error("No array arguments specified");var u=new o(i),p=e.pre||null,h=e.body,d=e.post||null;return u.preprocess(p),u.preprocess(h),u.preprocess(d),n.pre=u.preBlock()+"\n"+u.process(p),n.body=u.process(h),n.post=u.process(d)+"\n"+u.postBlock(),n.hasReturn=u.hasReturn,n.printCode=e.printCode||!1,a(c,n)}var o=r(n),a=r(i),s=["args","body"],l=["pre","post","printCode"];e.exports=compile},function(e,t,r,n){"use strict";function isGlobal(e){return"undefined"!=typeof window?e in window:"undefined"!=typeof GLOBAL&&e in GLOBAL}function getArgs(e){var t=[];return i(e,function(e){var r;if("FunctionExpression"===e.type&&"Program"===e.parent.parent.parent.type)for(t=new Array(e.params.length),r=0;r<e.params.length;++r)t[r]=e.params[r].name}),t}function Parser(e){this.args=e,this.this_vars=[],this.computed_this=!1,this.prefix_count=0,this.hasReturn=!1}var i=r(n);Parser.prototype.preprocess=function(e){if(e&&!this.computed_this){var t="("+e+")()",r=this.this_vars,n=this.computed_this;i(t,function(e){var t;"ThisExpression"===e.type&&("MemberExpression"!==e.parent.type||e.parent.computed?n=!0:(t=e.parent.property.name,r.indexOf(t)<0&&r.push(t)))}),n&&(this.this_vars=[]),this.computed_this=n}},Parser.prototype.process=function(e){if(!e)return"";var t=this.prefix_count++,r="("+e+")()",n=getArgs(r),o=this.args,a="",s="inline"+t+"_",l=this.hasReturn;i(r,function(e){var t,r,i;if("FunctionExpression"===e.type&&"Program"===e.parent.parent.parent.type)a=e.body.source();else if("Identifier"===e.type){if("MemberExpression"===e.parent.type&&(e.parent.property===e&&!e.parent.computed||"ThisExpression"===e.parent.object.type))return;if(t=e.name,r=n.indexOf(t),r>=0)r<o.length?0===o[r].indexOf("array")?(i=parseInt(o[r].substr(5)),e.update("arr"+i+"[ptr"+i+"]")):"shape"===o[r]?e.update("inline_shape"):e.update(o[r]):e.update(s+e.source());else{if(isGlobal(t))return;e.update(s+e.source())}}else"MemberExpression"===e.type?"ThisExpression"===e.object.type&&e.update("this_"+e.property.source().trimLeft()):"ThisExpression"===e.type?"MemberExpression"!==e.parent.type&&e.update("this_"):"ReturnStatement"===e.type&&(l=!0)}),this.hasReturn=l;for(var c="",u=this.args.length;u<n.length;++u)c+="var "+n[u]+"\n";return c+a},Parser.prototype.preBlock=function(){return this.computed_this?"var this_={}":this.this_vars.length>0?"var this_"+this.this_vars.join(",this_"):""},Parser.prototype.postBlock=function(){return""},e.exports=Parser},function(e,t,r,n){function insertHelpers(e,t,r){function update(t){r[e.range[0]]=t;for(var n=e.range[0]+1;n<e.range[1];n++)r[n]=""}if(e.range)if(e.parent=t,e.source=function(){return r.slice(e.range[0],e.range[1]).join("")},e.update&&"object"==typeof e.update){var n=e.update;a(o(n),function(e){update[e]=n[e]}),e.update=update}else e.update=update}var i=r(n).parse,o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},a=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t.call(e,e[r],r,e)},s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),"object"==typeof e&&(t=e,e=t.source,delete t.source),e=void 0===e?t.source:e,t.range=!0,"string"!=typeof e&&(e=String(e));var n=i(e,t),l={chunks:e.split(""),toString:function(){return l.chunks.join("")},inspect:function(){return l.toString()}};return function walk(e,t){insertHelpers(e,t,l.chunks),a(o(e),function(t){if("parent"!==t){var r=e[t];s(r)?a(r,function(t){t&&"string"==typeof t.type&&walk(t,e)}):r&&"string"==typeof r.type&&(insertHelpers(r,e,l.chunks),walk(r,e))}}),r(e)}(n,void 0),l}},function(e,t,r,n){"use strict";function Shim(e){this.memoized={},this.procedure=e}function compare1st(e,t){return e[0]-t[0]}function createShim(e,t){var r,n=['"use strict"'];for(r=1;r<t.numArrayArgs;++r)n.push("this.checkShape(array0.shape,array"+r+".shape)");for(n.push("var proc = this.getProc(["),r=0;r<t.numArrayArgs;++r)n.push((r>0?",":"")+"this.getOrder(array"+r+".stride)");for(n.push("])"),t.hasReturn?n.push("return proc("):n.push("proc("),n.push("this.getStack("+t.numArrayArgs+"*(array0.shape.length*32)), array0.shape.slice(0)"),r=0;r<t.numArrayArgs;++r)n.push(",array"+r+".data"),n.push(",array"+r+".offset"),n.push(",array"+r+".stride");for(var r=0;r<t.numScalarArgs;++r)n.push(",scalar"+r);n.push(")"),t.hasReturn||n.push("return array0"),e.push(n.join("\n"));var i=Function.apply(null,e);return t.printCode&&console.log("Generated shim:",i+""),i.bind(new Shim(t))}var i=r(n),o=new Int32Array(1024);Shim.prototype.checkShape=function(e,t){if(e.length!==t.length)throw new Error("Shape mismatch");for(var r=e.length-1;r>=0;--r)if(e[r]!==t[r])throw new Error("Shape mismatch")},Shim.prototype.getStack=function(e){return e<o.length?o:o=new Int32Array(e);
},Shim.prototype.getOrder=function(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=[Math.abs(e[r]),r];t.sort(compare1st);for(var n=new Array(e.length),r=0;r<e.length;++r)n[r]=t[r][1];return n},Shim.prototype.getProc=function(e){var t=e.join("|"),r=this.memoized[t];return r||(r=i(e,this.procedure),this.memoized[t]=r),r},e.exports=createShim}]));